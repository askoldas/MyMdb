var oI=Object.defineProperty;var aI=(n,e,t)=>e in n?oI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cp=(n,e,t)=>aI(n,typeof e!="symbol"?e+"":e,t);function lI(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function fw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dp={exports:{}},Ol={},hp={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function uI(){if(qv)return He;qv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function P(z,ee,Ee){this.props=z,this.context=ee,this.refs=D,this.updater=Ee||R}P.prototype.isReactComponent={},P.prototype.setState=function(z,ee){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ee,"setState")},P.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function F(){}F.prototype=P.prototype;function Q(z,ee,Ee){this.props=z,this.context=ee,this.refs=D,this.updater=Ee||R}var K=Q.prototype=new F;K.constructor=Q,C(K,P.prototype),K.isPureReactComponent=!0;var te=Array.isArray,L=Object.prototype.hasOwnProperty,re={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(z,ee,Ee){var Fe,Me={},We=null,nt=null;if(ee!=null)for(Fe in ee.ref!==void 0&&(nt=ee.ref),ee.key!==void 0&&(We=""+ee.key),ee)L.call(ee,Fe)&&!N.hasOwnProperty(Fe)&&(Me[Fe]=ee[Fe]);var rt=arguments.length-2;if(rt===1)Me.children=Ee;else if(1<rt){for(var je=Array(rt),mt=0;mt<rt;mt++)je[mt]=arguments[mt+2];Me.children=je}if(z&&z.defaultProps)for(Fe in rt=z.defaultProps,rt)Me[Fe]===void 0&&(Me[Fe]=rt[Fe]);return{$$typeof:n,type:z,key:We,ref:nt,props:Me,_owner:re.current}}function k(z,ee){return{$$typeof:n,type:z.type,key:ee,ref:z.ref,props:z.props,_owner:z._owner}}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function U(z){var ee={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ee){return ee[Ee]})}var B=/\/+/g;function b(z,ee){return typeof z=="object"&&z!==null&&z.key!=null?U(""+z.key):ee.toString(36)}function Pe(z,ee,Ee,Fe,Me){var We=typeof z;(We==="undefined"||We==="boolean")&&(z=null);var nt=!1;if(z===null)nt=!0;else switch(We){case"string":case"number":nt=!0;break;case"object":switch(z.$$typeof){case n:case e:nt=!0}}if(nt)return nt=z,Me=Me(nt),z=Fe===""?"."+b(nt,0):Fe,te(Me)?(Ee="",z!=null&&(Ee=z.replace(B,"$&/")+"/"),Pe(Me,ee,Ee,"",function(mt){return mt})):Me!=null&&(O(Me)&&(Me=k(Me,Ee+(!Me.key||nt&&nt.key===Me.key?"":(""+Me.key).replace(B,"$&/")+"/")+z)),ee.push(Me)),1;if(nt=0,Fe=Fe===""?".":Fe+":",te(z))for(var rt=0;rt<z.length;rt++){We=z[rt];var je=Fe+b(We,rt);nt+=Pe(We,ee,Ee,je,Me)}else if(je=T(z),typeof je=="function")for(z=je.call(z),rt=0;!(We=z.next()).done;)We=We.value,je=Fe+b(We,rt++),nt+=Pe(We,ee,Ee,je,Me);else if(We==="object")throw ee=String(z),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return nt}function $e(z,ee,Ee){if(z==null)return z;var Fe=[],Me=0;return Pe(z,Fe,"","",function(We){return ee.call(Ee,We,Me++)}),Fe}function St(z){if(z._status===-1){var ee=z._result;ee=ee(),ee.then(function(Ee){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ee)},function(Ee){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ee)}),z._status===-1&&(z._status=0,z._result=ee)}if(z._status===1)return z._result.default;throw z._result}var Xe={current:null},ce={transition:null},Se={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:ce,ReactCurrentOwner:re};function fe(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:$e,forEach:function(z,ee,Ee){$e(z,function(){ee.apply(this,arguments)},Ee)},count:function(z){var ee=0;return $e(z,function(){ee++}),ee},toArray:function(z){return $e(z,function(ee){return ee})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},He.Component=P,He.Fragment=t,He.Profiler=s,He.PureComponent=Q,He.StrictMode=r,He.Suspense=f,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,He.act=fe,He.cloneElement=function(z,ee,Ee){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Fe=C({},z.props),Me=z.key,We=z.ref,nt=z._owner;if(ee!=null){if(ee.ref!==void 0&&(We=ee.ref,nt=re.current),ee.key!==void 0&&(Me=""+ee.key),z.type&&z.type.defaultProps)var rt=z.type.defaultProps;for(je in ee)L.call(ee,je)&&!N.hasOwnProperty(je)&&(Fe[je]=ee[je]===void 0&&rt!==void 0?rt[je]:ee[je])}var je=arguments.length-2;if(je===1)Fe.children=Ee;else if(1<je){rt=Array(je);for(var mt=0;mt<je;mt++)rt[mt]=arguments[mt+2];Fe.children=rt}return{$$typeof:n,type:z.type,key:Me,ref:We,props:Fe,_owner:nt}},He.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},He.createElement=S,He.createFactory=function(z){var ee=S.bind(null,z);return ee.type=z,ee},He.createRef=function(){return{current:null}},He.forwardRef=function(z){return{$$typeof:d,render:z}},He.isValidElement=O,He.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:St}},He.memo=function(z,ee){return{$$typeof:m,type:z,compare:ee===void 0?null:ee}},He.startTransition=function(z){var ee=ce.transition;ce.transition={};try{z()}finally{ce.transition=ee}},He.unstable_act=fe,He.useCallback=function(z,ee){return Xe.current.useCallback(z,ee)},He.useContext=function(z){return Xe.current.useContext(z)},He.useDebugValue=function(){},He.useDeferredValue=function(z){return Xe.current.useDeferredValue(z)},He.useEffect=function(z,ee){return Xe.current.useEffect(z,ee)},He.useId=function(){return Xe.current.useId()},He.useImperativeHandle=function(z,ee,Ee){return Xe.current.useImperativeHandle(z,ee,Ee)},He.useInsertionEffect=function(z,ee){return Xe.current.useInsertionEffect(z,ee)},He.useLayoutEffect=function(z,ee){return Xe.current.useLayoutEffect(z,ee)},He.useMemo=function(z,ee){return Xe.current.useMemo(z,ee)},He.useReducer=function(z,ee,Ee){return Xe.current.useReducer(z,ee,Ee)},He.useRef=function(z){return Xe.current.useRef(z)},He.useState=function(z){return Xe.current.useState(z)},He.useSyncExternalStore=function(z,ee,Ee){return Xe.current.useSyncExternalStore(z,ee,Ee)},He.useTransition=function(){return Xe.current.useTransition()},He.version="18.3.1",He}var Kv;function Zd(){return Kv||(Kv=1,hp.exports=uI()),hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function cI(){if(Gv)return Ol;Gv=1;var n=Zd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var v,w={},T=null,R=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(R=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:T,ref:R,props:w,_owner:s.current}}return Ol.Fragment=t,Ol.jsx=u,Ol.jsxs=u,Ol}var Qv;function dI(){return Qv||(Qv=1,dp.exports=cI()),dp.exports}var A=dI(),Bc={},fp={exports:{}},Vn={},pp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function hI(){return Yv||(Yv=1,function(n){function e(ce,Se){var fe=ce.length;ce.push(Se);e:for(;0<fe;){var z=fe-1>>>1,ee=ce[z];if(0<s(ee,Se))ce[z]=Se,ce[fe]=ee,fe=z;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var Se=ce[0],fe=ce.pop();if(fe!==Se){ce[0]=fe;e:for(var z=0,ee=ce.length,Ee=ee>>>1;z<Ee;){var Fe=2*(z+1)-1,Me=ce[Fe],We=Fe+1,nt=ce[We];if(0>s(Me,fe))We<ee&&0>s(nt,Me)?(ce[z]=nt,ce[We]=fe,z=We):(ce[z]=Me,ce[Fe]=fe,z=Fe);else if(We<ee&&0>s(nt,fe))ce[z]=nt,ce[We]=fe,z=We;else break e}}return Se}function s(ce,Se){var fe=ce.sortIndex-Se.sortIndex;return fe!==0?fe:ce.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],v=1,w=null,T=3,R=!1,C=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(ce){for(var Se=t(m);Se!==null;){if(Se.callback===null)r(m);else if(Se.startTime<=ce)r(m),Se.sortIndex=Se.expirationTime,e(f,Se);else break;Se=t(m)}}function te(ce){if(D=!1,K(ce),!C)if(t(f)!==null)C=!0,St(L);else{var Se=t(m);Se!==null&&Xe(te,Se.startTime-ce)}}function L(ce,Se){C=!1,D&&(D=!1,F(S),S=-1),R=!0;var fe=T;try{for(K(Se),w=t(f);w!==null&&(!(w.expirationTime>Se)||ce&&!U());){var z=w.callback;if(typeof z=="function"){w.callback=null,T=w.priorityLevel;var ee=z(w.expirationTime<=Se);Se=n.unstable_now(),typeof ee=="function"?w.callback=ee:w===t(f)&&r(f),K(Se)}else r(f);w=t(f)}if(w!==null)var Ee=!0;else{var Fe=t(m);Fe!==null&&Xe(te,Fe.startTime-Se),Ee=!1}return Ee}finally{w=null,T=fe,R=!1}}var re=!1,N=null,S=-1,k=5,O=-1;function U(){return!(n.unstable_now()-O<k)}function B(){if(N!==null){var ce=n.unstable_now();O=ce;var Se=!0;try{Se=N(!0,ce)}finally{Se?b():(re=!1,N=null)}}else re=!1}var b;if(typeof Q=="function")b=function(){Q(B)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,$e=Pe.port2;Pe.port1.onmessage=B,b=function(){$e.postMessage(null)}}else b=function(){P(B,0)};function St(ce){N=ce,re||(re=!0,b())}function Xe(ce,Se){S=P(function(){ce(n.unstable_now())},Se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){C||R||(C=!0,St(L))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ce){switch(T){case 1:case 2:case 3:var Se=3;break;default:Se=T}var fe=T;T=Se;try{return ce()}finally{T=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,Se){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var fe=T;T=ce;try{return Se()}finally{T=fe}},n.unstable_scheduleCallback=function(ce,Se,fe){var z=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?z+fe:z):fe=z,ce){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=fe+ee,ce={id:v++,callback:Se,priorityLevel:ce,startTime:fe,expirationTime:ee,sortIndex:-1},fe>z?(ce.sortIndex=fe,e(m,ce),t(f)===null&&ce===t(m)&&(D?(F(S),S=-1):D=!0,Xe(te,fe-z))):(ce.sortIndex=ee,e(f,ce),C||R||(C=!0,St(L))),ce},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(ce){var Se=T;return function(){var fe=T;T=Se;try{return ce.apply(this,arguments)}finally{T=fe}}}}(mp)),mp}var Jv;function fI(){return Jv||(Jv=1,pp.exports=hI()),pp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function pI(){if(Xv)return Vn;Xv=1;var n=Zd(),e=fI();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function T(i){return f.call(w,i)?!0:f.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function R(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,o,l,h){if(o===null||typeof o>"u"||R(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function D(i,o,l,h,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];P[o]=new D(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(F,Q);P[o]=new D(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(F,Q);P[o]=new D(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(F,Q);P[o]=new D(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function K(i,o,l,h){var p=P.hasOwnProperty(o)?P[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(C(o,l,p,h)&&(l=null),h||p===null?T(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),re=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),U=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),St=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Se(i){return i===null||typeof i!="object"?null:(i=ce&&i[ce]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Object.assign,z;function ee(i){if(z===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+i}var Ee=!1;function Fe(i,o){if(!i||Ee)return"";Ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var h=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){h=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){h=Y}i()}}catch(Y){if(Y&&h&&typeof Y.stack=="string"){for(var p=Y.stack.split(`
`),y=h.stack.split(`
`),E=p.length-1,x=y.length-1;1<=E&&0<=x&&p[E]!==y[x];)x--;for(;1<=E&&0<=x;E--,x--)if(p[E]!==y[x]){if(E!==1||x!==1)do if(E--,x--,0>x||p[E]!==y[x]){var M=`
`+p[E].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=E&&0<=x);break}}}finally{Ee=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?ee(i):""}function Me(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Fe(i.type,!1),i;case 11:return i=Fe(i.type.render,!1),i;case 1:return i=Fe(i.type,!0),i;default:return""}}function We(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case re:return"Portal";case k:return"Profiler";case S:return"StrictMode";case b:return"Suspense";case Pe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case U:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case B:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $e:return o=i.displayName||null,o!==null?o:We(i.type)||"Memo";case St:o=i._payload,i=i._init;try{return We(i(o))}catch{}}return null}function nt(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function rt(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function je(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function mt(i){var o=je(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){h=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function sr(i){i._valueTracker||(i._valueTracker=mt(i))}function Ki(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=je(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function cn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function mi(i,o){var l=o.checked;return fe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Gi(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=rt(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Qi(i,o){o=o.checked,o!=null&&K(i,"checked",o,!1)}function Qs(i,o){Qi(i,o);var l=rt(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Yi(i,o.type,l):o.hasOwnProperty("defaultValue")&&Yi(i,o.type,rt(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Uo(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Yi(i,o,l){(o!=="number"||cn(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var yr=Array.isArray;function Jt(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+rt(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function vr(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function gi(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(yr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:rt(l)}}function Hr(i,o){var l=rt(o.value),h=rt(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function An(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function dt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?dt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var $n,Ys=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for($n=$n||document.createElement("div"),$n.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=$n.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Xt(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qr=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(i){qr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Wr[o]=Wr[i]})});function Ji(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Wr.hasOwnProperty(i)&&Wr[i]?(""+o).trim():o+"px"}function Js(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Ji(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Xi=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kr(i,o){if(o){if(Xi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Zi(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _r=null;function es(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yi=null,Pn=null,Hn=null;function wr(i){if(i=_l(i)){if(typeof yi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=nc(o),yi(i.stateNode,i.type,o))}}function Tn(i){Pn?Hn?Hn.push(i):Hn=[i]:Pn=i}function Xs(){if(Pn){var i=Pn,o=Hn;if(Hn=Pn=null,wr(i),o)for(i=0;i<o.length;i++)wr(o[i])}}function vi(i,o){return i(o)}function V(){}var $=!1;function J(i,o,l){if($)return i(o,l);$=!0;try{return vi(i,o,l)}finally{$=!1,(Pn!==null||Hn!==null)&&(V(),Xs())}}function ne(i,o){var l=i.stateNode;if(l===null)return null;var h=nc(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var pe=!1;if(d)try{var ve={};Object.defineProperty(ve,"passive",{get:function(){pe=!0}}),window.addEventListener("test",ve,ve),window.removeEventListener("test",ve,ve)}catch{pe=!1}function Ae(i,o,l,h,p,y,E,x,M){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(l,Y)}catch(ae){this.onError(ae)}}var me=!1,we=null,de=!1,be=null,Be={onError:function(i){me=!0,we=i}};function at(i,o,l,h,p,y,E,x,M){me=!1,we=null,Ae.apply(Be,arguments)}function Pt(i,o,l,h,p,y,E,x,M){if(at.apply(this,arguments),me){if(me){var Y=we;me=!1,we=null}else throw Error(t(198));de||(de=!0,be=Y)}}function Ge(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function it(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function lt(i){if(Ge(i)!==i)throw Error(t(188))}function Er(i){var o=i.alternate;if(!o){if(o=Ge(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return lt(p),i;if(y===h)return lt(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var E=!1,x=p.child;x;){if(x===l){E=!0,l=p,h=y;break}if(x===h){E=!0,h=p,l=y;break}x=x.sibling}if(!E){for(x=y.child;x;){if(x===l){E=!0,l=y,h=p;break}if(x===h){E=!0,h=y,l=p;break}x=x.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Tr(i){return i=Er(i),i!==null?dn(i):null}function dn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=dn(i);if(o!==null)return o;i=i.sibling}return null}var Zt=e.unstable_scheduleCallback,_i=e.unstable_cancelCallback,Gr=e.unstable_shouldYield,Sr=e.unstable_requestPaint,ut=e.unstable_now,wi=e.unstable_getCurrentPriorityLevel,Ze=e.unstable_ImmediatePriority,gt=e.unstable_UserBlockingPriority,en=e.unstable_NormalPriority,Ir=e.unstable_LowPriority,yt=e.unstable_IdlePriority,kn=null,hn=null;function jo(i){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(kn,i,void 0,(i.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:Ou,rl=Math.log,Du=Math.LN2;function Ou(i){return i>>>=0,i===0?32:31-(rl(i)/Du|0)|0}var Bo=64,zo=4194304;function ts(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Zs(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,E=l&268435455;if(E!==0){var x=E&~p;x!==0?h=ts(x):(y&=E,y!==0&&(h=ts(y)))}else E=l&~p,E!==0?h=ts(E):y!==0&&(h=ts(y));if(h===0)return 0;if(o!==0&&o!==h&&!(o&p)&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if(h&4&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-Sn(o),p=1<<l,h|=i[l],o&=~p;return h}function Uh(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ei(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-Sn(y),x=1<<E,M=p[E];M===-1?(!(x&l)||x&h)&&(p[E]=Uh(x,o)):M<=o&&(i.expiredLanes|=x),y&=~x}}function Wn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function eo(){var i=Bo;return Bo<<=1,!(Bo&4194240)&&(Bo=64),i}function ns(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function rs(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Sn(o),i[o]=l}function ft(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Sn(l),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function is(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-Sn(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var Qe=0;function ss(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Lu,$o,Mu,Vu,Fu,il=!1,Qr=[],tn=null,Rr=null,Cr=null,os=new Map,or=new Map,Yr=[],jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uu(i,o){switch(i){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":os.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":or.delete(o.pointerId)}}function xn(i,o,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=_l(o),o!==null&&$o(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Bh(i,o,l,h,p){switch(o){case"focusin":return tn=xn(tn,i,o,l,h,p),!0;case"dragenter":return Rr=xn(Rr,i,o,l,h,p),!0;case"mouseover":return Cr=xn(Cr,i,o,l,h,p),!0;case"pointerover":var y=p.pointerId;return os.set(y,xn(os.get(y)||null,i,o,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,or.set(y,xn(or.get(y)||null,i,o,l,h,p)),!0}return!1}function ju(i){var o=so(i.target);if(o!==null){var l=Ge(o);if(l!==null){if(o=l.tag,o===13){if(o=it(l),o!==null){i.blockedOn=o,Fu(i.priority,function(){Mu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ti(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Ho(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);_r=h,l.target.dispatchEvent(h),_r=null}else return o=_l(l),o!==null&&$o(o),i.blockedOn=l,!1;o.shift()}return!0}function to(i,o,l){Ti(i)&&l.delete(o)}function Bu(){il=!1,tn!==null&&Ti(tn)&&(tn=null),Rr!==null&&Ti(Rr)&&(Rr=null),Cr!==null&&Ti(Cr)&&(Cr=null),os.forEach(to),or.forEach(to)}function Ar(i,o){i.blockedOn===o&&(i.blockedOn=null,il||(il=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bu)))}function Pr(i){function o(p){return Ar(p,i)}if(0<Qr.length){Ar(Qr[0],i);for(var l=1;l<Qr.length;l++){var h=Qr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(tn!==null&&Ar(tn,i),Rr!==null&&Ar(Rr,i),Cr!==null&&Ar(Cr,i),os.forEach(o),or.forEach(o),l=0;l<Yr.length;l++)h=Yr[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<Yr.length&&(l=Yr[0],l.blockedOn===null);)ju(l),l.blockedOn===null&&Yr.shift()}var Si=te.ReactCurrentBatchConfig,as=!0;function wt(i,o,l,h){var p=Qe,y=Si.transition;Si.transition=null;try{Qe=1,sl(i,o,l,h)}finally{Qe=p,Si.transition=y}}function zh(i,o,l,h){var p=Qe,y=Si.transition;Si.transition=null;try{Qe=4,sl(i,o,l,h)}finally{Qe=p,Si.transition=y}}function sl(i,o,l,h){if(as){var p=Ho(i,o,l,h);if(p===null)Zh(i,o,h,no,l),Uu(i,h);else if(Bh(p,i,o,l,h))h.stopPropagation();else if(Uu(i,h),o&4&&-1<jh.indexOf(i)){for(;p!==null;){var y=_l(p);if(y!==null&&Lu(y),y=Ho(i,o,l,h),y===null&&Zh(i,o,h,no,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Zh(i,o,h,null,l)}}var no=null;function Ho(i,o,l,h){if(no=null,i=es(h),i=so(i),i!==null)if(o=Ge(i),o===null)i=null;else if(l=o.tag,l===13){if(i=it(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return no=i,null}function ol(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wi()){case Ze:return 1;case gt:return 4;case en:case Ir:return 16;case yt:return 536870912;default:return 16}default:return 16}}var qn=null,Wo=null,Nn=null;function al(){if(Nn)return Nn;var i,o=Wo,l=o.length,h,p="value"in qn?qn.value:qn.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var E=l-i;for(h=1;h<=E&&o[l-h]===p[y-h];h++);return Nn=p.slice(i,1<h?1-h:void 0)}function qo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Jr(){return!0}function ll(){return!1}function nn(i){function o(l,h,p,y,E){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(l=i[x],this[x]=l?l(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Jr:ll,this.isPropagationStopped=ll,this}return fe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),o}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=nn(kr),Xr=fe({},kr,{view:0,detail:0}),$h=nn(Xr),Go,Ii,ls,ro=fe({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ls&&(ls&&i.type==="mousemove"?(Go=i.screenX-ls.screenX,Ii=i.screenY-ls.screenY):Ii=Go=0,ls=i),Go)},movementY:function(i){return"movementY"in i?i.movementY:Ii}}),Qo=nn(ro),ul=fe({},ro,{dataTransfer:0}),zu=nn(ul),Yo=fe({},Xr,{relatedTarget:0}),Jo=nn(Yo),$u=fe({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ri=nn($u),Hu=fe({},kr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Wu=nn(Hu),qu=fe({},kr,{data:0}),cl=nn(qu),Xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Ku[i])?!!o[i]:!1}function Zr(){return Gu}var c=fe({},Xr,{key:function(i){if(i.key){var o=Xo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=qo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?In[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(i){return i.type==="keypress"?qo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?qo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=nn(c),_=fe({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=nn(_),W=fe({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),X=nn(W),he=fe({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ht=nn(he),Ut=fe({},ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),et=nn(Ut),qt=[9,13,27,32],Ot=d&&"CompositionEvent"in window,ar=null;d&&"documentMode"in document&&(ar=document.documentMode);var Kn=d&&"TextEvent"in window&&!ar,io=d&&(!Ot||ar&&8<ar&&11>=ar),Zo=" ",jg=!1;function Bg(i,o){switch(i){case"keyup":return qt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ea=!1;function rS(i,o){switch(i){case"compositionend":return zg(o);case"keypress":return o.which!==32?null:(jg=!0,Zo);case"textInput":return i=o.data,i===Zo&&jg?null:i;default:return null}}function iS(i,o){if(ea)return i==="compositionend"||!Ot&&Bg(i,o)?(i=al(),Nn=Wo=qn=null,ea=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return io&&o.locale!=="ko"?null:o.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!sS[i.type]:o==="textarea"}function Hg(i,o,l,h){Tn(h),o=Zu(o,"onChange"),0<o.length&&(l=new Ko("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var dl=null,hl=null;function oS(i){ly(i,0)}function Qu(i){var o=sa(i);if(Ki(o))return i}function aS(i,o){if(i==="change")return o}var Wg=!1;if(d){var Hh;if(d){var Wh="oninput"in document;if(!Wh){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),Wh=typeof qg.oninput=="function"}Hh=Wh}else Hh=!1;Wg=Hh&&(!document.documentMode||9<document.documentMode)}function Kg(){dl&&(dl.detachEvent("onpropertychange",Gg),hl=dl=null)}function Gg(i){if(i.propertyName==="value"&&Qu(hl)){var o=[];Hg(o,hl,i,es(i)),J(oS,o)}}function lS(i,o,l){i==="focusin"?(Kg(),dl=o,hl=l,dl.attachEvent("onpropertychange",Gg)):i==="focusout"&&Kg()}function uS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qu(hl)}function cS(i,o){if(i==="click")return Qu(o)}function dS(i,o){if(i==="input"||i==="change")return Qu(o)}function hS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var xr=typeof Object.is=="function"?Object.is:hS;function fl(i,o){if(xr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!xr(i[p],o[p]))return!1}return!0}function Qg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Yg(i,o){var l=Qg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Qg(l)}}function Jg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Jg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Xg(){for(var i=window,o=cn();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=cn(i.document)}return o}function qh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function fS(i){var o=Xg(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&Jg(l.ownerDocument.documentElement,l)){if(h!==null&&qh(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=Yg(l,y);var E=Yg(l,h);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var pS=d&&"documentMode"in document&&11>=document.documentMode,ta=null,Kh=null,pl=null,Gh=!1;function Zg(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Gh||ta==null||ta!==cn(h)||(h=ta,"selectionStart"in h&&qh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),pl&&fl(pl,h)||(pl=h,h=Zu(Kh,"onSelect"),0<h.length&&(o=new Ko("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=ta)))}function Yu(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var na={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},Qh={},ey={};d&&(ey=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function Ju(i){if(Qh[i])return Qh[i];if(!na[i])return i;var o=na[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in ey)return Qh[i]=o[l];return i}var ty=Ju("animationend"),ny=Ju("animationiteration"),ry=Ju("animationstart"),iy=Ju("transitionend"),sy=new Map,oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(i,o){sy.set(i,o),a(o,[i])}for(var Yh=0;Yh<oy.length;Yh++){var Jh=oy[Yh],mS=Jh.toLowerCase(),gS=Jh[0].toUpperCase()+Jh.slice(1);us(mS,"on"+gS)}us(ty,"onAnimationEnd"),us(ny,"onAnimationIteration"),us(ry,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(iy,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ml));function ay(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,Pt(h,o,void 0,i),i.currentTarget=null}function ly(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var E=h.length-1;0<=E;E--){var x=h[E],M=x.instance,Y=x.currentTarget;if(x=x.listener,M!==y&&p.isPropagationStopped())break e;ay(p,x,Y),y=M}else for(E=0;E<h.length;E++){if(x=h[E],M=x.instance,Y=x.currentTarget,x=x.listener,M!==y&&p.isPropagationStopped())break e;ay(p,x,Y),y=M}}}if(de)throw i=be,de=!1,be=null,i}function vt(i,o){var l=o[of];l===void 0&&(l=o[of]=new Set);var h=i+"__bubble";l.has(h)||(uy(o,i,2,!1),l.add(h))}function Xh(i,o,l){var h=0;o&&(h|=4),uy(l,i,h,o)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function gl(i){if(!i[Xu]){i[Xu]=!0,r.forEach(function(l){l!=="selectionchange"&&(yS.has(l)||Xh(l,!1,i),Xh(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Xu]||(o[Xu]=!0,Xh("selectionchange",!1,o))}}function uy(i,o,l,h){switch(ol(o)){case 1:var p=wt;break;case 4:p=zh;break;default:p=sl}l=p.bind(null,o,l,i),p=void 0,!pe||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Zh(i,o,l,h,p){var y=h;if(!(o&1)&&!(o&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var x=h.stateNode.containerInfo;if(x===p||x.nodeType===8&&x.parentNode===p)break;if(E===4)for(E=h.return;E!==null;){var M=E.tag;if((M===3||M===4)&&(M=E.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;E=E.return}for(;x!==null;){if(E=so(x),E===null)return;if(M=E.tag,M===5||M===6){h=y=E;continue e}x=x.parentNode}}h=h.return}J(function(){var Y=y,ae=es(l),le=[];e:{var se=sy.get(i);if(se!==void 0){var ge=Ko,Te=i;switch(i){case"keypress":if(qo(l)===0)break e;case"keydown":case"keyup":ge=g;break;case"focusin":Te="focus",ge=Jo;break;case"focusout":Te="blur",ge=Jo;break;case"beforeblur":case"afterblur":ge=Jo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=X;break;case ty:case ny:case ry:ge=Ri;break;case iy:ge=ht;break;case"scroll":ge=$h;break;case"wheel":ge=et;break;case"copy":case"cut":case"paste":ge=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=I}var Ie=(o&4)!==0,bt=!Ie&&i==="scroll",q=Ie?se!==null?se+"Capture":null:se;Ie=[];for(var j=Y,G;j!==null;){G=j;var ue=G.stateNode;if(G.tag===5&&ue!==null&&(G=ue,q!==null&&(ue=ne(j,q),ue!=null&&Ie.push(yl(j,ue,G)))),bt)break;j=j.return}0<Ie.length&&(se=new ge(se,Te,null,l,ae),le.push({event:se,listeners:Ie}))}}if(!(o&7)){e:{if(se=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",se&&l!==_r&&(Te=l.relatedTarget||l.fromElement)&&(so(Te)||Te[Ci]))break e;if((ge||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,ge?(Te=l.relatedTarget||l.toElement,ge=Y,Te=Te?so(Te):null,Te!==null&&(bt=Ge(Te),Te!==bt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ge=null,Te=Y),ge!==Te)){if(Ie=Qo,ue="onMouseLeave",q="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=I,ue="onPointerLeave",q="onPointerEnter",j="pointer"),bt=ge==null?se:sa(ge),G=Te==null?se:sa(Te),se=new Ie(ue,j+"leave",ge,l,ae),se.target=bt,se.relatedTarget=G,ue=null,so(ae)===Y&&(Ie=new Ie(q,j+"enter",Te,l,ae),Ie.target=G,Ie.relatedTarget=bt,ue=Ie),bt=ue,ge&&Te)t:{for(Ie=ge,q=Te,j=0,G=Ie;G;G=ra(G))j++;for(G=0,ue=q;ue;ue=ra(ue))G++;for(;0<j-G;)Ie=ra(Ie),j--;for(;0<G-j;)q=ra(q),G--;for(;j--;){if(Ie===q||q!==null&&Ie===q.alternate)break t;Ie=ra(Ie),q=ra(q)}Ie=null}else Ie=null;ge!==null&&cy(le,se,ge,Ie,!1),Te!==null&&bt!==null&&cy(le,bt,Te,Ie,!0)}}e:{if(se=Y?sa(Y):window,ge=se.nodeName&&se.nodeName.toLowerCase(),ge==="select"||ge==="input"&&se.type==="file")var Re=aS;else if($g(se))if(Wg)Re=dS;else{Re=uS;var ke=lS}else(ge=se.nodeName)&&ge.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Re=cS);if(Re&&(Re=Re(i,Y))){Hg(le,Re,l,ae);break e}ke&&ke(i,se,Y),i==="focusout"&&(ke=se._wrapperState)&&ke.controlled&&se.type==="number"&&Yi(se,"number",se.value)}switch(ke=Y?sa(Y):window,i){case"focusin":($g(ke)||ke.contentEditable==="true")&&(ta=ke,Kh=Y,pl=null);break;case"focusout":pl=Kh=ta=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Zg(le,l,ae);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":Zg(le,l,ae)}var xe;if(Ot)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ea?Bg(i,l)&&(Oe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(io&&l.locale!=="ko"&&(ea||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ea&&(xe=al()):(qn=ae,Wo="value"in qn?qn.value:qn.textContent,ea=!0)),ke=Zu(Y,Oe),0<ke.length&&(Oe=new cl(Oe,i,null,l,ae),le.push({event:Oe,listeners:ke}),xe?Oe.data=xe:(xe=zg(l),xe!==null&&(Oe.data=xe)))),(xe=Kn?rS(i,l):iS(i,l))&&(Y=Zu(Y,"onBeforeInput"),0<Y.length&&(ae=new cl("onBeforeInput","beforeinput",null,l,ae),le.push({event:ae,listeners:Y}),ae.data=xe))}ly(le,o)})}function yl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function Zu(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ne(i,l),y!=null&&h.unshift(yl(i,y,p)),y=ne(i,o),y!=null&&h.push(yl(i,y,p))),i=i.return}return h}function ra(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function cy(i,o,l,h,p){for(var y=o._reactName,E=[];l!==null&&l!==h;){var x=l,M=x.alternate,Y=x.stateNode;if(M!==null&&M===h)break;x.tag===5&&Y!==null&&(x=Y,p?(M=ne(l,y),M!=null&&E.unshift(yl(l,M,x))):p||(M=ne(l,y),M!=null&&E.push(yl(l,M,x)))),l=l.return}E.length!==0&&i.push({event:o,listeners:E})}var vS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function dy(i){return(typeof i=="string"?i:""+i).replace(vS,`
`).replace(_S,"")}function ec(i,o,l){if(o=dy(o),dy(i)!==o&&l)throw Error(t(425))}function tc(){}var ef=null,tf=null;function nf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var rf=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(i){return hy.resolve(null).then(i).catch(TS)}:rf;function TS(i){setTimeout(function(){throw i})}function sf(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),Pr(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Pr(o)}function cs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function fy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var ia=Math.random().toString(36).slice(2),ei="__reactFiber$"+ia,vl="__reactProps$"+ia,Ci="__reactContainer$"+ia,of="__reactEvents$"+ia,SS="__reactListeners$"+ia,IS="__reactHandles$"+ia;function so(i){var o=i[ei];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Ci]||l[ei]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=fy(i);i!==null;){if(l=i[ei])return l;i=fy(i)}return o}i=l,l=i.parentNode}return null}function _l(i){return i=i[ei]||i[Ci],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function sa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function nc(i){return i[vl]||null}var af=[],oa=-1;function ds(i){return{current:i}}function _t(i){0>oa||(i.current=af[oa],af[oa]=null,oa--)}function pt(i,o){oa++,af[oa]=i.current,i.current=o}var hs={},fn=ds(hs),bn=ds(!1),oo=hs;function aa(i,o){var l=i.type.contextTypes;if(!l)return hs;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function Dn(i){return i=i.childContextTypes,i!=null}function rc(){_t(bn),_t(fn)}function py(i,o,l){if(fn.current!==hs)throw Error(t(168));pt(fn,o),pt(bn,l)}function my(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,nt(i)||"Unknown",p));return fe({},l,h)}function ic(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||hs,oo=fn.current,pt(fn,i),pt(bn,bn.current),!0}function gy(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=my(i,o,oo),h.__reactInternalMemoizedMergedChildContext=i,_t(bn),_t(fn),pt(fn,i)):_t(bn),pt(bn,l)}var Ai=null,sc=!1,lf=!1;function yy(i){Ai===null?Ai=[i]:Ai.push(i)}function RS(i){sc=!0,yy(i)}function fs(){if(!lf&&Ai!==null){lf=!0;var i=0,o=Qe;try{var l=Ai;for(Qe=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}Ai=null,sc=!1}catch(p){throw Ai!==null&&(Ai=Ai.slice(i+1)),Zt(Ze,fs),p}finally{Qe=o,lf=!1}}return null}var la=[],ua=0,oc=null,ac=0,lr=[],ur=0,ao=null,Pi=1,ki="";function lo(i,o){la[ua++]=ac,la[ua++]=oc,oc=i,ac=o}function vy(i,o,l){lr[ur++]=Pi,lr[ur++]=ki,lr[ur++]=ao,ao=i;var h=Pi;i=ki;var p=32-Sn(h)-1;h&=~(1<<p),l+=1;var y=32-Sn(o)+p;if(30<y){var E=p-p%5;y=(h&(1<<E)-1).toString(32),h>>=E,p-=E,Pi=1<<32-Sn(o)+p|l<<p|h,ki=y+i}else Pi=1<<y|l<<p|h,ki=i}function uf(i){i.return!==null&&(lo(i,1),vy(i,1,0))}function cf(i){for(;i===oc;)oc=la[--ua],la[ua]=null,ac=la[--ua],la[ua]=null;for(;i===ao;)ao=lr[--ur],lr[ur]=null,ki=lr[--ur],lr[ur]=null,Pi=lr[--ur],lr[ur]=null}var Gn=null,Qn=null,Et=!1,Nr=null;function _y(i,o){var l=fr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function wy(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Gn=i,Qn=cs(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Gn=i,Qn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=ao!==null?{id:Pi,overflow:ki}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=fr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Gn=i,Qn=null,!0):!1;default:return!1}}function df(i){return(i.mode&1)!==0&&(i.flags&128)===0}function hf(i){if(Et){var o=Qn;if(o){var l=o;if(!wy(i,o)){if(df(i))throw Error(t(418));o=cs(l.nextSibling);var h=Gn;o&&wy(i,o)?_y(h,l):(i.flags=i.flags&-4097|2,Et=!1,Gn=i)}}else{if(df(i))throw Error(t(418));i.flags=i.flags&-4097|2,Et=!1,Gn=i}}}function Ey(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Gn=i}function lc(i){if(i!==Gn)return!1;if(!Et)return Ey(i),Et=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!nf(i.type,i.memoizedProps)),o&&(o=Qn)){if(df(i))throw Ty(),Error(t(418));for(;o;)_y(i,o),o=cs(o.nextSibling)}if(Ey(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){Qn=cs(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}Qn=null}}else Qn=Gn?cs(i.stateNode.nextSibling):null;return!0}function Ty(){for(var i=Qn;i;)i=cs(i.nextSibling)}function ca(){Qn=Gn=null,Et=!1}function ff(i){Nr===null?Nr=[i]:Nr.push(i)}var CS=te.ReactCurrentBatchConfig;function wl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var x=p.refs;E===null?delete x[y]:x[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function uc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Sy(i){var o=i._init;return o(i._payload)}function Iy(i){function o(q,j){if(i){var G=q.deletions;G===null?(q.deletions=[j],q.flags|=16):G.push(j)}}function l(q,j){if(!i)return null;for(;j!==null;)o(q,j),j=j.sibling;return null}function h(q,j){for(q=new Map;j!==null;)j.key!==null?q.set(j.key,j):q.set(j.index,j),j=j.sibling;return q}function p(q,j){return q=Es(q,j),q.index=0,q.sibling=null,q}function y(q,j,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<j?(q.flags|=2,j):G):(q.flags|=2,j)):(q.flags|=1048576,j)}function E(q){return i&&q.alternate===null&&(q.flags|=2),q}function x(q,j,G,ue){return j===null||j.tag!==6?(j=ip(G,q.mode,ue),j.return=q,j):(j=p(j,G),j.return=q,j)}function M(q,j,G,ue){var Re=G.type;return Re===N?ae(q,j,G.props.children,ue,G.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===St&&Sy(Re)===j.type)?(ue=p(j,G.props),ue.ref=wl(q,j,G),ue.return=q,ue):(ue=Dc(G.type,G.key,G.props,null,q.mode,ue),ue.ref=wl(q,j,G),ue.return=q,ue)}function Y(q,j,G,ue){return j===null||j.tag!==4||j.stateNode.containerInfo!==G.containerInfo||j.stateNode.implementation!==G.implementation?(j=sp(G,q.mode,ue),j.return=q,j):(j=p(j,G.children||[]),j.return=q,j)}function ae(q,j,G,ue,Re){return j===null||j.tag!==7?(j=yo(G,q.mode,ue,Re),j.return=q,j):(j=p(j,G),j.return=q,j)}function le(q,j,G){if(typeof j=="string"&&j!==""||typeof j=="number")return j=ip(""+j,q.mode,G),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case L:return G=Dc(j.type,j.key,j.props,null,q.mode,G),G.ref=wl(q,null,j),G.return=q,G;case re:return j=sp(j,q.mode,G),j.return=q,j;case St:var ue=j._init;return le(q,ue(j._payload),G)}if(yr(j)||Se(j))return j=yo(j,q.mode,G,null),j.return=q,j;uc(q,j)}return null}function se(q,j,G,ue){var Re=j!==null?j.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Re!==null?null:x(q,j,""+G,ue);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case L:return G.key===Re?M(q,j,G,ue):null;case re:return G.key===Re?Y(q,j,G,ue):null;case St:return Re=G._init,se(q,j,Re(G._payload),ue)}if(yr(G)||Se(G))return Re!==null?null:ae(q,j,G,ue,null);uc(q,G)}return null}function ge(q,j,G,ue,Re){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return q=q.get(G)||null,x(j,q,""+ue,Re);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case L:return q=q.get(ue.key===null?G:ue.key)||null,M(j,q,ue,Re);case re:return q=q.get(ue.key===null?G:ue.key)||null,Y(j,q,ue,Re);case St:var ke=ue._init;return ge(q,j,G,ke(ue._payload),Re)}if(yr(ue)||Se(ue))return q=q.get(G)||null,ae(j,q,ue,Re,null);uc(j,ue)}return null}function Te(q,j,G,ue){for(var Re=null,ke=null,xe=j,Oe=j=0,Qt=null;xe!==null&&Oe<G.length;Oe++){xe.index>Oe?(Qt=xe,xe=null):Qt=xe.sibling;var ot=se(q,xe,G[Oe],ue);if(ot===null){xe===null&&(xe=Qt);break}i&&xe&&ot.alternate===null&&o(q,xe),j=y(ot,j,Oe),ke===null?Re=ot:ke.sibling=ot,ke=ot,xe=Qt}if(Oe===G.length)return l(q,xe),Et&&lo(q,Oe),Re;if(xe===null){for(;Oe<G.length;Oe++)xe=le(q,G[Oe],ue),xe!==null&&(j=y(xe,j,Oe),ke===null?Re=xe:ke.sibling=xe,ke=xe);return Et&&lo(q,Oe),Re}for(xe=h(q,xe);Oe<G.length;Oe++)Qt=ge(xe,q,Oe,G[Oe],ue),Qt!==null&&(i&&Qt.alternate!==null&&xe.delete(Qt.key===null?Oe:Qt.key),j=y(Qt,j,Oe),ke===null?Re=Qt:ke.sibling=Qt,ke=Qt);return i&&xe.forEach(function(Ts){return o(q,Ts)}),Et&&lo(q,Oe),Re}function Ie(q,j,G,ue){var Re=Se(G);if(typeof Re!="function")throw Error(t(150));if(G=Re.call(G),G==null)throw Error(t(151));for(var ke=Re=null,xe=j,Oe=j=0,Qt=null,ot=G.next();xe!==null&&!ot.done;Oe++,ot=G.next()){xe.index>Oe?(Qt=xe,xe=null):Qt=xe.sibling;var Ts=se(q,xe,ot.value,ue);if(Ts===null){xe===null&&(xe=Qt);break}i&&xe&&Ts.alternate===null&&o(q,xe),j=y(Ts,j,Oe),ke===null?Re=Ts:ke.sibling=Ts,ke=Ts,xe=Qt}if(ot.done)return l(q,xe),Et&&lo(q,Oe),Re;if(xe===null){for(;!ot.done;Oe++,ot=G.next())ot=le(q,ot.value,ue),ot!==null&&(j=y(ot,j,Oe),ke===null?Re=ot:ke.sibling=ot,ke=ot);return Et&&lo(q,Oe),Re}for(xe=h(q,xe);!ot.done;Oe++,ot=G.next())ot=ge(xe,q,Oe,ot.value,ue),ot!==null&&(i&&ot.alternate!==null&&xe.delete(ot.key===null?Oe:ot.key),j=y(ot,j,Oe),ke===null?Re=ot:ke.sibling=ot,ke=ot);return i&&xe.forEach(function(sI){return o(q,sI)}),Et&&lo(q,Oe),Re}function bt(q,j,G,ue){if(typeof G=="object"&&G!==null&&G.type===N&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case L:e:{for(var Re=G.key,ke=j;ke!==null;){if(ke.key===Re){if(Re=G.type,Re===N){if(ke.tag===7){l(q,ke.sibling),j=p(ke,G.props.children),j.return=q,q=j;break e}}else if(ke.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===St&&Sy(Re)===ke.type){l(q,ke.sibling),j=p(ke,G.props),j.ref=wl(q,ke,G),j.return=q,q=j;break e}l(q,ke);break}else o(q,ke);ke=ke.sibling}G.type===N?(j=yo(G.props.children,q.mode,ue,G.key),j.return=q,q=j):(ue=Dc(G.type,G.key,G.props,null,q.mode,ue),ue.ref=wl(q,j,G),ue.return=q,q=ue)}return E(q);case re:e:{for(ke=G.key;j!==null;){if(j.key===ke)if(j.tag===4&&j.stateNode.containerInfo===G.containerInfo&&j.stateNode.implementation===G.implementation){l(q,j.sibling),j=p(j,G.children||[]),j.return=q,q=j;break e}else{l(q,j);break}else o(q,j);j=j.sibling}j=sp(G,q.mode,ue),j.return=q,q=j}return E(q);case St:return ke=G._init,bt(q,j,ke(G._payload),ue)}if(yr(G))return Te(q,j,G,ue);if(Se(G))return Ie(q,j,G,ue);uc(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,j!==null&&j.tag===6?(l(q,j.sibling),j=p(j,G),j.return=q,q=j):(l(q,j),j=ip(G,q.mode,ue),j.return=q,q=j),E(q)):l(q,j)}return bt}var da=Iy(!0),Ry=Iy(!1),cc=ds(null),dc=null,ha=null,pf=null;function mf(){pf=ha=dc=null}function gf(i){var o=cc.current;_t(cc),i._currentValue=o}function yf(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function fa(i,o){dc=i,pf=ha=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(On=!0),i.firstContext=null)}function cr(i){var o=i._currentValue;if(pf!==i)if(i={context:i,memoizedValue:o,next:null},ha===null){if(dc===null)throw Error(t(308));ha=i,dc.dependencies={lanes:0,firstContext:i}}else ha=ha.next=i;return o}var uo=null;function vf(i){uo===null?uo=[i]:uo.push(i)}function Cy(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,vf(o)):(l.next=p.next,p.next=l),o.interleaved=l,xi(i,h)}function xi(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var ps=!1;function _f(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ay(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ni(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ms(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,st&2){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,xi(i,l)}return p=h.interleaved,p===null?(o.next=o,vf(h)):(o.next=p.next,p.next=o),h.interleaved=o,xi(i,l)}function hc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,is(i,l)}}function Py(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function fc(i,o,l,h){var p=i.updateQueue;ps=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var M=x,Y=M.next;M.next=null,E===null?y=Y:E.next=Y,E=M;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,x=ae.lastBaseUpdate,x!==E&&(x===null?ae.firstBaseUpdate=Y:x.next=Y,ae.lastBaseUpdate=M))}if(y!==null){var le=p.baseState;E=0,ae=Y=M=null,x=y;do{var se=x.lane,ge=x.eventTime;if((h&se)===se){ae!==null&&(ae=ae.next={eventTime:ge,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Te=i,Ie=x;switch(se=o,ge=l,Ie.tag){case 1:if(Te=Ie.payload,typeof Te=="function"){le=Te.call(ge,le,se);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ie.payload,se=typeof Te=="function"?Te.call(ge,le,se):Te,se==null)break e;le=fe({},le,se);break e;case 2:ps=!0}}x.callback!==null&&x.lane!==0&&(i.flags|=64,se=p.effects,se===null?p.effects=[x]:se.push(x))}else ge={eventTime:ge,lane:se,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ae===null?(Y=ae=ge,M=le):ae=ae.next=ge,E|=se;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;se=x,x=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(ae===null&&(M=le),p.baseState=M,p.firstBaseUpdate=Y,p.lastBaseUpdate=ae,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);fo|=E,i.lanes=E,i.memoizedState=le}}function ky(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var El={},ti=ds(El),Tl=ds(El),Sl=ds(El);function co(i){if(i===El)throw Error(t(174));return i}function wf(i,o){switch(pt(Sl,o),pt(Tl,i),pt(ti,El),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:At(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=At(o,i)}_t(ti),pt(ti,o)}function pa(){_t(ti),_t(Tl),_t(Sl)}function xy(i){co(Sl.current);var o=co(ti.current),l=At(o,i.type);o!==l&&(pt(Tl,i),pt(ti,l))}function Ef(i){Tl.current===i&&(_t(ti),_t(Tl))}var It=ds(0);function pc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Tf=[];function Sf(){for(var i=0;i<Tf.length;i++)Tf[i]._workInProgressVersionPrimary=null;Tf.length=0}var mc=te.ReactCurrentDispatcher,If=te.ReactCurrentBatchConfig,ho=0,Rt=null,jt=null,Kt=null,gc=!1,Il=!1,Rl=0,AS=0;function pn(){throw Error(t(321))}function Rf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!xr(i[l],o[l]))return!1;return!0}function Cf(i,o,l,h,p,y){if(ho=y,Rt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,mc.current=i===null||i.memoizedState===null?NS:bS,i=l(h,p),Il){y=0;do{if(Il=!1,Rl=0,25<=y)throw Error(t(301));y+=1,Kt=jt=null,o.updateQueue=null,mc.current=DS,i=l(h,p)}while(Il)}if(mc.current=_c,o=jt!==null&&jt.next!==null,ho=0,Kt=jt=Rt=null,gc=!1,o)throw Error(t(300));return i}function Af(){var i=Rl!==0;return Rl=0,i}function ni(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Rt.memoizedState=Kt=i:Kt=Kt.next=i,Kt}function dr(){if(jt===null){var i=Rt.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var o=Kt===null?Rt.memoizedState:Kt.next;if(o!==null)Kt=o,jt=i;else{if(i===null)throw Error(t(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Kt===null?Rt.memoizedState=Kt=i:Kt=Kt.next=i}return Kt}function Cl(i,o){return typeof o=="function"?o(i):o}function Pf(i){var o=dr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=jt,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var x=E=null,M=null,Y=y;do{var ae=Y.lane;if((ho&ae)===ae)M!==null&&(M=M.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),h=Y.hasEagerState?Y.eagerState:i(h,Y.action);else{var le={lane:ae,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};M===null?(x=M=le,E=h):M=M.next=le,Rt.lanes|=ae,fo|=ae}Y=Y.next}while(Y!==null&&Y!==y);M===null?E=h:M.next=x,xr(h,o.memoizedState)||(On=!0),o.memoizedState=h,o.baseState=E,o.baseQueue=M,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,Rt.lanes|=y,fo|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function kf(i){var o=dr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);xr(y,o.memoizedState)||(On=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function Ny(){}function by(i,o){var l=Rt,h=dr(),p=o(),y=!xr(h.memoizedState,p);if(y&&(h.memoizedState=p,On=!0),h=h.queue,xf(Ly.bind(null,l,h,i),[i]),h.getSnapshot!==o||y||Kt!==null&&Kt.memoizedState.tag&1){if(l.flags|=2048,Al(9,Oy.bind(null,l,h,p,o),void 0,null),Gt===null)throw Error(t(349));ho&30||Dy(l,o,p)}return p}function Dy(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Rt.updateQueue,o===null?(o={lastEffect:null,stores:null},Rt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Oy(i,o,l,h){o.value=l,o.getSnapshot=h,My(o)&&Vy(i)}function Ly(i,o,l){return l(function(){My(o)&&Vy(i)})}function My(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!xr(i,l)}catch{return!0}}function Vy(i){var o=xi(i,1);o!==null&&Lr(o,i,1,-1)}function Fy(i){var o=ni();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:i},o.queue=i,i=i.dispatch=xS.bind(null,Rt,i),[o.memoizedState,i]}function Al(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=Rt.updateQueue,o===null?(o={lastEffect:null,stores:null},Rt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Uy(){return dr().memoizedState}function yc(i,o,l,h){var p=ni();Rt.flags|=i,p.memoizedState=Al(1|o,l,void 0,h===void 0?null:h)}function vc(i,o,l,h){var p=dr();h=h===void 0?null:h;var y=void 0;if(jt!==null){var E=jt.memoizedState;if(y=E.destroy,h!==null&&Rf(h,E.deps)){p.memoizedState=Al(o,l,y,h);return}}Rt.flags|=i,p.memoizedState=Al(1|o,l,y,h)}function jy(i,o){return yc(8390656,8,i,o)}function xf(i,o){return vc(2048,8,i,o)}function By(i,o){return vc(4,2,i,o)}function zy(i,o){return vc(4,4,i,o)}function $y(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Hy(i,o,l){return l=l!=null?l.concat([i]):null,vc(4,4,$y.bind(null,o,i),l)}function Nf(){}function Wy(i,o){var l=dr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&Rf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function qy(i,o){var l=dr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&Rf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Ky(i,o,l){return ho&21?(xr(l,o)||(l=eo(),Rt.lanes|=l,fo|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,On=!0),i.memoizedState=l)}function PS(i,o){var l=Qe;Qe=l!==0&&4>l?l:4,i(!0);var h=If.transition;If.transition={};try{i(!1),o()}finally{Qe=l,If.transition=h}}function Gy(){return dr().memoizedState}function kS(i,o,l){var h=_s(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Qy(i))Yy(o,l);else if(l=Cy(i,o,l,h),l!==null){var p=Cn();Lr(l,i,h,p),Jy(l,o,h)}}function xS(i,o,l){var h=_s(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Qy(i))Yy(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,x=y(E,l);if(p.hasEagerState=!0,p.eagerState=x,xr(x,E)){var M=o.interleaved;M===null?(p.next=p,vf(o)):(p.next=M.next,M.next=p),o.interleaved=p;return}}catch{}finally{}l=Cy(i,o,p,h),l!==null&&(p=Cn(),Lr(l,i,h,p),Jy(l,o,h))}}function Qy(i){var o=i.alternate;return i===Rt||o!==null&&o===Rt}function Yy(i,o){Il=gc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function Jy(i,o,l){if(l&4194240){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,is(i,l)}}var _c={readContext:cr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},NS={readContext:cr,useCallback:function(i,o){return ni().memoizedState=[i,o===void 0?null:o],i},useContext:cr,useEffect:jy,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,yc(4194308,4,$y.bind(null,o,i),l)},useLayoutEffect:function(i,o){return yc(4194308,4,i,o)},useInsertionEffect:function(i,o){return yc(4,2,i,o)},useMemo:function(i,o){var l=ni();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=ni();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=kS.bind(null,Rt,i),[h.memoizedState,i]},useRef:function(i){var o=ni();return i={current:i},o.memoizedState=i},useState:Fy,useDebugValue:Nf,useDeferredValue:function(i){return ni().memoizedState=i},useTransition:function(){var i=Fy(!1),o=i[0];return i=PS.bind(null,i[1]),ni().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=Rt,p=ni();if(Et){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),Gt===null)throw Error(t(349));ho&30||Dy(h,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,jy(Ly.bind(null,h,y,i),[i]),h.flags|=2048,Al(9,Oy.bind(null,h,y,l,o),void 0,null),l},useId:function(){var i=ni(),o=Gt.identifierPrefix;if(Et){var l=ki,h=Pi;l=(h&~(1<<32-Sn(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=Rl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=AS++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},bS={readContext:cr,useCallback:Wy,useContext:cr,useEffect:xf,useImperativeHandle:Hy,useInsertionEffect:By,useLayoutEffect:zy,useMemo:qy,useReducer:Pf,useRef:Uy,useState:function(){return Pf(Cl)},useDebugValue:Nf,useDeferredValue:function(i){var o=dr();return Ky(o,jt.memoizedState,i)},useTransition:function(){var i=Pf(Cl)[0],o=dr().memoizedState;return[i,o]},useMutableSource:Ny,useSyncExternalStore:by,useId:Gy,unstable_isNewReconciler:!1},DS={readContext:cr,useCallback:Wy,useContext:cr,useEffect:xf,useImperativeHandle:Hy,useInsertionEffect:By,useLayoutEffect:zy,useMemo:qy,useReducer:kf,useRef:Uy,useState:function(){return kf(Cl)},useDebugValue:Nf,useDeferredValue:function(i){var o=dr();return jt===null?o.memoizedState=i:Ky(o,jt.memoizedState,i)},useTransition:function(){var i=kf(Cl)[0],o=dr().memoizedState;return[i,o]},useMutableSource:Ny,useSyncExternalStore:by,useId:Gy,unstable_isNewReconciler:!1};function br(i,o){if(i&&i.defaultProps){o=fe({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function bf(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:fe({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var wc={isMounted:function(i){return(i=i._reactInternals)?Ge(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=Cn(),p=_s(i),y=Ni(h,p);y.payload=o,l!=null&&(y.callback=l),o=ms(i,y,p),o!==null&&(Lr(o,i,p,h),hc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=Cn(),p=_s(i),y=Ni(h,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=ms(i,y,p),o!==null&&(Lr(o,i,p,h),hc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Cn(),h=_s(i),p=Ni(l,h);p.tag=2,o!=null&&(p.callback=o),o=ms(i,p,h),o!==null&&(Lr(o,i,h,l),hc(o,i,h))}};function Xy(i,o,l,h,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,E):o.prototype&&o.prototype.isPureReactComponent?!fl(l,h)||!fl(p,y):!0}function Zy(i,o,l){var h=!1,p=hs,y=o.contextType;return typeof y=="object"&&y!==null?y=cr(y):(p=Dn(o)?oo:fn.current,h=o.contextTypes,y=(h=h!=null)?aa(i,p):hs),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function ev(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&wc.enqueueReplaceState(o,o.state,null)}function Df(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},_f(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=cr(y):(y=Dn(o)?oo:fn.current,p.context=aa(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(bf(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&wc.enqueueReplaceState(p,p.state,null),fc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ma(i,o){try{var l="",h=o;do l+=Me(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Of(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Lf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var OS=typeof WeakMap=="function"?WeakMap:Map;function tv(i,o,l){l=Ni(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){Ac||(Ac=!0,Yf=h),Lf(i,o)},l}function nv(i,o,l){l=Ni(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){Lf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Lf(i,o),typeof h!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),l}function rv(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new OS;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=GS.bind(null,i,o,l),o.then(i,i))}function iv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function sv(i,o,l,h,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Ni(-1,1),o.tag=2,ms(l,o,1))),l.lanes|=1),i)}var LS=te.ReactCurrentOwner,On=!1;function Rn(i,o,l,h){o.child=i===null?Ry(o,null,l,h):da(o,i.child,l,h)}function ov(i,o,l,h,p){l=l.render;var y=o.ref;return fa(o,p),h=Cf(i,o,l,h,y,p),l=Af(),i!==null&&!On?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,bi(i,o,p)):(Et&&l&&uf(o),o.flags|=1,Rn(i,o,h,p),o.child)}function av(i,o,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!rp(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,lv(i,o,y,h,p)):(i=Dc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!(i.lanes&p)){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:fl,l(E,h)&&i.ref===o.ref)return bi(i,o,p)}return o.flags|=1,i=Es(y,h),i.ref=o.ref,i.return=o,o.child=i}function lv(i,o,l,h,p){if(i!==null){var y=i.memoizedProps;if(fl(y,h)&&i.ref===o.ref)if(On=!1,o.pendingProps=h=y,(i.lanes&p)!==0)i.flags&131072&&(On=!0);else return o.lanes=i.lanes,bi(i,o,p)}return Mf(i,o,l,h,p)}function uv(i,o,l){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(ya,Yn),Yn|=l;else{if(!(l&1073741824))return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,pt(ya,Yn),Yn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,pt(ya,Yn),Yn|=h}else y!==null?(h=y.baseLanes|l,o.memoizedState=null):h=l,pt(ya,Yn),Yn|=h;return Rn(i,o,p,l),o.child}function cv(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Mf(i,o,l,h,p){var y=Dn(l)?oo:fn.current;return y=aa(o,y),fa(o,p),l=Cf(i,o,l,h,y,p),h=Af(),i!==null&&!On?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,bi(i,o,p)):(Et&&h&&uf(o),o.flags|=1,Rn(i,o,l,p),o.child)}function dv(i,o,l,h,p){if(Dn(l)){var y=!0;ic(o)}else y=!1;if(fa(o,p),o.stateNode===null)Tc(i,o),Zy(o,l,h),Df(o,l,h,p),h=!0;else if(i===null){var E=o.stateNode,x=o.memoizedProps;E.props=x;var M=E.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=cr(Y):(Y=Dn(l)?oo:fn.current,Y=aa(o,Y));var ae=l.getDerivedStateFromProps,le=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function";le||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==h||M!==Y)&&ev(o,E,h,Y),ps=!1;var se=o.memoizedState;E.state=se,fc(o,h,E,p),M=o.memoizedState,x!==h||se!==M||bn.current||ps?(typeof ae=="function"&&(bf(o,l,ae,h),M=o.memoizedState),(x=ps||Xy(o,l,x,h,se,M,Y))?(le||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=M),E.props=h,E.state=M,E.context=Y,h=x):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{E=o.stateNode,Ay(i,o),x=o.memoizedProps,Y=o.type===o.elementType?x:br(o.type,x),E.props=Y,le=o.pendingProps,se=E.context,M=l.contextType,typeof M=="object"&&M!==null?M=cr(M):(M=Dn(l)?oo:fn.current,M=aa(o,M));var ge=l.getDerivedStateFromProps;(ae=typeof ge=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==le||se!==M)&&ev(o,E,h,M),ps=!1,se=o.memoizedState,E.state=se,fc(o,h,E,p);var Te=o.memoizedState;x!==le||se!==Te||bn.current||ps?(typeof ge=="function"&&(bf(o,l,ge,h),Te=o.memoizedState),(Y=ps||Xy(o,l,Y,h,se,Te,M)||!1)?(ae||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,Te,M),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,Te,M)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=Te),E.props=h,E.state=Te,E.context=M,h=Y):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),h=!1)}return Vf(i,o,l,h,y,p)}function Vf(i,o,l,h,p,y){cv(i,o);var E=(o.flags&128)!==0;if(!h&&!E)return p&&gy(o,l,!1),bi(i,o,y);h=o.stateNode,LS.current=o;var x=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&E?(o.child=da(o,i.child,null,y),o.child=da(o,null,x,y)):Rn(i,o,x,y),o.memoizedState=h.state,p&&gy(o,l,!0),o.child}function hv(i){var o=i.stateNode;o.pendingContext?py(i,o.pendingContext,o.pendingContext!==o.context):o.context&&py(i,o.context,!1),wf(i,o.containerInfo)}function fv(i,o,l,h,p){return ca(),ff(p),o.flags|=256,Rn(i,o,l,h),o.child}var Ff={dehydrated:null,treeContext:null,retryLane:0};function Uf(i){return{baseLanes:i,cachePool:null,transitions:null}}function pv(i,o,l){var h=o.pendingProps,p=It.current,y=!1,E=(o.flags&128)!==0,x;if((x=E)||(x=i!==null&&i.memoizedState===null?!1:(p&2)!==0),x?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),pt(It,p&1),i===null)return hf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(E=h.children,i=h.fallback,y?(h=o.mode,y=o.child,E={mode:"hidden",children:E},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Oc(E,h,0,null),i=yo(i,h,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Uf(l),o.memoizedState=Ff,i):jf(o,E));if(p=i.memoizedState,p!==null&&(x=p.dehydrated,x!==null))return MS(i,o,E,h,x,p,l);if(y){y=h.fallback,E=o.mode,p=i.child,x=p.sibling;var M={mode:"hidden",children:h.children};return!(E&1)&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=M,o.deletions=null):(h=Es(p,M),h.subtreeFlags=p.subtreeFlags&14680064),x!==null?y=Es(x,y):(y=yo(y,E,l,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,E=i.child.memoizedState,E=E===null?Uf(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~l,o.memoizedState=Ff,h}return y=i.child,i=y.sibling,h=Es(y,{mode:"visible",children:h.children}),!(o.mode&1)&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function jf(i,o){return o=Oc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ec(i,o,l,h){return h!==null&&ff(h),da(o,i.child,null,l),i=jf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function MS(i,o,l,h,p,y,E){if(l)return o.flags&256?(o.flags&=-257,h=Of(Error(t(422))),Ec(i,o,E,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=Oc({mode:"visible",children:h.children},p,0,null),y=yo(y,p,E,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,o.mode&1&&da(o,i.child,null,E),o.child.memoizedState=Uf(E),o.memoizedState=Ff,y);if(!(o.mode&1))return Ec(i,o,E,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var x=h.dgst;return h=x,y=Error(t(419)),h=Of(y,h,void 0),Ec(i,o,E,h)}if(x=(E&i.childLanes)!==0,On||x){if(h=Gt,h!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(h.suspendedLanes|E)?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,xi(i,p),Lr(h,i,p,-1))}return np(),h=Of(Error(t(421))),Ec(i,o,E,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=QS.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,Qn=cs(p.nextSibling),Gn=o,Et=!0,Nr=null,i!==null&&(lr[ur++]=Pi,lr[ur++]=ki,lr[ur++]=ao,Pi=i.id,ki=i.overflow,ao=o),o=jf(o,h.children),o.flags|=4096,o)}function mv(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),yf(i.return,o,l)}function Bf(i,o,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function gv(i,o,l){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(Rn(i,o,h.children,l),h=It.current,h&2)h=h&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&mv(i,l,o);else if(i.tag===19)mv(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(pt(It,h),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&pc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Bf(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&pc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Bf(o,!0,l,null,y);break;case"together":Bf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Tc(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function bi(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),fo|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Es(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Es(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function VS(i,o,l){switch(o.tag){case 3:hv(o),ca();break;case 5:xy(o);break;case 1:Dn(o.type)&&ic(o);break;case 4:wf(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;pt(cc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(pt(It,It.current&1),o.flags|=128,null):l&o.child.childLanes?pv(i,o,l):(pt(It,It.current&1),i=bi(i,o,l),i!==null?i.sibling:null);pt(It,It.current&1);break;case 19:if(h=(l&o.childLanes)!==0,i.flags&128){if(h)return gv(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pt(It,It.current),h)break;return null;case 22:case 23:return o.lanes=0,uv(i,o,l)}return bi(i,o,l)}var yv,zf,vv,_v;yv=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},zf=function(){},vv=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,co(ti.current);var y=null;switch(l){case"input":p=mi(i,p),h=mi(i,h),y=[];break;case"select":p=fe({},p,{value:void 0}),h=fe({},h,{value:void 0}),y=[];break;case"textarea":p=vr(i,p),h=vr(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=tc)}Kr(l,h);var E;l=null;for(Y in p)if(!h.hasOwnProperty(Y)&&p.hasOwnProperty(Y)&&p[Y]!=null)if(Y==="style"){var x=p[Y];for(E in x)x.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?y||(y=[]):(y=y||[]).push(Y,null));for(Y in h){var M=h[Y];if(x=p!=null?p[Y]:void 0,h.hasOwnProperty(Y)&&M!==x&&(M!=null||x!=null))if(Y==="style")if(x){for(E in x)!x.hasOwnProperty(E)||M&&M.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in M)M.hasOwnProperty(E)&&x[E]!==M[E]&&(l||(l={}),l[E]=M[E])}else l||(y||(y=[]),y.push(Y,l)),l=M;else Y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,x=x?x.__html:void 0,M!=null&&x!==M&&(y=y||[]).push(Y,M)):Y==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(Y,""+M):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(M!=null&&Y==="onScroll"&&vt("scroll",i),y||x===M||(y=[])):(y=y||[]).push(Y,M))}l&&(y=y||[]).push("style",l);var Y=y;(o.updateQueue=Y)&&(o.flags|=4)}},_v=function(i,o,l,h){l!==h&&(o.flags|=4)};function Pl(i,o){if(!Et)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function mn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function FS(i,o,l){var h=o.pendingProps;switch(cf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(o),null;case 1:return Dn(o.type)&&rc(),mn(o),null;case 3:return h=o.stateNode,pa(),_t(bn),_t(fn),Sf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(lc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Nr!==null&&(Zf(Nr),Nr=null))),zf(i,o),mn(o),null;case 5:Ef(o);var p=co(Sl.current);if(l=o.type,i!==null&&o.stateNode!=null)vv(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return mn(o),null}if(i=co(ti.current),lc(o)){h=o.stateNode,l=o.type;var y=o.memoizedProps;switch(h[ei]=o,h[vl]=y,i=(o.mode&1)!==0,l){case"dialog":vt("cancel",h),vt("close",h);break;case"iframe":case"object":case"embed":vt("load",h);break;case"video":case"audio":for(p=0;p<ml.length;p++)vt(ml[p],h);break;case"source":vt("error",h);break;case"img":case"image":case"link":vt("error",h),vt("load",h);break;case"details":vt("toggle",h);break;case"input":Gi(h,y),vt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},vt("invalid",h);break;case"textarea":gi(h,y),vt("invalid",h)}Kr(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var x=y[E];E==="children"?typeof x=="string"?h.textContent!==x&&(y.suppressHydrationWarning!==!0&&ec(h.textContent,x,i),p=["children",x]):typeof x=="number"&&h.textContent!==""+x&&(y.suppressHydrationWarning!==!0&&ec(h.textContent,x,i),p=["children",""+x]):s.hasOwnProperty(E)&&x!=null&&E==="onScroll"&&vt("scroll",h)}switch(l){case"input":sr(h),Uo(h,y,!0);break;case"textarea":sr(h),An(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=tc)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=dt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=E.createElement(l,{is:h.is}):(i=E.createElement(l),l==="select"&&(E=i,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):i=E.createElementNS(i,l),i[ei]=o,i[vl]=h,yv(i,o,!1,!1),o.stateNode=i;e:{switch(E=Zi(l,h),l){case"dialog":vt("cancel",i),vt("close",i),p=h;break;case"iframe":case"object":case"embed":vt("load",i),p=h;break;case"video":case"audio":for(p=0;p<ml.length;p++)vt(ml[p],i);p=h;break;case"source":vt("error",i),p=h;break;case"img":case"image":case"link":vt("error",i),vt("load",i),p=h;break;case"details":vt("toggle",i),p=h;break;case"input":Gi(i,h),p=mi(i,h),vt("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=fe({},h,{value:void 0}),vt("invalid",i);break;case"textarea":gi(i,h),p=vr(i,h),vt("invalid",i);break;default:p=h}Kr(l,p),x=p;for(y in x)if(x.hasOwnProperty(y)){var M=x[y];y==="style"?Js(i,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Ys(i,M)):y==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&Xt(i,M):typeof M=="number"&&Xt(i,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?M!=null&&y==="onScroll"&&vt("scroll",i):M!=null&&K(i,y,M,E))}switch(l){case"input":sr(i),Uo(i,h,!1);break;case"textarea":sr(i),An(i);break;case"option":h.value!=null&&i.setAttribute("value",""+rt(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Jt(i,!!h.multiple,y,!1):h.defaultValue!=null&&Jt(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=tc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return mn(o),null;case 6:if(i&&o.stateNode!=null)_v(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=co(Sl.current),co(ti.current),lc(o)){if(h=o.stateNode,l=o.memoizedProps,h[ei]=o,(y=h.nodeValue!==l)&&(i=Gn,i!==null))switch(i.tag){case 3:ec(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ec(h.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[ei]=o,o.stateNode=h}return mn(o),null;case 13:if(_t(It),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Et&&Qn!==null&&o.mode&1&&!(o.flags&128))Ty(),ca(),o.flags|=98560,y=!1;else if(y=lc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[ei]=o}else ca(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;mn(o),y=!1}else Nr!==null&&(Zf(Nr),Nr=null),y=!0;if(!y)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(i===null||It.current&1?Bt===0&&(Bt=3):np())),o.updateQueue!==null&&(o.flags|=4),mn(o),null);case 4:return pa(),zf(i,o),i===null&&gl(o.stateNode.containerInfo),mn(o),null;case 10:return gf(o.type._context),mn(o),null;case 17:return Dn(o.type)&&rc(),mn(o),null;case 19:if(_t(It),y=o.memoizedState,y===null)return mn(o),null;if(h=(o.flags&128)!==0,E=y.rendering,E===null)if(h)Pl(y,!1);else{if(Bt!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(E=pc(i),E!==null){for(o.flags|=128,Pl(y,!1),h=E.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)y=l,i=h,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return pt(It,It.current&1|2),o.child}i=i.sibling}y.tail!==null&&ut()>va&&(o.flags|=128,h=!0,Pl(y,!1),o.lanes=4194304)}else{if(!h)if(i=pc(E),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Pl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Et)return mn(o),null}else 2*ut()-y.renderingStartTime>va&&l!==1073741824&&(o.flags|=128,h=!0,Pl(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(l=y.last,l!==null?l.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ut(),o.sibling=null,l=It.current,pt(It,h?l&1|2:l&1),o):(mn(o),null);case 22:case 23:return tp(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?Yn&1073741824&&(mn(o),o.subtreeFlags&6&&(o.flags|=8192)):mn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function US(i,o){switch(cf(o),o.tag){case 1:return Dn(o.type)&&rc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return pa(),_t(bn),_t(fn),Sf(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Ef(o),null;case 13:if(_t(It),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ca()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return _t(It),null;case 4:return pa(),null;case 10:return gf(o.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var Sc=!1,gn=!1,jS=typeof WeakSet=="function"?WeakSet:Set,_e=null;function ga(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){kt(i,o,h)}else l.current=null}function $f(i,o,l){try{l()}catch(h){kt(i,o,h)}}var wv=!1;function BS(i,o){if(ef=as,i=Xg(),qh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,x=-1,M=-1,Y=0,ae=0,le=i,se=null;t:for(;;){for(var ge;le!==l||p!==0&&le.nodeType!==3||(x=E+p),le!==y||h!==0&&le.nodeType!==3||(M=E+h),le.nodeType===3&&(E+=le.nodeValue.length),(ge=le.firstChild)!==null;)se=le,le=ge;for(;;){if(le===i)break t;if(se===l&&++Y===p&&(x=E),se===y&&++ae===h&&(M=E),(ge=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=ge}l=x===-1||M===-1?null:{start:x,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(tf={focusedElem:i,selectionRange:l},as=!1,_e=o;_e!==null;)if(o=_e,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,_e=i;else for(;_e!==null;){o=_e;try{var Te=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ie=Te.memoizedProps,bt=Te.memoizedState,q=o.stateNode,j=q.getSnapshotBeforeUpdate(o.elementType===o.type?Ie:br(o.type,Ie),bt);q.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){kt(o,o.return,ue)}if(i=o.sibling,i!==null){i.return=o.return,_e=i;break}_e=o.return}return Te=wv,wv=!1,Te}function kl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&$f(o,l,y)}p=p.next}while(p!==h)}}function Ic(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Hf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function Ev(i){var o=i.alternate;o!==null&&(i.alternate=null,Ev(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[ei],delete o[vl],delete o[of],delete o[SS],delete o[IS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tv(i){return i.tag===5||i.tag===3||i.tag===4}function Sv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=tc));else if(h!==4&&(i=i.child,i!==null))for(Wf(i,o,l),i=i.sibling;i!==null;)Wf(i,o,l),i=i.sibling}function qf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(qf(i,o,l),i=i.sibling;i!==null;)qf(i,o,l),i=i.sibling}var rn=null,Dr=!1;function gs(i,o,l){for(l=l.child;l!==null;)Iv(i,o,l),l=l.sibling}function Iv(i,o,l){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(kn,l)}catch{}switch(l.tag){case 5:gn||ga(l,o);case 6:var h=rn,p=Dr;rn=null,gs(i,o,l),rn=h,Dr=p,rn!==null&&(Dr?(i=rn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):rn.removeChild(l.stateNode));break;case 18:rn!==null&&(Dr?(i=rn,l=l.stateNode,i.nodeType===8?sf(i.parentNode,l):i.nodeType===1&&sf(i,l),Pr(i)):sf(rn,l.stateNode));break;case 4:h=rn,p=Dr,rn=l.stateNode.containerInfo,Dr=!0,gs(i,o,l),rn=h,Dr=p;break;case 0:case 11:case 14:case 15:if(!gn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&(y&2||y&4)&&$f(l,o,E),p=p.next}while(p!==h)}gs(i,o,l);break;case 1:if(!gn&&(ga(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(x){kt(l,o,x)}gs(i,o,l);break;case 21:gs(i,o,l);break;case 22:l.mode&1?(gn=(h=gn)||l.memoizedState!==null,gs(i,o,l),gn=h):gs(i,o,l);break;default:gs(i,o,l)}}function Rv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new jS),o.forEach(function(h){var p=YS.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Or(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,E=o,x=E;e:for(;x!==null;){switch(x.tag){case 5:rn=x.stateNode,Dr=!1;break e;case 3:rn=x.stateNode.containerInfo,Dr=!0;break e;case 4:rn=x.stateNode.containerInfo,Dr=!0;break e}x=x.return}if(rn===null)throw Error(t(160));Iv(y,E,p),rn=null,Dr=!1;var M=p.alternate;M!==null&&(M.return=null),p.return=null}catch(Y){kt(p,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Cv(o,i),o=o.sibling}function Cv(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Or(o,i),ri(i),h&4){try{kl(3,i,i.return),Ic(3,i)}catch(Ie){kt(i,i.return,Ie)}try{kl(5,i,i.return)}catch(Ie){kt(i,i.return,Ie)}}break;case 1:Or(o,i),ri(i),h&512&&l!==null&&ga(l,l.return);break;case 5:if(Or(o,i),ri(i),h&512&&l!==null&&ga(l,l.return),i.flags&32){var p=i.stateNode;try{Xt(p,"")}catch(Ie){kt(i,i.return,Ie)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=l!==null?l.memoizedProps:y,x=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{x==="input"&&y.type==="radio"&&y.name!=null&&Qi(p,y),Zi(x,E);var Y=Zi(x,y);for(E=0;E<M.length;E+=2){var ae=M[E],le=M[E+1];ae==="style"?Js(p,le):ae==="dangerouslySetInnerHTML"?Ys(p,le):ae==="children"?Xt(p,le):K(p,ae,le,Y)}switch(x){case"input":Qs(p,y);break;case"textarea":Hr(p,y);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Jt(p,!!y.multiple,ge,!1):se!==!!y.multiple&&(y.defaultValue!=null?Jt(p,!!y.multiple,y.defaultValue,!0):Jt(p,!!y.multiple,y.multiple?[]:"",!1))}p[vl]=y}catch(Ie){kt(i,i.return,Ie)}}break;case 6:if(Or(o,i),ri(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Ie){kt(i,i.return,Ie)}}break;case 3:if(Or(o,i),ri(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Pr(o.containerInfo)}catch(Ie){kt(i,i.return,Ie)}break;case 4:Or(o,i),ri(i);break;case 13:Or(o,i),ri(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Qf=ut())),h&4&&Rv(i);break;case 22:if(ae=l!==null&&l.memoizedState!==null,i.mode&1?(gn=(Y=gn)||ae,Or(o,i),gn=Y):Or(o,i),ri(i),h&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ae&&i.mode&1)for(_e=i,ae=i.child;ae!==null;){for(le=_e=ae;_e!==null;){switch(se=_e,ge=se.child,se.tag){case 0:case 11:case 14:case 15:kl(4,se,se.return);break;case 1:ga(se,se.return);var Te=se.stateNode;if(typeof Te.componentWillUnmount=="function"){h=se,l=se.return;try{o=h,Te.props=o.memoizedProps,Te.state=o.memoizedState,Te.componentWillUnmount()}catch(Ie){kt(h,l,Ie)}}break;case 5:ga(se,se.return);break;case 22:if(se.memoizedState!==null){kv(le);continue}}ge!==null?(ge.return=se,_e=ge):kv(le)}ae=ae.sibling}e:for(ae=null,le=i;;){if(le.tag===5){if(ae===null){ae=le;try{p=le.stateNode,Y?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(x=le.stateNode,M=le.memoizedProps.style,E=M!=null&&M.hasOwnProperty("display")?M.display:null,x.style.display=Ji("display",E))}catch(Ie){kt(i,i.return,Ie)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=Y?"":le.memoizedProps}catch(Ie){kt(i,i.return,Ie)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Or(o,i),ri(i),h&4&&Rv(i);break;case 21:break;default:Or(o,i),ri(i)}}function ri(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Tv(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Xt(p,""),h.flags&=-33);var y=Sv(i);qf(i,y,p);break;case 3:case 4:var E=h.stateNode.containerInfo,x=Sv(i);Wf(i,x,E);break;default:throw Error(t(161))}}catch(M){kt(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function zS(i,o,l){_e=i,Av(i)}function Av(i,o,l){for(var h=(i.mode&1)!==0;_e!==null;){var p=_e,y=p.child;if(p.tag===22&&h){var E=p.memoizedState!==null||Sc;if(!E){var x=p.alternate,M=x!==null&&x.memoizedState!==null||gn;x=Sc;var Y=gn;if(Sc=E,(gn=M)&&!Y)for(_e=p;_e!==null;)E=_e,M=E.child,E.tag===22&&E.memoizedState!==null?xv(p):M!==null?(M.return=E,_e=M):xv(p);for(;y!==null;)_e=y,Av(y),y=y.sibling;_e=p,Sc=x,gn=Y}Pv(i)}else p.subtreeFlags&8772&&y!==null?(y.return=p,_e=y):Pv(i)}}function Pv(i){for(;_e!==null;){var o=_e;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:gn||Ic(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!gn)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:br(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&ky(o,y,h);break;case 3:var E=o.updateQueue;if(E!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}ky(o,E,l)}break;case 5:var x=o.stateNode;if(l===null&&o.flags&4){l=x;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ae=Y.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&Pr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gn||o.flags&512&&Hf(o)}catch(se){kt(o,o.return,se)}}if(o===i){_e=null;break}if(l=o.sibling,l!==null){l.return=o.return,_e=l;break}_e=o.return}}function kv(i){for(;_e!==null;){var o=_e;if(o===i){_e=null;break}var l=o.sibling;if(l!==null){l.return=o.return,_e=l;break}_e=o.return}}function xv(i){for(;_e!==null;){var o=_e;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Ic(4,o)}catch(M){kt(o,l,M)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(M){kt(o,p,M)}}var y=o.return;try{Hf(o)}catch(M){kt(o,y,M)}break;case 5:var E=o.return;try{Hf(o)}catch(M){kt(o,E,M)}}}catch(M){kt(o,o.return,M)}if(o===i){_e=null;break}var x=o.sibling;if(x!==null){x.return=o.return,_e=x;break}_e=o.return}}var $S=Math.ceil,Rc=te.ReactCurrentDispatcher,Kf=te.ReactCurrentOwner,hr=te.ReactCurrentBatchConfig,st=0,Gt=null,Lt=null,sn=0,Yn=0,ya=ds(0),Bt=0,xl=null,fo=0,Cc=0,Gf=0,Nl=null,Ln=null,Qf=0,va=1/0,Di=null,Ac=!1,Yf=null,ys=null,Pc=!1,vs=null,kc=0,bl=0,Jf=null,xc=-1,Nc=0;function Cn(){return st&6?ut():xc!==-1?xc:xc=ut()}function _s(i){return i.mode&1?st&2&&sn!==0?sn&-sn:CS.transition!==null?(Nc===0&&(Nc=eo()),Nc):(i=Qe,i!==0||(i=window.event,i=i===void 0?16:ol(i.type)),i):1}function Lr(i,o,l,h){if(50<bl)throw bl=0,Jf=null,Error(t(185));rs(i,l,h),(!(st&2)||i!==Gt)&&(i===Gt&&(!(st&2)&&(Cc|=l),Bt===4&&ws(i,sn)),Mn(i,h),l===1&&st===0&&!(o.mode&1)&&(va=ut()+500,sc&&fs()))}function Mn(i,o){var l=i.callbackNode;Ei(i,o);var h=Zs(i,i===Gt?sn:0);if(h===0)l!==null&&_i(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&_i(l),o===1)i.tag===0?RS(bv.bind(null,i)):yy(bv.bind(null,i)),ES(function(){!(st&6)&&fs()}),l=null;else{switch(ss(h)){case 1:l=Ze;break;case 4:l=gt;break;case 16:l=en;break;case 536870912:l=yt;break;default:l=en}l=jv(l,Nv.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Nv(i,o){if(xc=-1,Nc=0,st&6)throw Error(t(327));var l=i.callbackNode;if(_a()&&i.callbackNode!==l)return null;var h=Zs(i,i===Gt?sn:0);if(h===0)return null;if(h&30||h&i.expiredLanes||o)o=bc(i,h);else{o=h;var p=st;st|=2;var y=Ov();(Gt!==i||sn!==o)&&(Di=null,va=ut()+500,mo(i,o));do try{qS();break}catch(x){Dv(i,x)}while(!0);mf(),Rc.current=y,st=p,Lt!==null?o=0:(Gt=null,sn=0,o=Bt)}if(o!==0){if(o===2&&(p=Wn(i),p!==0&&(h=p,o=Xf(i,p))),o===1)throw l=xl,mo(i,0),ws(i,h),Mn(i,ut()),l;if(o===6)ws(i,h);else{if(p=i.current.alternate,!(h&30)&&!HS(p)&&(o=bc(i,h),o===2&&(y=Wn(i),y!==0&&(h=y,o=Xf(i,y))),o===1))throw l=xl,mo(i,0),ws(i,h),Mn(i,ut()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:go(i,Ln,Di);break;case 3:if(ws(i,h),(h&130023424)===h&&(o=Qf+500-ut(),10<o)){if(Zs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){Cn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=rf(go.bind(null,i,Ln,Di),o);break}go(i,Ln,Di);break;case 4:if(ws(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var E=31-Sn(h);y=1<<E,E=o[E],E>p&&(p=E),h&=~y}if(h=p,h=ut()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*$S(h/1960))-h,10<h){i.timeoutHandle=rf(go.bind(null,i,Ln,Di),h);break}go(i,Ln,Di);break;case 5:go(i,Ln,Di);break;default:throw Error(t(329))}}}return Mn(i,ut()),i.callbackNode===l?Nv.bind(null,i):null}function Xf(i,o){var l=Nl;return i.current.memoizedState.isDehydrated&&(mo(i,o).flags|=256),i=bc(i,o),i!==2&&(o=Ln,Ln=l,o!==null&&Zf(o)),i}function Zf(i){Ln===null?Ln=i:Ln.push.apply(Ln,i)}function HS(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!xr(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ws(i,o){for(o&=~Gf,o&=~Cc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Sn(o),h=1<<l;i[l]=-1,o&=~h}}function bv(i){if(st&6)throw Error(t(327));_a();var o=Zs(i,0);if(!(o&1))return Mn(i,ut()),null;var l=bc(i,o);if(i.tag!==0&&l===2){var h=Wn(i);h!==0&&(o=h,l=Xf(i,h))}if(l===1)throw l=xl,mo(i,0),ws(i,o),Mn(i,ut()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,go(i,Ln,Di),Mn(i,ut()),null}function ep(i,o){var l=st;st|=1;try{return i(o)}finally{st=l,st===0&&(va=ut()+500,sc&&fs())}}function po(i){vs!==null&&vs.tag===0&&!(st&6)&&_a();var o=st;st|=1;var l=hr.transition,h=Qe;try{if(hr.transition=null,Qe=1,i)return i()}finally{Qe=h,hr.transition=l,st=o,!(st&6)&&fs()}}function tp(){Yn=ya.current,_t(ya)}function mo(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,wS(l)),Lt!==null)for(l=Lt.return;l!==null;){var h=l;switch(cf(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&rc();break;case 3:pa(),_t(bn),_t(fn),Sf();break;case 5:Ef(h);break;case 4:pa();break;case 13:_t(It);break;case 19:_t(It);break;case 10:gf(h.type._context);break;case 22:case 23:tp()}l=l.return}if(Gt=i,Lt=i=Es(i.current,null),sn=Yn=o,Bt=0,xl=null,Gf=Cc=fo=0,Ln=Nl=null,uo!==null){for(o=0;o<uo.length;o++)if(l=uo[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,h.next=E}l.pending=h}uo=null}return i}function Dv(i,o){do{var l=Lt;try{if(mf(),mc.current=_c,gc){for(var h=Rt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}gc=!1}if(ho=0,Kt=jt=Rt=null,Il=!1,Rl=0,Kf.current=null,l===null||l.return===null){Bt=1,xl=o,Lt=null;break}e:{var y=i,E=l.return,x=l,M=o;if(o=sn,x.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var Y=M,ae=x,le=ae.tag;if(!(ae.mode&1)&&(le===0||le===11||le===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var ge=iv(E);if(ge!==null){ge.flags&=-257,sv(ge,E,x,y,o),ge.mode&1&&rv(y,Y,o),o=ge,M=Y;var Te=o.updateQueue;if(Te===null){var Ie=new Set;Ie.add(M),o.updateQueue=Ie}else Te.add(M);break e}else{if(!(o&1)){rv(y,Y,o),np();break e}M=Error(t(426))}}else if(Et&&x.mode&1){var bt=iv(E);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),sv(bt,E,x,y,o),ff(ma(M,x));break e}}y=M=ma(M,x),Bt!==4&&(Bt=2),Nl===null?Nl=[y]:Nl.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var q=tv(y,M,o);Py(y,q);break e;case 1:x=M;var j=y.type,G=y.stateNode;if(!(y.flags&128)&&(typeof j.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(ys===null||!ys.has(G)))){y.flags|=65536,o&=-o,y.lanes|=o;var ue=nv(y,x,o);Py(y,ue);break e}}y=y.return}while(y!==null)}Mv(l)}catch(Re){o=Re,Lt===l&&l!==null&&(Lt=l=l.return);continue}break}while(!0)}function Ov(){var i=Rc.current;return Rc.current=_c,i===null?_c:i}function np(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Gt===null||!(fo&268435455)&&!(Cc&268435455)||ws(Gt,sn)}function bc(i,o){var l=st;st|=2;var h=Ov();(Gt!==i||sn!==o)&&(Di=null,mo(i,o));do try{WS();break}catch(p){Dv(i,p)}while(!0);if(mf(),st=l,Rc.current=h,Lt!==null)throw Error(t(261));return Gt=null,sn=0,Bt}function WS(){for(;Lt!==null;)Lv(Lt)}function qS(){for(;Lt!==null&&!Gr();)Lv(Lt)}function Lv(i){var o=Uv(i.alternate,i,Yn);i.memoizedProps=i.pendingProps,o===null?Mv(i):Lt=o,Kf.current=null}function Mv(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=US(l,o),l!==null){l.flags&=32767,Lt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Bt=6,Lt=null;return}}else if(l=FS(l,o,Yn),l!==null){Lt=l;return}if(o=o.sibling,o!==null){Lt=o;return}Lt=o=i}while(o!==null);Bt===0&&(Bt=5)}function go(i,o,l){var h=Qe,p=hr.transition;try{hr.transition=null,Qe=1,KS(i,o,l,h)}finally{hr.transition=p,Qe=h}return null}function KS(i,o,l,h){do _a();while(vs!==null);if(st&6)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(ft(i,y),i===Gt&&(Lt=Gt=null,sn=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Pc||(Pc=!0,jv(en,function(){return _a(),null})),y=(l.flags&15990)!==0,l.subtreeFlags&15990||y){y=hr.transition,hr.transition=null;var E=Qe;Qe=1;var x=st;st|=4,Kf.current=null,BS(i,l),Cv(l,i),fS(tf),as=!!ef,tf=ef=null,i.current=l,zS(l),Sr(),st=x,Qe=E,hr.transition=y}else i.current=l;if(Pc&&(Pc=!1,vs=i,kc=p),y=i.pendingLanes,y===0&&(ys=null),jo(l.stateNode),Mn(i,ut()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Ac)throw Ac=!1,i=Yf,Yf=null,i;return kc&1&&i.tag!==0&&_a(),y=i.pendingLanes,y&1?i===Jf?bl++:(bl=0,Jf=i):bl=0,fs(),null}function _a(){if(vs!==null){var i=ss(kc),o=hr.transition,l=Qe;try{if(hr.transition=null,Qe=16>i?16:i,vs===null)var h=!1;else{if(i=vs,vs=null,kc=0,st&6)throw Error(t(331));var p=st;for(st|=4,_e=i.current;_e!==null;){var y=_e,E=y.child;if(_e.flags&16){var x=y.deletions;if(x!==null){for(var M=0;M<x.length;M++){var Y=x[M];for(_e=Y;_e!==null;){var ae=_e;switch(ae.tag){case 0:case 11:case 15:kl(8,ae,y)}var le=ae.child;if(le!==null)le.return=ae,_e=le;else for(;_e!==null;){ae=_e;var se=ae.sibling,ge=ae.return;if(Ev(ae),ae===Y){_e=null;break}if(se!==null){se.return=ge,_e=se;break}_e=ge}}}var Te=y.alternate;if(Te!==null){var Ie=Te.child;if(Ie!==null){Te.child=null;do{var bt=Ie.sibling;Ie.sibling=null,Ie=bt}while(Ie!==null)}}_e=y}}if(y.subtreeFlags&2064&&E!==null)E.return=y,_e=E;else e:for(;_e!==null;){if(y=_e,y.flags&2048)switch(y.tag){case 0:case 11:case 15:kl(9,y,y.return)}var q=y.sibling;if(q!==null){q.return=y.return,_e=q;break e}_e=y.return}}var j=i.current;for(_e=j;_e!==null;){E=_e;var G=E.child;if(E.subtreeFlags&2064&&G!==null)G.return=E,_e=G;else e:for(E=j;_e!==null;){if(x=_e,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:Ic(9,x)}}catch(Re){kt(x,x.return,Re)}if(x===E){_e=null;break e}var ue=x.sibling;if(ue!==null){ue.return=x.return,_e=ue;break e}_e=x.return}}if(st=p,fs(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(kn,i)}catch{}h=!0}return h}finally{Qe=l,hr.transition=o}}return!1}function Vv(i,o,l){o=ma(l,o),o=tv(i,o,1),i=ms(i,o,1),o=Cn(),i!==null&&(rs(i,1,o),Mn(i,o))}function kt(i,o,l){if(i.tag===3)Vv(i,i,l);else for(;o!==null;){if(o.tag===3){Vv(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ys===null||!ys.has(h))){i=ma(l,i),i=nv(o,i,1),o=ms(o,i,1),i=Cn(),o!==null&&(rs(o,1,i),Mn(o,i));break}}o=o.return}}function GS(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=Cn(),i.pingedLanes|=i.suspendedLanes&l,Gt===i&&(sn&l)===l&&(Bt===4||Bt===3&&(sn&130023424)===sn&&500>ut()-Qf?mo(i,0):Gf|=l),Mn(i,o)}function Fv(i,o){o===0&&(i.mode&1?(o=zo,zo<<=1,!(zo&130023424)&&(zo=4194304)):o=1);var l=Cn();i=xi(i,o),i!==null&&(rs(i,o,l),Mn(i,l))}function QS(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Fv(i,l)}function YS(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),Fv(i,l)}var Uv;Uv=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||bn.current)On=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return On=!1,VS(i,o,l);On=!!(i.flags&131072)}else On=!1,Et&&o.flags&1048576&&vy(o,ac,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Tc(i,o),i=o.pendingProps;var p=aa(o,fn.current);fa(o,l),p=Cf(null,o,h,i,p,l);var y=Af();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Dn(h)?(y=!0,ic(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,_f(o),p.updater=wc,o.stateNode=p,p._reactInternals=o,Df(o,h,i,l),o=Vf(null,o,h,!0,y,l)):(o.tag=0,Et&&y&&uf(o),Rn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(Tc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=XS(h),i=br(h,i),p){case 0:o=Mf(null,o,h,i,l);break e;case 1:o=dv(null,o,h,i,l);break e;case 11:o=ov(null,o,h,i,l);break e;case 14:o=av(null,o,h,br(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:br(h,p),Mf(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:br(h,p),dv(i,o,h,p,l);case 3:e:{if(hv(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,Ay(i,o),fc(o,h,null,l);var E=o.memoizedState;if(h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=ma(Error(t(423)),o),o=fv(i,o,h,l,p);break e}else if(h!==p){p=ma(Error(t(424)),o),o=fv(i,o,h,l,p);break e}else for(Qn=cs(o.stateNode.containerInfo.firstChild),Gn=o,Et=!0,Nr=null,l=Ry(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ca(),h===p){o=bi(i,o,l);break e}Rn(i,o,h,l)}o=o.child}return o;case 5:return xy(o),i===null&&hf(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,nf(h,p)?E=null:y!==null&&nf(h,y)&&(o.flags|=32),cv(i,o),Rn(i,o,E,l),o.child;case 6:return i===null&&hf(o),null;case 13:return pv(i,o,l);case 4:return wf(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=da(o,null,h,l):Rn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:br(h,p),ov(i,o,h,p,l);case 7:return Rn(i,o,o.pendingProps,l),o.child;case 8:return Rn(i,o,o.pendingProps.children,l),o.child;case 12:return Rn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,pt(cc,h._currentValue),h._currentValue=E,y!==null)if(xr(y.value,E)){if(y.children===p.children&&!bn.current){o=bi(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var x=y.dependencies;if(x!==null){E=y.child;for(var M=x.firstContext;M!==null;){if(M.context===h){if(y.tag===1){M=Ni(-1,l&-l),M.tag=2;var Y=y.updateQueue;if(Y!==null){Y=Y.shared;var ae=Y.pending;ae===null?M.next=M:(M.next=ae.next,ae.next=M),Y.pending=M}}y.lanes|=l,M=y.alternate,M!==null&&(M.lanes|=l),yf(y.return,l,o),x.lanes|=l;break}M=M.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,x=E.alternate,x!==null&&(x.lanes|=l),yf(E,l,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}Rn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,fa(o,l),p=cr(p),h=h(p),o.flags|=1,Rn(i,o,h,l),o.child;case 14:return h=o.type,p=br(h,o.pendingProps),p=br(h.type,p),av(i,o,h,p,l);case 15:return lv(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:br(h,p),Tc(i,o),o.tag=1,Dn(h)?(i=!0,ic(o)):i=!1,fa(o,l),Zy(o,h,p),Df(o,h,p,l),Vf(null,o,h,!0,i,l);case 19:return gv(i,o,l);case 22:return uv(i,o,l)}throw Error(t(156,o.tag))};function jv(i,o){return Zt(i,o)}function JS(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(i,o,l,h){return new JS(i,o,l,h)}function rp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function XS(i){if(typeof i=="function")return rp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===$e)return 14}return 2}function Es(i,o){var l=i.alternate;return l===null?(l=fr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Dc(i,o,l,h,p,y){var E=2;if(h=i,typeof i=="function")rp(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case N:return yo(l.children,p,y,o);case S:E=8,p|=8;break;case k:return i=fr(12,l,o,p|2),i.elementType=k,i.lanes=y,i;case b:return i=fr(13,l,o,p),i.elementType=b,i.lanes=y,i;case Pe:return i=fr(19,l,o,p),i.elementType=Pe,i.lanes=y,i;case Xe:return Oc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:E=10;break e;case U:E=9;break e;case B:E=11;break e;case $e:E=14;break e;case St:E=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=fr(E,l,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function yo(i,o,l,h){return i=fr(7,i,h,o),i.lanes=l,i}function Oc(i,o,l,h){return i=fr(22,i,h,o),i.elementType=Xe,i.lanes=l,i.stateNode={isHidden:!1},i}function ip(i,o,l){return i=fr(6,i,null,o),i.lanes=l,i}function sp(i,o,l){return o=fr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function ZS(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ns(0),this.expirationTimes=ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function op(i,o,l,h,p,y,E,x,M){return i=new ZS(i,o,l,x,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=fr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},_f(y),i}function eI(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function Bv(i){if(!i)return hs;i=i._reactInternals;e:{if(Ge(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Dn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(Dn(l))return my(i,l,o)}return o}function zv(i,o,l,h,p,y,E,x,M){return i=op(l,h,!0,i,p,y,E,x,M),i.context=Bv(null),l=i.current,h=Cn(),p=_s(l),y=Ni(h,p),y.callback=o??null,ms(l,y,p),i.current.lanes=p,rs(i,p,h),Mn(i,h),i}function Lc(i,o,l,h){var p=o.current,y=Cn(),E=_s(p);return l=Bv(l),o.context===null?o.context=l:o.pendingContext=l,o=Ni(y,E),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=ms(p,o,E),i!==null&&(Lr(i,p,E,y),hc(i,p,E)),E}function Mc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function $v(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function ap(i,o){$v(i,o),(i=i.alternate)&&$v(i,o)}function tI(){return null}var Hv=typeof reportError=="function"?reportError:function(i){console.error(i)};function lp(i){this._internalRoot=i}Vc.prototype.render=lp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Lc(i,o,null,null)},Vc.prototype.unmount=lp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;po(function(){Lc(null,i,null,null)}),o[Ci]=null}};function Vc(i){this._internalRoot=i}Vc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Vu();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Yr.length&&o!==0&&o<Yr[l].priority;l++);Yr.splice(l,0,i),l===0&&ju(i)}};function up(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Fc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Wv(){}function nI(i,o,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var Y=Mc(E);y.call(Y)}}var E=zv(o,h,i,0,null,!1,!1,"",Wv);return i._reactRootContainer=E,i[Ci]=E.current,gl(i.nodeType===8?i.parentNode:i),po(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var x=h;h=function(){var Y=Mc(M);x.call(Y)}}var M=op(i,0,!1,null,null,!1,!1,"",Wv);return i._reactRootContainer=M,i[Ci]=M.current,gl(i.nodeType===8?i.parentNode:i),po(function(){Lc(o,M,l,h)}),M}function Uc(i,o,l,h,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var x=p;p=function(){var M=Mc(E);x.call(M)}}Lc(o,E,i,p)}else E=nI(l,o,i,p,h);return Mc(E)}Lu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=ts(o.pendingLanes);l!==0&&(is(o,l|1),Mn(o,ut()),!(st&6)&&(va=ut()+500,fs()))}break;case 13:po(function(){var h=xi(i,1);if(h!==null){var p=Cn();Lr(h,i,1,p)}}),ap(i,1)}},$o=function(i){if(i.tag===13){var o=xi(i,134217728);if(o!==null){var l=Cn();Lr(o,i,134217728,l)}ap(i,134217728)}},Mu=function(i){if(i.tag===13){var o=_s(i),l=xi(i,o);if(l!==null){var h=Cn();Lr(l,i,o,h)}ap(i,o)}},Vu=function(){return Qe},Fu=function(i,o){var l=Qe;try{return Qe=i,o()}finally{Qe=l}},yi=function(i,o,l){switch(o){case"input":if(Qs(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=nc(h);if(!p)throw Error(t(90));Ki(h),Qs(h,p)}}}break;case"textarea":Hr(i,l);break;case"select":o=l.value,o!=null&&Jt(i,!!l.multiple,o,!1)}},vi=ep,V=po;var rI={usingClientEntryPoint:!1,Events:[_l,sa,nc,Tn,Xs,ep]},Dl={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iI={bundleType:Dl.bundleType,version:Dl.version,rendererPackageName:Dl.rendererPackageName,rendererConfig:Dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Tr(i),i===null?null:i.stateNode},findFiberByHostInstance:Dl.findFiberByHostInstance||tI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{kn=jc.inject(iI),hn=jc}catch{}}return Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI,Vn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(o))throw Error(t(200));return eI(i,o,null,l)},Vn.createRoot=function(i,o){if(!up(i))throw Error(t(299));var l=!1,h="",p=Hv;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=op(i,1,!1,null,null,l,!1,h,p),i[Ci]=o.current,gl(i.nodeType===8?i.parentNode:i),new lp(o)},Vn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Tr(o),i=i===null?null:i.stateNode,i},Vn.flushSync=function(i){return po(i)},Vn.hydrate=function(i,o,l){if(!Fc(o))throw Error(t(200));return Uc(null,i,o,!0,l)},Vn.hydrateRoot=function(i,o,l){if(!up(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",E=Hv;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),o=zv(o,null,i,1,l??null,p,!1,y,E),i[Ci]=o.current,gl(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Vc(o)},Vn.render=function(i,o,l){if(!Fc(o))throw Error(t(200));return Uc(null,i,o,!1,l)},Vn.unmountComponentAtNode=function(i){if(!Fc(i))throw Error(t(40));return i._reactRootContainer?(po(function(){Uc(null,null,i,!1,function(){i._reactRootContainer=null,i[Ci]=null})}),!0):!1},Vn.unstable_batchedUpdates=ep,Vn.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!Fc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Uc(i,o,l,!1,h)},Vn.version="18.3.1-next-f1338f8080-20240426",Vn}var Zv;function pw(){if(Zv)return fp.exports;Zv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fp.exports=pI(),fp.exports}var e0;function mI(){if(e0)return Bc;e0=1;var n=pw();return Bc.createRoot=n.createRoot,Bc.hydrateRoot=n.hydrateRoot,Bc}var gI=mI(),H=Zd();const Rs=fw(H),t0=lI({__proto__:null,default:Rs},[H]);var gp={exports:{}},yp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function yI(){if(n0)return yp;n0=1;var n=Zd();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,d=n.useDebugValue;return yp.useSyncExternalStoreWithSelector=function(f,m,v,w,T){var R=s(null);if(R.current===null){var C={hasValue:!1,value:null};R.current=C}else C=R.current;R=u(function(){function P(L){if(!F){if(F=!0,Q=L,L=w(L),T!==void 0&&C.hasValue){var re=C.value;if(T(re,L))return K=re}return K=L}if(re=K,t(Q,L))return re;var N=w(L);return T!==void 0&&T(re,N)?re:(Q=L,K=N)}var F=!1,Q,K,te=v===void 0?null:v;return[function(){return P(m())},te===null?void 0:function(){return P(te())}]},[m,v,w,T]);var D=r(f,R[0],R[1]);return a(function(){C.hasValue=!0,C.value=D},[D]),d(D),D},yp}var r0;function vI(){return r0||(r0=1,gp.exports=yI()),gp.exports}var _I=vI(),Xn="default"in t0?Rs:t0,i0=Symbol.for("react-redux-context"),s0=typeof globalThis<"u"?globalThis:{};function wI(){if(!Xn.createContext)return{};const n=s0[i0]??(s0[i0]=new Map);let e=n.get(Xn.createContext);return e||(e=Xn.createContext(null),n.set(Xn.createContext,e)),e}var Ms=wI(),EI=()=>{throw new Error("uSES not initialized!")};function km(n=Ms){return function(){return Xn.useContext(n)}}var mw=km(),gw=EI,TI=n=>{gw=n},SI=(n,e)=>n===e;function II(n=Ms){const e=n===Ms?mw:km(n),t=(r,s={})=>{const{equalityFn:a=SI,devModeChecks:u={}}=typeof s=="function"?{equalityFn:s}:s,{store:d,subscription:f,getServerState:m,stabilityCheck:v,identityFunctionCheck:w}=e();Xn.useRef(!0);const T=Xn.useCallback({[r.name](C){return r(C)}}[r.name],[r,v,u.stabilityCheck]),R=gw(f.addNestedSub,d.getState,m||d.getState,T,a);return Xn.useDebugValue(R),R};return Object.assign(t,{withTypes:()=>t}),t}var xt=II();function RI(n){n()}function CI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){RI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!r||n===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var o0={notify(){},get:()=>[]};function AI(n,e){let t,r=o0,s=0,a=!1;function u(D){v();const P=r.subscribe(D);let F=!1;return()=>{F||(F=!0,P(),w())}}function d(){r.notify()}function f(){C.onStateChange&&C.onStateChange()}function m(){return a}function v(){s++,t||(t=n.subscribe(f),r=CI())}function w(){s--,t&&s===0&&(t(),t=void 0,r.clear(),r=o0)}function T(){a||(a=!0,v())}function R(){a&&(a=!1,w())}const C={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:m,trySubscribe:T,tryUnsubscribe:R,getListeners:()=>r};return C}var PI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kI=typeof navigator<"u"&&navigator.product==="ReactNative",xI=PI||kI?Xn.useLayoutEffect:Xn.useEffect;function NI({store:n,context:e,children:t,serverState:r,stabilityCheck:s="once",identityFunctionCheck:a="once"}){const u=Xn.useMemo(()=>{const m=AI(n);return{store:n,subscription:m,getServerState:r?()=>r:void 0,stabilityCheck:s,identityFunctionCheck:a}},[n,r,s,a]),d=Xn.useMemo(()=>n.getState(),[n]);xI(()=>{const{subscription:m}=u;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),d!==n.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[u,d]);const f=e||Ms;return Xn.createElement(f.Provider,{value:u},t)}var bI=NI;function yw(n=Ms){const e=n===Ms?mw:km(n),t=()=>{const{store:r}=e();return r};return Object.assign(t,{withTypes:()=>t}),t}var DI=yw();function OI(n=Ms){const e=n===Ms?DI:yw(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var gr=OI();TI(_I.useSyncExternalStoreWithSelector);function on(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var LI=typeof Symbol=="function"&&Symbol.observable||"@@observable",a0=LI,vp=()=>Math.random().toString(36).substring(7).split("").join("."),MI={INIT:`@@redux/INIT${vp()}`,REPLACE:`@@redux/REPLACE${vp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vp()}`},Rd=MI;function xm(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function vw(n,e,t){if(typeof n!="function")throw new Error(on(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(on(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(on(1));return t(vw)(n,e)}let r=n,s=e,a=new Map,u=a,d=0,f=!1;function m(){u===a&&(u=new Map,a.forEach((P,F)=>{u.set(F,P)}))}function v(){if(f)throw new Error(on(3));return s}function w(P){if(typeof P!="function")throw new Error(on(4));if(f)throw new Error(on(5));let F=!0;m();const Q=d++;return u.set(Q,P),function(){if(F){if(f)throw new Error(on(6));F=!1,m(),u.delete(Q),a=null}}}function T(P){if(!xm(P))throw new Error(on(7));if(typeof P.type>"u")throw new Error(on(8));if(typeof P.type!="string")throw new Error(on(17));if(f)throw new Error(on(9));try{f=!0,s=r(s,P)}finally{f=!1}return(a=u).forEach(Q=>{Q()}),P}function R(P){if(typeof P!="function")throw new Error(on(10));r=P,T({type:Rd.REPLACE})}function C(){const P=w;return{subscribe(F){if(typeof F!="object"||F===null)throw new Error(on(11));function Q(){const te=F;te.next&&te.next(v())}return Q(),{unsubscribe:P(Q)}},[a0](){return this}}}return T({type:Rd.INIT}),{dispatch:T,subscribe:w,getState:v,replaceReducer:R,[a0]:C}}function VI(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Rd.INIT})>"u")throw new Error(on(12));if(typeof t(void 0,{type:Rd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(on(13))})}function FI(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const u=e[a];typeof n[u]=="function"&&(t[u]=n[u])}const r=Object.keys(t);let s;try{VI(t)}catch(a){s=a}return function(u={},d){if(s)throw s;let f=!1;const m={};for(let v=0;v<r.length;v++){const w=r[v],T=t[w],R=u[w],C=T(R,d);if(typeof C>"u")throw d&&d.type,new Error(on(14));m[w]=C,f=f||C!==R}return f=f||r.length!==Object.keys(u).length,f?m:u}}function Cd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function UI(...n){return e=>(t,r)=>{const s=e(t,r);let a=()=>{throw new Error(on(15))};const u={getState:s.getState,dispatch:(f,...m)=>a(f,...m)},d=n.map(f=>f(u));return a=Cd(...d)(s.dispatch),{...s,dispatch:a}}}function jI(n){return xm(n)&&"type"in n&&typeof n.type=="string"}var _w=Symbol.for("immer-nothing"),l0=Symbol.for("immer-draftable"),tr=Symbol.for("immer-state");function Fr(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Da=Object.getPrototypeOf;function Ao(n){return!!n&&!!n[tr]}function Ui(n){var e;return n?ww(n)||Array.isArray(n)||!!n[l0]||!!((e=n.constructor)!=null&&e[l0])||th(n)||nh(n):!1}var BI=Object.prototype.constructor.toString();function ww(n){if(!n||typeof n!="object")return!1;const e=Da(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===BI}function Ad(n,e){eh(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function eh(n){const e=n[tr];return e?e.type_:Array.isArray(n)?1:th(n)?2:nh(n)?3:0}function $p(n,e){return eh(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Ew(n,e,t){const r=eh(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function zI(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function th(n){return n instanceof Map}function nh(n){return n instanceof Set}function vo(n){return n.copy_||n.base_}function Hp(n,e){if(th(n))return new Map(n);if(nh(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=ww(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[tr];let s=Reflect.ownKeys(r);for(let a=0;a<s.length;a++){const u=s[a],d=r[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:n[u]})}return Object.create(Da(n),r)}else{const r=Da(n);if(r!==null&&t)return{...n};const s=Object.create(r);return Object.assign(s,n)}}function Nm(n,e=!1){return rh(n)||Ao(n)||!Ui(n)||(eh(n)>1&&(n.set=n.add=n.clear=n.delete=$I),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>Nm(r,!0))),n}function $I(){Fr(2)}function rh(n){return Object.isFrozen(n)}var HI={};function Po(n){const e=HI[n];return e||Fr(0,n),e}var iu;function Tw(){return iu}function WI(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function u0(n,e){e&&(Po("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Wp(n){qp(n),n.drafts_.forEach(qI),n.drafts_=null}function qp(n){n===iu&&(iu=n.parent_)}function c0(n){return iu=WI(iu,n)}function qI(n){const e=n[tr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function d0(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[tr].modified_&&(Wp(e),Fr(4)),Ui(n)&&(n=Pd(e,n),e.parent_||kd(e,n)),e.patches_&&Po("Patches").generateReplacementPatches_(t[tr].base_,n,e.patches_,e.inversePatches_)):n=Pd(e,t,[]),Wp(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==_w?n:void 0}function Pd(n,e,t){if(rh(e))return e;const r=e[tr];if(!r)return Ad(e,(s,a)=>h0(n,r,e,s,a,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return kd(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let a=s,u=!1;r.type_===3&&(a=new Set(s),s.clear(),u=!0),Ad(a,(d,f)=>h0(n,r,s,d,f,t,u)),kd(n,s,!1),t&&n.patches_&&Po("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function h0(n,e,t,r,s,a,u){if(Ao(s)){const d=a&&e&&e.type_!==3&&!$p(e.assigned_,r)?a.concat(r):void 0,f=Pd(n,s,d);if(Ew(t,r,f),Ao(f))n.canAutoFreeze_=!1;else return}else u&&t.add(s);if(Ui(s)&&!rh(s)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Pd(n,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&kd(n,s)}}function kd(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Nm(e,t)}function KI(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:Tw(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,a=bm;t&&(s=[r],a=su);const{revoke:u,proxy:d}=Proxy.revocable(s,a);return r.draft_=d,r.revoke_=u,d}var bm={get(n,e){if(e===tr)return n;const t=vo(n);if(!$p(t,e))return GI(n,t,e);const r=t[e];return n.finalized_||!Ui(r)?r:r===_p(n.base_,e)?(wp(n),n.copy_[e]=Gp(r,n)):r},has(n,e){return e in vo(n)},ownKeys(n){return Reflect.ownKeys(vo(n))},set(n,e,t){const r=Sw(vo(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const s=_p(vo(n),e),a=s==null?void 0:s[tr];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(zI(t,s)&&(t!==void 0||$p(n.base_,e)))return!0;wp(n),Kp(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return _p(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,wp(n),Kp(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=vo(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Fr(11)},getPrototypeOf(n){return Da(n.base_)},setPrototypeOf(){Fr(12)}},su={};Ad(bm,(n,e)=>{su[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});su.deleteProperty=function(n,e){return su.set.call(this,n,e,void 0)};su.set=function(n,e,t){return bm.set.call(this,n[0],e,t,n[0])};function _p(n,e){const t=n[tr];return(t?vo(t):n)[e]}function GI(n,e,t){var s;const r=Sw(e,t);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(n.draft_):void 0}function Sw(n,e){if(!(e in n))return;let t=Da(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Da(t)}}function Kp(n){n.modified_||(n.modified_=!0,n.parent_&&Kp(n.parent_))}function wp(n){n.copy_||(n.copy_=Hp(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var QI=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const u=this;return function(f=a,...m){return u.produce(f,v=>t.call(this,v,...m))}}typeof t!="function"&&Fr(6),r!==void 0&&typeof r!="function"&&Fr(7);let s;if(Ui(e)){const a=c0(this),u=Gp(e,void 0);let d=!0;try{s=t(u),d=!1}finally{d?Wp(a):qp(a)}return u0(a,r),d0(s,a)}else if(!e||typeof e!="object"){if(s=t(e),s===void 0&&(s=e),s===_w&&(s=void 0),this.autoFreeze_&&Nm(s,!0),r){const a=[],u=[];Po("Patches").generateReplacementPatches_(e,s,a,u),r(a,u)}return s}else Fr(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...d)=>this.produceWithPatches(u,f=>e(f,...d));let r,s;return[this.produce(e,t,(u,d)=>{r=u,s=d}),r,s]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Ui(n)||Fr(8),Ao(n)&&(n=YI(n));const e=c0(this),t=Gp(n,void 0);return t[tr].isManual_=!0,qp(e),t}finishDraft(n,e){const t=n&&n[tr];(!t||!t.isManual_)&&Fr(9);const{scope_:r}=t;return u0(r,e),d0(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const r=Po("Patches").applyPatches_;return Ao(n)?r(n,e):this.produce(n,s=>r(s,e))}};function Gp(n,e){const t=th(n)?Po("MapSet").proxyMap_(n,e):nh(n)?Po("MapSet").proxySet_(n,e):KI(n,e);return(e?e.scope_:Tw()).drafts_.push(t),t}function YI(n){return Ao(n)||Fr(10,n),Iw(n)}function Iw(n){if(!Ui(n)||rh(n))return n;const e=n[tr];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Hp(n,e.scope_.immer_.useStrictShallowCopy_)}else t=Hp(n,!0);return Ad(t,(r,s)=>{Ew(t,r,Iw(s))}),e&&(e.finalized_=!1),t}var nr=new QI,Rw=nr.produce;nr.produceWithPatches.bind(nr);nr.setAutoFreeze.bind(nr);nr.setUseStrictShallowCopy.bind(nr);nr.applyPatches.bind(nr);nr.createDraft.bind(nr);nr.finishDraft.bind(nr);function Cw(n){return({dispatch:t,getState:r})=>s=>a=>typeof a=="function"?a(t,r,n):s(a)}var JI=Cw(),XI=Cw,ZI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Cd:Cd.apply(null,arguments)},eR=n=>n&&typeof n.match=="function";function Ql(n,e){function t(...r){if(e){let s=e(...r);if(!s)throw new Error(oi(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>jI(r)&&r.type===n,t}var Aw=class Bl extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Bl.prototype)}static get[Symbol.species](){return Bl}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Bl(...e[0].concat(this)):new Bl(...e.concat(this))}};function f0(n){return Ui(n)?Rw(n,()=>{}):n}function p0(n,e,t){if(n.has(e)){let s=n.get(e);return t.update&&(s=t.update(s,e,n),n.set(e,s)),s}if(!t.insert)throw new Error(oi(10));const r=t.insert(e,n);return n.set(e,r),r}function tR(n){return typeof n=="boolean"}var nR=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=e??{};let u=new Aw;return t&&(tR(t)?u.push(JI):u.push(XI(t.extraArgument))),u},rR="RTK_autoBatch",Pw=n=>e=>{setTimeout(e,n)},iR=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Pw(10),sR=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let s=!0,a=!1,u=!1;const d=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?iR:n.type==="callback"?n.queueNotification:Pw(n.timeout),m=()=>{u=!1,a&&(a=!1,d.forEach(v=>v()))};return Object.assign({},r,{subscribe(v){const w=()=>s&&v(),T=r.subscribe(w);return d.add(v),()=>{T(),d.delete(v)}},dispatch(v){var w;try{return s=!((w=v==null?void 0:v.meta)!=null&&w[rR]),a=!s,a&&(u||(u=!0,f(m))),r.dispatch(v)}finally{s=!0}}})},oR=n=>function(t){const{autoBatch:r=!0}=t??{};let s=new Aw(n);return r&&s.push(sR(typeof r=="object"?r:void 0)),s};function aR(n){const e=nR(),{reducer:t=void 0,middleware:r,devTools:s=!0,preloadedState:a=void 0,enhancers:u=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(xm(t))d=FI(t);else throw new Error(oi(1));let f;typeof r=="function"?f=r(e):f=e();let m=Cd;s&&(m=ZI({trace:!1,...typeof s=="object"&&s}));const v=UI(...f),w=oR(v);let T=typeof u=="function"?u(w):w();const R=m(...T);return vw(d,a,R)}function kw(n){const e={},t=[];let r;const s={addCase(a,u){const d=typeof a=="string"?a:a.type;if(!d)throw new Error(oi(28));if(d in e)throw new Error(oi(29));return e[d]=u,s},addMatcher(a,u){return t.push({matcher:a,reducer:u}),s},addDefaultCase(a){return r=a,s}};return n(s),[e,t,r]}function lR(n){return typeof n=="function"}function uR(n,e){let[t,r,s]=kw(e),a;if(lR(n))a=()=>f0(n());else{const d=f0(n);a=()=>d}function u(d=a(),f){let m=[t[f.type],...r.filter(({matcher:v})=>v(f)).map(({reducer:v})=>v)];return m.filter(v=>!!v).length===0&&(m=[s]),m.reduce((v,w)=>{if(w)if(Ao(v)){const R=w(v,f);return R===void 0?v:R}else{if(Ui(v))return Rw(v,T=>w(T,f));{const T=w(v,f);if(T===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return v},d)}return u.getInitialState=a,u}var cR=(n,e)=>eR(n)?n.match(e):n(e);function dR(...n){return e=>n.some(t=>cR(t,e))}var hR="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",fR=(n=21)=>{let e="",t=n;for(;t--;)e+=hR[Math.random()*64|0];return e},pR=["name","message","stack","code"],Ep=class{constructor(n,e){cp(this,"_type");this.payload=n,this.meta=e}},m0=class{constructor(n,e){cp(this,"_type");this.payload=n,this.meta=e}},mR=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of pR)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},Wt=(()=>{function n(e,t,r){const s=Ql(e+"/fulfilled",(f,m,v,w)=>({payload:f,meta:{...w||{},arg:v,requestId:m,requestStatus:"fulfilled"}})),a=Ql(e+"/pending",(f,m,v)=>({payload:void 0,meta:{...v||{},arg:m,requestId:f,requestStatus:"pending"}})),u=Ql(e+"/rejected",(f,m,v,w,T)=>({payload:w,error:(r&&r.serializeError||mR)(f||"Rejected"),meta:{...T||{},arg:v,requestId:m,rejectedWithValue:!!w,requestStatus:"rejected",aborted:(f==null?void 0:f.name)==="AbortError",condition:(f==null?void 0:f.name)==="ConditionError"}}));function d(f){return(m,v,w)=>{const T=r!=null&&r.idGenerator?r.idGenerator(f):fR(),R=new AbortController;let C,D;function P(Q){D=Q,R.abort()}const F=async function(){var te,L;let Q;try{let re=(te=r==null?void 0:r.condition)==null?void 0:te.call(r,f,{getState:v,extra:w});if(yR(re)&&(re=await re),re===!1||R.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const N=new Promise((S,k)=>{C=()=>{k({name:"AbortError",message:D||"Aborted"})},R.signal.addEventListener("abort",C)});m(a(T,f,(L=r==null?void 0:r.getPendingMeta)==null?void 0:L.call(r,{requestId:T,arg:f},{getState:v,extra:w}))),Q=await Promise.race([N,Promise.resolve(t(f,{dispatch:m,getState:v,extra:w,requestId:T,signal:R.signal,abort:P,rejectWithValue:(S,k)=>new Ep(S,k),fulfillWithValue:(S,k)=>new m0(S,k)})).then(S=>{if(S instanceof Ep)throw S;return S instanceof m0?s(S.payload,T,f,S.meta):s(S,T,f)})])}catch(re){Q=re instanceof Ep?u(null,T,f,re.payload,re.meta):u(re,T,f)}finally{C&&R.signal.removeEventListener("abort",C)}return r&&!r.dispatchConditionRejection&&u.match(Q)&&Q.meta.condition||m(Q),Q}();return Object.assign(F,{abort:P,requestId:T,arg:f,unwrap(){return F.then(gR)}})}}return Object.assign(d,{pending:a,rejected:u,fulfilled:s,settled:dR(u,s),typePrefix:e})}return n.withTypes=()=>n,n})();function gR(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function yR(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var vR=Symbol.for("rtk-slice-createasyncthunk");function _R(n,e){return`${n}/${e}`}function wR({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[vR];return function(s){const{name:a,reducerPath:u=a}=s;if(!a)throw new Error(oi(11));typeof process<"u";const d=(typeof s.reducers=="function"?s.reducers(TR()):s.reducers)||{},f=Object.keys(d),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(K,te){const L=typeof K=="string"?K:K.type;if(!L)throw new Error(oi(12));if(L in m.sliceCaseReducersByType)throw new Error(oi(13));return m.sliceCaseReducersByType[L]=te,v},addMatcher(K,te){return m.sliceMatchers.push({matcher:K,reducer:te}),v},exposeAction(K,te){return m.actionCreators[K]=te,v},exposeCaseReducer(K,te){return m.sliceCaseReducersByName[K]=te,v}};f.forEach(K=>{const te=d[K],L={reducerName:K,type:_R(a,K),createNotation:typeof s.reducers=="function"};IR(te)?CR(L,te,v,e):SR(L,te,v)});function w(){const[K={},te=[],L=void 0]=typeof s.extraReducers=="function"?kw(s.extraReducers):[s.extraReducers],re={...K,...m.sliceCaseReducersByType};return uR(s.initialState,N=>{for(let S in re)N.addCase(S,re[S]);for(let S of m.sliceMatchers)N.addMatcher(S.matcher,S.reducer);for(let S of te)N.addMatcher(S.matcher,S.reducer);L&&N.addDefaultCase(L)})}const T=K=>K,R=new Map;let C;function D(K,te){return C||(C=w()),C(K,te)}function P(){return C||(C=w()),C.getInitialState()}function F(K,te=!1){function L(N){let S=N[K];return typeof S>"u"&&te&&(S=P()),S}function re(N=T){const S=p0(R,te,{insert:()=>new WeakMap});return p0(S,N,{insert:()=>{const k={};for(const[O,U]of Object.entries(s.selectors??{}))k[O]=ER(U,N,P,te);return k}})}return{reducerPath:K,getSelectors:re,get selectors(){return re(L)},selectSlice:L}}const Q={name:a,reducer:D,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:P,...F(u),injectInto(K,{reducerPath:te,...L}={}){const re=te??u;return K.inject({reducerPath:re,reducer:D},L),{...Q,...F(re,!0)}}};return Q}}function ER(n,e,t,r){function s(a,...u){let d=e(a);return typeof d>"u"&&r&&(d=t()),n(d,...u)}return s.unwrapped=n,s}var gu=wR();function TR(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function SR({type:n,reducerName:e,createNotation:t},r,s){let a,u;if("reducer"in r){if(t&&!RR(r))throw new Error(oi(17));a=r.reducer,u=r.prepare}else a=r;s.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,u?Ql(n,u):Ql(n))}function IR(n){return n._reducerDefinitionType==="asyncThunk"}function RR(n){return n._reducerDefinitionType==="reducerWithPrepare"}function CR({type:n,reducerName:e},t,r,s){if(!s)throw new Error(oi(18));const{payloadCreator:a,fulfilled:u,pending:d,rejected:f,settled:m,options:v}=t,w=s(n,a,v);r.exposeAction(e,w),u&&r.addCase(w.fulfilled,u),d&&r.addCase(w.pending,d),f&&r.addCase(w.rejected,f),m&&r.addMatcher(w.settled,m),r.exposeCaseReducer(e,{fulfilled:u||zc,pending:d||zc,rejected:f||zc,settled:m||zc})}function zc(){}function oi(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}function xw(n,e){return function(){return n.apply(e,arguments)}}const{toString:AR}=Object.prototype,{getPrototypeOf:Dm}=Object,ih=(n=>e=>{const t=AR.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),zr=n=>(n=n.toLowerCase(),e=>ih(e)===n),sh=n=>e=>typeof e===n,{isArray:Ha}=Array,ou=sh("undefined");function PR(n){return n!==null&&!ou(n)&&n.constructor!==null&&!ou(n.constructor)&&er(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Nw=zr("ArrayBuffer");function kR(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Nw(n.buffer),e}const xR=sh("string"),er=sh("function"),bw=sh("number"),oh=n=>n!==null&&typeof n=="object",NR=n=>n===!0||n===!1,Jc=n=>{if(ih(n)!=="object")return!1;const e=Dm(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},bR=zr("Date"),DR=zr("File"),OR=zr("Blob"),LR=zr("FileList"),MR=n=>oh(n)&&er(n.pipe),VR=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||er(n.append)&&((e=ih(n))==="formdata"||e==="object"&&er(n.toString)&&n.toString()==="[object FormData]"))},FR=zr("URLSearchParams"),[UR,jR,BR,zR]=["ReadableStream","Request","Response","Headers"].map(zr),$R=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,s;if(typeof n!="object"&&(n=[n]),Ha(n))for(r=0,s=n.length;r<s;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(r=0;r<u;r++)d=a[r],e.call(null,n[d],d,n)}}function Dw(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,s;for(;r-- >0;)if(s=t[r],e===s.toLowerCase())return s;return null}const Eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ow=n=>!ou(n)&&n!==Eo;function Qp(){const{caseless:n}=Ow(this)&&this||{},e={},t=(r,s)=>{const a=n&&Dw(e,s)||s;Jc(e[a])&&Jc(r)?e[a]=Qp(e[a],r):Jc(r)?e[a]=Qp({},r):Ha(r)?e[a]=r.slice():e[a]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&yu(arguments[r],t);return e}const HR=(n,e,t,{allOwnKeys:r}={})=>(yu(e,(s,a)=>{t&&er(s)?n[a]=xw(s,t):n[a]=s},{allOwnKeys:r}),n),WR=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),qR=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},KR=(n,e,t,r)=>{let s,a,u;const d={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)u=s[a],(!r||r(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Dm(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},GR=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},QR=n=>{if(!n)return null;if(Ha(n))return n;let e=n.length;if(!bw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},YR=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Dm(Uint8Array)),JR=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=r.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},XR=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},ZR=zr("HTMLFormElement"),eC=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,s){return r.toUpperCase()+s}),g0=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),tC=zr("RegExp"),Lw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};yu(t,(s,a)=>{let u;(u=e(s,a,n))!==!1&&(r[a]=u||s)}),Object.defineProperties(n,r)},nC=n=>{Lw(n,(e,t)=>{if(er(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(er(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},rC=(n,e)=>{const t={},r=s=>{s.forEach(a=>{t[a]=!0})};return Ha(n)?r(n):r(String(n).split(e)),t},iC=()=>{},sC=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,Tp="abcdefghijklmnopqrstuvwxyz",y0="0123456789",Mw={DIGIT:y0,ALPHA:Tp,ALPHA_DIGIT:Tp+Tp.toUpperCase()+y0},oC=(n=16,e=Mw.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function aC(n){return!!(n&&er(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const lC=n=>{const e=new Array(10),t=(r,s)=>{if(oh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const a=Ha(r)?[]:{};return yu(r,(u,d)=>{const f=t(u,s+1);!ou(f)&&(a[d]=f)}),e[s]=void 0,a}}return r};return t(n,0)},uC=zr("AsyncFunction"),cC=n=>n&&(oh(n)||er(n))&&er(n.then)&&er(n.catch),Vw=((n,e)=>n?setImmediate:e?((t,r)=>(Eo.addEventListener("message",({source:s,data:a})=>{s===Eo&&a===t&&r.length&&r.shift()()},!1),s=>{r.push(s),Eo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",er(Eo.postMessage)),dC=typeof queueMicrotask<"u"?queueMicrotask.bind(Eo):typeof process<"u"&&process.nextTick||Vw,Z={isArray:Ha,isArrayBuffer:Nw,isBuffer:PR,isFormData:VR,isArrayBufferView:kR,isString:xR,isNumber:bw,isBoolean:NR,isObject:oh,isPlainObject:Jc,isReadableStream:UR,isRequest:jR,isResponse:BR,isHeaders:zR,isUndefined:ou,isDate:bR,isFile:DR,isBlob:OR,isRegExp:tC,isFunction:er,isStream:MR,isURLSearchParams:FR,isTypedArray:YR,isFileList:LR,forEach:yu,merge:Qp,extend:HR,trim:$R,stripBOM:WR,inherits:qR,toFlatObject:KR,kindOf:ih,kindOfTest:zr,endsWith:GR,toArray:QR,forEachEntry:JR,matchAll:XR,isHTMLForm:ZR,hasOwnProperty:g0,hasOwnProp:g0,reduceDescriptors:Lw,freezeMethods:nC,toObjectSet:rC,toCamelCase:eC,noop:iC,toFiniteNumber:sC,findKey:Dw,global:Eo,isContextDefined:Ow,ALPHABET:Mw,generateString:oC,isSpecCompliantForm:aC,toJSONObject:lC,isAsyncFn:uC,isThenable:cC,setImmediate:Vw,asap:dC};function ze(n,e,t,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Z.inherits(ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const Fw=ze.prototype,Uw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Uw[n]={value:n}});Object.defineProperties(ze,Uw);Object.defineProperty(Fw,"isAxiosError",{value:!0});ze.from=(n,e,t,r,s,a)=>{const u=Object.create(Fw);return Z.toFlatObject(n,u,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),ze.call(u,n.message,e,t,r,s),u.cause=n,u.name=n.name,a&&Object.assign(u,a),u};const hC=null;function Yp(n){return Z.isPlainObject(n)||Z.isArray(n)}function jw(n){return Z.endsWith(n,"[]")?n.slice(0,-2):n}function v0(n,e,t){return n?n.concat(e).map(function(s,a){return s=jw(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function fC(n){return Z.isArray(n)&&!n.some(Yp)}const pC=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function ah(n,e,t){if(!Z.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Z.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,P){return!Z.isUndefined(P[D])});const r=t.metaTokens,s=t.visitor||v,a=t.dots,u=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(s))throw new TypeError("visitor must be a function");function m(C){if(C===null)return"";if(Z.isDate(C))return C.toISOString();if(!f&&Z.isBlob(C))throw new ze("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(C)||Z.isTypedArray(C)?f&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function v(C,D,P){let F=C;if(C&&!P&&typeof C=="object"){if(Z.endsWith(D,"{}"))D=r?D:D.slice(0,-2),C=JSON.stringify(C);else if(Z.isArray(C)&&fC(C)||(Z.isFileList(C)||Z.endsWith(D,"[]"))&&(F=Z.toArray(C)))return D=jw(D),F.forEach(function(K,te){!(Z.isUndefined(K)||K===null)&&e.append(u===!0?v0([D],te,a):u===null?D:D+"[]",m(K))}),!1}return Yp(C)?!0:(e.append(v0(P,D,a),m(C)),!1)}const w=[],T=Object.assign(pC,{defaultVisitor:v,convertValue:m,isVisitable:Yp});function R(C,D){if(!Z.isUndefined(C)){if(w.indexOf(C)!==-1)throw Error("Circular reference detected in "+D.join("."));w.push(C),Z.forEach(C,function(F,Q){(!(Z.isUndefined(F)||F===null)&&s.call(e,F,Z.isString(Q)?Q.trim():Q,D,T))===!0&&R(F,D?D.concat(Q):[Q])}),w.pop()}}if(!Z.isObject(n))throw new TypeError("data must be an object");return R(n),e}function _0(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Om(n,e){this._pairs=[],n&&ah(n,this,e)}const Bw=Om.prototype;Bw.append=function(e,t){this._pairs.push([e,t])};Bw.toString=function(e){const t=e?function(r){return e.call(this,r,_0)}:_0;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function mC(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zw(n,e,t){if(!e)return n;const r=t&&t.encode||mC;Z.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=Z.isURLSearchParams(e)?e.toString():new Om(e,t).toString(r),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class w0{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(r){r!==null&&e(r)})}}const $w={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gC=typeof URLSearchParams<"u"?URLSearchParams:Om,yC=typeof FormData<"u"?FormData:null,vC=typeof Blob<"u"?Blob:null,_C={isBrowser:!0,classes:{URLSearchParams:gC,FormData:yC,Blob:vC},protocols:["http","https","file","blob","url","data"]},Lm=typeof window<"u"&&typeof document<"u",Jp=typeof navigator=="object"&&navigator||void 0,wC=Lm&&(!Jp||["ReactNative","NativeScript","NS"].indexOf(Jp.product)<0),EC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",TC=Lm&&window.location.href||"http://localhost",SC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lm,hasStandardBrowserEnv:wC,hasStandardBrowserWebWorkerEnv:EC,navigator:Jp,origin:TC},Symbol.toStringTag,{value:"Module"})),wn={...SC,..._C};function IC(n,e){return ah(n,new wn.classes.URLSearchParams,Object.assign({visitor:function(t,r,s,a){return wn.isNode&&Z.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function RC(n){return Z.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function CC(n){const e={},t=Object.keys(n);let r;const s=t.length;let a;for(r=0;r<s;r++)a=t[r],e[a]=n[a];return e}function Hw(n){function e(t,r,s,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),f=a>=t.length;return u=!u&&Z.isArray(s)?s.length:u,f?(Z.hasOwnProp(s,u)?s[u]=[s[u],r]:s[u]=r,!d):((!s[u]||!Z.isObject(s[u]))&&(s[u]=[]),e(t,r,s[u],a)&&Z.isArray(s[u])&&(s[u]=CC(s[u])),!d)}if(Z.isFormData(n)&&Z.isFunction(n.entries)){const t={};return Z.forEachEntry(n,(r,s)=>{e(RC(r),s,t,0)}),t}return null}function AC(n,e,t){if(Z.isString(n))try{return(e||JSON.parse)(n),Z.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const vu={transitional:$w,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,a=Z.isObject(e);if(a&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return s?JSON.stringify(Hw(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return IC(e,this.formSerializer).toString();if((d=Z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return ah(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),AC(e)):e}],transformResponse:[function(e){const t=this.transitional||vu.transitional,r=t&&t.forcedJSONParsing,s=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(r&&!this.responseType||s)){const u=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(u)throw d.name==="SyntaxError"?ze.from(d,ze.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wn.classes.FormData,Blob:wn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],n=>{vu.headers[n]={}});const PC=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kC=n=>{const e={};let t,r,s;return n&&n.split(`
`).forEach(function(u){s=u.indexOf(":"),t=u.substring(0,s).trim().toLowerCase(),r=u.substring(s+1).trim(),!(!t||e[t]&&PC[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},E0=Symbol("internals");function Ll(n){return n&&String(n).trim().toLowerCase()}function Xc(n){return n===!1||n==null?n:Z.isArray(n)?n.map(Xc):String(n)}function xC(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const NC=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Sp(n,e,t,r,s){if(Z.isFunction(r))return r.call(this,e,t);if(s&&(e=t),!!Z.isString(e)){if(Z.isString(r))return e.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(e)}}function bC(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function DC(n,e){const t=Z.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(s,a,u){return this[r].call(this,e,s,a,u)},configurable:!0})})}class jn{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function a(d,f,m){const v=Ll(f);if(!v)throw new Error("header name must be a non-empty string");const w=Z.findKey(s,v);(!w||s[w]===void 0||m===!0||m===void 0&&s[w]!==!1)&&(s[w||f]=Xc(d))}const u=(d,f)=>Z.forEach(d,(m,v)=>a(m,v,f));if(Z.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(Z.isString(e)&&(e=e.trim())&&!NC(e))u(kC(e),t);else if(Z.isHeaders(e))for(const[d,f]of e.entries())a(f,d,r);else e!=null&&a(t,e,r);return this}get(e,t){if(e=Ll(e),e){const r=Z.findKey(this,e);if(r){const s=this[r];if(!t)return s;if(t===!0)return xC(s);if(Z.isFunction(t))return t.call(this,s,r);if(Z.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ll(e),e){const r=Z.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Sp(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let s=!1;function a(u){if(u=Ll(u),u){const d=Z.findKey(r,u);d&&(!t||Sp(r,r[d],d,t))&&(delete r[d],s=!0)}}return Z.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const a=t[r];(!e||Sp(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,r={};return Z.forEach(this,(s,a)=>{const u=Z.findKey(r,a);if(u){t[u]=Xc(s),delete t[a];return}const d=e?bC(a):String(a).trim();d!==a&&delete t[a],t[d]=Xc(s),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Z.forEach(this,(r,s)=>{r!=null&&r!==!1&&(t[s]=e&&Z.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[E0]=this[E0]={accessors:{}}).accessors,s=this.prototype;function a(u){const d=Ll(u);r[d]||(DC(s,u),r[d]=!0)}return Z.isArray(e)?e.forEach(a):a(e),this}}jn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(jn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Z.freezeMethods(jn);function Ip(n,e){const t=this||vu,r=e||t,s=jn.from(r.headers);let a=r.data;return Z.forEach(n,function(d){a=d.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function Ww(n){return!!(n&&n.__CANCEL__)}function Wa(n,e,t){ze.call(this,n??"canceled",ze.ERR_CANCELED,e,t),this.name="CanceledError"}Z.inherits(Wa,ze,{__CANCEL__:!0});function qw(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new ze("Request failed with status code "+t.status,[ze.ERR_BAD_REQUEST,ze.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function OC(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function LC(n,e){n=n||10;const t=new Array(n),r=new Array(n);let s=0,a=0,u;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),v=r[a];u||(u=m),t[s]=f,r[s]=m;let w=a,T=0;for(;w!==s;)T+=t[w++],w=w%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),m-u<e)return;const R=v&&m-v;return R?Math.round(T*1e3/R):void 0}}function MC(n,e){let t=0,r=1e3/e,s,a;const u=(m,v=Date.now())=>{t=v,s=null,a&&(clearTimeout(a),a=null),n.apply(null,m)};return[(...m)=>{const v=Date.now(),w=v-t;w>=r?u(m,v):(s=m,a||(a=setTimeout(()=>{a=null,u(s)},r-w)))},()=>s&&u(s)]}const xd=(n,e,t=3)=>{let r=0;const s=LC(50,250);return MC(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,f=u-r,m=s(f),v=u<=d;r=u;const w={loaded:u,total:d,progress:d?u/d:void 0,bytes:f,rate:m||void 0,estimated:m&&d&&v?(d-u)/m:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(w)},t)},T0=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},S0=n=>(...e)=>Z.asap(()=>n(...e)),VC=wn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,wn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(wn.origin),wn.navigator&&/(msie|trident)/i.test(wn.navigator.userAgent)):()=>!0,FC=wn.hasStandardBrowserEnv?{write(n,e,t,r,s,a){const u=[n+"="+encodeURIComponent(e)];Z.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),Z.isString(r)&&u.push("path="+r),Z.isString(s)&&u.push("domain="+s),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function UC(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function jC(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Kw(n,e){return n&&!UC(e)?jC(n,e):e}const I0=n=>n instanceof jn?{...n}:n;function ko(n,e){e=e||{};const t={};function r(m,v,w,T){return Z.isPlainObject(m)&&Z.isPlainObject(v)?Z.merge.call({caseless:T},m,v):Z.isPlainObject(v)?Z.merge({},v):Z.isArray(v)?v.slice():v}function s(m,v,w,T){if(Z.isUndefined(v)){if(!Z.isUndefined(m))return r(void 0,m,w,T)}else return r(m,v,w,T)}function a(m,v){if(!Z.isUndefined(v))return r(void 0,v)}function u(m,v){if(Z.isUndefined(v)){if(!Z.isUndefined(m))return r(void 0,m)}else return r(void 0,v)}function d(m,v,w){if(w in e)return r(m,v);if(w in n)return r(void 0,m)}const f={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(m,v,w)=>s(I0(m),I0(v),w,!0)};return Z.forEach(Object.keys(Object.assign({},n,e)),function(v){const w=f[v]||s,T=w(n[v],e[v],v);Z.isUndefined(T)&&w!==d||(t[v]=T)}),t}const Gw=n=>{const e=ko({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:u,auth:d}=e;e.headers=u=jn.from(u),e.url=zw(Kw(e.baseURL,e.url),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(Z.isFormData(t)){if(wn.hasStandardBrowserEnv||wn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((f=u.getContentType())!==!1){const[m,...v]=f?f.split(";").map(w=>w.trim()).filter(Boolean):[];u.setContentType([m||"multipart/form-data",...v].join("; "))}}if(wn.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(e)),r||r!==!1&&VC(e.url))){const m=s&&a&&FC.read(a);m&&u.set(s,m)}return e},BC=typeof XMLHttpRequest<"u",zC=BC&&function(n){return new Promise(function(t,r){const s=Gw(n);let a=s.data;const u=jn.from(s.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:m}=s,v,w,T,R,C;function D(){R&&R(),C&&C(),s.cancelToken&&s.cancelToken.unsubscribe(v),s.signal&&s.signal.removeEventListener("abort",v)}let P=new XMLHttpRequest;P.open(s.method.toUpperCase(),s.url,!0),P.timeout=s.timeout;function F(){if(!P)return;const K=jn.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),L={data:!d||d==="text"||d==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:K,config:n,request:P};qw(function(N){t(N),D()},function(N){r(N),D()},L),P=null}"onloadend"in P?P.onloadend=F:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(F)},P.onabort=function(){P&&(r(new ze("Request aborted",ze.ECONNABORTED,n,P)),P=null)},P.onerror=function(){r(new ze("Network Error",ze.ERR_NETWORK,n,P)),P=null},P.ontimeout=function(){let te=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const L=s.transitional||$w;s.timeoutErrorMessage&&(te=s.timeoutErrorMessage),r(new ze(te,L.clarifyTimeoutError?ze.ETIMEDOUT:ze.ECONNABORTED,n,P)),P=null},a===void 0&&u.setContentType(null),"setRequestHeader"in P&&Z.forEach(u.toJSON(),function(te,L){P.setRequestHeader(L,te)}),Z.isUndefined(s.withCredentials)||(P.withCredentials=!!s.withCredentials),d&&d!=="json"&&(P.responseType=s.responseType),m&&([T,C]=xd(m,!0),P.addEventListener("progress",T)),f&&P.upload&&([w,R]=xd(f),P.upload.addEventListener("progress",w),P.upload.addEventListener("loadend",R)),(s.cancelToken||s.signal)&&(v=K=>{P&&(r(!K||K.type?new Wa(null,n,P):K),P.abort(),P=null)},s.cancelToken&&s.cancelToken.subscribe(v),s.signal&&(s.signal.aborted?v():s.signal.addEventListener("abort",v)));const Q=OC(s.url);if(Q&&wn.protocols.indexOf(Q)===-1){r(new ze("Unsupported protocol "+Q+":",ze.ERR_BAD_REQUEST,n));return}P.send(a||null)})},$C=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,s;const a=function(m){if(!s){s=!0,d();const v=m instanceof Error?m:this.reason;r.abort(v instanceof ze?v:new Wa(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,a(new ze(`timeout ${e} of ms exceeded`,ze.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(a):m.removeEventListener("abort",a)}),n=null)};n.forEach(m=>m.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>Z.asap(d),f}},HC=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,s;for(;r<t;)s=r+e,yield n.slice(r,s),r=s},WC=async function*(n,e){for await(const t of qC(n))yield*HC(t,e)},qC=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},R0=(n,e,t,r)=>{const s=WC(n,e);let a=0,u,d=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:v}=await s.next();if(m){d(),f.close();return}let w=v.byteLength;if(t){let T=a+=w;t(T)}f.enqueue(new Uint8Array(v))}catch(m){throw d(m),m}},cancel(f){return d(f),s.return()}},{highWaterMark:2})},lh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Qw=lh&&typeof ReadableStream=="function",KC=lh&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Yw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},GC=Qw&&Yw(()=>{let n=!1;const e=new Request(wn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),C0=64*1024,Xp=Qw&&Yw(()=>Z.isReadableStream(new Response("").body)),Nd={stream:Xp&&(n=>n.body)};lh&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Nd[e]&&(Nd[e]=Z.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new ze(`Response type '${e}' is not supported`,ze.ERR_NOT_SUPPORT,r)})})})(new Response);const QC=async n=>{if(n==null)return 0;if(Z.isBlob(n))return n.size;if(Z.isSpecCompliantForm(n))return(await new Request(wn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(n)||Z.isArrayBuffer(n))return n.byteLength;if(Z.isURLSearchParams(n)&&(n=n+""),Z.isString(n))return(await KC(n)).byteLength},YC=async(n,e)=>{const t=Z.toFiniteNumber(n.getContentLength());return t??QC(e)},JC=lh&&(async n=>{let{url:e,method:t,data:r,signal:s,cancelToken:a,timeout:u,onDownloadProgress:d,onUploadProgress:f,responseType:m,headers:v,withCredentials:w="same-origin",fetchOptions:T}=Gw(n);m=m?(m+"").toLowerCase():"text";let R=$C([s,a&&a.toAbortSignal()],u),C;const D=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let P;try{if(f&&GC&&t!=="get"&&t!=="head"&&(P=await YC(v,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),re;if(Z.isFormData(r)&&(re=L.headers.get("content-type"))&&v.setContentType(re),L.body){const[N,S]=T0(P,xd(S0(f)));r=R0(L.body,C0,N,S)}}Z.isString(w)||(w=w?"include":"omit");const F="credentials"in Request.prototype;C=new Request(e,{...T,signal:R,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:F?w:void 0});let Q=await fetch(C);const K=Xp&&(m==="stream"||m==="response");if(Xp&&(d||K&&D)){const L={};["status","statusText","headers"].forEach(k=>{L[k]=Q[k]});const re=Z.toFiniteNumber(Q.headers.get("content-length")),[N,S]=d&&T0(re,xd(S0(d),!0))||[];Q=new Response(R0(Q.body,C0,N,()=>{S&&S(),D&&D()}),L)}m=m||"text";let te=await Nd[Z.findKey(Nd,m)||"text"](Q,n);return!K&&D&&D(),await new Promise((L,re)=>{qw(L,re,{data:te,headers:jn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:n,request:C})})}catch(F){throw D&&D(),F&&F.name==="TypeError"&&/fetch/i.test(F.message)?Object.assign(new ze("Network Error",ze.ERR_NETWORK,n,C),{cause:F.cause||F}):ze.from(F,F&&F.code,n,C)}}),Zp={http:hC,xhr:zC,fetch:JC};Z.forEach(Zp,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const A0=n=>`- ${n}`,XC=n=>Z.isFunction(n)||n===null||n===!1,Jw={getAdapter:n=>{n=Z.isArray(n)?n:[n];const{length:e}=n;let t,r;const s={};for(let a=0;a<e;a++){t=n[a];let u;if(r=t,!XC(t)&&(r=Zp[(u=String(t)).toLowerCase()],r===void 0))throw new ze(`Unknown adapter '${u}'`);if(r)break;s[u||"#"+a]=r}if(!r){const a=Object.entries(s).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=e?a.length>1?`since :
`+a.map(A0).join(`
`):" "+A0(a[0]):"as no adapter specified";throw new ze("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:Zp};function Rp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Wa(null,n)}function P0(n){return Rp(n),n.headers=jn.from(n.headers),n.data=Ip.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Jw.getAdapter(n.adapter||vu.adapter)(n).then(function(r){return Rp(n),r.data=Ip.call(n,n.transformResponse,r),r.headers=jn.from(r.headers),r},function(r){return Ww(r)||(Rp(n),r&&r.response&&(r.response.data=Ip.call(n,n.transformResponse,r.response),r.response.headers=jn.from(r.response.headers))),Promise.reject(r)})}const Xw="1.7.8",uh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{uh[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const k0={};uh.transitional=function(e,t,r){function s(a,u){return"[Axios v"+Xw+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,d)=>{if(e===!1)throw new ze(s(u," has been removed"+(t?" in "+t:"")),ze.ERR_DEPRECATED);return t&&!k0[u]&&(k0[u]=!0,console.warn(s(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};uh.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function ZC(n,e,t){if(typeof n!="object")throw new ze("options must be an object",ze.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let s=r.length;for(;s-- >0;){const a=r[s],u=e[a];if(u){const d=n[a],f=d===void 0||u(d,a,n);if(f!==!0)throw new ze("option "+a+" must be "+f,ze.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ze("Unknown option "+a,ze.ERR_BAD_OPTION)}}const Zc={assertOptions:ZC,validators:uh},ii=Zc.validators;class Io{constructor(e){this.defaults=e,this.interceptors={request:new w0,response:new w0}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ko(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:a}=t;r!==void 0&&Zc.assertOptions(r,{silentJSONParsing:ii.transitional(ii.boolean),forcedJSONParsing:ii.transitional(ii.boolean),clarifyTimeoutError:ii.transitional(ii.boolean)},!1),s!=null&&(Z.isFunction(s)?t.paramsSerializer={serialize:s}:Zc.assertOptions(s,{encode:ii.function,serialize:ii.function},!0)),Zc.assertOptions(t,{baseUrl:ii.spelling("baseURL"),withXsrfToken:ii.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&Z.merge(a.common,a[t.method]);a&&Z.forEach(["delete","get","head","post","put","patch","common"],C=>{delete a[C]}),t.headers=jn.concat(u,a);const d=[];let f=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(t)===!1||(f=f&&D.synchronous,d.unshift(D.fulfilled,D.rejected))});const m=[];this.interceptors.response.forEach(function(D){m.push(D.fulfilled,D.rejected)});let v,w=0,T;if(!f){const C=[P0.bind(this),void 0];for(C.unshift.apply(C,d),C.push.apply(C,m),T=C.length,v=Promise.resolve(t);w<T;)v=v.then(C[w++],C[w++]);return v}T=d.length;let R=t;for(w=0;w<T;){const C=d[w++],D=d[w++];try{R=C(R)}catch(P){D.call(this,P);break}}try{v=P0.call(this,R)}catch(C){return Promise.reject(C)}for(w=0,T=m.length;w<T;)v=v.then(m[w++],m[w++]);return v}getUri(e){e=ko(this.defaults,e);const t=Kw(e.baseURL,e.url);return zw(t,e.params,e.paramsSerializer)}}Z.forEach(["delete","get","head","options"],function(e){Io.prototype[e]=function(t,r){return this.request(ko(r||{},{method:e,url:t,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function t(r){return function(a,u,d){return this.request(ko(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}Io.prototype[e]=t(),Io.prototype[e+"Form"]=t(!0)});class Mm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const u=new Promise(d=>{r.subscribe(d),a=d}).then(s);return u.cancel=function(){r.unsubscribe(a)},u},e(function(a,u,d){r.reason||(r.reason=new Wa(a,u,d),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Mm(function(s){e=s}),cancel:e}}}function e2(n){return function(t){return n.apply(null,t)}}function t2(n){return Z.isObject(n)&&n.isAxiosError===!0}const em={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(em).forEach(([n,e])=>{em[e]=n});function Zw(n){const e=new Io(n),t=xw(Io.prototype.request,e);return Z.extend(t,Io.prototype,e,{allOwnKeys:!0}),Z.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Zw(ko(n,s))},t}const Vt=Zw(vu);Vt.Axios=Io;Vt.CanceledError=Wa;Vt.CancelToken=Mm;Vt.isCancel=Ww;Vt.VERSION=Xw;Vt.toFormData=ah;Vt.AxiosError=ze;Vt.Cancel=Vt.CanceledError;Vt.all=function(e){return Promise.all(e)};Vt.spread=e2;Vt.isAxiosError=t2;Vt.mergeConfig=ko;Vt.AxiosHeaders=jn;Vt.formToJSON=n=>Hw(Z.isHTMLForm(n)?new FormData(n):n);Vt.getAdapter=Jw.getAdapter;Vt.HttpStatusCode=em;Vt.default=Vt;const n2="https://api.themoviedb.org/3",Ca={movies:{popular:"/movie/popular",topRated:"/movie/top_rated",upcoming:"/movie/upcoming",details:n=>`/movie/${n}`},search:{movies:"/search/movie"},discover:{movies:"/discover/movie"}},qa=Vt.create({baseURL:n2,timeout:2e3});qa.interceptors.request.use(n=>{const e="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTEyYTNlN2FmYTRiMTU0YmM2NzA2MTVmZjAwYWU2OSIsIm5iZiI6MTczMjY1NjQzMS42ODUxNTUyLCJzdWIiOiI2NzQ2MjRjZTljMTU3NDk3OTA1MjlkZWYiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.J9VMxeLiIpSDJdb2eCnpG7gsNalD0r96c45dbSHnIaY";return n.headers.Authorization=`Bearer ${e}`,n},n=>(console.error("Request Interceptor Error:",n.message),Promise.reject(n)));const Vm=qa.get;qa.post;qa.put;qa.patch;qa.delete;const ed=async({endpoint:n=Ca.discover.movies,page:e,sortBy:t="popularity.desc",filters:r={}})=>{var s,a,u,d,f;try{const v={page:Number.isInteger(e)&&e>=1&&e<=500?e:1,language:"en-US",sort_by:t,with_genres:((s=r.genres)==null?void 0:s.map(T=>T.id).join(","))||void 0,"vote_average.gte":((a=r.ratingRange)==null?void 0:a.from)||void 0,"vote_average.lte":((u=r.ratingRange)==null?void 0:u.to)||void 0,"primary_release_date.gte":(d=r.yearRange)!=null&&d.from?`${r.yearRange.from}-01-01`:void 0,"primary_release_date.lte":(f=r.yearRange)!=null&&f.to?`${r.yearRange.to}-12-31`:void 0};return(await Vm(n,{params:v})).data}catch(m){throw console.error("Error fetching movies:",m.message),new Error("Failed to fetch movies. Please try again later.")}},r2=async n=>{try{if(!n)throw new Error("Movie ID is required");return(await Vm(Ca.movies.details(n),{params:{append_to_response:"credits",language:"en-US"}})).data}catch(e){throw console.error(`Error fetching details for movie ID ${n}:`,e.message),new Error("Failed to fetch movie details. Please try again later.")}},i2=async({query:n,page:e})=>{try{if(!n)throw new Error("Search query is required");const t=Number.isInteger(e)&&e>=1&&e<=500?e:1;return(await Vm(Ca.search.movies,{params:{query:n,page:t,language:"en-US"}})).data}catch(t){throw console.error("Error searching movies:",t.message),new Error("Failed to search for movies. Please try again later.")}},Yl=Wt("movies/fetchMovies",async({page:n=1,sortBy:e="popularity.desc",filters:t={}},{rejectWithValue:r})=>{try{return{...await ed({page:n,sortBy:e,filters:t}),currentPage:n}}catch(s){return r(s.message)}}),td=Wt("movies/fetchMovieDetails",async(n,{rejectWithValue:e})=>{try{return await r2(n)}catch(t){return e(t.message)}}),Jl=Wt("movies/fetchSearchMovies",async({query:n,page:e},{rejectWithValue:t})=>{try{return{...await i2({query:n,page:e}),query:n,currentPage:e}}catch(r){return t(r.message)}}),s2={list:[],details:null,searchResults:[],searchQuery:"",page:1,totalPages:0,loading:!1,error:null},eE=gu({name:"movies",initialState:s2,reducers:{clearMovies:n=>{n.list=[],n.page=1,n.totalPages=0,n.error=null},clearMovieDetails:n=>{n.details=null},clearSearchResults:n=>{n.searchResults=[],n.searchQuery="",n.error=null}},extraReducers:n=>{n.addCase(Yl.pending,e=>{e.loading=!0,e.error=null}).addCase(Yl.fulfilled,(e,t)=>{e.loading=!1,e.list=t.payload.results,e.page=t.payload.currentPage,e.totalPages=t.payload.total_pages}).addCase(Yl.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(td.pending,e=>{e.loading=!0,e.error=null}).addCase(td.fulfilled,(e,t)=>{e.loading=!1,e.details=t.payload}).addCase(td.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Jl.pending,e=>{e.loading=!0,e.error=null}).addCase(Jl.fulfilled,(e,t)=>{e.loading=!1,e.searchResults=t.payload.results,e.searchQuery=t.payload.query,e.page=t.payload.currentPage,e.totalPages=t.payload.total_pages}).addCase(Jl.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{clearMovies:T4,clearMovieDetails:o2,clearSearchResults:a2}=eE.actions,l2=eE.reducer;var x0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},u2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},nE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,R=m&63;f||(R=64,u||(T=64)),r.push(t[v],t[w],t[T],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):u2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||w==null)throw new c2;const T=a<<2|d>>4;if(r.push(T),m!==64){const R=d<<4&240|m>>2;if(r.push(R),w!==64){const C=m<<6&192|w;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class c2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d2=function(n){const e=tE(n);return nE.encodeByteArray(e,!0)},bd=function(n){return d2(n).replace(/\./g,"")},rE=function(n){try{return nE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=()=>h2().__FIREBASE_DEFAULTS__,p2=()=>{if(typeof process>"u"||typeof x0>"u")return;const n=x0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},m2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&rE(n[1]);return e&&JSON.parse(e)},ch=()=>{try{return f2()||p2()||m2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iE=n=>{var e,t;return(t=(e=ch())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},g2=n=>{const e=iE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sE=()=>{var n;return(n=ch())===null||n===void 0?void 0:n.config},oE=n=>{var e;return(e=ch())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y2=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bd(JSON.stringify(t)),bd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function w2(){var n;const e=(n=ch())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function S2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I2(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function R2(){return!w2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C2(){try{return typeof indexedDB=="object"}catch{return!1}}function A2(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="FirebaseError";class Wi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=P2,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?k2(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Wi(s,d,r)}}function k2(n,e){return n.replace(x2,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const x2=/\{\$([^}]+)}/g;function N2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dd(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(N0(a)&&N0(u)){if(!Dd(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function N0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function $l(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function b2(n,e){const t=new D2(n,e);return t.subscribe.bind(t)}class D2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");O2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Cp),s.error===void 0&&(s.error=Cp),s.complete===void 0&&(s.complete=Cp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n){return n&&n._delegate?n._delegate:n}class xo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new y2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V2(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M2(n){return n===_o?void 0:n}function V2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new L2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const U2={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},j2=qe.INFO,B2={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},z2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=B2[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=j2,this._logHandler=z2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const $2=(n,e)=>e.some(t=>n instanceof t);let b0,D0;function H2(){return b0||(b0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W2(){return D0||(D0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aE=new WeakMap,tm=new WeakMap,lE=new WeakMap,Ap=new WeakMap,Um=new WeakMap;function q2(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(bs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&aE.set(t,n)}).catch(()=>{}),Um.set(e,n),e}function K2(n){if(tm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});tm.set(n,e)}let nm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||lE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function G2(n){nm=n(nm)}function Q2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Pp(this),e,...t);return lE.set(r,e.sort?e.sort():[e]),bs(r)}:W2().includes(n)?function(...e){return n.apply(Pp(this),e),bs(aE.get(this))}:function(...e){return bs(n.apply(Pp(this),e))}}function Y2(n){return typeof n=="function"?Q2(n):(n instanceof IDBTransaction&&K2(n),$2(n,H2())?new Proxy(n,nm):n)}function bs(n){if(n instanceof IDBRequest)return q2(n);if(Ap.has(n))return Ap.get(n);const e=Y2(n);return e!==n&&(Ap.set(n,e),Um.set(e,n)),e}const Pp=n=>Um.get(n);function J2(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=bs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(bs(u.result),f.oldVersion,f.newVersion,bs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const X2=["get","getKey","getAll","getAllKeys","count"],Z2=["put","add","delete","clear"],kp=new Map;function O0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kp.get(e))return kp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Z2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X2.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return kp.set(e,a),a}G2(n=>({...n,get:(e,t,r)=>O0(e,t)||n.get(e,t,r),has:(e,t)=>!!O0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function tA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rm="@firebase/app",L0="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new Fm("@firebase/app"),nA="@firebase/app-compat",rA="@firebase/analytics-compat",iA="@firebase/analytics",sA="@firebase/app-check-compat",oA="@firebase/app-check",aA="@firebase/auth",lA="@firebase/auth-compat",uA="@firebase/database",cA="@firebase/data-connect",dA="@firebase/database-compat",hA="@firebase/functions",fA="@firebase/functions-compat",pA="@firebase/installations",mA="@firebase/installations-compat",gA="@firebase/messaging",yA="@firebase/messaging-compat",vA="@firebase/performance",_A="@firebase/performance-compat",wA="@firebase/remote-config",EA="@firebase/remote-config-compat",TA="@firebase/storage",SA="@firebase/storage-compat",IA="@firebase/firestore",RA="@firebase/vertexai",CA="@firebase/firestore-compat",AA="firebase",PA="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",kA={[rm]:"fire-core",[nA]:"fire-core-compat",[iA]:"fire-analytics",[rA]:"fire-analytics-compat",[oA]:"fire-app-check",[sA]:"fire-app-check-compat",[aA]:"fire-auth",[lA]:"fire-auth-compat",[uA]:"fire-rtdb",[cA]:"fire-data-connect",[dA]:"fire-rtdb-compat",[hA]:"fire-fn",[fA]:"fire-fn-compat",[pA]:"fire-iid",[mA]:"fire-iid-compat",[gA]:"fire-fcm",[yA]:"fire-fcm-compat",[vA]:"fire-perf",[_A]:"fire-perf-compat",[wA]:"fire-rc",[EA]:"fire-rc-compat",[TA]:"fire-gcs",[SA]:"fire-gcs-compat",[IA]:"fire-fst",[CA]:"fire-fst-compat",[RA]:"fire-vertex","fire-js":"fire-js",[AA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Map,xA=new Map,sm=new Map;function M0(n,e){try{n.container.addComponent(e)}catch(t){ji.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Oa(n){const e=n.name;if(sm.has(e))return ji.debug(`There were multiple attempts to register component ${e}.`),!1;sm.set(e,n);for(const t of Od.values())M0(t,n);for(const t of xA.values())M0(t,n);return!0}function jm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function si(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new _u("app","Firebase",NA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=PA;function uE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:im,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ds.create("bad-app-name",{appName:String(s)});if(t||(t=sE()),!t)throw Ds.create("no-options");const a=Od.get(s);if(a){if(Dd(t,a.options)&&Dd(r,a.config))return a;throw Ds.create("duplicate-app",{appName:s})}const u=new F2(s);for(const f of sm.values())u.addComponent(f);const d=new bA(t,r,u);return Od.set(s,d),d}function cE(n=im){const e=Od.get(n);if(!e&&n===im&&sE())return uE();if(!e)throw Ds.create("no-app",{appName:n});return e}function Os(n,e,t){var r;let s=(r=kA[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ji.warn(d.join(" "));return}Oa(new xo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="firebase-heartbeat-database",OA=1,au="firebase-heartbeat-store";let xp=null;function dE(){return xp||(xp=J2(DA,OA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(au)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ds.create("idb-open",{originalErrorMessage:n.message})})),xp}async function LA(n){try{const t=(await dE()).transaction(au),r=await t.objectStore(au).get(hE(n));return await t.done,r}catch(e){if(e instanceof Wi)ji.warn(e.message);else{const t=Ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ji.warn(t.message)}}}async function V0(n,e){try{const r=(await dE()).transaction(au,"readwrite");await r.objectStore(au).put(e,hE(n)),await r.done}catch(t){if(t instanceof Wi)ji.warn(t.message);else{const r=Ds.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ji.warn(r.message)}}}function hE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1024,VA=30*24*60*60*1e3;class FA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=VA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=F0(),{heartbeatsToSend:r,unsentEntries:s}=UA(this._heartbeatsCache.heartbeats),a=bd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ji.warn(t),""}}}function F0(){return new Date().toISOString().substring(0,10)}function UA(n,e=MA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),U0(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),U0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class jA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C2()?A2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await LA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return V0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return V0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function U0(n){return bd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(n){Oa(new xo("platform-logger",e=>new eA(e),"PRIVATE")),Oa(new xo("heartbeat",e=>new FA(e),"PRIVATE")),Os(rm,L0,n),Os(rm,L0,"esm2017"),Os("fire-js","")}BA("");var zA="firebase",$A="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(zA,$A,"app");function Bm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function fE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HA=fE,pE=new _u("auth","Firebase",fE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Fm("@firebase/auth");function WA(n,...e){Ld.logLevel<=qe.WARN&&Ld.warn(`Auth (${Ka}): ${n}`,...e)}function nd(n,...e){Ld.logLevel<=qe.ERROR&&Ld.error(`Auth (${Ka}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(n,...e){throw zm(n,...e)}function ai(n,...e){return zm(n,...e)}function mE(n,e,t){const r=Object.assign(Object.assign({},HA()),{[e]:t});return new _u("auth","Firebase",r).create(e,{appName:n.name})}function Vi(n){return mE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pE.create(n,...e)}function De(n,e,...t){if(!n)throw zm(e,...t)}function Oi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw nd(e),new Error(e)}function Bi(n,e){n||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function qA(){return j0()==="http:"||j0()==="https:"}function j0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qA()||T2()||"connection"in navigator)?navigator.onLine:!0}function GA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bi(t>e,"Short delay should be less than long delay!"),this.isMobile=_2()||S2()}get(){return KA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n,e){Bi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new Eu(3e4,6e4);function $s(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qi(n,e,t,r,s={}){return yE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=wu(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return E2()||(m.referrerPolicy="no-referrer"),gE.fetch()(vE(n,n.config.apiHost,t,d),m)})}async function yE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},QA),e);try{const s=new XA(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw $c(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw $c(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw $c(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw $c(n,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw mE(n,v,m);Ur(n,v)}}catch(s){if(s instanceof Wi)throw s;Ur(n,"network-request-failed",{message:String(s)})}}async function Tu(n,e,t,r,s={}){const a=await qi(n,e,t,r,s);return"mfaPendingCredential"in a&&Ur(n,"multi-factor-auth-required",{_serverResponse:a}),a}function vE(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?$m(n.config,s):`${n.config.apiScheme}://${s}`}function JA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ai(this.auth,"network-request-failed")),YA.get())})}}function $c(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ai(n,e,r);return s.customData._tokenResponse=t,s}function B0(n){return n!==void 0&&n.enterprise!==void 0}class ZA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eP(n,e){return qi(n,"GET","/v2/recaptchaConfig",$s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(n,e){return qi(n,"POST","/v1/accounts:delete",e)}async function _E(n,e){return qi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nP(n,e=!1){const t=Ft(n),r=await t.getIdToken(e),s=Hm(r);De(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Xl(Np(s.auth_time)),issuedAtTime:Xl(Np(s.iat)),expirationTime:Xl(Np(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Np(n){return Number(n)*1e3}function Hm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{const s=rE(t);return s?JSON.parse(s):(nd("Failed to decode base64 JWT payload"),null)}catch(s){return nd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function z0(n){const e=Hm(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wi&&rP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function rP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(n){var e;const t=n.auth,r=await n.getIdToken(),s=await La(n,_E(t,{idToken:r}));De(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?wE(a.providerUserInfo):[],d=oP(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new am(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function sP(n){const e=Ft(n);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oP(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function wE(n){return n.map(e=>{var{providerId:t}=e,r=Bm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(n,e){const t=await yE(n,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=vE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",gE.fetch()(u,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lP(n,e){return qi(n,"POST","/v2/accounts:revokeToken",$s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=z0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await aP(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new Aa;return r&&(De(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(De(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Aa,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Li{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Bm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new am(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await La(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nP(this,e)}reload(){return sP(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(si(this.auth.app))return Promise.reject(Vi(this.auth));const e=await this.getIdToken();return await La(this,tP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,C=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(d=t.tenantId)!==null&&d!==void 0?d:void 0,P=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,F=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:K,emailVerified:te,isAnonymous:L,providerData:re,stsTokenManager:N}=t;De(K&&N,e,"internal-error");const S=Aa.fromJSON(this.name,N);De(typeof K=="string",e,"internal-error"),Ss(w,e.name),Ss(T,e.name),De(typeof te=="boolean",e,"internal-error"),De(typeof L=="boolean",e,"internal-error"),Ss(R,e.name),Ss(C,e.name),Ss(D,e.name),Ss(P,e.name),Ss(F,e.name),Ss(Q,e.name);const k=new Li({uid:K,auth:e,email:T,emailVerified:te,displayName:w,isAnonymous:L,photoURL:C,phoneNumber:R,tenantId:D,stsTokenManager:S,createdAt:F,lastLoginAt:Q});return re&&Array.isArray(re)&&(k.providerData=re.map(O=>Object.assign({},O))),P&&(k._redirectEventId=P),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new Aa;s.updateFromServerResponse(t);const a=new Li({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Md(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];De(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?wE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new Aa;d.updateFromIdToken(r);const f=new Li({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new am(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;function Mi(n){Bi(n instanceof Function,"Expected a class definition");let e=$0.get(n);return e?(Bi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}EE.type="NONE";const H0=EE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(n,e,t){return`firebase:${n}:${e}:${t}`}class Pa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=rd(this.userKey,s.apiKey,a),this.fullPersistenceKey=rd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Pa(Mi(H0),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Mi(H0);const u=rd(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){const w=Li._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Pa(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Pa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AE(e))return"Blackberry";if(PE(e))return"Webos";if(SE(e))return"Safari";if((e.includes("chrome/")||IE(e))&&!e.includes("edge/"))return"Chrome";if(CE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TE(n=En()){return/firefox\//i.test(n)}function SE(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IE(n=En()){return/crios\//i.test(n)}function RE(n=En()){return/iemobile/i.test(n)}function CE(n=En()){return/android/i.test(n)}function AE(n=En()){return/blackberry/i.test(n)}function PE(n=En()){return/webos/i.test(n)}function Wm(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uP(n=En()){var e;return Wm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cP(){return I2()&&document.documentMode===10}function kE(n=En()){return Wm(n)||CE(n)||PE(n)||AE(n)||/windows phone/i.test(n)||RE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n,e=[]){let t;switch(n){case"Browser":t=W0(En());break;case"Worker":t=`${W0(En())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ka}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(n,e={}){return qi(n,"GET","/v2/passwordPolicy",$s(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=6;class pP{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:fP,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q0(this),this.idTokenSubscription=new q0(this),this.beforeStateQueue=new dP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mi(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _E(this,{idToken:e}),r=await Li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(si(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(si(this.app))return Promise.reject(Vi(this));const t=e?Ft(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return si(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return si(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hP(this),t=new pP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await lP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mi(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[Mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&WA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Oo(n){return Ft(n)}class q0{constructor(e){this.auth=e,this.observer=null,this.addObserver=b2(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gP(n){dh=n}function NE(n){return dh.loadJS(n)}function yP(){return dh.recaptchaEnterpriseScript}function vP(){return dh.gapiScript}function _P(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class wP{constructor(){this.enterprise=new EP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const TP="recaptcha-enterprise",bE="NO_RECAPTCHA";class SP{constructor(e){this.type=TP,this.auth=Oo(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{eP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new ZA(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{d(f)})})}function s(a,u,d){const f=window.grecaptcha;B0(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(bE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wP().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(d=>{if(!t&&B0(window.grecaptcha))s(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=yP();f.length!==0&&(f+=d),NE(f).then(()=>{s(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function K0(n,e,t,r=!1,s=!1){const a=new SP(n);let u;if(s)u=bE;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function lm(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await K0(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await K0(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n,e){const t=jm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Dd(a,e??{}))return s;Ur(s,"already-initialized")}return t.initialize({options:e})}function RP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Mi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CP(n,e,t){const r=Oo(n);De(r._canInitEmulator,r,"emulator-config-failed"),De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=DE(e),{host:u,port:d}=AP(e),f=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),PP()}function DE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AP(n){const e=DE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:G0(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:G0(u)}}}function G0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function PP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,t){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function kP(n,e){return qi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e){return Tu(n,"POST","/v1/accounts:signInWithPassword",$s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(n,e){return Tu(n,"POST","/v1/accounts:signInWithEmailLink",$s(n,e))}async function bP(n,e){return Tu(n,"POST","/v1/accounts:signInWithEmailLink",$s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends qm{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new lu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new lu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,t,"signInWithPassword",xP);case"emailLink":return NP(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,r,"signUpPassword",kP);case"emailLink":return bP(e,{idToken:t,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,e){return Tu(n,"POST","/v1/accounts:signInWithIdp",$s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="http://localhost";class No extends qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Bm(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new No(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ka(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ka(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ka(e,t)}buildRequest(){const e={requestUri:DP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LP(n){const e=zl($l(n)).link,t=e?zl($l(e)).deep_link_id:null,r=zl($l(n)).deep_link_id;return(r?zl($l(r)).link:null)||r||t||e||n}class Km{constructor(e){var t,r,s,a,u,d;const f=zl($l(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,w=OP((s=f.mode)!==null&&s!==void 0?s:null);De(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=LP(e);try{return new Km(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,t){return lu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Km.parseLink(t);return De(r,"argument-error"),lu._fromEmailAndCode(e,r.code,r.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends OE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Su{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return No._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return As.credential(t,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Su{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Su{constructor(){super("twitter.com")}static credential(e,t){return No._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ks.credential(t,r)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(n,e){return Tu(n,"POST","/v1/accounts:signUp",$s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Li._fromIdTokenResponse(e,r,s),u=Q0(r);return new bo({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Q0(r);return new bo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Q0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Wi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Vd(e,t,r,s)}}function LE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(n,a,e,r):a})}async function VP(n,e,t=!1){const r=await La(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(n,e,t=!1){const{auth:r}=n;if(si(r.app))return Promise.reject(Vi(r));const s="reauthenticate";try{const a=await La(n,LE(r,s,e,n),t);De(a.idToken,r,"internal-error");const u=Hm(a.idToken);De(u,r,"internal-error");const{sub:d}=u;return De(n.uid===d,r,"user-mismatch"),bo._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(n,e,t=!1){if(si(n.app))return Promise.reject(Vi(n));const r="signIn",s=await LE(n,r,e),a=await bo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function UP(n,e){return ME(Oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VE(n){const e=Oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jP(n,e,t){if(si(n.app))return Promise.reject(Vi(n));const r=Oo(n),u=await lm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MP).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&VE(n),f}),d=await bo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function BP(n,e,t){return si(n.app)?Promise.reject(Vi(n)):UP(Ft(n),Ga.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&VE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(n,e){return qi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ft(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await La(r,zP(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const d=r.providerData.find(({providerId:f})=>f==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function HP(n,e,t,r){return Ft(n).onIdTokenChanged(e,t,r)}function WP(n,e,t){return Ft(n).beforeAuthStateChanged(e,t)}function qP(n,e,t,r){return Ft(n).onAuthStateChanged(e,t,r)}function KP(n){return Ft(n).signOut()}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=1e3,QP=10;class UE extends FE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);cP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},GP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UE.type="LOCAL";const YP=UE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE extends FE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jE.type="SESSION";const BE=jE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new hh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await JP(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Gm("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function ZP(n){li().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function ek(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function nk(){return zE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebaseLocalStorageDb",rk=1,Ud="firebaseLocalStorage",HE="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fh(n,e){return n.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function ik(){const n=indexedDB.deleteDatabase($E);return new Iu(n).toPromise()}function um(){const n=indexedDB.open($E,rk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ud,{keyPath:HE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await ik(),e(await um()))})})}async function Y0(n,e,t){const r=fh(n,!0).put({[HE]:e,value:t});return new Iu(r).toPromise()}async function sk(n,e){const t=fh(n,!1).get(e),r=await new Iu(t).toPromise();return r===void 0?null:r.value}function J0(n,e){const t=fh(n,!0).delete(e);return new Iu(t).toPromise()}const ok=800,ak=3;class WE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ak)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(nk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ek(),!this.activeServiceWorker)return;this.sender=new XP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await Y0(e,Fd,"1"),await J0(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Y0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>J0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=fh(s,!1).getAll();return new Iu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WE.type="LOCAL";const lk=WE;new Eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n,e){return e?Mi(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ck(n){return ME(n.auth,new Qm(n),n.bypassAuthState)}function dk(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),FP(t,new Qm(n),n.bypassAuthState)}async function hk(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),VP(t,new Qm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ck;case"linkViaPopup":case"linkViaRedirect":return hk;case"reauthViaPopup":case"reauthViaRedirect":return dk;default:Ur(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new Eu(2e3,1e4);class Ra extends qE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ra.currentPopupAction&&Ra.currentPopupAction.cancel(),Ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=Gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fk.get())};e()}}Ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="pendingRedirect",id=new Map;class mk extends qE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const r=await gk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gk(n,e){const t=_k(e),r=vk(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function yk(n,e){id.set(n._key(),e)}function vk(n){return Mi(n._redirectPersistence)}function _k(n){return rd(pk,n.config.apiKey,n.name)}async function wk(n,e,t=!1){if(si(n.app))return Promise.reject(Vi(n));const r=Oo(n),s=uk(r,e),u=await new mk(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=10*60*1e3;class Tk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!KE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ai(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(X0(e))}saveEventToCache(e){this.cachedEventUids.add(X0(e)),this.lastProcessedEventTime=Date.now()}}function X0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function KE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(n,e={}){return qi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ck=/^https?/;async function Ak(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ik(n);for(const t of e)try{if(Pk(t))return}catch{}Ur(n,"unauthorized-domain")}function Pk(n){const e=om(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!Ck.test(t))return!1;if(Rk.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Eu(3e4,6e4);function Z0(){const n=li().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xk(n){return new Promise((e,t)=>{var r,s,a;function u(){Z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z0(),t(ai(n,"network-request-failed"))},timeout:kk.get()})}if(!((s=(r=li().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=li().gapi)===null||a===void 0)&&a.load)u();else{const d=_P("iframefcb");return li()[d]=()=>{gapi.load?u():t(ai(n,"network-request-failed"))},NE(`${vP()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw sd=null,e})}let sd=null;function Nk(n){return sd=sd||xk(n),sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new Eu(5e3,15e3),Dk="__/auth/iframe",Ok="emulator/auth/iframe",Lk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vk(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$m(e,Ok):`https://${n.config.authDomain}/${Dk}`,r={apiKey:e.apiKey,appName:n.name,v:Ka},s=Mk.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${wu(r).slice(1)}`}async function Fk(n){const e=await Nk(n),t=li().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:Vk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=ai(n,"network-request-failed"),d=li().setTimeout(()=>{a(u)},bk.get());function f(){li().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,Bk=600,zk="_blank",$k="http://localhost";class e_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hk(n,e,t,r=jk,s=Bk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},Uk),{width:r.toString(),height:s.toString(),top:a,left:u}),m=En().toLowerCase();t&&(d=IE(m)?zk:t),TE(m)&&(e=e||$k,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[R,C])=>`${T}${R}=${C},`,"");if(uP(m)&&d!=="_self")return Wk(e||"",d),new e_(null);const w=window.open(e||"",d,v);De(w,n,"popup-blocked");try{w.focus()}catch{}return new e_(w)}function Wk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="__/auth/handler",Kk="emulator/auth/handler",Gk=encodeURIComponent("fac");async function t_(n,e,t,r,s,a){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ka,eventId:s};if(e instanceof OE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",N2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Su){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${Gk}=${encodeURIComponent(f)}`:"";return`${Qk(n)}?${wu(d).slice(1)}${m}`}function Qk({config:n}){return n.emulator?$m(n,Kk):`https://${n.authDomain}/${qk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="webStorageSupport";class Yk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BE,this._completeRedirectFn=wk,this._overrideRedirectResult=yk}async _openPopup(e,t,r,s){var a;Bi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await t_(e,t,r,om(),s);return Hk(e,u,Gm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await t_(e,t,r,om(),s);return ZP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Bi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Fk(e),r=new Tk(e);return t.register("authEvent",s=>(De(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bp,{type:bp},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[bp];u!==void 0&&t(!!u),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ak(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kE()||SE()||Wm()}}const Jk=Yk;var n_="@firebase/auth",r_="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ex(n){Oa(new xo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xE(n)},m=new mP(r,s,a,f);return RP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Oa(new xo("auth-internal",e=>{const t=Oo(e.getProvider("auth").getImmediate());return(r=>new Xk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(n_,r_,Zk(n)),Os(n_,r_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=5*60,nx=oE("authIdTokenMaxAge")||tx;let i_=null;const rx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>nx)return;const s=t==null?void 0:t.token;i_!==s&&(i_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ix(n=cE()){const e=jm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=IP(n,{popupRedirectResolver:Jk,persistence:[lk,YP,BE]}),r=oE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=rx(a.toString());WP(t,u,()=>u(t.currentUser)),HP(t,d=>u(d))}}const s=iE("auth");return s&&CP(t,`http://${s}`),t}function sx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=ai("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",sx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ex("Browser");var s_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ro,GE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function k(){}k.prototype=S.prototype,N.D=S.prototype,N.prototype=new k,N.prototype.constructor=N,N.C=function(O,U,B){for(var b=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)b[Pe-2]=arguments[Pe];return S.prototype[U].apply(O,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,S,k){k||(k=0);var O=Array(16);if(typeof S=="string")for(var U=0;16>U;++U)O[U]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(U=0;16>U;++U)O[U]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=N.g[0],k=N.g[1],U=N.g[2];var B=N.g[3],b=S+(B^k&(U^B))+O[0]+3614090360&4294967295;S=k+(b<<7&4294967295|b>>>25),b=B+(U^S&(k^U))+O[1]+3905402710&4294967295,B=S+(b<<12&4294967295|b>>>20),b=U+(k^B&(S^k))+O[2]+606105819&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(S^U&(B^S))+O[3]+3250441966&4294967295,k=U+(b<<22&4294967295|b>>>10),b=S+(B^k&(U^B))+O[4]+4118548399&4294967295,S=k+(b<<7&4294967295|b>>>25),b=B+(U^S&(k^U))+O[5]+1200080426&4294967295,B=S+(b<<12&4294967295|b>>>20),b=U+(k^B&(S^k))+O[6]+2821735955&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(S^U&(B^S))+O[7]+4249261313&4294967295,k=U+(b<<22&4294967295|b>>>10),b=S+(B^k&(U^B))+O[8]+1770035416&4294967295,S=k+(b<<7&4294967295|b>>>25),b=B+(U^S&(k^U))+O[9]+2336552879&4294967295,B=S+(b<<12&4294967295|b>>>20),b=U+(k^B&(S^k))+O[10]+4294925233&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(S^U&(B^S))+O[11]+2304563134&4294967295,k=U+(b<<22&4294967295|b>>>10),b=S+(B^k&(U^B))+O[12]+1804603682&4294967295,S=k+(b<<7&4294967295|b>>>25),b=B+(U^S&(k^U))+O[13]+4254626195&4294967295,B=S+(b<<12&4294967295|b>>>20),b=U+(k^B&(S^k))+O[14]+2792965006&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(S^U&(B^S))+O[15]+1236535329&4294967295,k=U+(b<<22&4294967295|b>>>10),b=S+(U^B&(k^U))+O[1]+4129170786&4294967295,S=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(S^k))+O[6]+3225465664&4294967295,B=S+(b<<9&4294967295|b>>>23),b=U+(S^k&(B^S))+O[11]+643717713&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^S&(U^B))+O[0]+3921069994&4294967295,k=U+(b<<20&4294967295|b>>>12),b=S+(U^B&(k^U))+O[5]+3593408605&4294967295,S=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(S^k))+O[10]+38016083&4294967295,B=S+(b<<9&4294967295|b>>>23),b=U+(S^k&(B^S))+O[15]+3634488961&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^S&(U^B))+O[4]+3889429448&4294967295,k=U+(b<<20&4294967295|b>>>12),b=S+(U^B&(k^U))+O[9]+568446438&4294967295,S=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(S^k))+O[14]+3275163606&4294967295,B=S+(b<<9&4294967295|b>>>23),b=U+(S^k&(B^S))+O[3]+4107603335&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^S&(U^B))+O[8]+1163531501&4294967295,k=U+(b<<20&4294967295|b>>>12),b=S+(U^B&(k^U))+O[13]+2850285829&4294967295,S=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(S^k))+O[2]+4243563512&4294967295,B=S+(b<<9&4294967295|b>>>23),b=U+(S^k&(B^S))+O[7]+1735328473&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^S&(U^B))+O[12]+2368359562&4294967295,k=U+(b<<20&4294967295|b>>>12),b=S+(k^U^B)+O[5]+4294588738&4294967295,S=k+(b<<4&4294967295|b>>>28),b=B+(S^k^U)+O[8]+2272392833&4294967295,B=S+(b<<11&4294967295|b>>>21),b=U+(B^S^k)+O[11]+1839030562&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^S)+O[14]+4259657740&4294967295,k=U+(b<<23&4294967295|b>>>9),b=S+(k^U^B)+O[1]+2763975236&4294967295,S=k+(b<<4&4294967295|b>>>28),b=B+(S^k^U)+O[4]+1272893353&4294967295,B=S+(b<<11&4294967295|b>>>21),b=U+(B^S^k)+O[7]+4139469664&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^S)+O[10]+3200236656&4294967295,k=U+(b<<23&4294967295|b>>>9),b=S+(k^U^B)+O[13]+681279174&4294967295,S=k+(b<<4&4294967295|b>>>28),b=B+(S^k^U)+O[0]+3936430074&4294967295,B=S+(b<<11&4294967295|b>>>21),b=U+(B^S^k)+O[3]+3572445317&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^S)+O[6]+76029189&4294967295,k=U+(b<<23&4294967295|b>>>9),b=S+(k^U^B)+O[9]+3654602809&4294967295,S=k+(b<<4&4294967295|b>>>28),b=B+(S^k^U)+O[12]+3873151461&4294967295,B=S+(b<<11&4294967295|b>>>21),b=U+(B^S^k)+O[15]+530742520&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^S)+O[2]+3299628645&4294967295,k=U+(b<<23&4294967295|b>>>9),b=S+(U^(k|~B))+O[0]+4096336452&4294967295,S=k+(b<<6&4294967295|b>>>26),b=B+(k^(S|~U))+O[7]+1126891415&4294967295,B=S+(b<<10&4294967295|b>>>22),b=U+(S^(B|~k))+O[14]+2878612391&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~S))+O[5]+4237533241&4294967295,k=U+(b<<21&4294967295|b>>>11),b=S+(U^(k|~B))+O[12]+1700485571&4294967295,S=k+(b<<6&4294967295|b>>>26),b=B+(k^(S|~U))+O[3]+2399980690&4294967295,B=S+(b<<10&4294967295|b>>>22),b=U+(S^(B|~k))+O[10]+4293915773&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~S))+O[1]+2240044497&4294967295,k=U+(b<<21&4294967295|b>>>11),b=S+(U^(k|~B))+O[8]+1873313359&4294967295,S=k+(b<<6&4294967295|b>>>26),b=B+(k^(S|~U))+O[15]+4264355552&4294967295,B=S+(b<<10&4294967295|b>>>22),b=U+(S^(B|~k))+O[6]+2734768916&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~S))+O[13]+1309151649&4294967295,k=U+(b<<21&4294967295|b>>>11),b=S+(U^(k|~B))+O[4]+4149444226&4294967295,S=k+(b<<6&4294967295|b>>>26),b=B+(k^(S|~U))+O[11]+3174756917&4294967295,B=S+(b<<10&4294967295|b>>>22),b=U+(S^(B|~k))+O[2]+718787259&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~S))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(U+(b<<21&4294967295|b>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+B&4294967295}r.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var k=S-this.blockSize,O=this.B,U=this.h,B=0;B<S;){if(U==0)for(;B<=k;)s(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<S;)if(O[U++]=N.charCodeAt(B++),U==this.blockSize){s(this,O),U=0;break}}else for(;B<S;)if(O[U++]=N[B++],U==this.blockSize){s(this,O),U=0;break}}this.h=U,this.o+=S},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var k=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=k&255,k/=256;for(this.u(N),N=Array(16),S=k=0;4>S;++S)for(var O=0;32>O;O+=8)N[k++]=this.g[S]>>>O&255;return N};function a(N,S){var k=d;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=S(N)}function u(N,S){this.h=S;for(var k=[],O=!0,U=N.length-1;0<=U;U--){var B=N[U]|0;O&&B==S||(k[U]=B,O=!1)}this.g=k}var d={};function f(N){return-128<=N&&128>N?a(N,function(S){return new u([S|0],0>S?-1:0)}):new u([N|0],0>N?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return P(m(-N));for(var S=[],k=1,O=0;N>=k;O++)S[O]=N/k|0,k*=4294967296;return new u(S,0)}function v(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return P(v(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=m(Math.pow(S,8)),O=w,U=0;U<N.length;U+=8){var B=Math.min(8,N.length-U),b=parseInt(N.substring(U,U+B),S);8>B?(B=m(Math.pow(S,B)),O=O.j(B).add(m(b))):(O=O.j(k),O=O.add(m(b)))}return O}var w=f(0),T=f(1),R=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-P(this).m();for(var N=0,S=1,k=0;k<this.g.length;k++){var O=this.i(k);N+=(0<=O?O:4294967296+O)*S,S*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(C(this))return"0";if(D(this))return"-"+P(this).toString(N);for(var S=m(Math.pow(N,6)),k=this,O="";;){var U=te(k,S).g;k=F(k,U.j(S));var B=((0<k.g.length?k.g[0]:k.h)>>>0).toString(N);if(k=U,C(k))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function C(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function D(N){return N.h==-1}n.l=function(N){return N=F(this,N),D(N)?-1:C(N)?0:1};function P(N){for(var S=N.g.length,k=[],O=0;O<S;O++)k[O]=~N.g[O];return new u(k,~N.h).add(T)}n.abs=function(){return D(this)?P(this):this},n.add=function(N){for(var S=Math.max(this.g.length,N.g.length),k=[],O=0,U=0;U<=S;U++){var B=O+(this.i(U)&65535)+(N.i(U)&65535),b=(B>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);O=b>>>16,B&=65535,b&=65535,k[U]=b<<16|B}return new u(k,k[k.length-1]&-2147483648?-1:0)};function F(N,S){return N.add(P(S))}n.j=function(N){if(C(this)||C(N))return w;if(D(this))return D(N)?P(this).j(P(N)):P(P(this).j(N));if(D(N))return P(this.j(P(N)));if(0>this.l(R)&&0>N.l(R))return m(this.m()*N.m());for(var S=this.g.length+N.g.length,k=[],O=0;O<2*S;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var U=0;U<N.g.length;U++){var B=this.i(O)>>>16,b=this.i(O)&65535,Pe=N.i(U)>>>16,$e=N.i(U)&65535;k[2*O+2*U]+=b*$e,Q(k,2*O+2*U),k[2*O+2*U+1]+=B*$e,Q(k,2*O+2*U+1),k[2*O+2*U+1]+=b*Pe,Q(k,2*O+2*U+1),k[2*O+2*U+2]+=B*Pe,Q(k,2*O+2*U+2)}for(O=0;O<S;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=S;O<2*S;O++)k[O]=0;return new u(k,0)};function Q(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function K(N,S){this.g=N,this.h=S}function te(N,S){if(C(S))throw Error("division by zero");if(C(N))return new K(w,w);if(D(N))return S=te(P(N),S),new K(P(S.g),P(S.h));if(D(S))return S=te(N,P(S)),new K(P(S.g),S.h);if(30<N.g.length){if(D(N)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var k=T,O=S;0>=O.l(N);)k=L(k),O=L(O);var U=re(k,1),B=re(O,1);for(O=re(O,2),k=re(k,2);!C(O);){var b=B.add(O);0>=b.l(N)&&(U=U.add(k),B=b),O=re(O,1),k=re(k,1)}return S=F(N,U.j(S)),new K(U,S)}for(U=w;0<=N.l(S);){for(k=Math.max(1,Math.floor(N.m()/S.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=m(k),b=B.j(S);D(b)||0<b.l(N);)k-=O,B=m(k),b=B.j(S);C(B)&&(B=T),U=U.add(B),N=F(N,b)}return new K(U,N)}n.A=function(N){return te(this,N).h},n.and=function(N){for(var S=Math.max(this.g.length,N.g.length),k=[],O=0;O<S;O++)k[O]=this.i(O)&N.i(O);return new u(k,this.h&N.h)},n.or=function(N){for(var S=Math.max(this.g.length,N.g.length),k=[],O=0;O<S;O++)k[O]=this.i(O)|N.i(O);return new u(k,this.h|N.h)},n.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),k=[],O=0;O<S;O++)k[O]=this.i(O)^N.i(O);return new u(k,this.h^N.h)};function L(N){for(var S=N.g.length+1,k=[],O=0;O<S;O++)k[O]=N.i(O)<<1|N.i(O-1)>>>31;return new u(k,N.h)}function re(N,S){var k=S>>5;S%=32;for(var O=N.g.length-k,U=[],B=0;B<O;B++)U[B]=0<S?N.i(B+k)>>>S|N.i(B+k+1)<<32-S:N.i(B+k);return new u(U,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ro=u}).apply(typeof s_<"u"?s_:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QE,Hl,YE,od,cm,JE,XE,ZE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var W=c[I];if(!(W in _))break e;_=_[W]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,I=!1,W={next:function(){if(!I&&_<c.length){var X=_++;return{value:g(X,c[X]),done:!1}}return I=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,I),c.apply(g,W)}}return function(){return c.apply(g,arguments)}}function T(c,g,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function R(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function C(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,W,X){for(var he=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)he[ht-2]=arguments[ht];return g.prototype[W].apply(I,he)}}function D(c){const g=c.length;if(0<g){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function P(c,g){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(f(I)){const W=c.length||0,X=I.length||0;c.length=W+X;for(let he=0;he<X;he++)c[W+he]=I[he]}else c.push(I)}}class F{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var L=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function re(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function N(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,I;for(let W=1;W<arguments.length;W++){I=arguments[W];for(_ in I)c[_]=I[_];for(let X=0;X<k.length;X++)_=k[X],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function U(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function B(c){d.setTimeout(()=>{throw c},0)}function b(){var c=Se;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Pe{constructor(){this.h=this.g=null}add(g,_){const I=$e.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var $e=new F(()=>new St,c=>c.reset());class St{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,ce=!1,Se=new Pe,fe=()=>{const c=d.Promise.resolve(void 0);Xe=()=>{c.then(z)}};var z=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(_){B(_)}var g=$e;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ce=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c}();function Me(c,g){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(L){e:{try{te(g.nodeName);var W=!0;break e}catch{}W=!1}W||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:We[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Me.aa.h.call(this)}}C(Me,Ee);var We={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),rt=0;function je(c,g,_,I,W){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=W,this.key=++rt,this.da=this.fa=!1}function mt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function sr(c){this.src=c,this.g={},this.h=0}sr.prototype.add=function(c,g,_,I,W){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var he=cn(c,g,I,W);return-1<he?(g=c[he],_||(g.fa=!1)):(g=new je(g,this.src,X,!!I,W),g.fa=_,c.push(g)),g};function Ki(c,g){var _=g.type;if(_ in c.g){var I=c.g[_],W=Array.prototype.indexOf.call(I,g,void 0),X;(X=0<=W)&&Array.prototype.splice.call(I,W,1),X&&(mt(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function cn(c,g,_,I){for(var W=0;W<c.length;++W){var X=c[W];if(!X.da&&X.listener==g&&X.capture==!!_&&X.ha==I)return W}return-1}var mi="closure_lm_"+(1e6*Math.random()|0),Gi={};function Qi(c,g,_,I,W){if(Array.isArray(g)){for(var X=0;X<g.length;X++)Qi(c,g[X],_,I,W);return null}return _=An(_),c&&c[nt]?c.K(g,_,m(I)?!!I.capture:!!I,W):Qs(c,g,_,!1,I,W)}function Qs(c,g,_,I,W,X){if(!g)throw Error("Invalid event type");var he=m(W)?!!W.capture:!!W,ht=gi(c);if(ht||(c[mi]=ht=new sr(c)),_=ht.add(g,_,I,he,X),_.proxy)return _;if(I=Uo(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Fe||(W=he),W===void 0&&(W=!1),c.addEventListener(g.toString(),I,W);else if(c.attachEvent)c.attachEvent(Jt(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Uo(){function c(_){return g.call(c.src,c.listener,_)}const g=vr;return c}function Yi(c,g,_,I,W){if(Array.isArray(g))for(var X=0;X<g.length;X++)Yi(c,g[X],_,I,W);else I=m(I)?!!I.capture:!!I,_=An(_),c&&c[nt]?(c=c.i,g=String(g).toString(),g in c.g&&(X=c.g[g],_=cn(X,_,I,W),-1<_&&(mt(X[_]),Array.prototype.splice.call(X,_,1),X.length==0&&(delete c.g[g],c.h--)))):c&&(c=gi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=cn(g,_,I,W)),(_=-1<c?g[c]:null)&&yr(_))}function yr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[nt])Ki(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(Jt(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=gi(g))?(Ki(_,c),_.h==0&&(_.src=null,g[mi]=null)):mt(c)}}}function Jt(c){return c in Gi?Gi[c]:Gi[c]="on"+c}function vr(c,g){if(c.da)c=!0;else{g=new Me(g,this);var _=c.listener,I=c.ha||c.src;c.fa&&yr(c),c=_.call(I,g)}return c}function gi(c){return c=c[mi],c instanceof sr?c:null}var Hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function An(c){return typeof c=="function"?c:(c[Hr]||(c[Hr]=function(g){return c.handleEvent(g)}),c[Hr])}function dt(){ee.call(this),this.i=new sr(this),this.M=this,this.F=null}C(dt,ee),dt.prototype[nt]=!0,dt.prototype.removeEventListener=function(c,g,_,I){Yi(this,c,g,_,I)};function At(c,g){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new Ee(g,c);else if(g instanceof Ee)g.target=g.target||c;else{var W=g;g=new Ee(I,c),O(g,W)}if(W=!0,_)for(var X=_.length-1;0<=X;X--){var he=g.g=_[X];W=$n(he,I,!0,g)&&W}if(he=g.g=c,W=$n(he,I,!0,g)&&W,W=$n(he,I,!1,g)&&W,_)for(X=0;X<_.length;X++)he=g.g=_[X],W=$n(he,I,!1,g)&&W}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],I=0;I<_.length;I++)mt(_[I]);delete c.g[g],c.h--}}this.F=null},dt.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},dt.prototype.L=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function $n(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var W=!0,X=0;X<g.length;++X){var he=g[X];if(he&&!he.da&&he.capture==_){var ht=he.listener,Ut=he.ha||he.src;he.fa&&Ki(c.i,he),W=ht.call(Ut,I)!==!1&&W}}return W&&!I.defaultPrevented}function Ys(c,g,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Xt(c){c.g=Ys(()=>{c.g=null,c.i&&(c.i=!1,Xt(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Wr extends ee{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Xt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(c){ee.call(this),this.h=c,this.g={}}C(qr,ee);var Ji=[];function Js(c){re(c.g,function(g,_){this.g.hasOwnProperty(_)&&yr(g)},c),c.g={}}qr.prototype.N=function(){qr.aa.N.call(this),Js(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xi=d.JSON.stringify,Kr=d.JSON.parse,Zi=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function _r(){}_r.prototype.h=null;function es(c){return c.h||(c.h=c.i())}function yi(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){Ee.call(this,"d")}C(Hn,Ee);function wr(){Ee.call(this,"c")}C(wr,Ee);var Tn={},Xs=null;function vi(){return Xs=Xs||new dt}Tn.La="serverreachability";function V(c){Ee.call(this,Tn.La,c)}C(V,Ee);function $(c){const g=vi();At(g,new V(g))}Tn.STAT_EVENT="statevent";function J(c,g){Ee.call(this,Tn.STAT_EVENT,c),this.stat=g}C(J,Ee);function ne(c){const g=vi();At(g,new J(g,c))}Tn.Ma="timingevent";function pe(c,g){Ee.call(this,Tn.Ma,c),this.size=g}C(pe,Ee);function ve(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function me(c,g,_,I,W,X){c.info(function(){if(c.g)if(X)for(var he="",ht=X.split("&"),Ut=0;Ut<ht.length;Ut++){var et=ht[Ut].split("=");if(1<et.length){var qt=et[0];et=et[1];var Ot=qt.split("_");he=2<=Ot.length&&Ot[1]=="type"?he+(qt+"="+et+"&"):he+(qt+"=redacted&")}}else he=null;else he=X;return"XMLHTTP REQ ("+I+") [attempt "+W+"]: "+g+`
`+_+`
`+he})}function we(c,g,_,I,W,X,he){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+W+"]: "+g+`
`+_+`
`+X+" "+he})}function de(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Be(c,_)+(I?" "+I:"")})}function be(c,g){c.info(function(){return"TIMEOUT: "+g})}Ae.prototype.info=function(){};function Be(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var W=I[1];if(Array.isArray(W)&&!(1>W.length)){var X=W[0];if(X!="noop"&&X!="stop"&&X!="close")for(var he=1;he<W.length;he++)W[he]=""}}}}return Xi(_)}catch{return g}}var at={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ge;function it(){}C(it,_r),it.prototype.g=function(){return new XMLHttpRequest},it.prototype.i=function(){return{}},Ge=new it;function lt(c,g,_,I){this.j=c,this.i=g,this.l=_,this.R=I||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Er}function Er(){this.i=null,this.g="",this.h=!1}var Tr={},dn={};function Zt(c,g,_){c.L=1,c.v=is(Wn(g)),c.m=_,c.P=!0,_i(c,null)}function _i(c,g){c.F=Date.now(),ut(c),c.A=Wn(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),os(_.i,"t",I),c.C=0,_=c.j.J,c.h=new Er,c.g=qu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Wr(T(c.Y,c,c.g),c.O)),g=c.U,_=c.g,I=c.ca;var W="readystatechange";Array.isArray(W)||(W&&(Ji[0]=W.toString()),W=Ji);for(var X=0;X<W.length;X++){var he=Qi(_,W[X],I||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),$(),me(c.i,c.u,c.A,c.l,c.R,c.m)}lt.prototype.ca=function(c){c=c.target;const g=this.M;g&&Nn(c)==3?g.j():this.Y(c)},lt.prototype.Y=function(c){try{if(c==this.g)e:{const Ot=Nn(this.g);var g=this.g.Ba();const ar=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||al(this.g)))){this.J||Ot!=4||g==7||(g==8||0>=ar?$(3):$(2)),Ze(this);var _=this.g.Z();this.X=_;t:if(Gr(this)){var I=al(this.g);c="";var W=I.length,X=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),gt(this);var he="";break t}this.h.i=new d.TextDecoder}for(g=0;g<W;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(X&&g==W-1)});I.length=0,this.h.g+=c,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=_==200,we(this.i,this.u,this.A,this.l,this.R,Ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,Ut=this.g;if((ht=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(ht)){var et=ht;break t}}et=null}if(_=et)de(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ir(this,_);else{this.o=!1,this.s=3,ne(12),en(this),gt(this);break e}}if(this.P){_=!0;let Kn;for(;!this.J&&this.C<he.length;)if(Kn=Sr(this,he),Kn==dn){Ot==4&&(this.s=4,ne(14),_=!1),de(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==Tr){this.s=4,ne(15),de(this.i,this.l,he,"[Invalid Chunk]"),_=!1;break}else de(this.i,this.l,Kn,null),Ir(this,Kn);if(Gr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||he.length!=0||this.h.h||(this.s=1,ne(16),_=!1),this.o=this.o&&_,!_)de(this.i,this.l,he,"[Invalid Chunked Response]"),en(this),gt(this);else if(0<he.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),ul(qt),qt.M=!0,ne(11))}}else de(this.i,this.l,he,null),Ir(this,he);Ot==4&&en(this),this.o&&!this.J&&(Ot==4?Jo(this.j,this):(this.o=!1,ut(this)))}else qo(this.g),_==400&&0<he.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),en(this),gt(this)}}}catch{}finally{}};function Gr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Sr(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?dn:(_=Number(g.substring(_,I)),isNaN(_)?Tr:(I+=1,I+_>g.length?dn:(g=g.slice(I,I+_),c.C=I+_,g)))}lt.prototype.cancel=function(){this.J=!0,en(this)};function ut(c){c.S=Date.now()+c.I,wi(c,c.I)}function wi(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ve(T(c.ba,c),g)}function Ze(c){c.B&&(d.clearTimeout(c.B),c.B=null)}lt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(be(this.i,this.A),this.L!=2&&($(),ne(17)),en(this),this.s=2,gt(this)):wi(this,this.S-c)};function gt(c){c.j.G==0||c.J||Jo(c.j,c)}function en(c){Ze(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Js(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Ir(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Sn(_.h,c))){if(!c.K&&Sn(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var W=I;if(W[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Yo(_),kr(_);else break e;Qo(_),ne(18)}}else _.za=W[1],0<_.za-_.T&&37500>W[2]&&_.F&&_.v==0&&!_.C&&(_.C=ve(T(_.Za,_),6e3));if(1>=jo(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ri(_,11)}else if((c.K||_.g==c)&&Yo(_),!Q(g))for(W=_.Da.g.parse(g),g=0;g<W.length;g++){let et=W[g];if(_.T=et[0],et=et[1],_.G==2)if(et[0]=="c"){_.K=et[1],_.ia=et[2];const qt=et[3];qt!=null&&(_.la=qt,_.j.info("VER="+_.la));const Ot=et[4];Ot!=null&&(_.Aa=Ot,_.j.info("SVER="+_.Aa));const ar=et[5];ar!=null&&typeof ar=="number"&&0<ar&&(I=1.5*ar,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Kn=c.g;if(Kn){const io=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var X=I.h;X.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(rl(X,X.h),X.h=null))}if(I.D){const Zo=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(I.ya=Zo,ft(I.I,I.D,Zo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var he=c;if(I.qa=Wu(I,I.J?I.ia:null,I.W),he.K){Du(I.h,he);var ht=he,Ut=I.L;Ut&&(ht.I=Ut),ht.B&&(Ze(ht),ut(ht)),I.g=he}else ro(I);0<_.i.length&&Xr(_)}else et[0]!="stop"&&et[0]!="close"||Ri(_,7);else _.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Ri(_,7):nn(_):et[0]!="noop"&&_.l&&_.l.ta(et),_.v=0)}}$(4)}catch{}}var yt=class{constructor(c,g){this.g=c,this.map=g}};function kn(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function jo(c){return c.h?1:c.g?c.g.size:0}function Sn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function rl(c,g){c.g?c.g.add(g):c.h=g}function Du(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}kn.prototype.cancel=function(){if(this.i=Ou(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ou(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return D(c.i)}function Bo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,I=0;I<_;I++)g.push(c[I]);return g}g=[],_=0;for(I in c)g[_++]=c[I];return g}function zo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const I in c)g[_++]=I;return g}}}function ts(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=zo(c),I=Bo(c),W=I.length,X=0;X<W;X++)g.call(void 0,I[X],_&&_[X],c)}var Zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),W=null;if(0<=I){var X=c[_].substring(0,I);W=c[_].substring(I+1)}else X=c[_];g(X,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ei(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ei){this.h=c.h,eo(this,c.j),this.o=c.o,this.g=c.g,ns(this,c.s),this.l=c.l;var g=c.i,_=new Qr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),rs(this,_),this.m=c.m}else c&&(g=String(c).match(Zs))?(this.h=!1,eo(this,g[1]||"",!0),this.o=Qe(g[2]||""),this.g=Qe(g[3]||"",!0),ns(this,g[4]),this.l=Qe(g[5]||"",!0),rs(this,g[6]||"",!0),this.m=Qe(g[7]||"")):(this.h=!1,this.i=new Qr(null,this.h))}Ei.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ss(g,$o,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ss(g,$o,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ss(_,_.charAt(0)=="/"?Vu:Mu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ss(_,il)),c.join("")};function Wn(c){return new Ei(c)}function eo(c,g,_){c.j=_?Qe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ns(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function rs(c,g,_){g instanceof Qr?(c.i=g,Yr(c.i,c.h)):(_||(g=ss(g,Fu)),c.i=new Qr(g,c.h))}function ft(c,g,_){c.i.set(g,_)}function is(c){return ft(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Qe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ss(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Lu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Lu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $o=/[#\/\?@]/g,Mu=/[#\?:]/g,Vu=/[#\?]/g,Fu=/[#\?@]/g,il=/#/g;function Qr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function tn(c){c.g||(c.g=new Map,c.h=0,c.i&&Uh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Qr.prototype,n.add=function(c,g){tn(this),this.i=null,c=or(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Rr(c,g){tn(c),g=or(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Cr(c,g){return tn(c),g=or(c,g),c.g.has(g)}n.forEach=function(c,g){tn(this),this.g.forEach(function(_,I){_.forEach(function(W){c.call(g,W,I,this)},this)},this)},n.na=function(){tn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let I=0;I<g.length;I++){const W=c[I];for(let X=0;X<W.length;X++)_.push(g[I])}return _},n.V=function(c){tn(this);let g=[];if(typeof c=="string")Cr(this,c)&&(g=g.concat(this.g.get(or(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return tn(this),this.i=null,c=or(this,c),Cr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function os(c,g,_){Rr(c,g),0<_.length&&(c.i=null,c.g.set(or(c,g),D(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var I=g[_];const X=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var W=X;he[I]!==""&&(W+="="+encodeURIComponent(String(he[I]))),c.push(W)}}return this.i=c.join("&")};function or(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Yr(c,g){g&&!c.j&&(tn(c),c.i=null,c.g.forEach(function(_,I){var W=I.toLowerCase();I!=W&&(Rr(this,I),os(this,W,_))},c)),c.j=g}function jh(c,g){const _=new Ae;if(d.Image){const I=new Image;I.onload=R(xn,_,"TestLoadImage: loaded",!0,g,I),I.onerror=R(xn,_,"TestLoadImage: error",!1,g,I),I.onabort=R(xn,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=R(xn,_,"TestLoadImage: timeout",!1,g,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function Uu(c,g){const _=new Ae,I=new AbortController,W=setTimeout(()=>{I.abort(),xn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(X=>{clearTimeout(W),X.ok?xn(_,"TestPingServer: ok",!0,g):xn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(W),xn(_,"TestPingServer: error",!1,g)})}function xn(c,g,_,I,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),I(_)}catch{}}function Bh(){this.g=new Zi}function ju(c,g,_){const I=_||"";try{ts(c,function(W,X){let he=W;m(W)&&(he=Xi(W)),g.push(I+X+"="+encodeURIComponent(he))})}catch(W){throw g.push(I+"type="+encodeURIComponent("_badmap")),W}}function Ti(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Ti,_r),Ti.prototype.g=function(){return new to(this.l,this.j)},Ti.prototype.i=function(c){return function(){return c}}({});function to(c,g){dt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(to,dt),n=to.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Pr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ar(this):Pr(this),this.readyState==3&&Bu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ar(this))},n.Qa=function(c){this.g&&(this.response=c,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Pr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Pr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Si(c){let g="";return re(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function as(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Si(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):ft(c,g,_))}function wt(c){dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(wt,dt);var zh=/^https?$/i,sl=["POST","PUT"];n=wt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ge.g(),this.v=this.o?es(this.o):es(Ge),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(X){no(this,X);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var W in I)_.set(W,I[W]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const X of I.keys())_.set(X,I.get(X));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),W=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(sl,g,void 0))||I||W||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of _)this.g.setRequestHeader(X,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wo(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){no(this,X)}};function no(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ho(c),qn(c)}function Ho(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),qn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qn(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ol(this):this.bb())},n.bb=function(){ol(this)};function ol(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Nn(c)!=4||c.Z()!=2)){if(c.u&&Nn(c)==4)Ys(c.Ea,0,c);else if(At(c,"readystatechange"),Nn(c)==4){c.h=!1;try{const he=c.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=he===0){var W=String(c.D).match(Zs)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),I=!zh.test(W?W.toLowerCase():"")}_=I}if(_)At(c,"complete"),At(c,"success");else{c.m=6;try{var X=2<Nn(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",Ho(c)}}finally{qn(c)}}}}function qn(c,g){if(c.g){Wo(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||At(c,"ready");try{_.onreadystatechange=I}catch{}}}function Wo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Nn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Kr(g)}};function al(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qo(c){const g={};c=(c.g&&2<=Nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(Q(c[I]))continue;var _=U(c[I]);const W=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=g[W]||[];g[W]=X,X.push(_)}N(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ll(c){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jr("baseRetryDelayMs",5e3,c),this.cb=Jr("retryDelaySeedMs",1e4,c),this.Wa=Jr("forwardChannelMaxRetries",2,c),this.wa=Jr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new kn(c&&c.concurrentRequestLimit),this.Da=new Bh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ll.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,I){ne(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=Wu(this,null,this.W),Xr(this)};function nn(c){if(Ko(c),c.G==3){var g=c.U++,_=Wn(c.I);if(ft(_,"SID",c.K),ft(_,"RID",g),ft(_,"TYPE","terminate"),Ii(c,_),g=new lt(c,c.j,g),g.L=2,g.v=is(Wn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=qu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ut(g)}Hu(c)}function kr(c){c.g&&(ul(c),c.g.cancel(),c.g=null)}function Ko(c){kr(c),c.u&&(d.clearTimeout(c.u),c.u=null),Yo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Xr(c){if(!hn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Xe||fe(),ce||(Xe(),ce=!0),Se.add(g,c),c.B=0}}function $h(c,g){return jo(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ve(T(c.Ga,c,g),$u(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const W=new lt(this,this.j,c);let X=this.o;if(this.S&&(X?(X=S(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(W.H=X,X=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ls(this,W,g),_=Wn(this.I),ft(_,"RID",c),ft(_,"CVER",22),this.D&&ft(_,"X-HTTP-Session-Id",this.D),Ii(this,_),X&&(this.O?g="headers="+encodeURIComponent(String(Si(X)))+"&"+g:this.m&&as(_,this.m,X)),rl(this.h,W),this.Ua&&ft(_,"TYPE","init"),this.P?(ft(_,"$req",g),ft(_,"SID","null"),W.T=!0,Zt(W,_,null)):Zt(W,_,g),this.G=2}}else this.G==3&&(c?Go(this,c):this.i.length==0||hn(this.h)||Go(this))};function Go(c,g){var _;g?_=g.l:_=c.U++;const I=Wn(c.I);ft(I,"SID",c.K),ft(I,"RID",_),ft(I,"AID",c.T),Ii(c,I),c.m&&c.o&&as(I,c.m,c.o),_=new lt(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ls(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rl(c.h,_),Zt(_,I,g)}function Ii(c,g){c.H&&re(c.H,function(_,I){ft(g,I,_)}),c.l&&ts({},function(_,I){ft(g,I,_)})}function ls(c,g,_){_=Math.min(c.i.length,_);var I=c.l?T(c.l.Na,c.l,c):null;e:{var W=c.i;let X=-1;for(;;){const he=["count="+_];X==-1?0<_?(X=W[0].g,he.push("ofs="+X)):X=0:he.push("ofs="+X);let ht=!0;for(let Ut=0;Ut<_;Ut++){let et=W[Ut].g;const qt=W[Ut].map;if(et-=X,0>et)X=Math.max(0,W[Ut].g-100),ht=!1;else try{ju(qt,he,"req"+et+"_")}catch{I&&I(qt)}}if(ht){I=he.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,I}function ro(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Xe||fe(),ce||(Xe(),ce=!0),Se.add(g,c),c.v=0}}function Qo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ve(T(c.Fa,c),$u(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ve(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),kr(this),zu(this))};function ul(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function zu(c){c.g=new lt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Wn(c.qa);ft(g,"RID","rpc"),ft(g,"SID",c.K),ft(g,"AID",c.T),ft(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&ft(g,"TO",c.ja),ft(g,"TYPE","xmlhttp"),Ii(c,g),c.m&&c.o&&as(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=is(Wn(g)),_.m=null,_.P=!0,_i(_,c)}n.Za=function(){this.C!=null&&(this.C=null,kr(this),Qo(this),ne(19))};function Yo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Jo(c,g){var _=null;if(c.g==g){Yo(c),ul(c),c.g=null;var I=2}else if(Sn(c.h,g))_=g.D,Du(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var W=c.B;I=vi(),At(I,new pe(I,_)),Xr(c)}else ro(c);else if(W=g.s,W==3||W==0&&0<g.X||!(I==1&&$h(c,g)||I==2&&Qo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),W){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function $u(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Ri(c,g){if(c.j.info("Error code "+g),g==2){var _=T(c.fb,c),I=c.Xa;const W=!I;I=new Ei(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||eo(I,"https"),is(I),W?jh(I.toString(),_):Uu(I.toString(),_)}else ne(2);c.G=0,c.l&&c.l.sa(g),Hu(c),Ko(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Hu(c){if(c.G=0,c.ka=[],c.l){const g=Ou(c.h);(g.length!=0||c.i.length!=0)&&(P(c.ka,g),P(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function Wu(c,g,_){var I=_ instanceof Ei?Wn(_):new Ei(_);if(I.g!="")g&&(I.g=g+"."+I.g),ns(I,I.s);else{var W=d.location;I=W.protocol,g=g?g+"."+W.hostname:W.hostname,W=+W.port;var X=new Ei(null);I&&eo(X,I),g&&(X.g=g),W&&ns(X,W),_&&(X.l=_),I=X}return _=c.D,g=c.ya,_&&g&&ft(I,_,g),ft(I,"VER",c.la),Ii(c,I),I}function qu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new wt(new Ti({eb:_})):new wt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cl(){}n=cl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xo(){}Xo.prototype.g=function(c,g){return new In(c,g)};function In(c,g){dt.call(this),this.g=new ll(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Q(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Q(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Zr(this)}C(In,dt),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){nn(this.g)},In.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Xi(c),c=_);g.i.push(new yt(g.Ya++,c)),g.G==3&&Xr(g)},In.prototype.N=function(){this.g.l=null,delete this.j,nn(this.g),delete this.g,In.aa.N.call(this)};function Ku(c){Hn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}C(Ku,Hn);function Gu(){wr.call(this),this.status=1}C(Gu,wr);function Zr(c){this.g=c}C(Zr,cl),Zr.prototype.ua=function(){At(this.g,"a")},Zr.prototype.ta=function(c){At(this.g,new Ku(c))},Zr.prototype.sa=function(c){At(this.g,new Gu)},Zr.prototype.ra=function(){At(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,ZE=function(){return new Xo},XE=function(){return vi()},JE=Tn,cm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,od=at,Pt.COMPLETE="complete",YE=Pt,yi.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Hl=yi,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,QE=wt}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});const o_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Fm("@firebase/firestore");function Ea(){return Do.logLevel}function ye(n,...e){if(Do.logLevel<=qe.DEBUG){const t=e.map(Ym);Do.debug(`Firestore (${Qa}): ${n}`,...t)}}function zi(n,...e){if(Do.logLevel<=qe.ERROR){const t=e.map(Ym);Do.error(`Firestore (${Qa}): ${n}`,...t)}}function Ma(n,...e){if(Do.logLevel<=qe.WARN){const t=e.map(Ym);Do.warn(`Firestore (${Qa}): ${n}`,...t)}}function Ym(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n="Unexpected state"){const e=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: `+n;throw zi(e),new Error(e)}function ct(n,e){n||Le()}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Wi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ox{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}}class ax{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lx{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Fi,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},d=f=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new e1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new vn(e)}}class ux{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class cx{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ux(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ct(this.o===void 0);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct(typeof t.token=="string"),this.R=t.token,new dx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=fx(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function Ye(n,e){return n<e?-1:n>e?1:0}function Va(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new $t(0,0))}static max(){return new Ve(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(),r===void 0?r=e.length-t:r>e.length-t&&Le(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return uu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),u=t.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tt extends uu{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Tt(t)}static emptyPath(){return new Tt([])}}const px=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends uu{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return px.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Ce(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ce(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new Ce(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Tt.fromString(e))}static fromName(e){return new Ne(Tt.fromString(e).popFirst(5))}static empty(){return new Ne(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Tt(e.slice()))}}function mx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(r===1e9?new $t(t+1,0):new $t(t,r));return new Vs(s,Ne.empty(),e)}function gx(n){return new Vs(n.readTime,n.key,-1)}class Vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vs(Ve.min(),Ne.empty(),-1)}static max(){return new Vs(Ve.max(),Ne.empty(),-1)}}function yx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _x{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==vx)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let s=0,a=0,u=!1;e.forEach(d=>{++s,d.next(()=>{++a,u&&a===s&&t()},f=>r(f))}),u=!0,a===s&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(s=>s?ie.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{u[m]=v,++d,d===a&&r(u)},v=>s(v))}})}static doWhile(e,t){return new ie((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function wx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ja(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ph.oe=-1;function mh(n){return n==null}function jd(n){return n===0&&1/n==-1/0}function Ex(n){return typeof n=="number"&&Number.isInteger(n)&&!jd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=a_(e)),e=Sx(n.get(t),e);return a_(e)}function Sx(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function a_(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function n1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??an.RED,this.left=s??an.EMPTY,this.right=a??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new an(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return an.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Le();const e=this.left.check();if(e!==this.right.check())throw Le();return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Le()}get value(){throw Le()}get color(){throw Le()}get left(){throw Le()}get right(){throw Le()}copy(e,t,r,s,a){return this}insert(e,t,r){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new u_(this.data.getIterator())}getIteratorFrom(e){return new u_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class u_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new Ht(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new r1("Invalid base64 string: "+a):a}}(e);return new un(t)}static fromUint8Array(e){const t=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const Ix=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(n){if(ct(!!n),typeof n=="string"){let e=0;const t=Ix.exec(n);if(ct(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Us(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gh(n){const e=n.mapValue.fields.__previous_value__;return Jm(e)?gh(e):e}function cu(n){const e=Fs(n.mapValue.fields.__local_write_time__.timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t,r,s,a,u,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class du{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new du("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jm(n)?4:Ax(n)?9007199254740991:Cx(n)?10:11:Le()}function hi(n,e){if(n===e)return!0;const t=js(n);if(t!==js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cu(n).isEqual(cu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Fs(s.timestampValue),d=Fs(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Us(s.bytesValue).isEqual(Us(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Dt(s.geoPointValue.latitude)===Dt(a.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Dt(s.integerValue)===Dt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Dt(s.doubleValue),d=Dt(a.doubleValue);return u===d?jd(u)===jd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Va(n.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(l_(u)!==l_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!hi(u[f],d[f])))return!1;return!0}(n,e);default:return Le()}}function hu(n,e){return(n.values||[]).find(t=>hi(t,e))!==void 0}function Fa(n,e){if(n===e)return 0;const t=js(n),r=js(e);if(t!==r)return Ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return function(a,u){const d=Dt(a.integerValue||a.doubleValue),f=Dt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return c_(n.timestampValue,e.timestampValue);case 4:return c_(cu(n),cu(e));case 5:return Ye(n.stringValue,e.stringValue);case 6:return function(a,u){const d=Us(a),f=Us(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=Ye(d[m],f[m]);if(v!==0)return v}return Ye(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const d=Ye(Dt(a.latitude),Dt(u.latitude));return d!==0?d:Ye(Dt(a.longitude),Dt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return d_(n.arrayValue,e.arrayValue);case 10:return function(a,u){var d,f,m,v;const w=a.fields||{},T=u.fields||{},R=(d=w.value)===null||d===void 0?void 0:d.arrayValue,C=(f=T.value)===null||f===void 0?void 0:f.arrayValue,D=Ye(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((v=C==null?void 0:C.values)===null||v===void 0?void 0:v.length)||0);return D!==0?D:d_(R,C)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===qc.mapValue&&u===qc.mapValue)return 0;if(a===qc.mapValue)return 1;if(u===qc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const T=Ye(f[w],v[w]);if(T!==0)return T;const R=Fa(d[f[w]],m[v[w]]);if(R!==0)return R}return Ye(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Le()}}function c_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=Fs(n),r=Fs(e),s=Ye(t.seconds,r.seconds);return s!==0?s:Ye(t.nanos,r.nanos)}function d_(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Fa(t[s],r[s]);if(a)return a}return Ye(t.length,r.length)}function Ua(n){return dm(n)}function dm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Fs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Us(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ne.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=dm(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${dm(t.fields[u])}`;return s+"}"}(n.mapValue):Le()}function ad(n){switch(js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gh(n);return e?16+ad(e):16;case 5:return 2*n.stringValue.length;case 6:return Us(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+ad(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Hs(r.fields,(a,u)=>{s+=a.length+ad(u)}),s}(n.mapValue);default:throw Le()}}function hm(n){return!!n&&"integerValue"in n}function Xm(n){return!!n&&"arrayValue"in n}function h_(n){return!!n&&"nullValue"in n}function f_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ld(n){return!!n&&"mapValue"in n}function Cx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Zl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ax(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ld(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(t)}setAll(e){let t=ln.emptyPath(),r={},s=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=Zl(u):s.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());ld(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ld(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Hs(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Un(Zl(this.value))}}function i1(n){const e=[];return Hs(n.fields,(t,r)=>{const s=new ln([t]);if(ld(r)){const a=i1(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)}),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new _n(e,0,Ve.min(),Ve.min(),Ve.min(),Un.empty(),0)}static newFoundDocument(e,t,r,s){return new _n(e,1,t,Ve.min(),r,s,0)}static newNoDocument(e,t){return new _n(e,2,t,Ve.min(),Ve.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,Ve.min(),Ve.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.position=e,this.inclusive=t}}function p_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=Ne.comparator(Ne.fromName(u.referenceValue),t.key):r=Fa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function m_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Px(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{}class zt extends s1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xx(e,t,r):t==="array-contains"?new Dx(e,r):t==="in"?new Ox(e,r):t==="not-in"?new Lx(e,r):t==="array-contains-any"?new Mx(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Nx(e,r):new bx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fa(t,this.value)):t!==null&&js(this.value)===js(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends s1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fi(e,t)}matches(e){return o1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function o1(n){return n.op==="and"}function a1(n){return kx(n)&&o1(n)}function kx(n){for(const e of n.filters)if(e instanceof fi)return!1;return!0}function fm(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+Ua(n.value);if(a1(n))return n.filters.map(e=>fm(e)).join(",");{const e=n.filters.map(t=>fm(t)).join(",");return`${n.op}(${e})`}}function l1(n,e){return n instanceof zt?function(r,s){return s instanceof zt&&r.op===s.op&&r.field.isEqual(s.field)&&hi(r.value,s.value)}(n,e):n instanceof fi?function(r,s){return s instanceof fi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,u,d)=>a&&l1(u,s.filters[d]),!0):!1}(n,e):void Le()}function u1(n){return n instanceof zt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ua(t.value)}`}(n):n instanceof fi?function(t){return t.op.toString()+" {"+t.getFilters().map(u1).join(" ,")+"}"}(n):"Filter"}class xx extends zt{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nx extends zt{constructor(e,t){super(e,"in",t),this.keys=c1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bx extends zt{constructor(e,t){super(e,"not-in",t),this.keys=c1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function c1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class Dx extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xm(t)&&hu(t.arrayValue,this.value)}}class Ox extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hu(this.value.arrayValue,t)}}class Lx extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!hu(this.value.arrayValue,t)}}class Mx extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function g_(n,e=null,t=[],r=[],s=null,a=null,u=null){return new Vx(n,e,t,r,s,a,u)}function Zm(n){const e=Ue(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ua(r)).join(",")),e.ue=t}return e.ue}function eg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Px(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!l1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!m_(n.startAt,e.startAt)&&m_(n.endAt,e.endAt)}function pm(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Fx(n,e,t,r,s,a,u,d){return new yh(n,e,t,r,s,a,u,d)}function tg(n){return new yh(n)}function y_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ux(n){return n.collectionGroup!==null}function eu(n){const e=Ue(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ht(ln.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new zd(a,r))}),t.has(ln.keyField().canonicalString())||e.ce.push(new zd(ln.keyField(),r))}return e.ce}function ui(n){const e=Ue(n);return e.le||(e.le=jx(e,eu(n))),e.le}function jx(n,e){if(n.limitType==="F")return g_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new zd(s.field,a)});const t=n.endAt?new Bd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bd(n.startAt.position,n.startAt.inclusive):null;return g_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mm(n,e,t){return new yh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vh(n,e){return eg(ui(n),ui(e))&&n.limitType===e.limitType}function d1(n){return`${Zm(ui(n))}|lt:${n.limitType}`}function Ta(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>u1(s)).join(", ")}]`),mh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Ua(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Ua(s)).join(",")),`Target(${r})`}(ui(n))}; limitType=${n.limitType})`}function _h(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ne.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of eu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,d,f){const m=p_(u,d,f);return u.inclusive?m<=0:m<0}(r.startAt,eu(r),s)||r.endAt&&!function(u,d,f){const m=p_(u,d,f);return u.inclusive?m>=0:m>0}(r.endAt,eu(r),s))}(n,e)}function Bx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function h1(n){return(e,t)=>{let r=!1;for(const s of eu(n)){const a=zx(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zx(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Fa(f,m):Le()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return n1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Ct(Ne.comparator);function $i(){return $x}const f1=new Ct(Ne.comparator);function Wl(...n){let e=f1;for(const t of n)e=e.insert(t.key,t);return e}function p1(n){let e=f1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function To(){return tu()}function m1(){return tu()}function tu(){return new Lo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Hx=new Ct(Ne.comparator),Wx=new Ht(Ne.comparator);function Ke(...n){let e=Wx;for(const t of n)e=e.add(t);return e}const qx=new Ht(Ye);function Kx(){return qx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function g1(n){return{integerValue:""+n}}function Gx(n,e){return Ex(e)?g1(e):ng(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this._=void 0}}function Qx(n,e,t){return n instanceof $d?function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Jm(a)&&(a=gh(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):n instanceof fu?v1(n,e):n instanceof pu?_1(n,e):function(s,a){const u=y1(s,a),d=v_(u)+v_(s.Pe);return hm(u)&&hm(s.Pe)?g1(d):ng(s.serializer,d)}(n,e)}function Yx(n,e,t){return n instanceof fu?v1(n,e):n instanceof pu?_1(n,e):t}function y1(n,e){return n instanceof Hd?function(r){return hm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class $d extends wh{}class fu extends wh{constructor(e){super(),this.elements=e}}function v1(n,e){const t=w1(e);for(const r of n.elements)t.some(s=>hi(s,r))||t.push(r);return{arrayValue:{values:t}}}class pu extends wh{constructor(e){super(),this.elements=e}}function _1(n,e){let t=w1(e);for(const r of n.elements)t=t.filter(s=>!hi(s,r));return{arrayValue:{values:t}}}class Hd extends wh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function v_(n){return Dt(n.integerValue||n.doubleValue)}function w1(n){return Xm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Jx(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof fu&&s instanceof fu||r instanceof pu&&s instanceof pu?Va(r.elements,s.elements,hi):r instanceof Hd&&s instanceof Hd?hi(r.Pe,s.Pe):r instanceof $d&&s instanceof $d}(n.transform,e.transform)}class Xx{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ud(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Eh{}function E1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Th(n.key,Bn.none()):new Ru(n.key,n.data,Bn.none());{const t=n.data,r=Un.empty();let s=new Ht(ln.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Ws(n.key,r,new Zn(s.toArray()),Bn.none())}}function Zx(n,e,t){n instanceof Ru?function(s,a,u){const d=s.value.clone(),f=w_(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ws?function(s,a,u){if(!ud(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=w_(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(T1(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function nu(n,e,t,r){return n instanceof Ru?function(a,u,d,f){if(!ud(a.precondition,u))return d;const m=a.value.clone(),v=E_(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ws?function(a,u,d,f){if(!ud(a.precondition,u))return d;const m=E_(a.fieldTransforms,f,u),v=u.data;return v.setAll(T1(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,u,d){return ud(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function eN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=y1(r.transform,s||null);a!=null&&(t===null&&(t=Un.empty()),t.set(r.field,a))}return t||null}function __(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Va(r,s,(a,u)=>Jx(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ru extends Eh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ws extends Eh{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function T1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function w_(n,e,t){const r=new Map;ct(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Yx(u,d,t[s]))}return r}function E_(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Qx(a,u,e))}return r}class Th extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tN extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Zx(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=m1();return this.mutations.forEach(s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=E1(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ke())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(t,r)=>__(t,r))&&Va(this.baseMutations,e.baseMutations,(t,r)=>__(t,r))}}class rg{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ct(e.mutations.length===r.length);let s=function(){return Hx}();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new rg(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,tt;function sN(n){switch(n){default:return Le();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function S1(n){if(n===void 0)return zi("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Mt.OK:return oe.OK;case Mt.CANCELLED:return oe.CANCELLED;case Mt.UNKNOWN:return oe.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return oe.INTERNAL;case Mt.UNAVAILABLE:return oe.UNAVAILABLE;case Mt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Mt.NOT_FOUND:return oe.NOT_FOUND;case Mt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Mt.ABORTED:return oe.ABORTED;case Mt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Mt.DATA_LOSS:return oe.DATA_LOSS;default:return Le()}}(tt=Mt||(Mt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Ro([4294967295,4294967295],0);function T_(n){const e=oN().encode(n),t=new GE;return t.update(e),new Uint8Array(t.digest())}function S_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ro([t,r],0),new Ro([s,a],0)]}class ig{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ql(`Invalid padding: ${t}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ql(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ro.fromNumber(this.Te)}Ee(e,t,r){let s=e.add(t.multiply(Ro.fromNumber(r)));return s.compare(aN)===1&&(s=new Ro([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=T_(e),[r,s]=S_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ig(a,s,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(this.Te===0)return;const t=T_(e),[r,s]=S_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sh(Ve.min(),s,new Ct(Ye),$i(),Ke())}}class Cu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Cu(r,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class I1{constructor(e,t){this.targetId=e,this.me=t}}class R1{constructor(e,t,r=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class I_{constructor(){this.fe=0,this.ge=R_(),this.pe=un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ke(),t=Ke(),r=Ke();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Le()}}),new Cu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=R_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lN{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=Kc(),this.Qe=Kc(),this.Ke=new Ct(Ye)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Le()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const a=s.target;if(pm(a))if(r===0){const u=new Ne(a.path);this.We(t,u,_n.newNoDocument(u,Ve.min()))}else ct(r===1);else{const u=this.Ze(t);if(u!==r){const d=this.Xe(e),f=d?this.et(d,e,u):1;if(f!==0){this.He(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,m)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=Us(r).toUint8Array()}catch(f){if(f instanceof r1)return Ma("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new ig(u,s,a)}catch(f){return Ma(f instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Te===0?null:d}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const u=this.Le.nt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.We(t,a,null),s++)}),s}it(e){const t=new Map;this.Be.forEach((a,u)=>{const d=this.Ye(u);if(d){if(a.current&&pm(d.target)){const f=new Ne(d.target.path);this.st(f).has(u)||this.ot(u,f)||this.We(u,f,_n.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let r=Ke();this.Qe.forEach((a,u)=>{let d=!0;u.forEachWhile(f=>{const m=this.Ye(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const s=new Sh(e,t,this.Ke,this.ke,r);return this.ke=$i(),this.qe=Kc(),this.Qe=Kc(),this.Ke=new Ct(Ye),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new I_,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Ht(Ye),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ht(Ye),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new I_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new Ct(Ne.comparator)}function R_(){return new Ct(Ne.comparator)}const uN={asc:"ASCENDING",desc:"DESCENDING"},cN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dN={and:"AND",or:"OR"};class hN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gm(n,e){return n.useProto3Json||mh(e)?e:{value:e}}function Wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fN(n,e){return Wd(n,e.toTimestamp())}function ci(n){return ct(!!n),Ve.fromTimestamp(function(t){const r=Fs(t);return new $t(r.seconds,r.nanos)}(n))}function sg(n,e){return ym(n,e).canonicalString()}function ym(n,e){const t=function(s){return new Tt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function A1(n){const e=Tt.fromString(n);return ct(b1(e)),e}function vm(n,e){return sg(n.databaseId,e.path)}function Dp(n,e){const t=A1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(k1(t))}function P1(n,e){return sg(n.databaseId,e)}function pN(n){const e=A1(n);return e.length===4?Tt.emptyPath():k1(e)}function _m(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function k1(n){return ct(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function C_(n,e,t){return{name:vm(n,e),fields:t.value.mapValue.fields}}function mN(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Le()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(ct(v===void 0||typeof v=="string"),un.fromBase64String(v||"")):(ct(v===void 0||v instanceof Buffer||v instanceof Uint8Array),un.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(m){const v=m.code===void 0?oe.UNKNOWN:S1(m.code);return new Ce(v,m.message||"")}(u);t=new R1(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Dp(n,r.document.name),a=ci(r.document.updateTime),u=r.document.createTime?ci(r.document.createTime):Ve.min(),d=new Un({mapValue:{fields:r.document.fields}}),f=_n.newFoundDocument(s,a,u,d),m=r.targetIds||[],v=r.removedTargetIds||[];t=new cd(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Dp(n,r.document),a=r.readTime?ci(r.readTime):Ve.min(),u=_n.newNoDocument(s,a),d=r.removedTargetIds||[];t=new cd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Dp(n,r.document),a=r.removedTargetIds||[];t=new cd([],a,s,null)}else{if(!("filter"in e))return Le();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new iN(s,a),d=r.targetId;t=new I1(d,u)}}return t}function gN(n,e){let t;if(e instanceof Ru)t={update:C_(n,e.key,e.value)};else if(e instanceof Th)t={delete:vm(n,e.key)};else if(e instanceof Ws)t={update:C_(n,e.key,e.data),updateMask:RN(e.fieldMask)};else{if(!(e instanceof tN))return Le();t={verify:vm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const d=u.transform;if(d instanceof $d)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof fu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof pu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Hd)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Le()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:fN(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Le()}(n,e.precondition)),t}function yN(n,e){return n&&n.length>0?(ct(e!==void 0),n.map(t=>function(s,a){let u=s.updateTime?ci(s.updateTime):ci(a);return u.isEqual(Ve.min())&&(u=ci(a)),new Xx(u,s.transformResults||[])}(t,e))):[]}function vN(n,e){return{documents:[P1(n,e.path)]}}function _N(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=P1(n,s);const a=function(m){if(m.length!==0)return N1(fi.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(v=>function(T){return{field:Sa(T.field),direction:TN(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=gm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ct:t,parent:s}}function wN(n){let e=pN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ct(r===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const T=x1(w);return T instanceof fi&&a1(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(T=>function(C){return new zd(Ia(C.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,mh(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(w){const T=!!w.before,R=w.values||[];return new Bd(R,T)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const T=!w.before,R=w.values||[];return new Bd(R,T)}(t.endAt)),Fx(e,s,u,a,d,"F",f,m)}function EN(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function x1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ia(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ia(t.unaryFilter.field);return zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ia(t.unaryFilter.field);return zt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ia(t.unaryFilter.field);return zt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Le()}}(n):n.fieldFilter!==void 0?function(t){return zt.create(Ia(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Le()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fi.create(t.compositeFilter.filters.map(r=>x1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le()}}(t.compositeFilter.op))}(n):Le()}function TN(n){return uN[n]}function SN(n){return cN[n]}function IN(n){return dN[n]}function Sa(n){return{fieldPath:n.canonicalString()}}function Ia(n){return ln.fromServerFormat(n.fieldPath)}function N1(n){return n instanceof zt?function(t){if(t.op==="=="){if(f_(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NAN"}};if(h_(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(f_(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NAN"}};if(h_(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(t.field),op:SN(t.op),value:t.value}}}(n):n instanceof fi?function(t){const r=t.getFilters().map(s=>N1(s));return r.length===1?r[0]:{compositeFilter:{op:IN(t.op),filters:r}}}(n):Le()}function RN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function b1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r,s,a=Ve.min(),u=Ve.min(),d=un.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.ht=e}}function AN(n){const e=wN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.ln=new kN}addToCollectionParentIndex(e,t){return this.ln.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Vs.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class kN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ht(Tt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ht(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(41943040,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ja(0)}static Qn(){return new ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_([n,e],[t,r]){const s=Ye(n,t);return s===0?Ye(e,r):s}class xN{constructor(e){this.Gn=e,this.buffer=new Ht(P_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();P_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ye("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ja(t)?ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ya(t)}await this.Yn(3e5)})}}class bN{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(ph.oe);const r=new xN(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(A_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,a,u,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(r=w,d=Date.now(),this.removeTargets(e,r,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(m=Date.now(),Ea()<=qe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w})))}}function DN(n,e){return new bN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.changes=new Lo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&nu(r.mutation,s,Zn.empty(),$t.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ke()){const s=To();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let u=Wl();return a.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=To();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ke()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,s){let a=$i();const u=tu(),d=function(){return tu()}();return t.forEach((f,m)=>{const v=r.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Ws)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),nu(v.mutation,m,v.mutation.getFieldMask(),$t.now())):u.set(m.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>u.set(m,v)),t.forEach((m,v)=>{var w;return d.set(m,new LN(v,(w=u.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=tu();let s=new Ct((u,d)=>u-d),a=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||Zn.empty();v=d.applyToLocalView(m,v),r.set(f,v);const w=(s.get(d.batchId)||Ke()).add(f);s=s.insert(d.batchId,w)})}).next(()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,w=m1();v.forEach(T=>{if(!a.has(T)){const R=E1(t.get(T),r.get(T));R!==null&&w.set(T,R),a=a.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return ie.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return Ne.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ux(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):ie.resolve(To());let d=-1,f=a;return u.next(m=>ie.forEach(m,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{f=f.insert(v,T)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Ke())).next(v=>({batchId:d,changes:p1(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next(r=>{let s=Wl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=Wl();return this.indexManager.getCollectionParents(e,a).next(d=>ie.forEach(d,f=>{const m=function(w,T){return new yh(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(v=>{v.forEach((w,T)=>{u=u.insert(w,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(u=>{a.forEach((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,_n.newInvalidDocument(v)))});let d=Wl();return u.forEach((f,m)=>{const v=a.get(f);v!==void 0&&nu(v.mutation,m,Zn.empty(),$t.now()),_h(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return ie.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ci(s.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:AN(s.bundledQuery),readTime:ci(s.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.overlays=new Ct(Ne.comparator),this.Er=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=To();return ie.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.Tt(e,t,a)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Er.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Er.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=To(),a=t.length+1,u=new Ne(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Ct((m,v)=>m-v);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=To(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=To(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=s)););return ie.resolve(d)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Er.get(s.largestBatchId).delete(r.key);this.Er.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new rN(t,r));let a=this.Er.get(t);a===void 0&&(a=Ke(),this.Er.set(t,a)),this.Er.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.dr=new Ht(Yt.Ar),this.Rr=new Ht(Yt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Yt(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Yt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new Ne(new Tt([])),r=new Yt(t,e),s=new Yt(t,e+1),a=[];return this.Rr.forEachInRange([r,s],u=>{this.gr(u),a.push(u.key)}),a}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Ne(new Tt([])),r=new Yt(t,e),s=new Yt(t,e+1);let a=Ke();return this.Rr.forEachInRange([r,s],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Yt(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Yt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Ne.comparator(e.key,t.key)||Ye(e.br,t.br)}static Vr(e,t){return Ye(e.br,t.br)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Ht(Yt.Ar)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new nN(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.vr=this.vr.add(new Yt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),a=s<0?0:s;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yt(t,0),s=new Yt(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([r,s],u=>{const d=this.Cr(u.br);a.push(d)}),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ht(Ye);return t.forEach(s=>{const a=new Yt(s,0),u=new Yt(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,u],d=>{r=r.add(d.br)})}),ie.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Ne.isDocumentKey(a)||(a=a.child(""));const u=new Yt(new Ne(a),0);let d=new Ht(Ye);return this.vr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.br)),!0)},u),ie.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ct(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return ie.forEach(t.mutations,s=>{const a=new Yt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Yt(t,0),s=this.vr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.Nr=e,this.docs=function(){return new Ct(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=$i();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():_n.newInvalidDocument(s))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=$i();const u=t.path,d=new Ne(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||yx(gx(v),r)<=0||(s.has(v.key)||_h(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Le()}Lr(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zN(this)}getSize(e){return ie.resolve(this.size)}}class zN extends ON{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.persistence=e,this.Br=new Lo(t=>Zm(t),eg),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.kr=0,this.qr=new og,this.targetCount=0,this.Qr=ja.qn()}forEachTarget(e,t){return this.Br.forEach((r,s)=>t(s)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),ie.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new ja(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Un(t),ie.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Br.forEach((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Br.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),ie.waitFor(a).next(()=>s)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t){this.Kr={},this.overlays={},this.$r=new ph(0),this.Ur=!1,this.Ur=!0,this.Wr=new UN,this.referenceDelegate=e(this),this.Gr=new $N(this),this.indexManager=new PN,this.remoteDocumentCache=function(s){return new BN(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new CN(t),this.jr=new VN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new jN(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const s=new HN(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(a=>this.referenceDelegate.Jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Yr(e,t){return ie.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class HN extends _x{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Zr=new og,this.Xr=null}static ei(e){return new ag(e)}get ti(){if(this.Xr)return this.Xr;throw Le()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.ti.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ti,r=>{const s=Ne.fromPath(r);return this.ni(e,s).next(a=>{a||t.removeEntry(s,Ve.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return ie.or([()=>ie.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class qd{constructor(e,t){this.persistence=e,this.ri=new Lo(r=>Tx(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=DN(this,t)}static ei(e,t){return new qd(e,t)}Hr(){}Jr(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return ie.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(a=>a?ie.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.Lr(e,u=>this.ir(e,u,t).next(d=>{d||(r++,a.removeEntry(u,Ve.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),ie.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ad(e.data.value)),t}ir(e,t,r){return ie.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=Ke(),s=Ke();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new lg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return R2()?8:wx(En())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Xi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.es(e,t,s,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new WN;return this.ts(e,t,u).next(d=>{if(a.result=d,this.Hi)return this.ns(e,t,u,d.size)})}).next(()=>a.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(Ea()<=qe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ie.resolve()):(Ea()<=qe.DEBUG&&ye("QueryEngine","Query:",Ta(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(Ea()<=qe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):ie.resolve())}Xi(e,t){if(y_(t))return ie.resolve(null);let r=ui(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=mm(t,null,"F"),r=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Ke(...a);return this.Zi.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.rs(t,d);return this.ss(t,m,u,f.readTime)?this.Xi(e,mm(t,null,"F")):this.os(e,m,t,f)}))})))}es(e,t,r,s){return y_(t)||s.isEqual(Ve.min())?ie.resolve(null):this.Zi.getDocuments(e,r).next(a=>{const u=this.rs(t,a);return this.ss(t,u,r,s)?ie.resolve(null):(Ea()<=qe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ta(t)),this.os(e,u,t,mx(s,-1)).next(d=>d))})}rs(e,t){let r=new Ht(h1(e));return t.forEach((s,a)=>{_h(e,a)&&(r=r.add(a))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ts(e,t,r){return Ea()<=qe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ta(t)),this.Zi.getDocumentsMatchingQuery(e,t,Vs.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new Ct(Ye),this.cs=new Lo(a=>Zm(a),eg),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MN(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function GN(n,e,t,r){return new KN(n,e,t,r)}async function O1(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let f=Ke();for(const m of s){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(m=>({Ts:m,removedBatchIds:u,addedBatchIds:d}))})})}function QN(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,v){const w=m.batch,T=w.keys();let R=ie.resolve();return T.forEach(C=>{R=R.next(()=>v.getEntry(f,C)).next(D=>{const P=m.docVersions.get(C);ct(P!==null),D.version.compareTo(P)<0&&(w.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),v.addEntry(D)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(f,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=Ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function L1(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function YN(n,e){const t=Ue(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const d=[];e.targetChanges.forEach((v,w)=>{const T=s.get(w);if(!T)return;d.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,w)));let R=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(un.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),s=s.insert(w,R),function(D,P,F){return D.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(T,R,v)&&d.push(t.Gr.updateTargetData(a,R))});let f=$i(),m=Ke();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(JN(a,u,e.documentUpdates).next(v=>{f=v.Is,m=v.Es})),!r.isEqual(Ve.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(w=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(v)}return ie.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.us=s,a))}function JN(n,e,t){let r=Ke(),s=Ke();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=$i();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Ve.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ye("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Is:u,Es:s}})}function XN(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZN(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(a=>a?(s=a,ie.resolve(s)):t.Gr.allocateTargetId(r).next(u=>(s=new Ns(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function wm(n,e,t){const r=Ue(n),s=r.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Ja(u))throw u;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function k_(n,e,t){const r=Ue(n);let s=Ve.min(),a=Ke();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,v){const w=Ue(f),T=w.cs.get(v);return T!==void 0?ie.resolve(w.us.get(T)):w.Gr.getTargetData(m,v)}(r,u,ui(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(u,d.targetId).next(f=>{a=f})}).next(()=>r._s.getDocumentsMatchingQuery(u,e,t?s:Ve.min(),t?a:Ke())).next(d=>(eb(r,Bx(e),d),{documents:d,ds:a})))}function eb(n,e,t){let r=n.ls.get(e)||Ve.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ls.set(e,r)}class x_{constructor(){this.activeTargetIds=Kx()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tb{constructor(){this._o=new x_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new x_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc=null;function Op(){return Gc===null?Gc=function(){return 268435456+Math.round(2147483648*Math.random())}():Gc++,"0x"+Gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class sb extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Oo(t,r,s,a,u){const d=Op(),f=this.No(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(m,a,u),this.Bo(t,f,m,s).then(v=>(ye("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw Ma("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",f,"request:",s),v})}ko(t,r,s,a,u,d){return this.Oo(t,r,s,a,u)}Lo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,u)=>t[u]=a),s&&s.headers.forEach((a,u)=>t[u]=a)}No(t,r){const s=rb[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,s){const a=Op();return new Promise((u,d)=>{const f=new QE;f.setWithCredentials(!0),f.listenOnce(YE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case od.NO_ERROR:const v=f.getResponseJson();ye(yn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case od.TIMEOUT:ye(yn,`RPC '${e}' ${a} timed out`),d(new Ce(oe.DEADLINE_EXCEEDED,"Request time out"));break;case od.HTTP_ERROR:const w=f.getStatus();if(ye(yn,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T==null?void 0:T.error;if(R&&R.status&&R.message){const C=function(P){const F=P.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(F)>=0?F:oe.UNKNOWN}(R.status);d(new Ce(C,R.message))}else d(new Ce(oe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ce(oe.UNAVAILABLE,"Connection failed."));break;default:Le()}}finally{ye(yn,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);ye(yn,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)})}qo(e,t,r){const s=Op(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZE(),d=XE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");ye(yn,`Creating RPC '${e}' stream ${s}: ${v}`,f);const w=u.createWebChannel(v,f);let T=!1,R=!1;const C=new ib({Eo:P=>{R?ye(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(T||(ye(yn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),ye(yn,`RPC '${e}' stream ${s} sending:`,P),w.send(P))},Ao:()=>w.close()}),D=(P,F,Q)=>{P.listen(F,K=>{try{Q(K)}catch(te){setTimeout(()=>{throw te},0)}})};return D(w,Hl.EventType.OPEN,()=>{R||(ye(yn,`RPC '${e}' stream ${s} transport opened.`),C.So())}),D(w,Hl.EventType.CLOSE,()=>{R||(R=!0,ye(yn,`RPC '${e}' stream ${s} transport closed`),C.Do())}),D(w,Hl.EventType.ERROR,P=>{R||(R=!0,Ma(yn,`RPC '${e}' stream ${s} transport errored:`,P),C.Do(new Ce(oe.UNAVAILABLE,"The operation could not be completed")))}),D(w,Hl.EventType.MESSAGE,P=>{var F;if(!R){const Q=P.data[0];ct(!!Q);const K=Q,te=(K==null?void 0:K.error)||((F=K[0])===null||F===void 0?void 0:F.error);if(te){ye(yn,`RPC '${e}' stream ${s} received error:`,te);const L=te.status;let re=function(k){const O=Mt[k];if(O!==void 0)return S1(O)}(L),N=te.message;re===void 0&&(re=oe.INTERNAL,N="Unknown error status: "+L+" with message "+te.message),R=!0,C.Do(new Ce(re,N)),w.close()}else ye(yn,`RPC '${e}' stream ${s} received:`,Q),C.vo(Q)}}),D(d,JE.STAT_EVENT,P=>{P.stat===cm.PROXY?ye(yn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===cm.NOPROXY&&ye(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.bo()},0),C}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(n){return new hN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t,r=1e3,s=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,t,r,s,a,u,d,f){this.li=e,this.Yo=r,this.Zo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new M1(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(zi(t.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new Ce(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.E_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ob extends V1{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=mN(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ve.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?ci(u.readTime):Ve.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=_m(this.serializer),t.addTarget=function(a,u){let d;const f=u.target;if(d=pm(f)?{documents:vN(a,f)}:{query:_N(a,f).ct},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=C1(a,u.resumeToken);const m=gm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ve.min())>0){d.readTime=Wd(a,u.snapshotVersion.toTimestamp());const m=gm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=EN(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=_m(this.serializer),t.removeTarget=e,this.c_(t)}}class ab extends V1{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=yN(e.writeResults,e.commitTime),r=ci(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=_m(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>gN(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Oo(e,ym(t,r),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(oe.UNKNOWN,a.toString())})}ko(e,t,r,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.ko(e,ym(t,r),s,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(oe.UNKNOWN,u.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class ub{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(zi(t),this.C_=!1):ye("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(u=>{r.enqueueAndForget(async()=>{Mo(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(f){const m=Ue(f);m.k_.add(4),await Au(m),m.K_.set("Unknown"),m.k_.delete(4),await Rh(m)}(this))})}),this.K_=new ub(r,s)}}async function Rh(n){if(Mo(n))for(const e of n.q_)await e(!0)}async function Au(n){for(const e of n.q_)await e(!1)}function F1(n,e){const t=Ue(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),hg(t)?dg(t):Xa(t).s_()&&cg(t,e))}function ug(n,e){const t=Ue(n),r=Xa(t);t.B_.delete(e),r.s_()&&U1(t,e),t.B_.size===0&&(r.s_()?r.a_():Mo(t)&&t.K_.set("Unknown"))}function cg(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xa(n).V_(e)}function U1(n,e){n.U_.xe(e),Xa(n).m_(e)}function dg(n){n.U_=new lN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Xa(n).start(),n.K_.F_()}function hg(n){return Mo(n)&&!Xa(n).i_()&&n.B_.size>0}function Mo(n){return Ue(n).k_.size===0}function j1(n){n.U_=void 0}async function db(n){n.K_.set("Online")}async function hb(n){n.B_.forEach((e,t)=>{cg(n,e)})}async function fb(n,e){j1(n),hg(n)?(n.K_.O_(e),dg(n)):n.K_.set("Unknown")}async function pb(n,e,t){if(n.K_.set("Online"),e instanceof R1&&e.state===2&&e.cause)try{await async function(s,a){const u=a.cause;for(const d of a.targetIds)s.B_.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.B_.delete(d),s.U_.removeTarget(d))}(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kd(n,r)}else if(e instanceof cd?n.U_.$e(e):e instanceof I1?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ve.min()))try{const r=await L1(n.localStore);t.compareTo(r)>=0&&await function(a,u){const d=a.U_.it(u);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.B_.get(m);v&&a.B_.set(m,v.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,m)=>{const v=a.B_.get(f);if(!v)return;a.B_.set(f,v.withResumeToken(un.EMPTY_BYTE_STRING,v.snapshotVersion)),U1(a,f);const w=new Ns(v.target,f,m,v.sequenceNumber);cg(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await Kd(n,r)}}async function Kd(n,e,t){if(!Ja(e))throw e;n.k_.add(1),await Au(n),n.K_.set("Offline"),t||(t=()=>L1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Rh(n)})}function B1(n,e){return e().catch(t=>Kd(n,t,e))}async function Ch(n){const e=Ue(n),t=Bs(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;mb(e);)try{const s=await XN(e.localStore,r);if(s===null){e.L_.length===0&&t.a_();break}r=s.batchId,gb(e,s)}catch(s){await Kd(e,s)}z1(e)&&$1(e)}function mb(n){return Mo(n)&&n.L_.length<10}function gb(n,e){n.L_.push(e);const t=Bs(n);t.s_()&&t.f_&&t.g_(e.mutations)}function z1(n){return Mo(n)&&!Bs(n).i_()&&n.L_.length>0}function $1(n){Bs(n).start()}async function yb(n){Bs(n).w_()}async function vb(n){const e=Bs(n);for(const t of n.L_)e.g_(t.mutations)}async function _b(n,e,t){const r=n.L_.shift(),s=rg.from(r,e,t);await B1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Ch(n)}async function wb(n,e){e&&Bs(n).f_&&await async function(r,s){if(function(u){return sN(u)&&u!==oe.ABORTED}(s.code)){const a=r.L_.shift();Bs(r).__(),await B1(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Ch(r)}}(n,e),z1(n)&&$1(n)}async function b_(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=Mo(t);t.k_.add(3),await Au(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Rh(t)}async function Eb(n,e){const t=Ue(n);e?(t.k_.delete(2),await Rh(t)):e||(t.k_.add(2),await Au(t),t.K_.set("Unknown"))}function Xa(n){return n.W_||(n.W_=function(t,r,s){const a=Ue(t);return a.b_(),new ob(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:db.bind(null,n),mo:hb.bind(null,n),po:fb.bind(null,n),R_:pb.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),hg(n)?dg(n):n.K_.set("Unknown")):(await n.W_.stop(),j1(n))})),n.W_}function Bs(n){return n.G_||(n.G_=function(t,r,s){const a=Ue(t);return a.b_(),new ab(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:yb.bind(null,n),po:wb.bind(null,n),p_:vb.bind(null,n),y_:_b.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Ch(n)):(await n.G_.stop(),n.L_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new fg(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(n,e){if(zi("AsyncQueue",`${e}: ${n}`),Ja(n))return new Ce(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static emptySet(e){return new xa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=Wl(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new xa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.z_=new Ct(Ne.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Le():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ba{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Ba(e,t,xa.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class Sb{constructor(){this.queries=O_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=Ue(t),a=s.queries;s.queries=O_(),a.forEach((u,d)=>{for(const f of d.J_)f.onError(r)})})(this,new Ce(oe.ABORTED,"Firestore shutting down"))}}function O_(){return new Lo(n=>d1(n),vh)}async function H1(n,e){const t=Ue(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Y_()&&e.Z_()&&(r=2):(a=new Tb,r=e.Z_()?0:1);try{switch(r){case 0:a.H_=await t.onListen(s,!0);break;case 1:a.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=pg(u,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&mg(t)}async function W1(n,e){const t=Ue(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.J_.indexOf(e);u>=0&&(a.J_.splice(u,1),a.J_.length===0?s=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Ib(n,e){const t=Ue(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.J_)d.ta(s)&&(r=!0);u.H_=s}}r&&mg(t)}function Rb(n,e,t){const r=Ue(n),s=r.queries.get(e);if(s)for(const a of s.J_)a.onError(t);r.queries.delete(e)}function mg(n){n.X_.forEach(e=>{e.next()})}var Em,L_;(L_=Em||(Em={})).na="default",L_.Cache="cache";class q1{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ba(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.key=e}}class G1{constructor(e){this.key=e}}class Cb{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ke(),this.mutatedKeys=Ke(),this.Va=h1(e),this.ma=new xa(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new D_,s=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,w)=>{const T=s.get(v),R=_h(this.query,w)?w:null,C=!!T&&this.mutatedKeys.has(T.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let P=!1;T&&R?T.data.isEqual(R.data)?C!==D&&(r.track({type:3,doc:R}),P=!0):this.ya(T,R)||(r.track({type:2,doc:R}),P=!0,(f&&this.Va(R,f)>0||m&&this.Va(R,m)<0)&&(d=!0)):!T&&R?(r.track({type:0,doc:R}),P=!0):T&&!R&&(r.track({type:1,doc:T}),P=!0,(f||m)&&(d=!0)),P&&(R?(u=u.add(R),a=D?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{ma:u,pa:r,ss:d,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const u=e.pa.j_();u.sort((v,w)=>function(R,C){const D=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le()}};return D(R)-D(C)}(v.type,w.type)||this.Va(v.doc,w.doc)),this.wa(r),s=s!=null&&s;const d=t&&!s?this.Sa():[],f=this.Ra.size===0&&this.current&&!s?1:0,m=f!==this.Aa;return this.Aa=f,u.length!==0||m?{snapshot:new Ba(this.query,e.ma,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new D_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ke(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new G1(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new K1(r))}),t}va(e){this.da=e.ds,this.Ra=Ke();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Ba.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Ab{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Pb{constructor(e){this.key=e,this.Fa=!1}}class kb{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ma={},this.xa=new Lo(d=>d1(d),vh),this.Oa=new Map,this.Na=new Set,this.La=new Ct(Ne.comparator),this.Ba=new Map,this.ka=new og,this.qa={},this.Qa=new Map,this.Ka=ja.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function xb(n,e,t=!0){const r=eT(n);let s;const a=r.xa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Ca()):s=await Q1(r,e,t,!0),s}async function Nb(n,e){const t=eT(n);await Q1(t,e,!0,!1)}async function Q1(n,e,t,r){const s=await ZN(n.localStore,ui(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await bb(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&F1(n.remoteStore,s),d}async function bb(n,e,t,r,s){n.Ua=(w,T,R)=>async function(D,P,F,Q){let K=P.view.ga(F);K.ss&&(K=await k_(D.localStore,P.query,!1).then(({documents:N})=>P.view.ga(N,K)));const te=Q&&Q.targetChanges.get(P.targetId),L=Q&&Q.targetMismatches.get(P.targetId)!=null,re=P.view.applyChanges(K,D.isPrimaryClient,te,L);return V_(D,P.targetId,re.ba),re.snapshot}(n,w,T,R);const a=await k_(n.localStore,e,!0),u=new Cb(e,a.ds),d=u.ga(a.documents),f=Cu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);V_(n,t,m.ba);const v=new Ab(e,t,u);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),m.snapshot}async function Db(n,e,t){const r=Ue(n),s=r.xa.get(e),a=r.Oa.get(s.targetId);if(a.length>1)return r.Oa.set(s.targetId,a.filter(u=>!vh(u,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ug(r.remoteStore,s.targetId),Tm(r,s.targetId)}).catch(Ya)):(Tm(r,s.targetId),await wm(r.localStore,s.targetId,!0))}async function Ob(n,e){const t=Ue(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ug(t.remoteStore,r.targetId))}async function Lb(n,e,t){const r=zb(n);try{const s=await function(u,d){const f=Ue(u),m=$t.now(),v=d.reduce((R,C)=>R.add(C.key),Ke());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let C=$i(),D=Ke();return f.hs.getEntries(R,v).next(P=>{C=P,C.forEach((F,Q)=>{Q.isValidDocument()||(D=D.add(F))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,C)).next(P=>{w=P;const F=[];for(const Q of d){const K=eN(Q,w.get(Q.key).overlayedDocument);K!=null&&F.push(new Ws(Q.key,K,i1(K.value.mapValue),Bn.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,F,d)}).next(P=>{T=P;const F=P.applyToLocalDocumentSet(w,D);return f.documentOverlayCache.saveOverlays(R,P.batchId,F)})}).then(()=>({batchId:T.batchId,changes:p1(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,f){let m=u.qa[u.currentUser.toKey()];m||(m=new Ct(Ye)),m=m.insert(d,f),u.qa[u.currentUser.toKey()]=m}(r,s.batchId,t),await Pu(r,s.changes),await Ch(r.remoteStore)}catch(s){const a=pg(s,"Failed to persist write");t.reject(a)}}async function Y1(n,e){const t=Ue(n);try{const r=await YN(t.localStore,e);e.targetChanges.forEach((s,a)=>{const u=t.Ba.get(a);u&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Fa=!0:s.modifiedDocuments.size>0?ct(u.Fa):s.removedDocuments.size>0&&(ct(u.Fa),u.Fa=!1))}),await Pu(t,r,e)}catch(r){await Ya(r)}}function M_(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((a,u)=>{const d=u.view.ea(e);d.snapshot&&s.push(d.snapshot)}),function(u,d){const f=Ue(u);f.onlineState=d;let m=!1;f.queries.forEach((v,w)=>{for(const T of w.J_)T.ea(d)&&(m=!0)}),m&&mg(f)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mb(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ba.get(e),a=s&&s.key;if(a){let u=new Ct(Ne.comparator);u=u.insert(a,_n.newNoDocument(a,Ve.min()));const d=Ke().add(a),f=new Sh(Ve.min(),new Map,new Ct(Ye),u,d);await Y1(r,f),r.La=r.La.remove(a),r.Ba.delete(e),gg(r)}else await wm(r.localStore,e,!1).then(()=>Tm(r,e,t)).catch(Ya)}async function Vb(n,e){const t=Ue(n),r=e.batch.batchId;try{const s=await QN(t.localStore,e);X1(t,r,null),J1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Pu(t,s)}catch(s){await Ya(s)}}async function Fb(n,e,t){const r=Ue(n);try{const s=await function(u,d){const f=Ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next(w=>(ct(w!==null),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);X1(r,e,t),J1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Pu(r,s)}catch(s){await Ya(s)}}function J1(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function X1(n,e,t){const r=Ue(n);let s=r.qa[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.qa[r.currentUser.toKey()]=s}}function Tm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||Z1(n,r)})}function Z1(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(ug(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),gg(n))}function V_(n,e,t){for(const r of t)r instanceof K1?(n.ka.addReference(r.key,e),Ub(n,r)):r instanceof G1?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||Z1(n,r.key)):Le()}function Ub(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.Na.add(r),gg(n))}function gg(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Ne(Tt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new Pb(t)),n.La=n.La.insert(t,r),F1(n.remoteStore,new Ns(ui(tg(t.path)),r,"TargetPurposeLimboResolution",ph.oe))}}async function Pu(n,e,t){const r=Ue(n),s=[],a=[],u=[];r.xa.isEmpty()||(r.xa.forEach((d,f)=>{u.push(r.Ua(f,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=lg.zi(f.targetId,m);a.push(w)}}))}),await Promise.all(u),r.Ma.R_(s),await async function(f,m){const v=Ue(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ie.forEach(m,T=>ie.forEach(T.Wi,R=>v.persistence.referenceDelegate.addReference(w,T.targetId,R)).next(()=>ie.forEach(T.Gi,R=>v.persistence.referenceDelegate.removeReference(w,T.targetId,R)))))}catch(w){if(!Ja(w))throw w;ye("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const R=v.us.get(T),C=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(C);v.us=v.us.insert(T,D)}}}(r.localStore,a))}async function jb(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await O1(t.localStore,e);t.currentUser=e,function(a,u){a.Qa.forEach(d=>{d.forEach(f=>{f.reject(new Ce(oe.CANCELLED,u))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pu(t,r.Ts)}}function Bb(n,e){const t=Ue(n),r=t.Ba.get(e);if(r&&r.Fa)return Ke().add(r.key);{let s=Ke();const a=t.Oa.get(e);if(!a)return s;for(const u of a){const d=t.xa.get(u);s=s.unionWith(d.view.fa)}return s}}function eT(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mb.bind(null,e),e.Ma.R_=Ib.bind(null,e.eventManager),e.Ma.Wa=Rb.bind(null,e.eventManager),e}function zb(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fb.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return GN(this.persistence,new qN,e.initialUser,this.serializer)}ja(e){return new D1(ag.ei,this.serializer)}za(e){return new tb}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class $b extends Gd{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ct(this.persistence.referenceDelegate instanceof qd);const r=this.persistence.referenceDelegate.garbageCollector;return new NN(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new D1(r=>qd.ei(r,t),this.serializer)}}class Sm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>M_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jb.bind(null,this.syncEngine),await Eb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Sb}()}createDatastore(e){const t=Ih(e.databaseInfo.databaseId),r=function(a){return new sb(a)}(e.databaseInfo);return function(a,u,d,f){return new lb(a,u,d,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,u,d){return new cb(r,s,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>M_(this.syncEngine,t,0),function(){return N_.p()?new N_:new nb}())}createSyncEngine(e,t){return function(s,a,u,d,f,m,v){const w=new kb(s,a,u,d,f,m);return v&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=Ue(s);ye("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await Au(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=t1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{ye("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ye("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=pg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mp(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await O1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function F_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Wb(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>b_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>b_(e.remoteStore,s)),n._onlineComponents=e}async function Wb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Ma("Error using user provided cache. Falling back to memory cache: "+t),await Mp(n,new Gd)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Mp(n,new $b(void 0));return n._offlineComponents}async function nT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await F_(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await F_(n,new Sm))),n._onlineComponents}function qb(n){return nT(n).then(e=>e.syncEngine)}async function rT(n){const e=await nT(n),t=e.eventManager;return t.onListen=xb.bind(null,e.syncEngine),t.onUnlisten=Db.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Nb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ob.bind(null,e.syncEngine),t}function Kb(n,e,t={}){const r=new Fi;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new tT({next:T=>{v.eu(),u.enqueueAndForget(()=>W1(a,w));const R=T.docs.has(d);!R&&T.fromCache?m.reject(new Ce(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&f&&f.source==="server"?m.reject(new Ce(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new q1(tg(d.path),v,{includeMetadataChanges:!0,ua:!0});return H1(a,w)}(await rT(n),n.asyncQueue,e,t,r)),r.promise}function Gb(n,e,t={}){const r=new Fi;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new tT({next:T=>{v.eu(),u.enqueueAndForget(()=>W1(a,w)),T.fromCache&&f.source==="server"?m.reject(new Ce(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new q1(d,v,{includeMetadataChanges:!0,ua:!0});return H1(a,w)}(await rT(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(n,e,t){if(!t)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Qb(n,e,t,r){if(e===!0&&r===!0)throw new Ce(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function j_(n){if(!Ne.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function B_(n){if(Ne.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le()}function jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yg(n);throw new Ce(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ce(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ah{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ox;switch(r.type){case"firstParty":return new cx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=U_.get(t);r&&(ye("ComponentProvider","Removing Datastore"),U_.delete(t),r.terminate())}(this),Promise.resolve()}}function Yb(n,e,t,r={}){var s;const a=(n=jr(n,Ah))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=vn.MOCK_USER;else{d=v2(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ce(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vn(m)}n._authCredentials=new ax(new e1(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ph(this.firestore,e,this._query)}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Ls extends Ph{constructor(e,t,r){super(e,t,tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Ne(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function kh(n,e,...t){if(n=Ft(n),sT("collection","path",e),n instanceof Ah){const r=Tt.fromString(e,...t);return B_(r),new Ls(n,null,r)}{if(!(n instanceof zn||n instanceof Ls))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return B_(r),new Ls(n.firestore,null,r)}}function Hi(n,e,...t){if(n=Ft(n),arguments.length===1&&(e=t1.newId()),sT("doc","path",e),n instanceof Ah){const r=Tt.fromString(e,...t);return j_(r),new zn(n,null,new Ne(r))}{if(!(n instanceof zn||n instanceof Ls))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return j_(r),new zn(n.firestore,n instanceof Ls?n.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new M1(this,"async_queue_retry"),this.fu=()=>{const r=Lp();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Fi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ja(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d}(r);throw zi("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=fg.createAndSchedule(this,e,t,r,a=>this.Su(a));return this.du.push(s),s}pu(){this.Au&&Le()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Vo extends Ah{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new $_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $_(e),this._firestoreClient=void 0,await e}}}function Jb(n,e){const t=typeof n=="object"?n:cE(),r=typeof n=="string"?n:"(default)",s=jm(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=g2("firestore");a&&Yb(s,...a)}return s}function xh(n){if(n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Xb(n),n._firestoreClient}function Xb(n){var e,t,r;const s=n._freezeSettings(),a=function(d,f,m,v){return new Rx(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,iT(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Hb(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new za(un.fromBase64String(e))}catch(t){throw new Ce(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new za(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^__.*__$/;class eD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}class oT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ws(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le()}}class Eg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Lu(e),s}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Fu(),s}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Qd(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(aT(this.Mu)&&Zb.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class tD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ih(e)}$u(e,t,r,s=!1){return new Eg({Mu:e,methodName:t,Ku:r,path:ln.emptyPath(),Nu:!1,Qu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tg(n){const e=n._freezeSettings(),t=Ih(n._databaseId);return new tD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lT(n,e,t,r,s,a={}){const u=n.$u(a.merge||a.mergeFields?2:0,e,t,s);Sg("Data must be an object, but it was:",u,r);const d=dT(r,u);let f,m;if(a.merge)f=new Zn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const T=Im(e,w,t);if(!u.contains(T))throw new Ce(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);fT(v,T)||v.push(T)}f=new Zn(v),m=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=u.fieldTransforms;return new eD(new Un(d),f,m)}class Nh extends vg{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nh}}function uT(n,e,t,r){const s=n.$u(1,e,t);Sg("Data must be an object, but it was:",s,r);const a=[],u=Un.empty();Hs(r,(f,m)=>{const v=Ig(e,f,t);m=Ft(m);const w=s.Bu(v);if(m instanceof Nh)a.push(v);else{const T=bh(m,w);T!=null&&(a.push(v),u.set(v,T))}});const d=new Zn(a);return new oT(u,d,s.fieldTransforms)}function cT(n,e,t,r,s,a){const u=n.$u(1,e,t),d=[Im(e,r,t)],f=[s];if(a.length%2!=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(Im(e,a[T])),f.push(a[T+1]);const m=[],v=Un.empty();for(let T=d.length-1;T>=0;--T)if(!fT(m,d[T])){const R=d[T];let C=f[T];C=Ft(C);const D=u.Bu(R);if(C instanceof Nh)m.push(R);else{const P=bh(C,D);P!=null&&(m.push(R),v.set(R,P))}}const w=new Zn(m);return new oT(v,w,u.fieldTransforms)}function bh(n,e){if(hT(n=Ft(n)))return Sg("Unsupported field value:",e,n),dT(n,e);if(n instanceof vg)return function(r,s){if(!aT(s.Mu))throw s.qu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,s){const a=[];let u=0;for(const d of r){let f=bh(d,s.ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=$t.fromDate(r);return{timestampValue:Wd(s.serializer,a)}}if(r instanceof $t){const a=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(s.serializer,a)}}if(r instanceof _g)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof za)return{bytesValue:C1(s.serializer,r._byteString)};if(r instanceof zn){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.qu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof wg)return function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw d.qu("VectorValues must only contain numeric values.");return ng(d.serializer,f)})}}}}}}(r,s);throw s.qu(`Unsupported field value: ${yg(r)}`)}(n,e)}function dT(n,e){const t={};return n1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(n,(r,s)=>{const a=bh(s,e.Ou(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function hT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof _g||n instanceof za||n instanceof zn||n instanceof vg||n instanceof wg)}function Sg(n,e,t){if(!hT(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=yg(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function Im(n,e,t){if((e=Ft(e))instanceof ku)return e._internalPath;if(typeof e=="string")return Ig(n,e);throw Qd("Field path arguments must be of type string or ",n,!1,void 0,t)}const nD=new RegExp("[~\\*/\\[\\]]");function Ig(n,e,t){if(e.search(nD)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ku(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qd(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new Ce(oe.INVALID_ARGUMENT,d+n+f)}function fT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rD extends pT{data(){return super.data()}}function mT(n,e){return typeof e=="string"?Ig(n,e):e instanceof ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sD{convertValue(e,t="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hs(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Dt(u.doubleValue));return new wg(a)}convertGeoPoint(e){return new _g(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const t=Fs(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);ct(b1(r));const s=new du(r.get(1),r.get(3)),a=new Ne(r.popFirst(5));return s.isEqual(t)||zi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yT extends pT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class dd extends yT{data(e={}){return super.data(e)}}class oD{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Kl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dd(this._firestore,this._userDataWriter,r.key,r,new Kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(d=>{const f=new dd(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Kl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new dd(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Kl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:aD(d.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function aD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n){n=jr(n,zn);const e=jr(n.firestore,Vo);return Kb(xh(e),n._key).then(t=>lD(e,n,t))}class _T extends sD{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function Rg(n){n=jr(n,Ph);const e=jr(n.firestore,Vo),t=xh(e),r=new _T(e);return iD(n._query),Gb(t,n._query).then(s=>new oD(e,r,n,s))}function Cg(n,e,t){n=jr(n,zn);const r=jr(n.firestore,Vo),s=gT(n.converter,e,t);return Dh(r,[lT(Tg(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Bn.none())])}function wT(n,e,t,...r){n=jr(n,zn);const s=jr(n.firestore,Vo),a=Tg(s);let u;return u=typeof(e=Ft(e))=="string"||e instanceof ku?cT(a,"updateDoc",n._key,e,t,r):uT(a,"updateDoc",n._key,e),Dh(s,[u.toMutation(n._key,Bn.exists(!0))])}function ET(n){return Dh(jr(n.firestore,Vo),[new Th(n._key,Bn.none())])}function Dh(n,e){return function(r,s){const a=new Fi;return r.asyncQueue.enqueueAndForget(async()=>Lb(await qb(r),s,a)),a.promise}(xh(n),e)}function lD(n,e,t){const r=t.docs.get(e._key),s=new _T(n);return new yT(n,s,e._key,r,new Kl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tg(e)}set(e,t,r){this._verifyNotCommitted();const s=Vp(e,this._firestore),a=gT(s.converter,t,r),u=lT(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,Bn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const a=Vp(e,this._firestore);let u;return u=typeof(t=Ft(t))=="string"||t instanceof ku?cT(this._dataReader,"WriteBatch.update",a._key,t,r,s):uT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vp(e,this._firestore);return this._mutations=this._mutations.concat(new Th(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vp(n,e){if((n=Ft(n)).firestore!==e)throw new Ce(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(n){return xh(n=jr(n,Vo)),new uD(n,e=>Dh(n,e))}(function(e,t=!0){(function(s){Qa=s})(Ka),Oa(new xo("firestore",(r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Vo(new lx(r.getProvider("auth-internal")),new hx(r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ce(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(m.options.projectId,v)}(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Os(o_,"4.7.5",e),Os(o_,"4.7.5","esm2017")})();const dD={apiKey:"AIzaSyDV-aAXWi-GgUhZjc6zmGvVB_6_1SHcxvc",authDomain:"mymdb-dec8d.firebaseapp.com",projectId:"mymdb-dec8d",storageBucket:"mymdb-dec8d.firebasestorage.app",messagingSenderId:"700068392417",appId:"1:700068392417:web:55fb072b699e3eae8736a0"},TT=uE(dD),Vr=ix(TT),rr=Jb(TT),Ag={users:{collection:"users",favorites:n=>`users/${n}/favorites`,watchlist:n=>`users/${n}/watchlist`},auth:{login:"/auth/login",signUp:"/auth/signup",logout:"/auth/logout"}},ST=n=>{if(!n)return null;const{uid:e,email:t,displayName:r,photoURL:s}=n;return{uid:e,email:t,displayName:r,photoURL:s}},hD=async({email:n,password:e})=>{try{const t=await BP(Vr,n,e);return ST(t.user)}catch(t){throw console.error(`Error logging in (${Ag.auth.login}):`,t.message),new Error("Invalid email or password")}},fD=async({email:n,password:e,displayName:t})=>{try{const r=await jP(Vr,n,e);return await $P(r.user,{displayName:t}),ST(r.user)}catch(r){throw console.error(`Error signing up (${Ag.auth.signUp}):`,r.message),new Error("Failed to create an account. Please try again.")}},pD=async()=>{try{return await KP(Vr),!0}catch(n){throw console.error(`Error logging out (${Ag.auth.logout}):`,n.message),new Error("Failed to log out. Please try again.")}},hd=Wt("auth/loginWithEmail",async({email:n,password:e},{rejectWithValue:t})=>{try{return await hD({email:n,password:e})}catch(r){return t(r.message)}}),fd=Wt("auth/signUpWithEmail",async({email:n,password:e,displayName:t},{rejectWithValue:r})=>{try{return await fD({email:n,password:e,displayName:t})}catch(s){return r(s.message)}}),pd=Wt("auth/logout",async(n,{rejectWithValue:e})=>{try{return await pD(),null}catch(t){return e(t.message)}}),md=Wt("auth/initializeUser",async(n,{dispatch:e,rejectWithValue:t})=>{try{return new Promise(r=>{qP(Vr,async s=>{if(s){const a=await vT(Hi(rr,"users",s.uid)),u=a.exists()?a.data():{},{createdAt:d,...f}=u,m={...mD(s),...f};r(m)}else e(gD()),r(null)})})}catch(r){return t(r.message)}}),mD=n=>{if(!n)return null;const{uid:e,email:t,displayName:r,photoURL:s}=n;return{uid:e,email:t,displayName:r,photoURL:s}},IT=gu({name:"auth",initialState:{user:null,loading:!1,error:null},reducers:{clearError:n=>{n.error=null},clearUser:n=>{n.user=null}},extraReducers:n=>{n.addCase(hd.pending,e=>{e.loading=!0,e.error=null}).addCase(hd.fulfilled,(e,t)=>{e.user=t.payload,e.loading=!1}).addCase(hd.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(fd.pending,e=>{e.loading=!0,e.error=null}).addCase(fd.fulfilled,(e,t)=>{e.user=t.payload,e.loading=!1}).addCase(fd.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(pd.pending,e=>{e.loading=!0,e.error=null}).addCase(pd.fulfilled,e=>{e.user=null,e.loading=!1}).addCase(pd.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(md.pending,e=>{e.loading=!0}).addCase(md.fulfilled,(e,t)=>{e.user=t.payload,e.loading=!1}).addCase(md.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{clearError:A4,clearUser:gD}=IT.actions,yD=IT.reducer,H_={isOpen:!1,appliedFilters:{sortBy:"popularity.desc",genres:[],yearRange:{from:null,to:null},ratingRange:{from:null,to:null}}},RT=gu({name:"filter",initialState:H_,reducers:{toggleFilterBar:n=>{n.isOpen=!n.isOpen},openFilterBar:n=>{n.isOpen=!0},closeFilterBar:n=>{n.isOpen=!1},applyFilters:(n,e)=>{n.appliedFilters={...n.appliedFilters,...e.payload}},clearFilters:n=>{n.appliedFilters=H_.appliedFilters},updateSortBy:(n,e)=>{n.appliedFilters.sortBy=e.payload}}}),{toggleFilterBar:vD,openFilterBar:P4,closeFilterBar:W_,applyFilters:_D,clearFilters:wD,updateSortBy:k4}=RT.actions,ED=RT.reducer,CT=async(n,e,t)=>{try{const r=Hi(rr,`users/${n}/${e}`,t.id.toString());return await Cg(r,t),t}catch(r){throw console.error(`Error adding to Firestore ${e}:`,r.message),new Error("Failed to add movie to collection. Please try again later.")}},AT=async(n,e,t)=>{try{const r=Hi(rr,`users/${n}/${e}`,t.toString());return await ET(r),t}catch(r){throw console.error(`Error removing from Firestore ${e}:`,r.message),new Error("Failed to remove movie from collection. Please try again later.")}},PT=async(n,e)=>{try{const t=kh(rr,`users/${n}/${e}`);return(await Rg(t)).docs.map(s=>s.data())}catch(t){throw console.error(`Error fetching Firestore ${e}:`,t.message),new Error("Failed to fetch movies from collection. Please try again later.")}},Na=Wt("userCollections/fetchFavorites",async(n,{rejectWithValue:e})=>{try{return await PT(n,"favorites")}catch(t){return e(t.message)}}),ba=Wt("userCollections/fetchWatchlist",async(n,{rejectWithValue:e})=>{try{return await PT(n,"watchlist")}catch(t){return e(t.message)}}),Za=Wt("userCollections/addToFavorites",async({uid:n,movie:e},{rejectWithValue:t})=>{try{return await CT(n,"favorites",e)}catch(r){return t(r.message)}}),el=Wt("userCollections/addToWatchlist",async({uid:n,movie:e},{rejectWithValue:t})=>{try{return await CT(n,"watchlist",e)}catch(r){return t(r.message)}}),tl=Wt("userCollections/removeFromFavorites",async({uid:n,movieId:e},{rejectWithValue:t})=>{try{return await AT(n,"favorites",e)}catch(r){return t(r.message)}}),nl=Wt("userCollections/removeFromWatchlist",async({uid:n,movieId:e},{rejectWithValue:t})=>{try{return await AT(n,"watchlist",e)}catch(r){return t(r.message)}}),TD={favorites:[],watchlist:[],loading:!1,error:null},kT=gu({name:"userCollections",initialState:TD,reducers:{clearFavorites:n=>{n.favorites=[]},clearWatchlist:n=>{n.watchlist=[]},clearUserCollections:n=>{n.favorites=[],n.watchlist=[]}},extraReducers:n=>{n.addCase(Na.pending,e=>{e.loading=!0,e.error=null}).addCase(Na.fulfilled,(e,t)=>{e.loading=!1,e.favorites=t.payload}).addCase(Na.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(ba.pending,e=>{e.loading=!0,e.error=null}).addCase(ba.fulfilled,(e,t)=>{e.loading=!1,e.watchlist=t.payload}).addCase(ba.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Za.fulfilled,(e,t)=>{e.favorites.push(t.payload)}).addCase(tl.fulfilled,(e,t)=>{e.favorites=e.favorites.filter(r=>r.id!==t.payload)}).addCase(el.fulfilled,(e,t)=>{e.watchlist.push(t.payload)}).addCase(nl.fulfilled,(e,t)=>{e.watchlist=e.watchlist.filter(r=>r.id!==t.payload)})}}),{clearFavorites:x4,clearWatchlist:N4,clearUserCollections:SD}=kT.actions,ID=kT.reducer;async function RD(n,e){const{id:t,title:r,price:s,quantity:a}=e;if(!n||!t)throw new Error("User ID and item ID are required");const u=Hi(rr,"users",n,"cart",t);await Cg(u,{id:t,title:r,price:s,quantity:a},{merge:!0})}async function xT(n){if(!n)throw new Error("User ID is required");const e=kh(rr,"users",n,"cart");return(await Rg(e)).docs.map(r=>r.data())}async function CD(n,e,t){if(!n||!e)throw new Error("User ID and item ID are required");const r=Hi(rr,"users",n,"cart",e);await wT(r,{quantity:t})}async function AD(n,e){if(!n||!e)throw new Error("User ID and item ID are required");const t=Hi(rr,"users",n,"cart",e);await ET(t)}async function NT(n){if(!n)throw new Error("User ID is required");const e=kh(rr,"users",n,"cart"),t=await Rg(e),r=cD(rr);t.forEach(s=>r.delete(s.ref)),await r.commit()}async function PD(n){if(!n)throw new Error("User ID is required");const e=await xT(n);if(e.length===0)throw new Error("Cart is empty");const t=e.reduce((u,d)=>u+d.price*d.quantity,0),r={userId:n,items:e,totalPrice:t,orderDate:new Date().toISOString(),status:"pending"},s=kh(rr,"orders"),a=Hi(s);return await Cg(a,{...r,id:a.id}),await NT(n),a.id}const gd=Wt("cart/fetchCart",async(n,{rejectWithValue:e})=>{try{return await xT(n)}catch(t){return e(t.message)}}),yd=Wt("cart/addToCart",async({userId:n,item:e},{rejectWithValue:t})=>{try{return await RD(n,e),e}catch(r){return t(r.message)}}),vd=Wt("cart/updateQuantity",async({userId:n,itemId:e,quantity:t},{rejectWithValue:r})=>{try{return await CD(n,e,t),{itemId:e,quantity:t}}catch(s){return r(s.message)}}),_d=Wt("cart/removeFromCart",async({userId:n,itemId:e},{rejectWithValue:t})=>{try{return await AD(n,e),e}catch(r){return t(r.message)}}),Fp=Wt("cart/clearUserCart",async(n,{rejectWithValue:e})=>{try{return await NT(n),[]}catch(t){return e(t.message)}}),wd=Wt("cart/checkout",async(n,{rejectWithValue:e})=>{try{return{orderId:await PD(n)}}catch(t){return e(t.message)}}),kD=gu({name:"cart",initialState:{items:[],totalQuantity:0,totalPrice:0,loading:!1,error:null,checkoutLoading:!1,checkoutError:null,lastOrderId:null},reducers:{clearError:n=>{n.error=null,n.checkoutError=null}},extraReducers:n=>{n.addCase(gd.pending,e=>{e.loading=!0,e.error=null}).addCase(gd.fulfilled,(e,t)=>{e.items=t.payload,e.totalQuantity=t.payload.reduce((r,s)=>r+s.quantity,0),e.totalPrice=t.payload.reduce((r,s)=>r+s.price*s.quantity,0),e.loading=!1}).addCase(gd.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(yd.pending,e=>{e.loading=!0,e.error=null}).addCase(yd.fulfilled,(e,t)=>{e.items.push(t.payload),e.totalQuantity+=t.payload.quantity,e.totalPrice+=t.payload.price*t.payload.quantity,e.loading=!1}).addCase(yd.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(vd.pending,e=>{e.loading=!0,e.error=null}).addCase(vd.fulfilled,(e,t)=>{const{itemId:r,quantity:s}=t.payload,a=e.items.find(u=>u.id===r);a&&(e.totalQuantity+=s-a.quantity,e.totalPrice+=(s-a.quantity)*a.price,a.quantity=s),e.loading=!1}).addCase(vd.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(_d.pending,e=>{e.loading=!0,e.error=null}).addCase(_d.fulfilled,(e,t)=>{const r=t.payload,s=e.items.find(a=>a.id===r);s&&(e.totalQuantity-=s.quantity,e.totalPrice-=s.price*s.quantity),e.items=e.items.filter(a=>a.id!==r),e.loading=!1}).addCase(_d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Fp.pending,e=>{e.loading=!0,e.error=null}).addCase(Fp.fulfilled,e=>{e.items=[],e.totalQuantity=0,e.totalPrice=0,e.loading=!1}).addCase(Fp.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(wd.pending,e=>{e.checkoutLoading=!0,e.checkoutError=null}).addCase(wd.fulfilled,(e,t)=>{e.items=[],e.totalQuantity=0,e.totalPrice=0,e.checkoutLoading=!1,e.lastOrderId=t.payload.orderId}).addCase(wd.rejected,(e,t)=>{e.checkoutLoading=!1,e.checkoutError=t.payload})}}),xD=kD.reducer,ND=aR({reducer:{auth:yD,movies:l2,filter:ED,userCollections:ID,cart:xD}});var Ml={},q_;function bD(){if(q_)return Ml;q_=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.parse=u,Ml.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,R){const C=new a,D=T.length;if(D<2)return C;const P=(R==null?void 0:R.decode)||v;let F=0;do{const Q=T.indexOf("=",F);if(Q===-1)break;const K=T.indexOf(";",F),te=K===-1?D:K;if(Q>te){F=T.lastIndexOf(";",Q-1)+1;continue}const L=d(T,F,Q),re=f(T,Q,L),N=T.slice(L,re);if(C[N]===void 0){let S=d(T,Q+1,te),k=f(T,te,S);const O=P(T.slice(S,k));C[N]=O}F=te+1}while(F<D);return C}function d(T,R,C){do{const D=T.charCodeAt(R);if(D!==32&&D!==9)return R}while(++R<C);return C}function f(T,R,C){for(;R>C;){const D=T.charCodeAt(--R);if(D!==32&&D!==9)return R+1}return C}function m(T,R,C){const D=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const P=D(R);if(!e.test(P))throw new TypeError(`argument val is invalid: ${R}`);let F=T+"="+P;if(!C)return F;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);F+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);F+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);F+="; Path="+C.path}if(C.expires){if(!w(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);F+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(F+="; HttpOnly"),C.secure&&(F+="; Secure"),C.partitioned&&(F+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return F}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return s.call(T)==="[object Date]"}return Ml}bD();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var K_="popstate";function DD(n={}){function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return mu("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:zs(s)}return LD(e,t,null,n)}function Je(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ir(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OD(){return Math.random().toString(36).substring(2,10)}function G_(n,e){return{usr:n.state,key:n.key,idx:e}}function mu(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?qs(e):e,state:t,key:e&&e.key||r||OD()}}function zs({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function qs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function LD(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d="POP",f=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function w(){d="POP";let P=v(),F=P==null?null:P-m;m=P,f&&f({action:d,location:D.location,delta:F})}function T(P,F){d="PUSH";let Q=mu(D.location,P,F);m=v()+1;let K=G_(Q,m),te=D.createHref(Q);try{u.pushState(K,"",te)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(te)}a&&f&&f({action:d,location:D.location,delta:1})}function R(P,F){d="REPLACE";let Q=mu(D.location,P,F);m=v();let K=G_(Q,m),te=D.createHref(Q);u.replaceState(K,"",te),a&&f&&f({action:d,location:D.location,delta:0})}function C(P){let F=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof P=="string"?P:zs(P);return Q=Q.replace(/ $/,"%20"),Je(F,`No window.location.(origin|href) available to create URL for href: ${Q}`),new URL(Q,F)}let D={get action(){return d},get location(){return n(s,u)},listen(P){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(K_,w),f=P,()=>{s.removeEventListener(K_,w),f=null}},createHref(P){return e(s,P)},createURL:C,encodeLocation(P){let F=C(P);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:R,go(P){return u.go(P)}};return D}var MD=new Set(["lazy","caseSensitive","path","id","index","children"]);function VD(n){return n.index===!0}function Yd(n,e,t=[],r={}){return n.map((s,a)=>{let u=[...t,String(a)],d=typeof s.id=="string"?s.id:u.join("-");if(Je(s.index!==!0||!s.children,"Cannot specify children on an index route"),Je(!r[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),VD(s)){let f={...s,...e(s),id:d};return r[d]=f,f}else{let f={...s,...e(s),id:d,children:void 0};return r[d]=f,s.children&&(f.children=Yd(s.children,e,u,r)),f}})}function xs(n,e,t="/"){return Ed(n,e,t,!1)}function Ed(n,e,t,r){let s=typeof e=="string"?qs(e):e,a=Br(s.pathname||"/",t);if(a==null)return null;let u=bT(n);UD(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=YD(a);d=GD(u[f],m,r)}return d}function FD(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function bT(n,e=[],t=[],r=""){let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Je(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=di([r,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(Je(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),bT(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:qD(m,a.index),routesMeta:v})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of DT(a.path))s(a,u,f)}),e}function DT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=DT(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function UD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:KD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var jD=/^:[\w-]+$/,BD=3,zD=2,$D=1,HD=10,WD=-2,Q_=n=>n==="*";function qD(n,e){let t=n.split("/"),r=t.length;return t.some(Q_)&&(r+=WD),e&&(r+=zD),t.filter(s=>!Q_(s)).reduce((s,a)=>s+(jD.test(a)?BD:a===""?$D:HD),r)}function KD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function GD(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=Jd({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=Jd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:di([a,w.pathname]),pathnameBase:ZD(di([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=di([a,w.pathnameBase]))}return u}function Jd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=QD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,{paramName:v,isOptional:w},T)=>{if(v==="*"){let C=d[T]||"";u=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const R=d[T];return w&&!R?m[v]=void 0:m[v]=(R||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function QD(n,e=!1,t=!0){ir(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function YD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ir(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Br(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function JD(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?qs(n):n;return{pathname:t?t.startsWith("/")?t:XD(t,e):e,search:eO(r),hash:tO(s)}}function XD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Up(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Pg(n){let e=OT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function kg(n,e,t,r=!1){let s;typeof n=="string"?s=qs(n):(s={...n},Je(!s.pathname||!s.pathname.includes("?"),Up("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),Up("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),Up("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}d=w>=0?e[w]:"/"}let f=JD(s,d),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var di=n=>n.join("/").replace(/\/\/+/g,"/"),ZD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),eO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,tO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Xd=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Oh(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var LT=["POST","PUT","PATCH","DELETE"],nO=new Set(LT),rO=["GET",...LT],iO=new Set(rO),sO=new Set([301,302,303,307,308]),oO=new Set([307,308]),jp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},aO={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lO=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),MT="remix-router-transitions",VT=Symbol("ResetLoaderData");function uO(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Je(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.mapRouteProperties||lO,s={},a=Yd(n.routes,r,void 0,s),u,d=n.basename||"/",f=n.dataStrategy||pO,m=n.patchRoutesOnNavigation,v={...n.future},w=null,T=new Set,R=null,C=null,D=null,P=n.hydrationData!=null,F=xs(a,n.history.location,d),Q=null;if(F==null&&!m){let V=pr(404,{pathname:n.history.location.pathname}),{matches:$,route:J}=ow(a);F=$,Q={[J.id]:V}}F&&!n.hydrationData&&wr(F,a,n.history.location.pathname).active&&(F=null);let K;if(F)if(F.some(V=>V.route.lazy))K=!1;else if(!F.some(V=>V.route.loader))K=!0;else{let V=n.hydrationData?n.hydrationData.loaderData:null,$=n.hydrationData?n.hydrationData.errors:null;if($){let J=F.findIndex(ne=>$[ne.route.id]!==void 0);K=F.slice(0,J+1).every(ne=>!Cm(ne.route,V,$))}else K=F.every(J=>!Cm(J.route,V,$))}else{K=!1,F=[];let V=wr(null,a,n.history.location.pathname);V.active&&V.matches&&(F=V.matches)}let te,L={historyAction:n.history.action,location:n.history.location,matches:F,initialized:K,navigation:jp,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Q,fetchers:new Map,blockers:new Map},re="POP",N=!1,S,k=!1,O=new Map,U=null,B=!1,b=!1,Pe=new Set,$e=new Map,St=0,Xe=-1,ce=new Map,Se=new Set,fe=new Map,z=new Map,ee=new Set,Ee=new Map,Fe,Me=null;function We(){if(w=n.history.listen(({action:V,location:$,delta:J})=>{if(Fe){Fe(),Fe=void 0;return}ir(Ee.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ne=Zi({currentLocation:L.location,nextLocation:$,historyAction:V});if(ne&&J!=null){let pe=new Promise(ve=>{Fe=ve});n.history.go(J*-1),Kr(ne,{state:"blocked",location:$,proceed(){Kr(ne,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),pe.then(()=>n.history.go(J))},reset(){let ve=new Map(L.blockers);ve.set(ne,Vl),je({blockers:ve})}});return}return cn(V,$)}),t){RO(e,O);let V=()=>CO(e,O);e.addEventListener("pagehide",V),U=()=>e.removeEventListener("pagehide",V)}return L.initialized||cn("POP",L.location,{initialHydration:!0}),te}function nt(){w&&w(),U&&U(),T.clear(),S&&S.abort(),L.fetchers.forEach((V,$)=>$n($)),L.blockers.forEach((V,$)=>Xi($))}function rt(V){return T.add(V),()=>T.delete(V)}function je(V,$={}){L={...L,...V};let J=[],ne=[];L.fetchers.forEach((pe,ve)=>{pe.state==="idle"&&(ee.has(ve)?J.push(ve):ne.push(ve))}),[...T].forEach(pe=>pe(L,{deletedFetchers:J,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),J.forEach(pe=>$n(pe)),ne.forEach(pe=>L.fetchers.delete(pe))}function mt(V,$,{flushSync:J}={}){var de,be;let ne=L.actionData!=null&&L.navigation.formMethod!=null&&Mr(L.navigation.formMethod)&&L.navigation.state==="loading"&&((de=V.state)==null?void 0:de._isRedirect)!==!0,pe;$.actionData?Object.keys($.actionData).length>0?pe=$.actionData:pe=null:ne?pe=L.actionData:pe=null;let ve=$.loaderData?iw(L.loaderData,$.loaderData,$.matches||[],$.errors):L.loaderData,Ae=L.blockers;Ae.size>0&&(Ae=new Map(Ae),Ae.forEach((Be,at)=>Ae.set(at,Vl)));let me=N===!0||L.navigation.formMethod!=null&&Mr(L.navigation.formMethod)&&((be=V.state)==null?void 0:be._isRedirect)!==!0;u&&(a=u,u=void 0),B||re==="POP"||(re==="PUSH"?n.history.push(V,V.state):re==="REPLACE"&&n.history.replace(V,V.state));let we;if(re==="POP"){let Be=O.get(L.location.pathname);Be&&Be.has(V.pathname)?we={currentLocation:L.location,nextLocation:V}:O.has(V.pathname)&&(we={currentLocation:V,nextLocation:L.location})}else if(k){let Be=O.get(L.location.pathname);Be?Be.add(V.pathname):(Be=new Set([V.pathname]),O.set(L.location.pathname,Be)),we={currentLocation:L.location,nextLocation:V}}je({...$,actionData:pe,loaderData:ve,historyAction:re,location:V,initialized:!0,navigation:jp,revalidation:"idle",restoreScrollPosition:Hn(V,$.matches||L.matches),preventScrollReset:me,blockers:Ae},{viewTransitionOpts:we,flushSync:J===!0}),re="POP",N=!1,k=!1,B=!1,b=!1,Me==null||Me.resolve(),Me=null}async function sr(V,$){if(typeof V=="number"){n.history.go(V);return}let J=Rm(L.location,L.matches,d,V,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:ne,submission:pe,error:ve}=Y_(!1,J,$),Ae=L.location,me=mu(L.location,ne,$&&$.state);me={...me,...n.history.encodeLocation(me)};let we=$&&$.replace!=null?$.replace:void 0,de="PUSH";we===!0?de="REPLACE":we===!1||pe!=null&&Mr(pe.formMethod)&&pe.formAction===L.location.pathname+L.location.search&&(de="REPLACE");let be=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,Be=($&&$.flushSync)===!0,at=Zi({currentLocation:Ae,nextLocation:me,historyAction:de});if(at){Kr(at,{state:"blocked",location:me,proceed(){Kr(at,{state:"proceeding",proceed:void 0,reset:void 0,location:me}),sr(V,$)},reset(){let Pt=new Map(L.blockers);Pt.set(at,Vl),je({blockers:Pt})}});return}await cn(de,me,{submission:pe,pendingError:ve,preventScrollReset:be,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:Be})}function Ki(){Me||(Me=AO()),Hr(),je({revalidation:"loading"});let V=Me.promise;return L.navigation.state==="submitting"?V:L.navigation.state==="idle"?(cn(L.historyAction,L.location,{startUninterruptedRevalidation:!0}),V):(cn(re||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:k===!0}),V)}async function cn(V,$,J){S&&S.abort(),S=null,re=V,B=(J&&J.startUninterruptedRevalidation)===!0,Pn(L.location,L.matches),N=(J&&J.preventScrollReset)===!0,k=(J&&J.enableViewTransition)===!0;let ne=u||a,pe=J&&J.overrideNavigation,ve=xs(ne,$,d),Ae=(J&&J.flushSync)===!0,me=wr(ve,ne,$.pathname);if(me.active&&me.matches&&(ve=me.matches),!ve){let{error:Ge,notFoundMatches:it,route:lt}=_r($.pathname);mt($,{matches:it,loaderData:{},errors:{[lt.id]:Ge}},{flushSync:Ae});return}if(L.initialized&&!b&&wO(L.location,$)&&!(J&&J.submission&&Mr(J.submission.formMethod))){mt($,{matches:ve},{flushSync:Ae});return}S=new AbortController;let we=wa(n.history,$,S.signal,J&&J.submission),de;if(J&&J.pendingError)de=[wo(ve).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&Mr(J.submission.formMethod)){let Ge=await mi(we,$,J.submission,ve,me.active,{replace:J.replace,flushSync:Ae});if(Ge.shortCircuited)return;if(Ge.pendingActionResult){let[it,lt]=Ge.pendingActionResult;if(Jn(lt)&&Oh(lt.error)&&lt.error.status===404){S=null,mt($,{matches:Ge.matches,loaderData:{},errors:{[it]:lt.error}});return}}ve=Ge.matches||ve,de=Ge.pendingActionResult,pe=Bp($,J.submission),Ae=!1,me.active=!1,we=wa(n.history,we.url,we.signal)}let{shortCircuited:be,matches:Be,loaderData:at,errors:Pt}=await Gi(we,$,ve,me.active,pe,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,Ae,de);be||(S=null,mt($,{matches:Be||ve,...sw(de),loaderData:at,errors:Pt}))}async function mi(V,$,J,ne,pe,ve={}){Hr();let Ae=SO($,J);if(je({navigation:Ae},{flushSync:ve.flushSync===!0}),pe){let de=await Tn(ne,$.pathname,V.signal);if(de.type==="aborted")return{shortCircuited:!0};if(de.type==="error"){let be=wo(de.partialMatches).route.id;return{matches:de.partialMatches,pendingActionResult:[be,{type:"error",error:de.error}]}}else if(de.matches)ne=de.matches;else{let{notFoundMatches:be,error:Be,route:at}=_r($.pathname);return{matches:be,pendingActionResult:[at.id,{type:"error",error:Be}]}}}let me,we=Gl(ne,$);if(!we.route.action&&!we.route.lazy)me={type:"error",error:pr(405,{method:V.method,pathname:$.pathname,routeId:we.route.id})};else if(me=(await vr("action",L,V,[we],ne,null))[we.route.id],V.signal.aborted)return{shortCircuited:!0};if(So(me)){let de;return ve&&ve.replace!=null?de=ve.replace:de=tw(me.response.headers.get("Location"),new URL(V.url),d)===L.location.pathname+L.location.search,await Jt(V,me,!0,{submission:J,replace:de}),{shortCircuited:!0}}if(Jn(me)){let de=wo(ne,we.route.id);return(ve&&ve.replace)!==!0&&(re="PUSH"),{matches:ne,pendingActionResult:[de.route.id,me]}}return{matches:ne,pendingActionResult:[we.route.id,me]}}async function Gi(V,$,J,ne,pe,ve,Ae,me,we,de,be){let Be=pe||Bp($,ve),at=ve||Ae||lw(Be),Pt=!B&&!we;if(ne){if(Pt){let gt=Qi(be);je({navigation:Be,...gt!==void 0?{actionData:gt}:{}},{flushSync:de})}let Ze=await Tn(J,$.pathname,V.signal);if(Ze.type==="aborted")return{shortCircuited:!0};if(Ze.type==="error"){let gt=wo(Ze.partialMatches).route.id;return{matches:Ze.partialMatches,loaderData:{},errors:{[gt]:Ze.error}}}else if(Ze.matches)J=Ze.matches;else{let{error:gt,notFoundMatches:en,route:Ir}=_r($.pathname);return{matches:en,loaderData:{},errors:{[Ir.id]:gt}}}}let Ge=u||a,[it,lt]=X_(n.history,L,J,at,$,we===!0,b,Pe,ee,fe,Se,Ge,d,be);if(Xe=++St,it.length===0&&lt.length===0){let Ze=qr();return mt($,{matches:J,loaderData:{},errors:be&&Jn(be[1])?{[be[0]]:be[1].error}:null,...sw(be),...Ze?{fetchers:new Map(L.fetchers)}:{}},{flushSync:de}),{shortCircuited:!0}}if(Pt){let Ze={};if(!ne){Ze.navigation=Be;let gt=Qi(be);gt!==void 0&&(Ze.actionData=gt)}lt.length>0&&(Ze.fetchers=Qs(lt)),je(Ze,{flushSync:de})}lt.forEach(Ze=>{Xt(Ze.key),Ze.controller&&$e.set(Ze.key,Ze.controller)});let Er=()=>lt.forEach(Ze=>Xt(Ze.key));S&&S.signal.addEventListener("abort",Er);let{loaderResults:Tr,fetcherResults:dn}=await gi(L,J,it,lt,V);if(V.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",Er),lt.forEach(Ze=>$e.delete(Ze.key));let Zt=Qc(Tr);if(Zt)return await Jt(V,Zt.result,!0,{replace:me}),{shortCircuited:!0};if(Zt=Qc(dn),Zt)return Se.add(Zt.key),await Jt(V,Zt.result,!0,{replace:me}),{shortCircuited:!0};let{loaderData:_i,errors:Gr}=rw(L,J,Tr,be,lt,dn);we&&L.errors&&(Gr={...L.errors,...Gr});let Sr=qr(),ut=Ji(Xe),wi=Sr||ut||lt.length>0;return{matches:J,loaderData:_i,errors:Gr,...wi?{fetchers:new Map(L.fetchers)}:{}}}function Qi(V){if(V&&!Jn(V[1]))return{[V[0]]:V[1].data};if(L.actionData)return Object.keys(L.actionData).length===0?null:L.actionData}function Qs(V){return V.forEach($=>{let J=L.fetchers.get($.key),ne=Fl(void 0,J?J.data:void 0);L.fetchers.set($.key,ne)}),new Map(L.fetchers)}async function Uo(V,$,J,ne){Xt(V);let pe=(ne&&ne.flushSync)===!0,ve=u||a,Ae=Rm(L.location,L.matches,d,J,$,ne==null?void 0:ne.relative),me=xs(ve,Ae,d),we=wr(me,ve,Ae);if(we.active&&we.matches&&(me=we.matches),!me){dt(V,$,pr(404,{pathname:Ae}),{flushSync:pe});return}let{path:de,submission:be,error:Be}=Y_(!0,Ae,ne);if(Be){dt(V,$,Be,{flushSync:pe});return}let at=Gl(me,de),Pt=(ne&&ne.preventScrollReset)===!0;if(be&&Mr(be.formMethod)){await Yi(V,$,de,at,me,we.active,pe,Pt,be);return}fe.set(V,{routeId:$,path:de}),await yr(V,$,de,at,me,we.active,pe,Pt,be)}async function Yi(V,$,J,ne,pe,ve,Ae,me,we){Hr(),fe.delete(V);function de(yt){if(!yt.route.action&&!yt.route.lazy){let kn=pr(405,{method:we.formMethod,pathname:J,routeId:$});return dt(V,$,kn,{flushSync:Ae}),!0}return!1}if(!ve&&de(ne))return;let be=L.fetchers.get(V);An(V,IO(we,be),{flushSync:Ae});let Be=new AbortController,at=wa(n.history,J,Be.signal,we);if(ve){let yt=await Tn(pe,J,at.signal);if(yt.type==="aborted")return;if(yt.type==="error"){dt(V,$,yt.error,{flushSync:Ae});return}else if(yt.matches){if(pe=yt.matches,ne=Gl(pe,J),de(ne))return}else{dt(V,$,pr(404,{pathname:J}),{flushSync:Ae});return}}$e.set(V,Be);let Pt=St,it=(await vr("action",L,at,[ne],pe,V))[ne.route.id];if(at.signal.aborted){$e.get(V)===Be&&$e.delete(V);return}if(ee.has(V)){if(So(it)||Jn(it)){An(V,Is(void 0));return}}else{if(So(it))if($e.delete(V),Xe>Pt){An(V,Is(void 0));return}else return Se.add(V),An(V,Fl(we)),Jt(at,it,!1,{fetcherSubmission:we,preventScrollReset:me});if(Jn(it)){dt(V,$,it.error);return}}let lt=L.navigation.location||L.location,Er=wa(n.history,lt,Be.signal),Tr=u||a,dn=L.navigation.state!=="idle"?xs(Tr,L.navigation.location,d):L.matches;Je(dn,"Didn't find any matches after fetcher action");let Zt=++St;ce.set(V,Zt);let _i=Fl(we,it.data);L.fetchers.set(V,_i);let[Gr,Sr]=X_(n.history,L,dn,we,lt,!1,b,Pe,ee,fe,Se,Tr,d,[ne.route.id,it]);Sr.filter(yt=>yt.key!==V).forEach(yt=>{let kn=yt.key,hn=L.fetchers.get(kn),jo=Fl(void 0,hn?hn.data:void 0);L.fetchers.set(kn,jo),Xt(kn),yt.controller&&$e.set(kn,yt.controller)}),je({fetchers:new Map(L.fetchers)});let ut=()=>Sr.forEach(yt=>Xt(yt.key));Be.signal.addEventListener("abort",ut);let{loaderResults:wi,fetcherResults:Ze}=await gi(L,dn,Gr,Sr,Er);if(Be.signal.aborted)return;Be.signal.removeEventListener("abort",ut),ce.delete(V),$e.delete(V),Sr.forEach(yt=>$e.delete(yt.key));let gt=Qc(wi);if(gt)return Jt(Er,gt.result,!1,{preventScrollReset:me});if(gt=Qc(Ze),gt)return Se.add(gt.key),Jt(Er,gt.result,!1,{preventScrollReset:me});let{loaderData:en,errors:Ir}=rw(L,dn,wi,void 0,Sr,Ze);if(L.fetchers.has(V)){let yt=Is(it.data);L.fetchers.set(V,yt)}Ji(Zt),L.navigation.state==="loading"&&Zt>Xe?(Je(re,"Expected pending action"),S&&S.abort(),mt(L.navigation.location,{matches:dn,loaderData:en,errors:Ir,fetchers:new Map(L.fetchers)})):(je({errors:Ir,loaderData:iw(L.loaderData,en,dn,Ir),fetchers:new Map(L.fetchers)}),b=!1)}async function yr(V,$,J,ne,pe,ve,Ae,me,we){let de=L.fetchers.get(V);An(V,Fl(we,de?de.data:void 0),{flushSync:Ae});let be=new AbortController,Be=wa(n.history,J,be.signal);if(ve){let it=await Tn(pe,J,Be.signal);if(it.type==="aborted")return;if(it.type==="error"){dt(V,$,it.error,{flushSync:Ae});return}else if(it.matches)pe=it.matches,ne=Gl(pe,J);else{dt(V,$,pr(404,{pathname:J}),{flushSync:Ae});return}}$e.set(V,be);let at=St,Ge=(await vr("loader",L,Be,[ne],pe,V))[ne.route.id];if($e.get(V)===be&&$e.delete(V),!Be.signal.aborted){if(ee.has(V)){An(V,Is(void 0));return}if(So(Ge))if(Xe>at){An(V,Is(void 0));return}else{Se.add(V),await Jt(Be,Ge,!1,{preventScrollReset:me});return}if(Jn(Ge)){dt(V,$,Ge.error);return}An(V,Is(Ge.data))}}async function Jt(V,$,J,{submission:ne,fetcherSubmission:pe,preventScrollReset:ve,replace:Ae}={}){$.response.headers.has("X-Remix-Revalidate")&&(b=!0);let me=$.response.headers.get("Location");Je(me,"Expected a Location header on the redirect Response"),me=tw(me,new URL(V.url),d);let we=mu(L.location,me,{_isRedirect:!0});if(t){let Ge=!1;if($.response.headers.has("X-Remix-Reload-Document"))Ge=!0;else if(xg.test(me)){const it=n.history.createURL(me);Ge=it.origin!==e.location.origin||Br(it.pathname,d)==null}if(Ge){Ae?e.location.replace(me):e.location.assign(me);return}}S=null;let de=Ae===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:be,formAction:Be,formEncType:at}=L.navigation;!ne&&!pe&&be&&Be&&at&&(ne=lw(L.navigation));let Pt=ne||pe;if(oO.has($.response.status)&&Pt&&Mr(Pt.formMethod))await cn(de,we,{submission:{...Pt,formAction:me},preventScrollReset:ve||N,enableViewTransition:J?k:void 0});else{let Ge=Bp(we,ne);await cn(de,we,{overrideNavigation:Ge,fetcherSubmission:pe,preventScrollReset:ve||N,enableViewTransition:J?k:void 0})}}async function vr(V,$,J,ne,pe,ve){let Ae,me={};try{Ae=await mO(f,V,$,J,ne,pe,ve,s,r)}catch(we){return ne.forEach(de=>{me[de.route.id]={type:"error",error:we}}),me}for(let[we,de]of Object.entries(Ae))if(EO(de)){let be=de.result;me[we]={type:"redirect",response:vO(be,J,we,pe,d)}}else me[we]=await yO(de);return me}async function gi(V,$,J,ne,pe){let ve=vr("loader",V,pe,J,$,null),Ae=Promise.all(ne.map(async de=>{if(de.matches&&de.match&&de.controller){let Be=(await vr("loader",V,wa(n.history,de.path,de.controller.signal),[de.match],de.matches,de.key))[de.match.route.id];return{[de.key]:Be}}else return Promise.resolve({[de.key]:{type:"error",error:pr(404,{pathname:de.path})}})})),me=await ve,we=(await Ae).reduce((de,be)=>Object.assign(de,be),{});return{loaderResults:me,fetcherResults:we}}function Hr(){b=!0,fe.forEach((V,$)=>{$e.has($)&&Pe.add($),Xt($)})}function An(V,$,J={}){L.fetchers.set(V,$),je({fetchers:new Map(L.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function dt(V,$,J,ne={}){let pe=wo(L.matches,$);$n(V),je({errors:{[pe.route.id]:J},fetchers:new Map(L.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function At(V){return z.set(V,(z.get(V)||0)+1),ee.has(V)&&ee.delete(V),L.fetchers.get(V)||aO}function $n(V){let $=L.fetchers.get(V);$e.has(V)&&!($&&$.state==="loading"&&ce.has(V))&&Xt(V),fe.delete(V),ce.delete(V),Se.delete(V),ee.delete(V),Pe.delete(V),L.fetchers.delete(V)}function Ys(V){let $=(z.get(V)||0)-1;$<=0?(z.delete(V),ee.add(V)):z.set(V,$),je({fetchers:new Map(L.fetchers)})}function Xt(V){let $=$e.get(V);$&&($.abort(),$e.delete(V))}function Wr(V){for(let $ of V){let J=At($),ne=Is(J.data);L.fetchers.set($,ne)}}function qr(){let V=[],$=!1;for(let J of Se){let ne=L.fetchers.get(J);Je(ne,`Expected fetcher: ${J}`),ne.state==="loading"&&(Se.delete(J),V.push(J),$=!0)}return Wr(V),$}function Ji(V){let $=[];for(let[J,ne]of ce)if(ne<V){let pe=L.fetchers.get(J);Je(pe,`Expected fetcher: ${J}`),pe.state==="loading"&&(Xt(J),ce.delete(J),$.push(J))}return Wr($),$.length>0}function Js(V,$){let J=L.blockers.get(V)||Vl;return Ee.get(V)!==$&&Ee.set(V,$),J}function Xi(V){L.blockers.delete(V),Ee.delete(V)}function Kr(V,$){let J=L.blockers.get(V)||Vl;Je(J.state==="unblocked"&&$.state==="blocked"||J.state==="blocked"&&$.state==="blocked"||J.state==="blocked"&&$.state==="proceeding"||J.state==="blocked"&&$.state==="unblocked"||J.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${$.state}`);let ne=new Map(L.blockers);ne.set(V,$),je({blockers:ne})}function Zi({currentLocation:V,nextLocation:$,historyAction:J}){if(Ee.size===0)return;Ee.size>1&&ir(!1,"A router only supports one blocker at a time");let ne=Array.from(Ee.entries()),[pe,ve]=ne[ne.length-1],Ae=L.blockers.get(pe);if(!(Ae&&Ae.state==="proceeding")&&ve({currentLocation:V,nextLocation:$,historyAction:J}))return pe}function _r(V){let $=pr(404,{pathname:V}),J=u||a,{matches:ne,route:pe}=ow(J);return{notFoundMatches:ne,route:pe,error:$}}function es(V,$,J){if(R=V,D=$,C=J||null,!P&&L.navigation===jp){P=!0;let ne=Hn(L.location,L.matches);ne!=null&&je({restoreScrollPosition:ne})}return()=>{R=null,D=null,C=null}}function yi(V,$){return C&&C(V,$.map(ne=>FD(ne,L.loaderData)))||V.key}function Pn(V,$){if(R&&D){let J=yi(V,$);R[J]=D()}}function Hn(V,$){if(R){let J=yi(V,$),ne=R[J];if(typeof ne=="number")return ne}return null}function wr(V,$,J){if(m)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:Ed($,J,d,!0)}}else return{active:!0,matches:Ed($,J,d,!0)||[]};return{active:!1,matches:null}}async function Tn(V,$,J){if(!m)return{type:"success",matches:V};let ne=V;for(;;){let pe=u==null,ve=u||a,Ae=s;try{await m({path:$,matches:ne,patch:(de,be)=>{J.aborted||ew(de,be,ve,Ae,r)}})}catch(de){return{type:"error",error:de,partialMatches:ne}}finally{pe&&!J.aborted&&(a=[...a])}if(J.aborted)return{type:"aborted"};let me=xs(ve,$,d);if(me)return{type:"success",matches:me};let we=Ed(ve,$,d,!0);if(!we||ne.length===we.length&&ne.every((de,be)=>de.route.id===we[be].route.id))return{type:"success",matches:null};ne=we}}function Xs(V){s={},u=Yd(V,r,void 0,s)}function vi(V,$){let J=u==null;ew(V,$,u||a,s,r),J&&(a=[...a],je({}))}return te={get basename(){return d},get future(){return v},get state(){return L},get routes(){return a},get window(){return e},initialize:We,subscribe:rt,enableScrollRestoration:es,navigate:sr,fetch:Uo,revalidate:Ki,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:At,deleteFetcher:Ys,dispose:nt,getBlocker:Js,deleteBlocker:Xi,patchRoutes:vi,_internalFetchControllers:$e,_internalSetRoutes:Xs},te}function cO(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Rm(n,e,t,r,s,a){let u,d;if(s){u=[];for(let m of e)if(u.push(m),m.route.id===s){d=m;break}}else u=e,d=e[e.length-1];let f=kg(r||".",Pg(u),Br(n.pathname,t)||n.pathname,a==="path");if(r==null&&(f.search=n.search,f.hash=n.hash),(r==null||r===""||r===".")&&d){let m=Ng(f.search);if(d.route.index&&!m)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&m){let v=new URLSearchParams(f.search),w=v.getAll("index");v.delete("index"),w.filter(R=>R).forEach(R=>v.append("index",R));let T=v.toString();f.search=T?`?${T}`:""}}return t!=="/"&&(f.pathname=f.pathname==="/"?t:di([t,f.pathname])),zs(f)}function Y_(n,e,t){if(!t||!cO(t))return{path:e};if(t.formMethod&&!TO(t.formMethod))return{path:e,error:pr(405,{method:t.formMethod})};let r=()=>({path:e,error:pr(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),u=UT(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Mr(a))return r();let w=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((T,[R,C])=>`${T}${R}=${C}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:w}}}else if(t.formEncType==="application/json"){if(!Mr(a))return r();try{let w=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:u,formEncType:t.formEncType,formData:void 0,json:w,text:void 0}}}catch{return r()}}}Je(typeof FormData=="function","FormData is not available in this environment");let d,f;if(t.formData)d=Am(t.formData),f=t.formData;else if(t.body instanceof FormData)d=Am(t.body),f=t.body;else if(t.body instanceof URLSearchParams)d=t.body,f=nw(d);else if(t.body==null)d=new URLSearchParams,f=new FormData;else try{d=new URLSearchParams(t.body),f=nw(d)}catch{return r()}let m={formMethod:a,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(Mr(m.formMethod))return{path:e,submission:m};let v=qs(e);return n&&v.search&&Ng(v.search)&&d.append("index",""),v.search=`?${d}`,{path:zs(v),submission:m}}function J_(n,e,t=!1){let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function X_(n,e,t,r,s,a,u,d,f,m,v,w,T,R){let C=R?Jn(R[1])?R[1].error:R[1].data:void 0,D=n.createURL(e.location),P=n.createURL(s),F=t;a&&e.errors?F=J_(t,Object.keys(e.errors)[0],!0):R&&Jn(R[1])&&(F=J_(t,R[0]));let Q=R?R[1].statusCode:void 0,K=Q&&Q>=400,te=F.filter((re,N)=>{let{route:S}=re;if(S.lazy)return!0;if(S.loader==null)return!1;if(a)return Cm(S,e.loaderData,e.errors);if(dO(e.loaderData,e.matches[N],re))return!0;let k=e.matches[N],O=re;return Z_(re,{currentUrl:D,currentParams:k.params,nextUrl:P,nextParams:O.params,...r,actionResult:C,actionStatus:Q,defaultShouldRevalidate:K?!1:u||D.pathname+D.search===P.pathname+P.search||D.search!==P.search||hO(k,O)})}),L=[];return m.forEach((re,N)=>{if(a||!t.some(B=>B.route.id===re.routeId)||f.has(N))return;let S=xs(w,re.path,T);if(!S){L.push({key:N,routeId:re.routeId,path:re.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(N),O=Gl(S,re.path),U=!1;v.has(N)?U=!1:d.has(N)?(d.delete(N),U=!0):k&&k.state!=="idle"&&k.data===void 0?U=u:U=Z_(O,{currentUrl:D,currentParams:e.matches[e.matches.length-1].params,nextUrl:P,nextParams:t[t.length-1].params,...r,actionResult:C,actionStatus:Q,defaultShouldRevalidate:K?!1:u}),U&&L.push({key:N,routeId:re.routeId,path:re.path,matches:S,match:O,controller:new AbortController})}),[te,L]}function Cm(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function dO(n,e,t){let r=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return r||s}function hO(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Z_(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function ew(n,e,t,r,s){let a;if(n){let f=r[n];Je(f,`No route found to patch children into: routeId = ${n}`),f.children||(f.children=[]),a=f.children}else a=t;let u=e.filter(f=>!a.some(m=>FT(f,m))),d=Yd(u,s,[n||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...d)}function FT(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>FT(t,a))}):!1}async function fO(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];Je(s,"No route found in manifest");let a={};for(let u in r){let f=s[u]!==void 0&&u!=="hasErrorBoundary";ir(!f,`Route "${s.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!f&&!MD.has(u)&&(a[u]=r[u])}Object.assign(s,a),Object.assign(s,{...e(s),lazy:void 0})}async function pO({matches:n}){let e=n.filter(r=>r.shouldLoad);return(await Promise.all(e.map(r=>r.resolve()))).reduce((r,s,a)=>Object.assign(r,{[e[a].route.id]:s}),{})}async function mO(n,e,t,r,s,a,u,d,f,m){let v=a.map(R=>R.route.lazy?fO(R.route,f,d):void 0),w=a.map((R,C)=>{let D=v[C],P=s.some(Q=>Q.route.id===R.route.id);return{...R,shouldLoad:P,resolve:async Q=>(Q&&r.method==="GET"&&(R.route.lazy||R.route.loader)&&(P=!0),P?gO(e,r,R,D,Q,m):Promise.resolve({type:"data",result:void 0}))}}),T=await n({matches:w,request:r,params:a[0].params,fetcherKey:u,context:m});try{await Promise.all(v)}catch{}return T}async function gO(n,e,t,r,s,a){let u,d,f=m=>{let v,w=new Promise((C,D)=>v=D);d=()=>v(),e.signal.addEventListener("abort",d);let T=C=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):m({request:e,params:t.params,context:a},...C!==void 0?[C]:[]),R=(async()=>{try{return{type:"data",result:await(s?s(D=>T(D)):T())}}catch(C){return{type:"error",result:C}}})();return Promise.race([R,w])};try{let m=t.route[n];if(r)if(m){let v,[w]=await Promise.all([f(m).catch(T=>{v=T}),r]);if(v!==void 0)throw v;u=w}else if(await r,m=t.route[n],m)u=await f(m);else if(n==="action"){let v=new URL(e.url),w=v.pathname+v.search;throw pr(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:"data",result:void 0};else if(m)u=await f(m);else{let v=new URL(e.url),w=v.pathname+v.search;throw pr(404,{pathname:w})}}catch(m){return{type:"error",result:m}}finally{d&&e.signal.removeEventListener("abort",d)}return u}async function yO(n){var r,s,a,u;let{result:e,type:t}=n;if(jT(e)){let d;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(f){return{type:"error",error:f}}return t==="error"?{type:"error",error:new Xd(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:"data",data:d,statusCode:e.status,headers:e.headers}}if(t==="error"){if(aw(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status};e=new Xd(((s=e.init)==null?void 0:s.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:Oh(e)?e.status:void 0}}return aw(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function vO(n,e,t,r,s){let a=n.headers.get("Location");if(Je(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!xg.test(a)){let u=r.slice(0,r.findIndex(d=>d.route.id===t)+1);a=Rm(new URL(e.url),u,s,a),n.headers.set("Location",a)}return n}function tw(n,e,t){if(xg.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Br(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return n}function wa(n,e,t,r){let s=n.createURL(UT(e)).toString(),a={signal:t};if(r&&Mr(r.formMethod)){let{formMethod:u,formEncType:d}=r;a.method=u.toUpperCase(),d==="application/json"?(a.headers=new Headers({"Content-Type":d}),a.body=JSON.stringify(r.json)):d==="text/plain"?a.body=r.text:d==="application/x-www-form-urlencoded"&&r.formData?a.body=Am(r.formData):a.body=r.formData}return new Request(s,a)}function Am(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function nw(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function _O(n,e,t,r=!1,s=!1){let a={},u=null,d,f=!1,m={},v=t&&Jn(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let T=w.route.id,R=e[T];if(Je(!So(R),"Cannot handle redirect results in processLoaderData"),Jn(R)){let C=R.error;if(v!==void 0&&(C=v,v=void 0),u=u||{},s)u[T]=C;else{let D=wo(n,T);u[D.route.id]==null&&(u[D.route.id]=C)}r||(a[T]=VT),f||(f=!0,d=Oh(R.error)?R.error.status:500),R.headers&&(m[T]=R.headers)}else a[T]=R.data,R.statusCode&&R.statusCode!==200&&!f&&(d=R.statusCode),R.headers&&(m[T]=R.headers)}),v!==void 0&&t&&(u={[t[0]]:v},a[t[0]]=void 0),{loaderData:a,errors:u,statusCode:d||200,loaderHeaders:m}}function rw(n,e,t,r,s,a){let{loaderData:u,errors:d}=_O(e,t,r);return s.forEach(f=>{let{key:m,match:v,controller:w}=f,T=a[m];if(Je(T,"Did not find corresponding fetcher result"),!(w&&w.signal.aborted))if(Jn(T)){let R=wo(n.matches,v==null?void 0:v.route.id);d&&d[R.route.id]||(d={...d,[R.route.id]:T.error}),n.fetchers.delete(m)}else if(So(T))Je(!1,"Unhandled fetcher revalidation redirect");else{let R=Is(T.data);n.fetchers.set(m,R)}}),{loaderData:u,errors:d}}function iw(n,e,t,r){let s=Object.entries(e).filter(([,a])=>a!==VT).reduce((a,[u,d])=>(a[u]=d,a),{});for(let a of t){let u=a.route.id;if(!e.hasOwnProperty(u)&&n.hasOwnProperty(u)&&a.route.loader&&(s[u]=n[u]),r&&r.hasOwnProperty(u))break}return s}function sw(n){return n?Jn(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function wo(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function ow(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function pr(n,{pathname:e,routeId:t,method:r,type:s,message:a}={}){let u="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(u="Bad Request",r&&e&&t?d=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(u="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(u="Not Found",d=`No route matches URL "${e}"`):n===405&&(u="Method Not Allowed",r&&e&&t?d=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(d=`Invalid request method "${r.toUpperCase()}"`)),new Xd(n||500,u,new Error(d),!0)}function Qc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(So(s))return{key:r,result:s}}}function UT(n){let e=typeof n=="string"?qs(n):n;return zs({...e,hash:""})}function wO(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function EO(n){return jT(n.result)&&sO.has(n.result.status)}function Jn(n){return n.type==="error"}function So(n){return(n&&n.type)==="redirect"}function aw(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function jT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function TO(n){return iO.has(n.toUpperCase())}function Mr(n){return nO.has(n.toUpperCase())}function Ng(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Gl(n,e){let t=typeof e=="string"?qs(e).search:e.search;if(n[n.length-1].route.index&&Ng(t||""))return n[n.length-1];let r=OT(n);return r[r.length-1]}function lw(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:u}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function Bp(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SO(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Fl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function IO(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Is(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function RO(n,e){try{let t=n.sessionStorage.getItem(MT);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function CO(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(MT,JSON.stringify(t))}catch(r){ir(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function AO(){let n,e,t=new Promise((r,s)=>{n=async a=>{r(a);try{await t}catch{}},e=async a=>{s(a);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Fo=H.createContext(null);Fo.displayName="DataRouter";var xu=H.createContext(null);xu.displayName="DataRouterState";var bg=H.createContext({isTransitioning:!1});bg.displayName="ViewTransition";var BT=H.createContext(new Map);BT.displayName="Fetchers";var PO=H.createContext(null);PO.displayName="Await";var pi=H.createContext(null);pi.displayName="Navigation";var Lh=H.createContext(null);Lh.displayName="Location";var $r=H.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var Dg=H.createContext(null);Dg.displayName="RouteError";function kO(n,{relative:e}={}){Je(Nu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=H.useContext(pi),{hash:s,pathname:a,search:u}=bu(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:di([t,a])),r.createHref({pathname:d,search:u,hash:s})}function Nu(){return H.useContext(Lh)!=null}function Ks(){return Je(Nu(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Lh).location}var zT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $T(n){H.useContext(pi).static||H.useLayoutEffect(n)}function Gs(){let{isDataRoute:n}=H.useContext($r);return n?WO():xO()}function xO(){Je(Nu(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(Fo),{basename:e,navigator:t}=H.useContext(pi),{matches:r}=H.useContext($r),{pathname:s}=Ks(),a=JSON.stringify(Pg(r)),u=H.useRef(!1);return $T(()=>{u.current=!0}),H.useCallback((f,m={})=>{if(ir(u.current,zT),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=kg(f,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:di([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,s,n])}var NO=H.createContext(null);function bO(n){let e=H.useContext($r).outlet;return e&&H.createElement(NO.Provider,{value:n},e)}function DO(){let{matches:n}=H.useContext($r),e=n[n.length-1];return e?e.params:{}}function bu(n,{relative:e}={}){let{matches:t}=H.useContext($r),{pathname:r}=Ks(),s=JSON.stringify(Pg(t));return H.useMemo(()=>kg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function OO(n,e,t,r){Je(Nu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=H.useContext(pi),{matches:a}=H.useContext($r),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Ks(),v;v=m;let w=v.pathname||"/",T=w;if(f!=="/"){let D=f.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(D.length).join("/")}let R=xs(n,{pathname:T});return UO(R&&R.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:di([f,s.encodeLocation?s.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?f:di([f,s.encodeLocation?s.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,t,r)}function LO(){let n=HO(),e=Oh(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:s},t):null,null)}var MO=H.createElement(LO,null),VO=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?H.createElement($r.Provider,{value:this.props.routeContext},H.createElement(Dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FO({routeContext:n,match:e,children:t}){let r=H.useContext(Fo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement($r.Provider,{value:n},t)}function UO(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Je(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:v,errors:w}=t,T=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||T){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,m,v)=>{let w,T=!1,R=null,C=null;t&&(w=a&&m.route.id?a[m.route.id]:void 0,R=m.route.errorElement||MO,u&&(d<0&&v===0?(qO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):d===v&&(T=!0,C=m.route.hydrateFallbackElement||null)));let D=e.concat(s.slice(0,v+1)),P=()=>{let F;return w?F=R:T?F=C:m.route.Component?F=H.createElement(m.route.Component,null):m.route.element?F=m.route.element:F=f,H.createElement(FO,{match:m,routeContext:{outlet:f,matches:D,isDataRoute:t!=null},children:F})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?H.createElement(VO,{location:t.location,revalidation:t.revalidation,component:R,error:w,children:P(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):P()},null)}function Og(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jO(n){let e=H.useContext(Fo);return Je(e,Og(n)),e}function BO(n){let e=H.useContext(xu);return Je(e,Og(n)),e}function zO(n){let e=H.useContext($r);return Je(e,Og(n)),e}function Lg(n){let e=zO(n),t=e.matches[e.matches.length-1];return Je(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $O(){return Lg("useRouteId")}function HO(){var r;let n=H.useContext(Dg),e=BO("useRouteError"),t=Lg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function WO(){let{router:n}=jO("useNavigate"),e=Lg("useNavigate"),t=H.useRef(!1);return $T(()=>{t.current=!0}),H.useCallback(async(s,a={})=>{ir(t.current,zT),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var uw={};function qO(n,e,t){uw[n]||(uw[n]=!0,ir(!1,t))}var cw={};function dw(n,e){!n&&!cw[e]&&(cw[e]=!0,console.warn(e))}function KO(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:H.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:H.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:H.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}var GO=class{constructor(){this.status="pending",this.promise=new Promise((n,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",n(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function QO({router:n,flushSync:e}){let[t,r]=H.useState(n.state),[s,a]=H.useState(),[u,d]=H.useState({isTransitioning:!1}),[f,m]=H.useState(),[v,w]=H.useState(),[T,R]=H.useState(),C=H.useRef(new Map),D=H.useCallback((K,{deletedFetchers:te,flushSync:L,viewTransitionOpts:re})=>{te.forEach(S=>C.current.delete(S)),K.fetchers.forEach((S,k)=>{S.data!==void 0&&C.current.set(k,S.data)}),dw(L===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(dw(re==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!re||!N){e&&L?e(()=>r(K)):H.startTransition(()=>r(K));return}if(e&&L){e(()=>{v&&(f&&f.resolve(),v.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:re.currentLocation,nextLocation:re.nextLocation})});let S=n.window.document.startViewTransition(()=>{e(()=>r(K))});S.finished.finally(()=>{e(()=>{m(void 0),w(void 0),a(void 0),d({isTransitioning:!1})})}),e(()=>w(S));return}v?(f&&f.resolve(),v.skipTransition(),R({state:K,currentLocation:re.currentLocation,nextLocation:re.nextLocation})):(a(K),d({isTransitioning:!0,flushSync:!1,currentLocation:re.currentLocation,nextLocation:re.nextLocation}))},[n.window,e,v,f]);H.useLayoutEffect(()=>n.subscribe(D),[n,D]),H.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new GO)},[u]),H.useEffect(()=>{if(f&&s&&n.window){let K=s,te=f.promise,L=n.window.document.startViewTransition(async()=>{H.startTransition(()=>r(K)),await te});L.finished.finally(()=>{m(void 0),w(void 0),a(void 0),d({isTransitioning:!1})}),w(L)}},[s,f,n.window]),H.useEffect(()=>{f&&s&&t.location.key===s.location.key&&f.resolve()},[f,v,t.location,s]),H.useEffect(()=>{!u.isTransitioning&&T&&(a(T.state),d({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),R(void 0))},[u.isTransitioning,T]);let P=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:K=>n.navigate(K),push:(K,te,L)=>n.navigate(K,{state:te,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(K,te,L)=>n.navigate(K,{replace:!0,state:te,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[n]),F=n.basename||"/",Q=H.useMemo(()=>({router:n,navigator:P,static:!1,basename:F}),[n,P,F]);return H.createElement(H.Fragment,null,H.createElement(Fo.Provider,{value:Q},H.createElement(xu.Provider,{value:t},H.createElement(BT.Provider,{value:C.current},H.createElement(bg.Provider,{value:u},H.createElement(ZO,{basename:F,location:t.location,navigationType:t.historyAction,navigator:P},H.createElement(YO,{routes:n.routes,future:n.future,state:t})))))),null)}var YO=H.memo(JO);function JO({routes:n,future:e,state:t}){return OO(n,void 0,t,e)}function XO(n){return bO(n.context)}function ZO({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){Je(!Nu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:u,navigator:s,static:a,future:{}}),[u,s,a]);typeof t=="string"&&(t=qs(t));let{pathname:f="/",search:m="",hash:v="",state:w=null,key:T="default"}=t,R=H.useMemo(()=>{let C=Br(f,u);return C==null?null:{location:{pathname:C,search:m,hash:v,state:w,key:T},navigationType:r}},[u,f,m,v,w,T,r]);return ir(R!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:H.createElement(pi.Provider,{value:d},H.createElement(Lh.Provider,{children:e,value:R}))}var Td="get",Sd="application/x-www-form-urlencoded";function Mh(n){return n!=null&&typeof n.tagName=="string"}function eL(n){return Mh(n)&&n.tagName.toLowerCase()==="button"}function tL(n){return Mh(n)&&n.tagName.toLowerCase()==="form"}function nL(n){return Mh(n)&&n.tagName.toLowerCase()==="input"}function rL(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iL(n,e){return n.button===0&&(!e||e==="_self")&&!rL(n)}function Pm(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function sL(n,e){let t=Pm(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}var Yc=null;function oL(){if(Yc===null)try{new FormData(document.createElement("form"),0),Yc=!1}catch{Yc=!0}return Yc}var aL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zp(n){return n!=null&&!aL.has(n)?(ir(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sd}"`),null):n}function lL(n,e){let t,r,s,a,u;if(tL(n)){let d=n.getAttribute("action");r=d?Br(d,e):null,t=n.getAttribute("method")||Td,s=zp(n.getAttribute("enctype"))||Sd,a=new FormData(n)}else if(eL(n)||nL(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?Br(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Td,s=zp(n.getAttribute("formenctype"))||zp(d.getAttribute("enctype"))||Sd,a=new FormData(d,n),!oL()){let{name:m,type:v,value:w}=n;if(v==="image"){let T=m?`${m}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else m&&a.append(m,w)}}else{if(Mh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Td,r=null,s=Sd,u=n}return a&&s==="text/plain"&&(u=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:u}}function Mg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function uL(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cL(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dL(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let u=await uL(a,t);return u.links?u.links():[]}return[]}));return mL(r.flat(1).filter(cL).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function hw(n,e,t,r,s,a){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>u(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var w;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function hL(n,e){return fL(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function fL(n){return[...new Set(n)]}function pL(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function mL(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(pL(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function gL(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function yL(){let n=H.useContext(Fo);return Mg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function vL(){let n=H.useContext(xu);return Mg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Vg=H.createContext(void 0);Vg.displayName="FrameworkContext";function HT(){let n=H.useContext(Vg);return Mg(n,"You must render this element inside a <HydratedRouter> element"),n}function _L(n,e){let t=H.useContext(Vg),[r,s]=H.useState(!1),[a,u]=H.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:w}=e,T=H.useRef(null);H.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let D=F=>{F.forEach(Q=>{u(Q.isIntersecting)})},P=new IntersectionObserver(D,{threshold:.5});return T.current&&P.observe(T.current),()=>{P.disconnect()}}},[n]),H.useEffect(()=>{if(r){let D=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(D)}}},[r]);let R=()=>{s(!0)},C=()=>{s(!1),u(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:Ul(d,R),onBlur:Ul(f,C),onMouseEnter:Ul(m,R),onMouseLeave:Ul(v,C),onTouchStart:Ul(w,R)}]:[!1,T,{}]}function Ul(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function wL({page:n,...e}){let{router:t}=yL(),r=H.useMemo(()=>xs(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?H.createElement(TL,{page:n,matches:r,...e}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function EL(n){let{manifest:e,routeModules:t}=HT(),[r,s]=H.useState([]);return H.useEffect(()=>{let a=!1;return dL(n,e,t).then(u=>{a||s(u)}),()=>{a=!0}},[n,e,t]),r}function TL({page:n,matches:e,...t}){let r=Ks(),{manifest:s,routeModules:a}=HT(),{loaderData:u,matches:d}=vL(),f=H.useMemo(()=>hw(n,e,d,s,r,"data"),[n,e,d,s,r]),m=H.useMemo(()=>hw(n,e,d,s,r,"assets"),[n,e,d,s,r]),v=H.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,C=!1;if(e.forEach(P=>{var Q;let F=s.routes[P.route.id];!F||!F.hasLoader||(!f.some(K=>K.route.id===P.route.id)&&P.route.id in u&&((Q=a[P.route.id])!=null&&Q.shouldRevalidate)||F.hasClientLoader?C=!0:R.add(P.route.id))}),R.size===0)return[];let D=gL(n);return C&&R.size>0&&D.searchParams.set("_routes",e.filter(P=>R.has(P.route.id)).map(P=>P.route.id).join(",")),[D.pathname+D.search]},[u,r,s,f,e,n,a]),w=H.useMemo(()=>hL(m,s),[m,s]),T=EL(m);return H.createElement(H.Fragment,null,v.map(R=>H.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),w.map(R=>H.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),T.map(({key:R,link:C})=>H.createElement("link",{key:R,...C})))}function SL(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var WT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WT&&(window.__reactRouterVersion="7.0.1")}catch{}function IL(n,e){return uO({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:DD({window:e==null?void 0:e.window}),hydrationData:RL(),routes:n,mapRouteProperties:KO,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function RL(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:CL(n.errors)}),n}function CL(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new Xd(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let u=new a(s.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}var qT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vh=H.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:v,viewTransition:w,...T},R){let{basename:C}=H.useContext(pi),D=typeof m=="string"&&qT.test(m),P,F=!1;if(typeof m=="string"&&D&&(P=m,WT))try{let k=new URL(window.location.href),O=m.startsWith("//")?new URL(k.protocol+m):new URL(m),U=Br(O.pathname,C);O.origin===k.origin&&U!=null?m=U+O.search+O.hash:F=!0}catch{ir(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=kO(m,{relative:s}),[K,te,L]=_L(r,T),re=kL(m,{replace:u,state:d,target:f,preventScrollReset:v,relative:s,viewTransition:w});function N(k){e&&e(k),k.defaultPrevented||re(k)}let S=H.createElement("a",{...T,...L,href:P||Q,onClick:F||a?e:N,ref:SL(R,te),target:f,"data-discover":!D&&t==="render"?"true":void 0});return K&&!D?H.createElement(H.Fragment,null,S,H.createElement(wL,{page:Q})):S});Vh.displayName="Link";var KT=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:u,viewTransition:d,children:f,...m},v){let w=bu(u,{relative:m.relative}),T=Ks(),R=H.useContext(xu),{navigator:C,basename:D}=H.useContext(pi),P=R!=null&&LL(w)&&d===!0,F=C.encodeLocation?C.encodeLocation(w).pathname:w.pathname,Q=T.pathname,K=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),K=K?K.toLowerCase():null,F=F.toLowerCase()),K&&D&&(K=Br(K,D)||K);const te=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let L=Q===F||!s&&Q.startsWith(F)&&Q.charAt(te)==="/",re=K!=null&&(K===F||!s&&K.startsWith(F)&&K.charAt(F.length)==="/"),N={isActive:L,isPending:re,isTransitioning:P},S=L?e:void 0,k;typeof r=="function"?k=r(N):k=[r,L?"active":null,re?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(N):a;return H.createElement(Vh,{...m,"aria-current":S,className:k,ref:v,style:O,to:u,viewTransition:d},typeof f=="function"?f(N):f)});KT.displayName="NavLink";var AL=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:u=Td,action:d,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:w,...T},R)=>{let C=DL(),D=OL(d,{relative:m}),P=u.toLowerCase()==="get"?"get":"post",F=typeof d=="string"&&qT.test(d),Q=K=>{if(f&&f(K),K.defaultPrevented)return;K.preventDefault();let te=K.nativeEvent.submitter,L=(te==null?void 0:te.getAttribute("formmethod"))||u;C(te||K.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:s,state:a,relative:m,preventScrollReset:v,viewTransition:w})};return H.createElement("form",{ref:R,method:P,action:D,onSubmit:r?f:Q,...T,"data-discover":!F&&n==="render"?"true":void 0})});AL.displayName="Form";function PL(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GT(n){let e=H.useContext(Fo);return Je(e,PL(n)),e}function kL(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:u}={}){let d=Gs(),f=Ks(),m=bu(n,{relative:a});return H.useCallback(v=>{if(iL(v,e)){v.preventDefault();let w=t!==void 0?t:zs(f)===zs(m);d(n,{replace:w,state:r,preventScrollReset:s,relative:a,viewTransition:u})}},[f,d,m,t,r,e,n,s,a,u])}function xL(n){ir(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=H.useRef(Pm(n)),t=H.useRef(!1),r=Ks(),s=H.useMemo(()=>sL(r.search,t.current?null:e.current),[r.search]),a=Gs(),u=H.useCallback((d,f)=>{const m=Pm(typeof d=="function"?d(s):d);t.current=!0,a("?"+m,f)},[a,s]);return[s,u]}var NL=0,bL=()=>`__${String(++NL)}__`;function DL(){let{router:n}=GT("useSubmit"),{basename:e}=H.useContext(pi),t=$O();return H.useCallback(async(r,s={})=>{let{action:a,method:u,encType:d,formData:f,body:m}=lL(r,e);if(s.navigate===!1){let v=s.fetcherKey||bL();await n.fetch(v,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||u,formEncType:s.encType||d,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||u,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function OL(n,{relative:e}={}){let{basename:t}=H.useContext(pi),r=H.useContext($r);Je(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...bu(n||".",{relative:e})},u=Ks();if(n==null){a.search=u.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:di([t,a.pathname])),zs(a)}function LL(n,e={}){let t=H.useContext(bg);Je(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=GT("useViewTransitionState"),s=bu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Br(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Br(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Jd(s.pathname,u)!=null||Jd(s.pathname,a)!=null}new TextEncoder;var QT=pw();const ML=fw(QT);/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function VL(n){return H.createElement(QO,{flushSync:QT.flushSync,...n})}function mr({type:n="primary",size:e="medium",onClick:t,disabled:r=!1,children:s}){return A.jsx("button",{className:`button button--${n} button--${e}`,onClick:t,disabled:r,children:s})}function YT({isActive:n,onToggle:e,label:t,Icon:r}){return A.jsx("button",{className:`toggle-button ${n?"active":""}`,onClick:e,"aria-pressed":n,"aria-label":t,children:A.jsx(r,{className:"toggle-icon"})})}function FL({isOpen:n,onClose:e,children:t}){return n?ML.createPortal(A.jsxs("div",{className:"modal",children:[A.jsx("div",{className:"modal__overlay",onClick:()=>e&&e()}),A.jsxs("div",{className:"modal__content",children:[A.jsx("button",{className:"modal__close",onClick:r=>{r.stopPropagation(),e&&e()},children:""}),t]})]}),document.body):null}function ru({label:n,placeholder:e="",value:t="",onChange:r,type:s="text",disabled:a=!1,error:u="",...d}){return A.jsxs("div",{className:`input ${u?"input--error":""} ${a?"input--disabled":""}`,children:[n&&A.jsx("label",{className:"input__label",children:n}),A.jsx("input",{className:"input__field",type:s,placeholder:e,value:t,onChange:f=>r==null?void 0:r(f.target.value),disabled:a,...d}),u&&A.jsx("span",{className:"input__error-text",children:u})]})}function UL({onClose:n}){const[e,t]=H.useState(!1),[r,s]=H.useState(""),[a,u]=H.useState(""),[d,f]=H.useState(""),[m,v]=H.useState(""),[w,T]=H.useState(!1),R=gr(),C=async()=>{T(!0),v("");try{e?await R(fd({email:r,password:a,displayName:d})).unwrap():await R(hd({email:r,password:a})).unwrap(),n()}catch(D){v(D.message)}finally{T(!1)}};return A.jsxs("div",{className:"auth-form",children:[A.jsxs("div",{className:"auth-form__tabs",children:[A.jsx(mr,{type:e?"secondary":"primary",onClick:()=>t(!1),className:`auth-form__tab ${e?"":"active"}`,children:"Log In"}),A.jsx(mr,{type:e?"primary":"secondary",onClick:()=>t(!0),className:`auth-form__tab ${e?"active":""}`,children:"Sign Up"})]}),e&&A.jsx(ru,{type:"text",placeholder:"Enter your name",value:d,onChange:D=>f(D)}),A.jsx(ru,{type:"email",placeholder:"Enter your email",value:r,onChange:D=>s(D)}),A.jsx(ru,{type:"password",placeholder:"Enter your password",value:a,onChange:D=>u(D)}),m&&A.jsx("p",{className:"error",children:m}),A.jsx(mr,{type:"primary",onClick:C,disabled:w,className:"auth-form__submit",children:w?"Loading...":e?"Sign Up":"Log In"})]})}function Fh({isOpen:n,onClose:e}){return A.jsx(FL,{isOpen:n,onClose:e,children:A.jsx(UL,{onClose:e})})}const JT=n=>H.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},H.createElement("path",{d:"M12.0513 2L10.6813 4.8C9.70235 6.80035 8.39031 8.61962 6.8013 10.18L6.6213 10.35C5.60076 11.3408 5.01766 12.6977 5.0013 14.12V14.3C4.97427 17.0851 6.63391 19.6101 9.2013 20.69L9.4613 20.8C11.1452 21.5152 13.0474 21.5152 14.7313 20.8H14.7913C17.3779 19.6762 19.0375 17.1099 19.0013 14.29V9.95C18.1393 11.9185 16.5739 13.4946 14.6113 14.37C14.6113 14.37 14.6113 14.37 14.5513 14.37C14.4913 14.37 13.7913 14.66 13.4913 14.37C13.2234 14.0989 13.1977 13.6712 13.4313 13.37L13.5013 13.32H13.5513C15.8471 11.575 16.3823 8.34172 14.7713 5.95C13.4713 3.97 12.0513 2 12.0513 2Z",fill:"currentColor"}));function XT({isFavorite:n,onToggleFavorite:e}){const t=xt(u=>u.auth.user),[r,s]=H.useState(!1),a=()=>{t?e():s(!0)};return A.jsxs(A.Fragment,{children:[A.jsx(YT,{isActive:n,onToggle:a,label:"Toggle Favorite",Icon:JT}),A.jsx(Fh,{isOpen:r,onClose:()=>s(!1)})]})}const ZT=n=>H.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},H.createElement("path",{d:"M16.77 20.7843L12.48 17.4943C12.0722 17.1843 11.5078 17.1843 11.1 17.4943L6.77 20.7843C6.45424 21.0381 6.02377 21.0959 5.65228 20.9343C5.28078 20.7727 5.02957 20.4184 5 20.0143V5.95431C5.03878 5.12998 5.40465 4.35513 6.01656 3.80141C6.62847 3.24769 7.4359 2.96081 8.26 3.00431H15.26C16.0891 2.96643 16.8987 3.26256 17.5077 3.82643C18.1166 4.39029 18.4741 5.17479 18.5 6.00431V20.0143C18.4611 20.4038 18.2163 20.7426 17.8586 20.9017C17.501 21.0609 17.0855 21.0161 16.77 20.7843Z",fill:"currentColor"}));function eS({isInWatchlist:n,onToggleWatchlist:e}){const t=xt(u=>u.auth.user),[r,s]=H.useState(!1),a=()=>{t?e():s(!0)};return A.jsxs(A.Fragment,{children:[A.jsx(YT,{isActive:n,onToggle:a,label:"Toggle Watchlist",Icon:ZT}),A.jsx(Fh,{isOpen:r,onClose:()=>s(!1)})]})}function jL({id:n,title:e,poster:t,genres:r,isFavorite:s,isInWatchlist:a,onToggleFavorite:u,onToggleWatchlist:d}){return A.jsxs("div",{className:"card",children:[A.jsxs(Vh,{to:`/movies/${n}`,className:"card-link",children:[A.jsx("img",{src:t,alt:e,className:"card-image"}),A.jsxs("div",{className:"card-content",children:[A.jsx("h3",{className:"card-title",children:e}),A.jsx("p",{className:"card-genres",children:r&&r.length>0?r.join("  "):"No genres available"})]})]}),A.jsxs("div",{className:"card-actions",children:[A.jsx(XT,{isFavorite:s,onToggleFavorite:u}),A.jsx(eS,{isInWatchlist:a,onToggleWatchlist:d})]})]})}const Id={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function Co({movies:n=[],favorites:e=[],watchlist:t=[],onToggleFavorite:r,onToggleWatchlist:s}){const a=d=>t.some(f=>Number(f.id)===Number(d)),u=d=>e.some(f=>Number(f.id)===Number(d));return!n||n.length===0?A.jsx("p",{className:"movies-list-empty",children:"No movies available"}):A.jsx("div",{className:"movies-list",children:n.map(d=>{var f;return A.jsx(jL,{id:d.id,title:d.title,poster:`https://image.tmdb.org/t/p/w500${d.poster_path}`,genres:((f=d.genre_ids)==null?void 0:f.map(m=>Id[m]||"Unknown"))||[],isFavorite:u(d.id),isInWatchlist:a(d.id),onToggleFavorite:()=>r(d),onToggleWatchlist:()=>s(d)},d.id)})})}const BL="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20%2021V19C20%2017.9391%2019.5786%2016.9217%2018.8284%2016.1716C18.0783%2015.4214%2017.0609%2015%2016%2015H8C6.93913%2015%205.92172%2015.4214%205.17157%2016.1716C4.42143%2016.9217%204%2017.9391%204%2019V21'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12%2011C14.2091%2011%2016%209.20914%2016%207C16%204.79086%2014.2091%203%2012%203C9.79086%203%208%204.79086%208%207C8%209.20914%209.79086%2011%2012%2011Z'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function zL(){const[n,e]=H.useState(!1),[t,r]=H.useState(""),s=Gs(),a=()=>{t?s("/profile"):e(!0)},u=()=>t.charAt(0).toUpperCase();return H.useEffect(()=>{const d=Vr.onAuthStateChanged(f=>{r(f?f.displayName||f.email:"")});return()=>d()},[]),A.jsxs("div",{className:"user-badge",onClick:a,children:[A.jsx("div",{className:"user-badge__badge",children:t?A.jsx("span",{className:"user-badge__initial",children:u()}):A.jsx("img",{src:BL,alt:"User Icon",className:"user-badge__icon"})}),A.jsx("span",{className:"user-badge__text",children:t||"Sign In"}),A.jsx(Fh,{isOpen:n,onClose:()=>e(!1)})]})}function Fg({icon:n,ariaLabel:e="",onClick:t,size:r="medium",disabled:s=!1}){return A.jsx("button",{className:`icon-button icon-button--${r}`,onClick:t,"aria-label":e,disabled:s,children:A.jsx("img",{src:n,alt:"",className:"icon-button__icon"})})}const $L="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='11'%20cy='11'%20r='8'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='16'%20y1='16'%20x2='22'%20y2='22'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e";function HL({placeholder:n="Search..."}){const[e,t]=H.useState(""),r=Gs(),s=u=>{t(u)},a=u=>{u.preventDefault(),e.trim()&&(r(`/search?query=${encodeURIComponent(e)}&page=1`),t(""))};return A.jsxs("form",{className:"search",onSubmit:a,children:[A.jsx(ru,{placeholder:n,value:e,onChange:s}),A.jsx(Fg,{icon:$L,ariaLabel:"Search",onClick:a})]})}const WL="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%206C4%205.44772%204.44772%205%205%205H19C19.5523%205%2020%205.44772%2020%206C20%206.55228%2019.5523%207%2019%207H5C4.44772%207%204%206.55228%204%206ZM9%2012C9%2011.4477%209.44772%2011%2010%2011H19C19.5523%2011%2020%2011.4477%2020%2012C20%2012.5523%2019.5523%2013%2019%2013H10C9.44772%2013%209%2012.5523%209%2012ZM13%2018C13%2017.4477%2013.4477%2017%2014%2017H19C19.5523%2017%2020%2017.4477%2020%2018C20%2018.5523%2019.5523%2019%2019%2019H14C13.4477%2019%2013%2018.5523%2013%2018Z'%20fill='white'/%3e%3c/svg%3e";function qL({onClick:n}){const e=()=>{n&&n()};return A.jsx(Fg,{icon:WL,ariaLabel:"Open filters",onClick:e})}function $a({label:n,options:e,value:t,onChange:r}){return A.jsxs("div",{className:"dropdown",children:[n&&A.jsx("label",{className:"dropdown__label",children:n}),A.jsx("select",{className:"dropdown__select",value:t,onChange:s=>r(s.target.value),children:e.map(s=>A.jsx("option",{value:s.value,children:s.label},s.value))})]})}function KL({onChange:n,value:e=[]}){const[t,r]=H.useState(Object.entries(Id));H.useEffect(()=>{if(e){const d=e.map(f=>f.id);r(Object.entries(Id).filter(([f])=>!d.includes(parseInt(f,10))))}},[e]);const s=d=>{if(!d)return;const f=Id[d],m=[...e,{id:d,name:f}],v=t.filter(([w])=>parseInt(w,10)!==d);n&&n(m),r(v)},a=d=>{const f=e.find(w=>w.id===d),m=e.filter(w=>w.id!==d),v=[...t,[f.id,f.name]];n&&n(m),r(v)},u=t.map(([d,f])=>({value:d,label:f}));return A.jsxs("div",{className:"genre-selection",children:[A.jsx("label",{className:"genre-selection__label",children:"Select a Genre"}),A.jsx($a,{label:"Select a Genre",options:u,value:"",onChange:s,placeholder:"Select a genre"}),e.length>0&&A.jsx("div",{className:"genre-selection__list",children:e.map(d=>A.jsxs("div",{className:"genre-selection__item",children:[A.jsx("span",{children:d.name}),A.jsx("button",{className:"genre-selection__remove",onClick:()=>a(d.id),children:""})]},d.id))})]})}function GL({value:n,onChange:e}){const t=[{value:"",label:"Select Rating"},...Array.from({length:10},(a,u)=>{const d=u+1;return{value:d,label:d.toString()}})],r=a=>{const u=parseInt(a,10);(!a||u<=(n.to||10))&&e({...n,from:a?u:null})},s=a=>{const u=parseInt(a,10);(!a||u>=(n.from||1))&&e({...n,to:a?u:null})};return A.jsxs("div",{className:"filter-rating-range",children:[A.jsx("label",{className:"filter-label",children:"Rating Range"}),A.jsxs("div",{className:"filter-rating-range__inputs",children:[A.jsx($a,{label:"From",options:t,value:n.from||"",onChange:r}),A.jsx("span",{className:"filter-range-separator",children:"to"}),A.jsx($a,{label:"To",options:t,value:n.to||"",onChange:s})]})]})}function QL({value:n,onChange:e}){const t=[...Array.from({length:66},(u,d)=>{const f=1960+d;return{value:f,label:f.toString()}})].reverse(),r=[{value:"",label:"Select Year"},...t],s=u=>{const d=parseInt(u,10);(!u||d<=(n.to||2025))&&e({...n,from:u?d:null})},a=u=>{const d=parseInt(u,10);(!u||d>=(n.from||1960))&&e({...n,to:u?d:null})};return A.jsxs("div",{className:"filter-year-range",children:[A.jsx("label",{className:"filter-label",children:"Year Range"}),A.jsxs("div",{className:"filter-year-range__inputs",children:[A.jsx($a,{label:"From",options:r,value:n.from||"",onChange:s}),A.jsx("span",{className:"filter-range-separator",children:"to"}),A.jsx($a,{label:"To",options:r,value:n.to||"",onChange:a})]})]})}function YL(){const n=gr(),e=Gs(),{appliedFilters:t,isOpen:r}=xt(D=>D.filter),[s,a]=H.useState(t.sortBy),[u,d]=H.useState(t.genres),[f,m]=H.useState(t.ratingRange),[v,w]=H.useState(t.yearRange),T=[{value:"popularity.desc",label:"Popularity (High to Low)"},{value:"popularity.asc",label:"Popularity (Low to High)"},{value:"vote_average.desc",label:"Rating (High to Low)"},{value:"vote_average.asc",label:"Rating (Low to High)"},{value:"release_date.desc",label:"Release Date (Newest First)"},{value:"release_date.asc",label:"Release Date (Oldest First)"},{value:"original_title.asc",label:"Title (A-Z)"},{value:"original_title.desc",label:"Title (Z-A)"}];if(!r)return null;const R=()=>{n(_D({sortBy:s,genres:u,ratingRange:f,yearRange:v})),n(W_()),e("/movies")},C=()=>{d([]),m({from:null,to:null}),w({from:null,to:null}),n(wD())};return A.jsxs("div",{className:"filter-bar",children:[A.jsxs("div",{className:"filter-bar__header",children:[A.jsx("h2",{children:"Filters"}),A.jsx("button",{className:"filter-bar__close",onClick:()=>n(W_()),children:""})]}),A.jsxs("div",{className:"filter-bar__body",children:[A.jsx($a,{label:"Sort By",options:T,value:s,onChange:D=>a(D)}),A.jsx(KL,{value:u,onChange:d}),A.jsx(GL,{value:f,onChange:m}),A.jsx(QL,{value:v,onChange:w})]}),A.jsxs("div",{className:"filter-bar__footer",children:[A.jsx("button",{className:"filter-bar__clear",onClick:C,children:"Clear Filter"}),A.jsx("button",{className:"filter-bar__apply",onClick:R,children:"Show Results"})]})]})}const JL="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%206H21L19%2013H7L6%206Z'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3ccircle%20cx='9'%20cy='20'%20r='1.5'%20fill='currentColor'/%3e%3ccircle%20cx='18'%20cy='20'%20r='1.5'%20fill='currentColor'/%3e%3c/svg%3e";function XL(){const n=Gs(),e=()=>{n("/cart")};return A.jsx(Fg,{icon:JL,ariaLabel:"Go to cart",onClick:e})}function ZL(){const n=gr(),e=xt(s=>s.filter.isOpen),t=s=>{console.log("Search query:",s)},r=()=>{n(vD())};return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"user-controls",children:[A.jsxs("div",{className:"user-controls__left",children:[A.jsx(zL,{}),A.jsx(XL,{})]}),A.jsxs("div",{className:"user-controls__actions",children:[A.jsx("div",{className:"user-controls__search",children:A.jsx(HL,{onSearch:t})}),A.jsx("div",{className:"user-controls__filter",children:A.jsx(qL,{onClick:r})})]})]}),A.jsx(YL,{isOpen:e,onClose:r})]})}function Nt({children:n}){return A.jsxs(A.Fragment,{children:[A.jsx(ZL,{}),A.jsx("div",{className:"page",children:n})]})}function e4(){const n=Gs(),e=gr(),[t,r]=Rs.useState([]),[s,a]=Rs.useState([]),[u,d]=Rs.useState([]),[f,m]=Rs.useState(!1),[v,w]=Rs.useState(null),{favorites:T,watchlist:R}=xt(F=>F.userCollections),C=xt(F=>{var Q;return(Q=F.auth.user)==null?void 0:Q.uid});Rs.useEffect(()=>{(async()=>{try{m(!0);const Q=await ed({endpoint:Ca.movies.popular,page:1}),K=await ed({endpoint:Ca.movies.topRated,page:1}),te=await ed({endpoint:Ca.movies.upcoming,page:1});r(Q.results.slice(0,10)),a(K.results.slice(0,10)),d(te.results.slice(0,10)),C&&(e(Na(C)),e(ba(C)))}catch(Q){w(Q.message)}finally{m(!1)}})()},[e,C]);const D=F=>{T.some(Q=>Q.id===F.id)?e(tl({uid:C,movieId:F.id})):e(Za({uid:C,movie:F}))},P=F=>{R.some(Q=>Q.id===F.id)?e(nl({uid:C,movieId:F.id})):e(el({uid:C,movie:F}))};return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"home-hero",children:[A.jsx("h1",{className:"home-title",children:"Welcome to MyMdb"}),A.jsx("p",{className:"home-subtitle",children:"Discover your favorite movies"}),A.jsx(mr,{type:"primary",size:"large",onClick:()=>n("/movies"),children:"Explore"})]}),A.jsx(Nt,{children:f?A.jsx("p",{children:"Loading..."}):v?A.jsxs("p",{children:["Error: ",v]}):A.jsxs("div",{className:"movies-sections",children:[A.jsxs("div",{className:"movies-section",children:[A.jsx("h2",{children:"Popular Movies"}),A.jsx(Co,{movies:t,favorites:T,watchlist:R,onToggleFavorite:D,onToggleWatchlist:P})]}),A.jsxs("div",{className:"movies-section",children:[A.jsx("h2",{children:"Top Rated Movies"}),A.jsx(Co,{movies:s,favorites:T,watchlist:R,onToggleFavorite:D,onToggleWatchlist:P})]}),A.jsxs("div",{className:"movies-section",children:[A.jsx("h2",{children:"Upcoming Movies"}),A.jsx(Co,{movies:u,favorites:T,watchlist:R,onToggleFavorite:D,onToggleWatchlist:P})]})]})})]})}function tS({currentPage:n,totalPages:e,onPageChange:t}){const r=a=>{a>=1&&a<=e&&a!==n&&t(a)},s=()=>{const a=[];let d=Math.max(1,n-Math.floor(2.5)),f=Math.min(e,d+5-1);f-d+1<5&&(d=Math.max(1,f-5+1));for(let m=d;m<=f;m++)a.push(A.jsx("button",{className:`pagination__button ${m===n?"active":""}`,onClick:()=>r(m),children:m},m));return a};return A.jsxs("div",{className:"pagination",children:[A.jsx("button",{className:"pagination__button",onClick:()=>r(n-1),disabled:n===1,children:"Previous"}),s(),A.jsx("button",{className:"pagination__button",onClick:()=>r(n+1),disabled:n===e,children:"Next"})]})}function Ug(){return A.jsx("div",{className:"preloader",children:A.jsx("div",{className:"preloader__spinner"})})}function t4(){const n=gr(),{list:e,loading:t,error:r,page:s,totalPages:a}=xt(P=>P.movies),{favorites:u,watchlist:d}=xt(P=>P.userCollections),{sortBy:f,genres:m,yearRange:v,ratingRange:w}=xt(P=>P.filter.appliedFilters),T=xt(P=>{var F;return(F=P.auth.user)==null?void 0:F.uid});H.useEffect(()=>{n(Yl({page:s,sortBy:f,filters:{genres:m,yearRange:v,ratingRange:w}})),T?(n(Na(T)),n(ba(T))):n(SD())},[n,s,f,m,v,w,T]);const R=P=>{n(Yl({page:P,sortBy:f,filters:{genres:m,yearRange:v,ratingRange:w}}))},C=P=>{u.some(F=>F.id===P.id)?n(tl({uid:T,movieId:P.id})):n(Za({uid:T,movie:P}))},D=P=>{d.some(F=>F.id===P.id)?n(nl({uid:T,movieId:P.id})):n(el({uid:T,movie:P}))};return t?A.jsx(Nt,{children:A.jsx(Ug,{})}):r?A.jsx(Nt,{children:A.jsxs("p",{children:["Error loading movies: ",r]})}):A.jsx(Nt,{children:A.jsxs("div",{className:"movies-page",children:[A.jsx(Co,{movies:e,favorites:u,watchlist:d,onToggleFavorite:C,onToggleWatchlist:D}),A.jsx(tS,{currentPage:s,totalPages:a,onPageChange:R})]})})}function n4(){const n=gr(),{favorites:e,watchlist:t,loading:r,error:s}=xt(f=>f.userCollections),a=xt(f=>{var m;return(m=f.auth.user)==null?void 0:m.uid});H.useEffect(()=>{a&&n(Na(a))},[n,a]);const u=f=>{e.some(m=>m.id===f.id)?n(tl({uid:a,movieId:f.id})):n(Za({uid:a,movie:f}))},d=f=>{t.some(m=>m.id===f.id)?n(nl({uid:a,movieId:f.id})):n(el({uid:a,movie:f}))};return r?A.jsx(Nt,{children:A.jsx("p",{children:"Loading favorites..."})}):s?A.jsx(Nt,{children:A.jsxs("p",{children:["Error loading favorites: ",s]})}):!e||e.length===0?A.jsx(Nt,{children:A.jsx("p",{children:"No favorites found"})}):A.jsx(Nt,{children:A.jsx(Co,{movies:e,favorites:e,watchlist:t,onToggleFavorite:u,onToggleWatchlist:d})})}function r4(){const n=gr(),{watchlist:e,favorites:t,loading:r,error:s}=xt(f=>f.userCollections),a=xt(f=>{var m;return(m=f.auth.user)==null?void 0:m.uid});H.useEffect(()=>{a&&n(ba(a))},[n,a]);const u=f=>{t.some(m=>m.id===f.id)?n(tl({uid:a,movieId:f.id})):n(Za({uid:a,movie:f}))},d=f=>{e.some(m=>m.id===f.id)?n(nl({uid:a,movieId:f.id})):n(el({uid:a,movie:f}))};return r?A.jsx(Nt,{children:A.jsx(Ug,{})}):s?A.jsx(Nt,{children:A.jsxs("p",{children:["Error loading watchlist: ",s]})}):!e||e.length===0?A.jsx(Nt,{children:A.jsx("p",{children:"No movies in your watchlist"})}):A.jsx(Nt,{children:A.jsx(Co,{movies:e,favorites:t,watchlist:e,onToggleFavorite:u,onToggleWatchlist:d})})}function i4(){return A.jsx(Nt,{children:A.jsx("h1",{children:"Rated"})})}const nS=n=>H.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},H.createElement("path",{d:"M12 2L16 9H22L17 15L19 22L12 18L5 22L7 15L2 9H8L12 2Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function s4(){var O,U,B,b;const{id:n}=DO(),e=gr(),{details:t,loading:r,error:s}=xt(Pe=>Pe.movies),{favorites:a,watchlist:u}=xt(Pe=>Pe.userCollections),d=xt(Pe=>{var $e;return($e=Pe.auth.user)==null?void 0:$e.uid});if(H.useEffect(()=>(n&&e(td(n)),()=>{e(o2())}),[e,n]),r)return A.jsx("div",{className:"loading",children:"Loading..."});if(s)return A.jsxs("div",{className:"error",children:["Error: ",s]});if(!t)return A.jsx("div",{className:"no-details",children:"No movie details available"});const{title:f,genres:m=[],poster_path:v,release_date:w,runtime:T,vote_average:R,overview:C,production_companies:D=[],credits:P={}}=t,F=w?new Date(w).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):"N/A",Q=a.some(Pe=>Pe.id===t.id),K=u.some(Pe=>Pe.id===t.id),te=()=>{e(Q?tl({uid:d,movieId:t.id}):Za({uid:d,movie:t}))},L=()=>{e(K?nl({uid:d,movieId:t.id}):el({uid:d,movie:t}))},re=()=>{var $e;if(!d){console.error("User is not logged in");return}const Pe={id:($e=t.id)==null?void 0:$e.toString(),title:f,price:10.99,quantity:1};e(yd({userId:d,item:Pe})).unwrap().then(()=>{console.log("Item added to cart successfully:",Pe)}).catch(St=>{console.error("Failed to add item to cart:",St)})},N=((U=(O=P.crew)==null?void 0:O.find(Pe=>Pe.job==="Director"))==null?void 0:U.name)||"N/A",S=((B=P.crew)==null?void 0:B.filter(Pe=>Pe.job==="Writer"||Pe.job==="Screenplay").map(Pe=>Pe.name))||[],k=((b=P.cast)==null?void 0:b.slice(0,5).map(Pe=>Pe.name))||[];return A.jsx("div",{className:"movie-page",children:A.jsxs("div",{className:"movie-header",children:[A.jsxs("div",{className:"poster",children:[A.jsx("img",{src:`https://image.tmdb.org/t/p/w500${v}`,alt:f}),A.jsxs("div",{className:"poster-actions",children:[A.jsx(XT,{isFavorite:Q,onToggleFavorite:te}),A.jsx(eS,{isInWatchlist:K,onToggleWatchlist:L})]})]}),A.jsxs("div",{className:"info",children:[A.jsx("h1",{className:"title",children:f}),A.jsx("p",{className:"genres",children:m.map(Pe=>Pe.name).join("  ")}),A.jsxs("div",{className:"details",children:[A.jsxs("span",{className:"rating",children:[A.jsx(nS,{className:"star-icon"})," ",R||"N/A"]}),A.jsx("span",{className:"runtime",children:T?`${T} min`:"N/A"}),A.jsxs("span",{className:"release",children:["Released: ",F]})]}),A.jsx("p",{className:"overview",children:C}),A.jsxs("div",{className:"meta-info",children:[A.jsxs("div",{children:[A.jsx("h3",{children:"Director"}),A.jsx("p",{children:N})]}),A.jsxs("div",{children:[A.jsx("h3",{children:"Writers"}),A.jsx("p",{children:S.length>0?S.join(", "):"N/A"})]}),A.jsxs("div",{children:[A.jsx("h3",{children:"Cast"}),A.jsx("p",{children:k.length>0?k.join(", "):"N/A"})]}),A.jsxs("div",{children:[A.jsx("h3",{children:"Production"}),A.jsx("p",{children:D.map(Pe=>Pe.name).join(", ")||"N/A"})]})]}),A.jsx(mr,{onClick:re,type:"primary",size:"large",children:"Add to Cart"})]})]})})}function o4(){const n=gr(),e=xt(R=>{var C;return(C=R.auth.user)==null?void 0:C.uid}),{items:t,totalQuantity:r,totalPrice:s,loading:a,error:u,checkoutLoading:d,checkoutError:f,lastOrderId:m}=xt(R=>R.cart);H.useEffect(()=>{e&&n(gd(e))},[n,e]);const v=(R,C)=>{C>0&&n(vd({userId:e,itemId:R,quantity:C}))},w=R=>{n(_d({userId:e,itemId:R}))},T=()=>{e&&n(wd(e))};return a?A.jsx(Nt,{children:A.jsx("div",{className:"loading",children:"Loading your cart..."})}):u?A.jsx(Nt,{children:A.jsxs("div",{className:"error",children:["Error: ",u]})}):t.length===0?A.jsx(Nt,{children:A.jsx("div",{className:"empty-cart",children:"Your cart is empty."})}):A.jsx(Nt,{children:A.jsxs("div",{className:"cart-page",children:[A.jsx("h1",{children:"Your Cart"}),A.jsx("div",{className:"cart-items",children:t.map(R=>A.jsxs("div",{className:"cart-item",children:[A.jsxs("div",{className:"item-details",children:[A.jsx("h2",{children:R.title}),A.jsxs("p",{children:["$",R.price.toFixed(2)]})]}),A.jsxs("div",{className:"item-actions",children:[A.jsx(ru,{type:"number",min:"1",value:R.quantity,onChange:C=>v(R.id,Number(C))}),A.jsx(mr,{type:"secondary",size:"small",onClick:()=>w(R.id),children:"Remove"})]})]},R.id))}),A.jsxs("div",{className:"cart-summary",children:[A.jsx("h2",{children:"Summary"}),A.jsxs("p",{children:["Total Items: ",r]}),A.jsxs("p",{children:["Total Price: $",s.toFixed(2)]}),f&&A.jsxs("div",{className:"error",children:["Error: ",f]}),d?A.jsx(mr,{type:"primary",size:"large",disabled:!0,children:"Processing..."}):m?A.jsxs("div",{className:"success",children:["Order placed successfully! Order ID: ",m]}):A.jsx(mr,{type:"primary",size:"large",onClick:T,children:"Proceed to Checkout"})]})]})})}function jl({to:n,label:e,Icon:t,onClick:r}){const s=a=>{r&&r()};return A.jsxs(KT,{to:n,className:"nav-item",onClick:s,children:[t&&A.jsx(t,{className:"nav-item-icon"}),A.jsx("span",{children:e})]})}const a4=n=>H.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4537 3.8032L19.4558 7.49793C20.4198 8.1956 20.9934 9.31112 21 10.5011V17.1895C20.938 19.3342 19.1566 21.0268 17.0116 20.979H6.99789C4.8492 21.032 3.06195 19.338 3 17.1895V10.5011C3.00659 9.31112 3.58019 8.1956 4.54421 7.49793L9.54632 3.8032C11.0068 2.73227 12.9932 2.73227 14.4537 3.8032ZM7.73684 16.9716H16.2632C16.6556 16.9716 16.9737 16.6535 16.9737 16.2611C16.9737 15.8687 16.6556 15.5506 16.2632 15.5506H7.73684C7.34443 15.5506 7.02632 15.8687 7.02632 16.2611C7.02632 16.6535 7.34443 16.9716 7.73684 16.9716Z",fill:"currentColor"})),l4=n=>H.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},H.createElement("path",{d:"M7 4L20 12L7 20V4Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function u4({closeMenu:n}){const e=xt(a=>a.auth.user),[t,r]=H.useState(!1),s=a=>{e?n&&n():(a.preventDefault(),r(!0))};return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"nav-list",children:[A.jsx(jl,{to:"/",label:"Home",Icon:a4,onClick:n}),A.jsx(jl,{to:"/movies",label:"Movies",Icon:l4,onClick:n}),A.jsx(jl,{to:"/favorites",label:"Favorites",Icon:JT,onClick:e?n:s}),A.jsx(jl,{to:"/watchlist",label:"Watchlist",Icon:ZT,onClick:e?n:s}),A.jsx(jl,{to:"/rated",label:"Rated",Icon:nS,onClick:e?n:s})]}),A.jsx(Fh,{isOpen:t,onClose:()=>r(!1)})]})}const c4="data:image/svg+xml,%3csvg%20width='158'%20height='40'%20viewBox='0%200%20158%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.51105%209.67813L6.01623%2012.8746C6.96536%2011.7795%208.26658%2010.8768%209.91989%2010.1665C11.6038%209.45616%2013.3031%209.101%2015.0176%209.101C20.2225%209.101%2022.8249%2013.0078%2022.8249%2020.8213C22.8249%2025.024%2022.1208%2027.9689%2020.7124%2029.6559C19.3346%2031.3134%2017.1608%2032.1421%2014.191%2032.1421C11.1293%2032.1421%208.60336%2031.4317%206.61326%2030.0111C6.76635%2031.5205%206.81227%2033.0892%206.75104%2034.717V40H0V9.67813H5.51105ZM6.75104%2016.3374V26.3707C9.13916%2026.9626%2010.8537%2027.2586%2011.8947%2027.2586C13.3949%2027.2586%2014.4206%2026.8442%2014.9717%2026.0155C15.5534%2025.1868%2015.8443%2023.4554%2015.8443%2020.8213C15.8443%2018.2464%2015.584%2016.515%2015.0635%2015.6271C14.5431%2014.7096%2013.6245%2014.2508%2012.308%2014.2508C10.8078%2014.2508%208.95546%2014.9464%206.75104%2016.3374Z'%20fill='%237B61FF'/%3e%3cpath%20d='M30.5907%200H33.6218C34.9383%200%2035.5966%200.63633%2035.5966%201.90899V4.30633C35.5966%205.57898%2034.9383%206.21531%2033.6218%206.21531H30.5907C29.2742%206.21531%2028.6159%205.57898%2028.6159%204.30633V1.90899C28.6159%200.63633%2029.2742%200%2030.5907%200ZM35.5047%2031.5649H28.7537V9.67813H35.5047V31.5649Z'%20fill='%237B61FF'/%3e%3cpath%20d='M52.5823%2022.3751H52.3067L46.9334%2031.5649H39.9528L46.9334%2020.333L40.4579%209.67813H47.3927L52.2149%2018.1132H52.6741L57.4963%209.67813H64.431L57.9555%2020.333L64.9362%2031.5649H57.9555L52.5823%2022.3751Z'%20fill='%237B61FF'/%3e%3cpath%20d='M83.671%2022.8191H75.4963C75.7106%2024.4173%2076.2004%2025.4976%2076.9659%2026.0599C77.7619%2026.5927%2079.0631%2026.859%2080.8695%2026.859C83.2883%2026.859%2086.105%2026.6963%2089.3198%2026.3707L89.9628%2030.455C87.6053%2031.5501%2084.3139%2032.0977%2080.0888%2032.0977C75.833%2032.0977%2072.802%2031.2098%2070.9956%2029.434C69.1892%2027.6582%2068.286%2024.7281%2068.286%2020.6437C68.286%2016.3522%2069.1586%2013.3481%2070.9037%2011.6315C72.6795%209.91491%2075.6493%209.0566%2079.8132%209.0566C83.5791%209.0566%2086.304%209.69293%2087.988%2010.9656C89.6719%2012.2087%2090.5292%2014.1176%2090.5598%2016.6926C90.5598%2018.7347%2090.0087%2020.2738%2088.9065%2021.3097C87.8349%2022.3159%2086.0897%2022.8191%2083.671%2022.8191ZM75.3585%2018.8679H81.788C82.6147%2018.8679%2083.1658%2018.6755%2083.4414%2018.2908C83.7475%2017.906%2083.9006%2017.3437%2083.9006%2016.6038C83.9006%2015.5679%2083.6251%2014.8576%2083.074%2014.4728C82.5228%2014.0585%2081.5125%2013.8513%2080.0429%2013.8513C78.2977%2013.8513%2077.1036%2014.1916%2076.4607%2014.8724C75.8177%2015.5235%2075.4503%2016.8553%2075.3585%2018.8679Z'%20fill='white'/%3e%3cpath%20d='M101.401%209.67813L101.86%2012.8746C104.738%2010.3293%20107.616%209.0566%20110.494%209.0566C113.556%209.0566%20115.5%2010.2405%20116.327%2012.6082C118.99%2010.2405%20121.746%209.0566%20124.593%209.0566C126.644%209.0566%20128.206%209.57455%20129.278%2010.6104C130.349%2011.6463%20130.885%2013.1558%20130.885%2015.1387V31.5649H124.134V17.1809C124.134%2016.2338%20123.965%2015.5679%20123.629%2015.1831C123.292%2014.7984%20122.664%2014.606%20121.746%2014.606C121.011%2014.606%20120.307%2014.7392%20119.633%2015.0055C118.96%2015.2719%20117.98%2015.7899%20116.694%2016.5594V31.5649H110.173V17.1809C110.173%2016.2338%20109.974%2015.5679%20109.576%2015.1831C109.208%2014.7984%20108.596%2014.606%20107.738%2014.606C106.544%2014.606%20104.876%2015.2423%20102.733%2016.515V31.5649H95.9816V9.67813H101.401Z'%20fill='white'/%3e%3cpath%20d='M137.931%2014.5616L137.288%2010.1221C141.36%209.41177%20145.294%209.0566%20149.09%209.0566C152.152%209.0566%20154.403%209.66334%20155.842%2010.8768C157.281%2012.0607%20158%2014.1324%20158%2017.0921V31.5649H152.627L151.938%2028.2353C149.672%2030.8102%20146.886%2032.0977%20143.579%2032.0977C141.406%2032.0977%20139.63%2031.5501%20138.252%2030.455C136.874%2029.3304%20136.185%2027.7765%20136.185%2025.7936V23.5738C136.185%2021.8276%20136.798%2020.4661%20138.022%2019.4895C139.247%2018.5128%20140.946%2018.0244%20143.12%2018.0244H151.203V17.0477C151.172%2015.923%20150.897%2015.1683%20150.376%2014.7836C149.887%2014.3988%20148.922%2014.2064%20147.483%2014.2064C144.972%2014.2064%20141.788%2014.3248%20137.931%2014.5616ZM142.891%2024.0622V24.9057C142.891%2026.4151%20143.778%2027.1698%20145.554%2027.1698C147.391%2027.1698%20149.274%2026.4595%20151.203%2025.0388V21.9756H145.095C143.625%2022.0052%20142.891%2022.7007%20142.891%2024.0622Z'%20fill='white'/%3e%3c/svg%3e";function d4(){const[n,e]=H.useState(!1),t=()=>{e(!n)},r=()=>{e(!1)};return A.jsxs("div",{className:"navbar",children:[A.jsxs("div",{className:"navbar-stripe",children:[A.jsx(Vh,{to:"/",className:"navbar-logo",children:A.jsx("img",{src:c4,alt:"Pixema Logo"})}),A.jsx("button",{className:"menu-icon",onClick:t,"aria-expanded":n,children:""})]}),A.jsxs("div",{className:`navbar-content ${n?"visible":""}`,children:[A.jsx(u4,{closeMenu:r}),A.jsx("div",{className:"navbar-footer",children:" All Rights Reserved"})]})]})}function h4(){return A.jsxs("div",{className:"layout",children:[A.jsx("aside",{className:"navbar-section",children:A.jsx(d4,{})}),A.jsx("main",{className:"content-section",children:A.jsx(XO,{})})]})}function f4(){return A.jsx(Nt,{children:A.jsx("div",{children:"Error: Page not found"})})}function p4(){const[n,e]=H.useState({name:"",email:""}),[t,r]=H.useState(!1),[s,a]=H.useState({name:"",email:""}),[u,d]=H.useState(!1),f=gr(),m=Gs();H.useEffect(()=>{(async()=>{if(!Vr.currentUser)return;const{displayName:C,email:D,uid:P}=Vr.currentUser,F={name:C||"",email:D||""};try{const Q=Hi(rr,"users",P),K=await vT(Q);if(K.exists()){const te=K.data();e({...F,...te}),a({...F,...te})}else e(F),a(F)}catch(Q){console.error("Error fetching user data:",Q)}})()},[]);const v=R=>{const{name:C,value:D}=R.target;a(P=>({...P,[C]:D}))},w=async()=>{if(!Vr.currentUser)return;const{uid:R}=Vr.currentUser;try{Vr.currentUser.displayName!==s.name&&await Vr.currentUser.updateProfile({displayName:s.name});const C=Hi(rr,"users",R);await wT(C,{name:s.name,email:s.email}),e(s),r(!1),alert("Profile updated successfully!")}catch(C){console.error("Error updating profile:",C),alert("Failed to update profile.")}},T=async()=>{d(!0);try{await f(pd()).unwrap(),e({name:"",email:""}),a({name:"",email:""}),m("/")}catch(R){console.error("Logout failed:",R),alert("Failed to log out. Please try again.")}finally{d(!1)}};return A.jsxs("div",{className:"profile-page",children:[A.jsx("h1",{children:"Profile"}),A.jsxs("div",{className:"profile-page__container",children:[A.jsxs("div",{className:"profile-page__field",children:[A.jsx("label",{children:"Name:"}),t?A.jsx("input",{type:"text",name:"name",value:s.name,onChange:v}):A.jsx("span",{children:n.name||"N/A"})]}),A.jsxs("div",{className:"profile-page__field",children:[A.jsx("label",{children:"Email:"}),t?A.jsx("input",{type:"email",name:"email",value:s.email,onChange:v,disabled:!0}):A.jsx("span",{children:n.email||"N/A"})]}),A.jsx("div",{className:"profile-page__actions",children:t?A.jsxs(A.Fragment,{children:[A.jsx(mr,{onClick:w,type:"primary",size:"medium",children:"Save"}),A.jsx(mr,{onClick:()=>r(!1),type:"secondary",size:"medium",children:"Cancel"})]}):A.jsx(mr,{onClick:()=>r(!0),type:"primary",size:"medium",children:"Edit Profile"})}),A.jsx(mr,{onClick:T,type:"secondary",size:"medium",disabled:u,children:u?"Logging Out...":"Log Out"})]})]})}function m4(){const[n]=xL(),e=n.get("query")||"",t=parseInt(n.get("page"),10)||1,r=gr(),{searchResults:s,loading:a,error:u,totalPages:d}=xt(m=>m.movies);H.useEffect(()=>(e&&r(Jl({query:e,page:t})),()=>{r(a2())}),[r,e,t]);const f=m=>{const v=new URLSearchParams(n);v.set("page",m),window.history.replaceState(null,"",`?${v.toString()}`),r(Jl({query:e,page:m}))};return a?A.jsx(Nt,{children:A.jsx("p",{children:"Loading search results..."})}):u?A.jsx(Nt,{children:A.jsxs("p",{children:["Error loading search results: ",u]})}):!s||s.length===0?A.jsx(Nt,{children:A.jsxs("p",{children:['No results found for "',e,'"']})}):A.jsx(Nt,{children:A.jsxs("div",{className:"search-results-page",children:[A.jsxs("h2",{children:['Search Results for "',e,'"']}),A.jsx(Co,{movies:s}),A.jsx(tS,{currentPage:t,totalPages:d,onPageChange:f})]})})}const g4=IL([{element:A.jsx(h4,{}),children:[{path:"/",element:A.jsx(e4,{})},{path:"/movies",element:A.jsx(t4,{})},{path:"/movies/:id",element:A.jsx(s4,{})},{path:"/favorites",element:A.jsx(n4,{})},{path:"/watchlist",element:A.jsx(r4,{})},{path:"/rated",element:A.jsx(i4,{})},{path:"/profile",element:A.jsx(p4,{})},{path:"/search",element:A.jsx(m4,{})},{path:"/cart",element:A.jsx(o4,{})},{path:"*",element:A.jsx(f4,{})}]}]);function y4(){const n=gr(),{loading:e}=xt(t=>t.auth);return H.useEffect(()=>{n(md())},[n]),e?A.jsx(Ug,{}):A.jsx(VL,{router:g4})}function v4(){return A.jsx(bI,{store:ND,children:A.jsx(y4,{})})}const _4=document.querySelector("#root"),w4=gI.createRoot(_4);w4.render(A.jsx(v4,{}));
