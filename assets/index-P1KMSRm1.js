var US=Object.defineProperty;var jS=(n,e,t)=>e in n?US(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Xf=(n,e,t)=>jS(n,typeof e!="symbol"?e+"":e,t);function BS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function zS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zf={exports:{}},bl={},ep={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function $S(){if(Dv)return ze;Dv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function A(z,ee,Ee){this.props=z,this.context=ee,this.refs=D,this.updater=Ee||C}A.prototype.isReactComponent={},A.prototype.setState=function(z,ee){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ee,"setState")},A.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function F(){}F.prototype=A.prototype;function Q(z,ee,Ee){this.props=z,this.context=ee,this.refs=D,this.updater=Ee||C}var G=Q.prototype=new F;G.constructor=Q,R(G,A.prototype),G.isPureReactComponent=!0;var ne=Array.isArray,L=Object.prototype.hasOwnProperty,re={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function S(z,ee,Ee){var Ve,Le={},$e=null,tt=null;if(ee!=null)for(Ve in ee.ref!==void 0&&(tt=ee.ref),ee.key!==void 0&&($e=""+ee.key),ee)L.call(ee,Ve)&&!b.hasOwnProperty(Ve)&&(Le[Ve]=ee[Ve]);var nt=arguments.length-2;if(nt===1)Le.children=Ee;else if(1<nt){for(var Ue=Array(nt),mt=0;mt<nt;mt++)Ue[mt]=arguments[mt+2];Le.children=Ue}if(z&&z.defaultProps)for(Ve in nt=z.defaultProps,nt)Le[Ve]===void 0&&(Le[Ve]=nt[Ve]);return{$$typeof:n,type:z,key:$e,ref:tt,props:Le,_owner:re.current}}function P(z,ee){return{$$typeof:n,type:z.type,key:ee,ref:z.ref,props:z.props,_owner:z._owner}}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function U(z){var ee={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ee){return ee[Ee]})}var B=/\/+/g;function k(z,ee){return typeof z=="object"&&z!==null&&z.key!=null?U(""+z.key):ee.toString(36)}function ct(z,ee,Ee,Ve,Le){var $e=typeof z;($e==="undefined"||$e==="boolean")&&(z=null);var tt=!1;if(z===null)tt=!0;else switch($e){case"string":case"number":tt=!0;break;case"object":switch(z.$$typeof){case n:case e:tt=!0}}if(tt)return tt=z,Le=Le(tt),z=Ve===""?"."+k(tt,0):Ve,ne(Le)?(Ee="",z!=null&&(Ee=z.replace(B,"$&/")+"/"),ct(Le,ee,Ee,"",function(mt){return mt})):Le!=null&&(O(Le)&&(Le=P(Le,Ee+(!Le.key||tt&&tt.key===Le.key?"":(""+Le.key).replace(B,"$&/")+"/")+z)),ee.push(Le)),1;if(tt=0,Ve=Ve===""?".":Ve+":",ne(z))for(var nt=0;nt<z.length;nt++){$e=z[nt];var Ue=Ve+k($e,nt);tt+=ct($e,ee,Ee,Ue,Le)}else if(Ue=T(z),typeof Ue=="function")for(z=Ue.call(z),nt=0;!($e=z.next()).done;)$e=$e.value,Ue=Ve+k($e,nt++),tt+=ct($e,ee,Ee,Ue,Le);else if($e==="object")throw ee=String(z),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return tt}function Je(z,ee,Ee){if(z==null)return z;var Ve=[],Le=0;return ct(z,Ve,"","",function($e){return ee.call(Ee,$e,Le++)}),Ve}function kt(z){if(z._status===-1){var ee=z._result;ee=ee(),ee.then(function(Ee){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ee)},function(Ee){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ee)}),z._status===-1&&(z._status=0,z._result=ee)}if(z._status===1)return z._result.default;throw z._result}var Ye={current:null},ce={transition:null},Se={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:ce,ReactCurrentOwner:re};function fe(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:Je,forEach:function(z,ee,Ee){Je(z,function(){ee.apply(this,arguments)},Ee)},count:function(z){var ee=0;return Je(z,function(){ee++}),ee},toArray:function(z){return Je(z,function(ee){return ee})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ze.Component=A,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=Q,ze.StrictMode=r,ze.Suspense=f,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,ze.act=fe,ze.cloneElement=function(z,ee,Ee){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ve=R({},z.props),Le=z.key,$e=z.ref,tt=z._owner;if(ee!=null){if(ee.ref!==void 0&&($e=ee.ref,tt=re.current),ee.key!==void 0&&(Le=""+ee.key),z.type&&z.type.defaultProps)var nt=z.type.defaultProps;for(Ue in ee)L.call(ee,Ue)&&!b.hasOwnProperty(Ue)&&(Ve[Ue]=ee[Ue]===void 0&&nt!==void 0?nt[Ue]:ee[Ue])}var Ue=arguments.length-2;if(Ue===1)Ve.children=Ee;else if(1<Ue){nt=Array(Ue);for(var mt=0;mt<Ue;mt++)nt[mt]=arguments[mt+2];Ve.children=nt}return{$$typeof:n,type:z.type,key:Le,ref:$e,props:Ve,_owner:tt}},ze.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},ze.createElement=S,ze.createFactory=function(z){var ee=S.bind(null,z);return ee.type=z,ee},ze.createRef=function(){return{current:null}},ze.forwardRef=function(z){return{$$typeof:h,render:z}},ze.isValidElement=O,ze.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:kt}},ze.memo=function(z,ee){return{$$typeof:m,type:z,compare:ee===void 0?null:ee}},ze.startTransition=function(z){var ee=ce.transition;ce.transition={};try{z()}finally{ce.transition=ee}},ze.unstable_act=fe,ze.useCallback=function(z,ee){return Ye.current.useCallback(z,ee)},ze.useContext=function(z){return Ye.current.useContext(z)},ze.useDebugValue=function(){},ze.useDeferredValue=function(z){return Ye.current.useDeferredValue(z)},ze.useEffect=function(z,ee){return Ye.current.useEffect(z,ee)},ze.useId=function(){return Ye.current.useId()},ze.useImperativeHandle=function(z,ee,Ee){return Ye.current.useImperativeHandle(z,ee,Ee)},ze.useInsertionEffect=function(z,ee){return Ye.current.useInsertionEffect(z,ee)},ze.useLayoutEffect=function(z,ee){return Ye.current.useLayoutEffect(z,ee)},ze.useMemo=function(z,ee){return Ye.current.useMemo(z,ee)},ze.useReducer=function(z,ee,Ee){return Ye.current.useReducer(z,ee,Ee)},ze.useRef=function(z){return Ye.current.useRef(z)},ze.useState=function(z){return Ye.current.useState(z)},ze.useSyncExternalStore=function(z,ee,Ee){return Ye.current.useSyncExternalStore(z,ee,Ee)},ze.useTransition=function(){return Ye.current.useTransition()},ze.version="18.3.1",ze}var Ov;function $h(){return Ov||(Ov=1,ep.exports=$S()),ep.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function HS(){if(Lv)return bl;Lv=1;var n=$h(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var v,w={},T=null,C=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(C=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(h&&h.defaultProps)for(v in f=h.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:h,key:T,ref:C,props:w,_owner:s.current}}return bl.Fragment=t,bl.jsx=u,bl.jsxs=u,bl}var Mv;function WS(){return Mv||(Mv=1,Zf.exports=HS()),Zf.exports}var N=WS(),Vc={},tp={exports:{}},Mn={},np={exports:{}},rp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function qS(){return Vv||(Vv=1,function(n){function e(ce,Se){var fe=ce.length;ce.push(Se);e:for(;0<fe;){var z=fe-1>>>1,ee=ce[z];if(0<s(ee,Se))ce[z]=Se,ce[fe]=ee,fe=z;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var Se=ce[0],fe=ce.pop();if(fe!==Se){ce[0]=fe;e:for(var z=0,ee=ce.length,Ee=ee>>>1;z<Ee;){var Ve=2*(z+1)-1,Le=ce[Ve],$e=Ve+1,tt=ce[$e];if(0>s(Le,fe))$e<ee&&0>s(tt,Le)?(ce[z]=tt,ce[$e]=fe,z=$e):(ce[z]=Le,ce[Ve]=fe,z=Ve);else if($e<ee&&0>s(tt,fe))ce[z]=tt,ce[$e]=fe,z=$e;else break e}}return Se}function s(ce,Se){var fe=ce.sortIndex-Se.sortIndex;return fe!==0?fe:ce.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],v=1,w=null,T=3,C=!1,R=!1,D=!1,A=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ce){for(var Se=t(m);Se!==null;){if(Se.callback===null)r(m);else if(Se.startTime<=ce)r(m),Se.sortIndex=Se.expirationTime,e(f,Se);else break;Se=t(m)}}function ne(ce){if(D=!1,G(ce),!R)if(t(f)!==null)R=!0,kt(L);else{var Se=t(m);Se!==null&&Ye(ne,Se.startTime-ce)}}function L(ce,Se){R=!1,D&&(D=!1,F(S),S=-1),C=!0;var fe=T;try{for(G(Se),w=t(f);w!==null&&(!(w.expirationTime>Se)||ce&&!U());){var z=w.callback;if(typeof z=="function"){w.callback=null,T=w.priorityLevel;var ee=z(w.expirationTime<=Se);Se=n.unstable_now(),typeof ee=="function"?w.callback=ee:w===t(f)&&r(f),G(Se)}else r(f);w=t(f)}if(w!==null)var Ee=!0;else{var Ve=t(m);Ve!==null&&Ye(ne,Ve.startTime-Se),Ee=!1}return Ee}finally{w=null,T=fe,C=!1}}var re=!1,b=null,S=-1,P=5,O=-1;function U(){return!(n.unstable_now()-O<P)}function B(){if(b!==null){var ce=n.unstable_now();O=ce;var Se=!0;try{Se=b(!0,ce)}finally{Se?k():(re=!1,b=null)}}else re=!1}var k;if(typeof Q=="function")k=function(){Q(B)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,Je=ct.port2;ct.port1.onmessage=B,k=function(){Je.postMessage(null)}}else k=function(){A(B,0)};function kt(ce){b=ce,re||(re=!0,k())}function Ye(ce,Se){S=A(function(){ce(n.unstable_now())},Se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){R||C||(R=!0,kt(L))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ce){switch(T){case 1:case 2:case 3:var Se=3;break;default:Se=T}var fe=T;T=Se;try{return ce()}finally{T=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,Se){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var fe=T;T=ce;try{return Se()}finally{T=fe}},n.unstable_scheduleCallback=function(ce,Se,fe){var z=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?z+fe:z):fe=z,ce){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=fe+ee,ce={id:v++,callback:Se,priorityLevel:ce,startTime:fe,expirationTime:ee,sortIndex:-1},fe>z?(ce.sortIndex=fe,e(m,ce),t(f)===null&&ce===t(m)&&(D?(F(S),S=-1):D=!0,Ye(ne,fe-z))):(ce.sortIndex=ee,e(f,ce),R||C||(R=!0,kt(L))),ce},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(ce){var Se=T;return function(){var fe=T;T=Se;try{return ce.apply(this,arguments)}finally{T=fe}}}}(rp)),rp}var Fv;function KS(){return Fv||(Fv=1,np.exports=qS()),np.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function GS(){if(Uv)return Mn;Uv=1;var n=$h(),e=KS();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function T(i){return f.call(w,i)?!0:f.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function C(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function R(i,o,l,d){if(o===null||typeof o>"u"||C(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function D(i,o,l,d,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];A[o]=new D(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(F,Q);A[o]=new D(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(F,Q);A[o]=new D(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(F,Q);A[o]=new D(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,o,l,d){var p=A.hasOwnProperty(o)?A[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(R(o,l,p,d)&&(l=null),d||p===null?T(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),re=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),U=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Ye=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Se(i){return i===null||typeof i!="object"?null:(i=ce&&i[ce]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Object.assign,z;function ee(i){if(z===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+i}var Ee=!1;function Ve(i,o){if(!i||Ee)return"";Ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(J){var d=J}Reflect.construct(i,[],o)}else{try{o.call()}catch(J){d=J}i.call(o.prototype)}else{try{throw Error()}catch(J){d=J}i()}}catch(J){if(J&&d&&typeof J.stack=="string"){for(var p=J.stack.split(`
`),y=d.stack.split(`
`),E=p.length-1,x=y.length-1;1<=E&&0<=x&&p[E]!==y[x];)x--;for(;1<=E&&0<=x;E--,x--)if(p[E]!==y[x]){if(E!==1||x!==1)do if(E--,x--,0>x||p[E]!==y[x]){var M=`
`+p[E].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=E&&0<=x);break}}}finally{Ee=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?ee(i):""}function Le(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Ve(i.type,!1),i;case 11:return i=Ve(i.type.render,!1),i;case 1:return i=Ve(i.type,!0),i;default:return""}}function $e(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case re:return"Portal";case P:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case ct:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case U:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case B:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Je:return o=i.displayName||null,o!==null?o:$e(i.type)||"Memo";case kt:o=i._payload,i=i._init;try{return $e(i(o))}catch{}}return null}function tt(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function nt(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ue(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function mt(i){var o=Ue(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ir(i){i._valueTracker||(i._valueTracker=mt(i))}function Hi(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=Ue(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function un(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function di(i,o){var l=o.checked;return fe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Wi(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=nt(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function qi(i,o){o=o.checked,o!=null&&G(i,"checked",o,!1)}function Ws(i,o){qi(i,o);var l=nt(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ki(i,o.type,l):o.hasOwnProperty("defaultValue")&&Ki(i,o.type,nt(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Lo(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Ki(i,o,l){(o!=="number"||un(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var pr=Array.isArray;function Qt(i,o,l,d){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+nt(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function mr(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function fi(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(pr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:nt(l)}}function jr(i,o){var l=nt(o.value),d=nt(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function Cn(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function ht(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?ht(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var zn,qs=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(zn=zn||document.createElement("div"),zn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=zn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Jt(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zr=["Webkit","ms","Moz","O"];Object.keys(Br).forEach(function(i){zr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Br[o]=Br[i]})});function Gi(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Br.hasOwnProperty(i)&&Br[i]?(""+o).trim():o+"px"}function Ks(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=Gi(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var Qi=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $r(i,o){if(o){if(Qi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ji(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gr=null;function Yi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var pi=null,An=null,$n=null;function yr(i){if(i=yl(i)){if(typeof pi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Xu(o),pi(i.stateNode,i.type,o))}}function En(i){An?$n?$n.push(i):$n=[i]:An=i}function Gs(){if(An){var i=An,o=$n;if($n=An=null,yr(i),o)for(i=0;i<o.length;i++)yr(o[i])}}function mi(i,o){return i(o)}function V(){}var $=!1;function Y(i,o,l){if($)return i(o,l);$=!0;try{return mi(i,o,l)}finally{$=!1,(An!==null||$n!==null)&&(V(),Gs())}}function te(i,o){var l=i.stateNode;if(l===null)return null;var d=Xu(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var pe=!1;if(h)try{var ve={};Object.defineProperty(ve,"passive",{get:function(){pe=!0}}),window.addEventListener("test",ve,ve),window.removeEventListener("test",ve,ve)}catch{pe=!1}function Ae(i,o,l,d,p,y,E,x,M){var J=Array.prototype.slice.call(arguments,3);try{o.apply(l,J)}catch(oe){this.onError(oe)}}var me=!1,we=null,he=!1,Ne=null,je={onError:function(i){me=!0,we=i}};function ot(i,o,l,d,p,y,E,x,M){me=!1,we=null,Ae.apply(je,arguments)}function At(i,o,l,d,p,y,E,x,M){if(ot.apply(this,arguments),me){if(me){var J=we;me=!1,we=null}else throw Error(t(198));he||(he=!0,Ne=J)}}function qe(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function rt(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function at(i){if(qe(i)!==i)throw Error(t(188))}function vr(i){var o=i.alternate;if(!o){if(o=qe(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,d=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return at(p),i;if(y===d)return at(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=y;else{for(var E=!1,x=p.child;x;){if(x===l){E=!0,l=p,d=y;break}if(x===d){E=!0,d=p,l=y;break}x=x.sibling}if(!E){for(x=y.child;x;){if(x===l){E=!0,l=y,d=p;break}if(x===d){E=!0,d=y,l=p;break}x=x.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function _r(i){return i=vr(i),i!==null?cn(i):null}function cn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=cn(i);if(o!==null)return o;i=i.sibling}return null}var Yt=e.unstable_scheduleCallback,gi=e.unstable_cancelCallback,Hr=e.unstable_shouldYield,wr=e.unstable_requestPaint,lt=e.unstable_now,yi=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,gt=e.unstable_UserBlockingPriority,Xt=e.unstable_NormalPriority,Er=e.unstable_LowPriority,yt=e.unstable_IdlePriority,Pn=null,hn=null;function Mo(i){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Pn,i,void 0,(i.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:xu,tl=Math.log,ku=Math.LN2;function xu(i){return i>>>=0,i===0?32:31-(tl(i)/ku|0)|0}var Vo=64,Fo=4194304;function Xi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qs(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,y=i.pingedLanes,E=l&268435455;if(E!==0){var x=E&~p;x!==0?d=Xi(x):(y&=E,y!==0&&(d=Xi(y)))}else E=l&~p,E!==0?d=Xi(E):y!==0&&(d=Xi(y));if(d===0)return 0;if(o!==0&&o!==d&&!(o&p)&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if(d&4&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-Tn(o),p=1<<l,d|=i[l],o&=~p;return d}function Ad(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vi(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-Tn(y),x=1<<E,M=p[E];M===-1?(!(x&l)||x&d)&&(p[E]=Ad(x,o)):M<=o&&(i.expiredLanes|=x),y&=~x}}function Hn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Js(){var i=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),i}function Zi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function es(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Tn(o),i[o]=l}function ft(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Tn(l),y=1<<p;o[p]=0,d[p]=-1,i[p]=-1,l&=~y}}function ts(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-Tn(l),p=1<<d;p&o|i[d]&o&&(i[d]|=o),l&=~p}}var Ke=0;function ns(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Nu,Uo,bu,Du,Ou,nl=!1,Wr=[],Zt=null,Tr=null,Sr=null,rs=new Map,sr=new Map,qr=[],Pd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lu(i,o){switch(i){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":rs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(o.pointerId)}}function kn(i,o,l,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=yl(o),o!==null&&Uo(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function kd(i,o,l,d,p){switch(o){case"focusin":return Zt=kn(Zt,i,o,l,d,p),!0;case"dragenter":return Tr=kn(Tr,i,o,l,d,p),!0;case"mouseover":return Sr=kn(Sr,i,o,l,d,p),!0;case"pointerover":var y=p.pointerId;return rs.set(y,kn(rs.get(y)||null,i,o,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,sr.set(y,kn(sr.get(y)||null,i,o,l,d,p)),!0}return!1}function Mu(i){var o=to(i.target);if(o!==null){var l=qe(o);if(l!==null){if(o=l.tag,o===13){if(o=rt(l),o!==null){i.blockedOn=o,Ou(i.priority,function(){bu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function _i(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=jo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);gr=d,l.target.dispatchEvent(d),gr=null}else return o=yl(l),o!==null&&Uo(o),i.blockedOn=l,!1;o.shift()}return!0}function Ys(i,o,l){_i(i)&&l.delete(o)}function Vu(){nl=!1,Zt!==null&&_i(Zt)&&(Zt=null),Tr!==null&&_i(Tr)&&(Tr=null),Sr!==null&&_i(Sr)&&(Sr=null),rs.forEach(Ys),sr.forEach(Ys)}function Ir(i,o){i.blockedOn===o&&(i.blockedOn=null,nl||(nl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vu)))}function Rr(i){function o(p){return Ir(p,i)}if(0<Wr.length){Ir(Wr[0],i);for(var l=1;l<Wr.length;l++){var d=Wr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(Zt!==null&&Ir(Zt,i),Tr!==null&&Ir(Tr,i),Sr!==null&&Ir(Sr,i),rs.forEach(o),sr.forEach(o),l=0;l<qr.length;l++)d=qr[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<qr.length&&(l=qr[0],l.blockedOn===null);)Mu(l),l.blockedOn===null&&qr.shift()}var wi=ne.ReactCurrentBatchConfig,is=!0;function wt(i,o,l,d){var p=Ke,y=wi.transition;wi.transition=null;try{Ke=1,rl(i,o,l,d)}finally{Ke=p,wi.transition=y}}function xd(i,o,l,d){var p=Ke,y=wi.transition;wi.transition=null;try{Ke=4,rl(i,o,l,d)}finally{Ke=p,wi.transition=y}}function rl(i,o,l,d){if(is){var p=jo(i,o,l,d);if(p===null)Bd(i,o,d,Xs,l),Lu(i,d);else if(kd(p,i,o,l,d))d.stopPropagation();else if(Lu(i,d),o&4&&-1<Pd.indexOf(i)){for(;p!==null;){var y=yl(p);if(y!==null&&Nu(y),y=jo(i,o,l,d),y===null&&Bd(i,o,d,Xs,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else Bd(i,o,d,null,l)}}var Xs=null;function jo(i,o,l,d){if(Xs=null,i=Yi(d),i=to(i),i!==null)if(o=qe(i),o===null)i=null;else if(l=o.tag,l===13){if(i=rt(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Xs=i,null}function il(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yi()){case Xe:return 1;case gt:return 4;case Xt:case Er:return 16;case yt:return 536870912;default:return 16}default:return 16}}var Wn=null,Bo=null,xn=null;function sl(){if(xn)return xn;var i,o=Bo,l=o.length,d,p="value"in Wn?Wn.value:Wn.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var E=l-i;for(d=1;d<=E&&o[l-d]===p[y-d];d++);return xn=p.slice(i,1<d?1-d:void 0)}function zo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Kr(){return!0}function ol(){return!1}function en(i){function o(l,d,p,y,E){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(l=i[x],this[x]=l?l(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Kr:ol,this.isPropagationStopped=ol,this}return fe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){},isPersistent:Kr}),o}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=en(Cr),Gr=fe({},Cr,{view:0,detail:0}),Nd=en(Gr),Ho,Ei,ss,Zs=fe({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ss&&(ss&&i.type==="mousemove"?(Ho=i.screenX-ss.screenX,Ei=i.screenY-ss.screenY):Ei=Ho=0,ss=i),Ho)},movementY:function(i){return"movementY"in i?i.movementY:Ei}}),Wo=en(Zs),al=fe({},Zs,{dataTransfer:0}),Fu=en(al),qo=fe({},Gr,{relatedTarget:0}),Ko=en(qo),Uu=fe({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ti=en(Uu),ju=fe({},Cr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Bu=en(ju),zu=fe({},Cr,{data:0}),ll=en(zu),Go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=$u[i])?!!o[i]:!1}function Qr(){return Hu}var c=fe({},Gr,{key:function(i){if(i.key){var o=Go[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=zo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Sn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(i){return i.type==="keypress"?zo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=en(c),_=fe({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=en(_),H=fe({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),X=en(H),de=fe({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=en(de),Mt=fe({},Zs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ze=en(Mt),zt=[9,13,27,32],bt=h&&"CompositionEvent"in window,or=null;h&&"documentMode"in document&&(or=document.documentMode);var qn=h&&"TextEvent"in window&&!or,eo=h&&(!bt||or&&8<or&&11>=or),Qo=" ",Ag=!1;function Pg(i,o){switch(i){case"keyup":return zt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Jo=!1;function MT(i,o){switch(i){case"compositionend":return kg(o);case"keypress":return o.which!==32?null:(Ag=!0,Qo);case"textInput":return i=o.data,i===Qo&&Ag?null:i;default:return null}}function VT(i,o){if(Jo)return i==="compositionend"||!bt&&Pg(i,o)?(i=sl(),xn=Bo=Wn=null,Jo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return eo&&o.locale!=="ko"?null:o.data;default:return null}}var FT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!FT[i.type]:o==="textarea"}function Ng(i,o,l,d){En(d),o=Qu(o,"onChange"),0<o.length&&(l=new $o("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var ul=null,cl=null;function UT(i){Qg(i,0)}function Wu(i){var o=ta(i);if(Hi(o))return i}function jT(i,o){if(i==="change")return o}var bg=!1;if(h){var bd;if(h){var Dd="oninput"in document;if(!Dd){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Dd=typeof Dg.oninput=="function"}bd=Dd}else bd=!1;bg=bd&&(!document.documentMode||9<document.documentMode)}function Og(){ul&&(ul.detachEvent("onpropertychange",Lg),cl=ul=null)}function Lg(i){if(i.propertyName==="value"&&Wu(cl)){var o=[];Ng(o,cl,i,Yi(i)),Y(UT,o)}}function BT(i,o,l){i==="focusin"?(Og(),ul=o,cl=l,ul.attachEvent("onpropertychange",Lg)):i==="focusout"&&Og()}function zT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wu(cl)}function $T(i,o){if(i==="click")return Wu(o)}function HT(i,o){if(i==="input"||i==="change")return Wu(o)}function WT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ar=typeof Object.is=="function"?Object.is:WT;function hl(i,o){if(Ar(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(o,p)||!Ar(i[p],o[p]))return!1}return!0}function Mg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Vg(i,o){var l=Mg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Mg(l)}}function Fg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Fg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ug(){for(var i=window,o=un();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=un(i.document)}return o}function Od(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function qT(i){var o=Ug(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&Fg(l.ownerDocument.documentElement,l)){if(d!==null&&Od(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!i.extend&&y>d&&(p=d,d=y,y=p),p=Vg(l,y);var E=Vg(l,d);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var KT=h&&"documentMode"in document&&11>=document.documentMode,Yo=null,Ld=null,dl=null,Md=!1;function jg(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Md||Yo==null||Yo!==un(d)||(d=Yo,"selectionStart"in d&&Od(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),dl&&hl(dl,d)||(dl=d,d=Qu(Ld,"onSelect"),0<d.length&&(o=new $o("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=Yo)))}function qu(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Xo={animationend:qu("Animation","AnimationEnd"),animationiteration:qu("Animation","AnimationIteration"),animationstart:qu("Animation","AnimationStart"),transitionend:qu("Transition","TransitionEnd")},Vd={},Bg={};h&&(Bg=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Ku(i){if(Vd[i])return Vd[i];if(!Xo[i])return i;var o=Xo[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Bg)return Vd[i]=o[l];return i}var zg=Ku("animationend"),$g=Ku("animationiteration"),Hg=Ku("animationstart"),Wg=Ku("transitionend"),qg=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(i,o){qg.set(i,o),a(o,[i])}for(var Fd=0;Fd<Kg.length;Fd++){var Ud=Kg[Fd],GT=Ud.toLowerCase(),QT=Ud[0].toUpperCase()+Ud.slice(1);os(GT,"on"+QT)}os(zg,"onAnimationEnd"),os($g,"onAnimationIteration"),os(Hg,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(Wg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function Gg(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,At(d,o,void 0,i),i.currentTarget=null}function Qg(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var E=d.length-1;0<=E;E--){var x=d[E],M=x.instance,J=x.currentTarget;if(x=x.listener,M!==y&&p.isPropagationStopped())break e;Gg(p,x,J),y=M}else for(E=0;E<d.length;E++){if(x=d[E],M=x.instance,J=x.currentTarget,x=x.listener,M!==y&&p.isPropagationStopped())break e;Gg(p,x,J),y=M}}}if(he)throw i=Ne,he=!1,Ne=null,i}function vt(i,o){var l=o[Kd];l===void 0&&(l=o[Kd]=new Set);var d=i+"__bubble";l.has(d)||(Jg(o,i,2,!1),l.add(d))}function jd(i,o,l){var d=0;o&&(d|=4),Jg(l,i,d,o)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function pl(i){if(!i[Gu]){i[Gu]=!0,r.forEach(function(l){l!=="selectionchange"&&(JT.has(l)||jd(l,!1,i),jd(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Gu]||(o[Gu]=!0,jd("selectionchange",!1,o))}}function Jg(i,o,l,d){switch(il(o)){case 1:var p=wt;break;case 4:p=xd;break;default:p=rl}l=p.bind(null,o,l,i),p=void 0,!pe||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Bd(i,o,l,d,p){var y=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var x=d.stateNode.containerInfo;if(x===p||x.nodeType===8&&x.parentNode===p)break;if(E===4)for(E=d.return;E!==null;){var M=E.tag;if((M===3||M===4)&&(M=E.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;E=E.return}for(;x!==null;){if(E=to(x),E===null)return;if(M=E.tag,M===5||M===6){d=y=E;continue e}x=x.parentNode}}d=d.return}Y(function(){var J=y,oe=Yi(l),le=[];e:{var se=qg.get(i);if(se!==void 0){var ge=$o,Te=i;switch(i){case"keypress":if(zo(l)===0)break e;case"keydown":case"keyup":ge=g;break;case"focusin":Te="focus",ge=Ko;break;case"focusout":Te="blur",ge=Ko;break;case"beforeblur":case"afterblur":ge=Ko;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=X;break;case zg:case $g:case Hg:ge=Ti;break;case Wg:ge=dt;break;case"scroll":ge=Nd;break;case"wheel":ge=Ze;break;case"copy":case"cut":case"paste":ge=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=I}var Ie=(o&4)!==0,xt=!Ie&&i==="scroll",q=Ie?se!==null?se+"Capture":null:se;Ie=[];for(var j=J,K;j!==null;){K=j;var ue=K.stateNode;if(K.tag===5&&ue!==null&&(K=ue,q!==null&&(ue=te(j,q),ue!=null&&Ie.push(ml(j,ue,K)))),xt)break;j=j.return}0<Ie.length&&(se=new ge(se,Te,null,l,oe),le.push({event:se,listeners:Ie}))}}if(!(o&7)){e:{if(se=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",se&&l!==gr&&(Te=l.relatedTarget||l.fromElement)&&(to(Te)||Te[Si]))break e;if((ge||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,ge?(Te=l.relatedTarget||l.toElement,ge=J,Te=Te?to(Te):null,Te!==null&&(xt=qe(Te),Te!==xt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ge=null,Te=J),ge!==Te)){if(Ie=Wo,ue="onMouseLeave",q="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=I,ue="onPointerLeave",q="onPointerEnter",j="pointer"),xt=ge==null?se:ta(ge),K=Te==null?se:ta(Te),se=new Ie(ue,j+"leave",ge,l,oe),se.target=xt,se.relatedTarget=K,ue=null,to(oe)===J&&(Ie=new Ie(q,j+"enter",Te,l,oe),Ie.target=K,Ie.relatedTarget=xt,ue=Ie),xt=ue,ge&&Te)t:{for(Ie=ge,q=Te,j=0,K=Ie;K;K=Zo(K))j++;for(K=0,ue=q;ue;ue=Zo(ue))K++;for(;0<j-K;)Ie=Zo(Ie),j--;for(;0<K-j;)q=Zo(q),K--;for(;j--;){if(Ie===q||q!==null&&Ie===q.alternate)break t;Ie=Zo(Ie),q=Zo(q)}Ie=null}else Ie=null;ge!==null&&Yg(le,se,ge,Ie,!1),Te!==null&&xt!==null&&Yg(le,xt,Te,Ie,!0)}}e:{if(se=J?ta(J):window,ge=se.nodeName&&se.nodeName.toLowerCase(),ge==="select"||ge==="input"&&se.type==="file")var Re=jT;else if(xg(se))if(bg)Re=HT;else{Re=zT;var Pe=BT}else(ge=se.nodeName)&&ge.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Re=$T);if(Re&&(Re=Re(i,J))){Ng(le,Re,l,oe);break e}Pe&&Pe(i,se,J),i==="focusout"&&(Pe=se._wrapperState)&&Pe.controlled&&se.type==="number"&&Ki(se,"number",se.value)}switch(Pe=J?ta(J):window,i){case"focusin":(xg(Pe)||Pe.contentEditable==="true")&&(Yo=Pe,Ld=J,dl=null);break;case"focusout":dl=Ld=Yo=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,jg(le,l,oe);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":jg(le,l,oe)}var ke;if(bt)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Jo?Pg(i,l)&&(De="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(eo&&l.locale!=="ko"&&(Jo||De!=="onCompositionStart"?De==="onCompositionEnd"&&Jo&&(ke=sl()):(Wn=oe,Bo="value"in Wn?Wn.value:Wn.textContent,Jo=!0)),Pe=Qu(J,De),0<Pe.length&&(De=new ll(De,i,null,l,oe),le.push({event:De,listeners:Pe}),ke?De.data=ke:(ke=kg(l),ke!==null&&(De.data=ke)))),(ke=qn?MT(i,l):VT(i,l))&&(J=Qu(J,"onBeforeInput"),0<J.length&&(oe=new ll("onBeforeInput","beforeinput",null,l,oe),le.push({event:oe,listeners:J}),oe.data=ke))}Qg(le,o)})}function ml(i,o,l){return{instance:i,listener:o,currentTarget:l}}function Qu(i,o){for(var l=o+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=te(i,l),y!=null&&d.unshift(ml(i,y,p)),y=te(i,o),y!=null&&d.push(ml(i,y,p))),i=i.return}return d}function Zo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Yg(i,o,l,d,p){for(var y=o._reactName,E=[];l!==null&&l!==d;){var x=l,M=x.alternate,J=x.stateNode;if(M!==null&&M===d)break;x.tag===5&&J!==null&&(x=J,p?(M=te(l,y),M!=null&&E.unshift(ml(l,M,x))):p||(M=te(l,y),M!=null&&E.push(ml(l,M,x)))),l=l.return}E.length!==0&&i.push({event:o,listeners:E})}var YT=/\r\n?/g,XT=/\u0000|\uFFFD/g;function Xg(i){return(typeof i=="string"?i:""+i).replace(YT,`
`).replace(XT,"")}function Ju(i,o,l){if(o=Xg(o),Xg(i)!==o&&l)throw Error(t(425))}function Yu(){}var zd=null,$d=null;function Hd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Wd=typeof setTimeout=="function"?setTimeout:void 0,ZT=typeof clearTimeout=="function"?clearTimeout:void 0,Zg=typeof Promise=="function"?Promise:void 0,eS=typeof queueMicrotask=="function"?queueMicrotask:typeof Zg<"u"?function(i){return Zg.resolve(null).then(i).catch(tS)}:Wd;function tS(i){setTimeout(function(){throw i})}function qd(i,o){var l=o,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),Rr(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Rr(o)}function as(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function ey(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Jr="__reactFiber$"+ea,gl="__reactProps$"+ea,Si="__reactContainer$"+ea,Kd="__reactEvents$"+ea,nS="__reactListeners$"+ea,rS="__reactHandles$"+ea;function to(i){var o=i[Jr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Si]||l[Jr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=ey(i);i!==null;){if(l=i[Jr])return l;i=ey(i)}return o}i=l,l=i.parentNode}return null}function yl(i){return i=i[Jr]||i[Si],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ta(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Xu(i){return i[gl]||null}var Gd=[],na=-1;function ls(i){return{current:i}}function _t(i){0>na||(i.current=Gd[na],Gd[na]=null,na--)}function pt(i,o){na++,Gd[na]=i.current,i.current=o}var us={},dn=ls(us),Nn=ls(!1),no=us;function ra(i,o){var l=i.type.contextTypes;if(!l)return us;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function bn(i){return i=i.childContextTypes,i!=null}function Zu(){_t(Nn),_t(dn)}function ty(i,o,l){if(dn.current!==us)throw Error(t(168));pt(dn,o),pt(Nn,l)}function ny(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,tt(i)||"Unknown",p));return fe({},l,d)}function ec(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||us,no=dn.current,pt(dn,i),pt(Nn,Nn.current),!0}function ry(i,o,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=ny(i,o,no),d.__reactInternalMemoizedMergedChildContext=i,_t(Nn),_t(dn),pt(dn,i)):_t(Nn),pt(Nn,l)}var Ii=null,tc=!1,Qd=!1;function iy(i){Ii===null?Ii=[i]:Ii.push(i)}function iS(i){tc=!0,iy(i)}function cs(){if(!Qd&&Ii!==null){Qd=!0;var i=0,o=Ke;try{var l=Ii;for(Ke=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}Ii=null,tc=!1}catch(p){throw Ii!==null&&(Ii=Ii.slice(i+1)),Yt(Xe,cs),p}finally{Ke=o,Qd=!1}}return null}var ia=[],sa=0,nc=null,rc=0,ar=[],lr=0,ro=null,Ri=1,Ci="";function io(i,o){ia[sa++]=rc,ia[sa++]=nc,nc=i,rc=o}function sy(i,o,l){ar[lr++]=Ri,ar[lr++]=Ci,ar[lr++]=ro,ro=i;var d=Ri;i=Ci;var p=32-Tn(d)-1;d&=~(1<<p),l+=1;var y=32-Tn(o)+p;if(30<y){var E=p-p%5;y=(d&(1<<E)-1).toString(32),d>>=E,p-=E,Ri=1<<32-Tn(o)+p|l<<p|d,Ci=y+i}else Ri=1<<y|l<<p|d,Ci=i}function Jd(i){i.return!==null&&(io(i,1),sy(i,1,0))}function Yd(i){for(;i===nc;)nc=ia[--sa],ia[sa]=null,rc=ia[--sa],ia[sa]=null;for(;i===ro;)ro=ar[--lr],ar[lr]=null,Ci=ar[--lr],ar[lr]=null,Ri=ar[--lr],ar[lr]=null}var Kn=null,Gn=null,Et=!1,Pr=null;function oy(i,o){var l=dr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function ay(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Kn=i,Gn=as(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Kn=i,Gn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=ro!==null?{id:Ri,overflow:Ci}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=dr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Kn=i,Gn=null,!0):!1;default:return!1}}function Xd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Zd(i){if(Et){var o=Gn;if(o){var l=o;if(!ay(i,o)){if(Xd(i))throw Error(t(418));o=as(l.nextSibling);var d=Kn;o&&ay(i,o)?oy(d,l):(i.flags=i.flags&-4097|2,Et=!1,Kn=i)}}else{if(Xd(i))throw Error(t(418));i.flags=i.flags&-4097|2,Et=!1,Kn=i}}}function ly(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Kn=i}function ic(i){if(i!==Kn)return!1;if(!Et)return ly(i),Et=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Hd(i.type,i.memoizedProps)),o&&(o=Gn)){if(Xd(i))throw uy(),Error(t(418));for(;o;)oy(i,o),o=as(o.nextSibling)}if(ly(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){Gn=as(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}Gn=null}}else Gn=Kn?as(i.stateNode.nextSibling):null;return!0}function uy(){for(var i=Gn;i;)i=as(i.nextSibling)}function oa(){Gn=Kn=null,Et=!1}function ef(i){Pr===null?Pr=[i]:Pr.push(i)}var sS=ne.ReactCurrentBatchConfig;function vl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var p=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var x=p.refs;E===null?delete x[y]:x[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function sc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function cy(i){var o=i._init;return o(i._payload)}function hy(i){function o(q,j){if(i){var K=q.deletions;K===null?(q.deletions=[j],q.flags|=16):K.push(j)}}function l(q,j){if(!i)return null;for(;j!==null;)o(q,j),j=j.sibling;return null}function d(q,j){for(q=new Map;j!==null;)j.key!==null?q.set(j.key,j):q.set(j.index,j),j=j.sibling;return q}function p(q,j){return q=vs(q,j),q.index=0,q.sibling=null,q}function y(q,j,K){return q.index=K,i?(K=q.alternate,K!==null?(K=K.index,K<j?(q.flags|=2,j):K):(q.flags|=2,j)):(q.flags|=1048576,j)}function E(q){return i&&q.alternate===null&&(q.flags|=2),q}function x(q,j,K,ue){return j===null||j.tag!==6?(j=qf(K,q.mode,ue),j.return=q,j):(j=p(j,K),j.return=q,j)}function M(q,j,K,ue){var Re=K.type;return Re===b?oe(q,j,K.props.children,ue,K.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===kt&&cy(Re)===j.type)?(ue=p(j,K.props),ue.ref=vl(q,j,K),ue.return=q,ue):(ue=kc(K.type,K.key,K.props,null,q.mode,ue),ue.ref=vl(q,j,K),ue.return=q,ue)}function J(q,j,K,ue){return j===null||j.tag!==4||j.stateNode.containerInfo!==K.containerInfo||j.stateNode.implementation!==K.implementation?(j=Kf(K,q.mode,ue),j.return=q,j):(j=p(j,K.children||[]),j.return=q,j)}function oe(q,j,K,ue,Re){return j===null||j.tag!==7?(j=fo(K,q.mode,ue,Re),j.return=q,j):(j=p(j,K),j.return=q,j)}function le(q,j,K){if(typeof j=="string"&&j!==""||typeof j=="number")return j=qf(""+j,q.mode,K),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case L:return K=kc(j.type,j.key,j.props,null,q.mode,K),K.ref=vl(q,null,j),K.return=q,K;case re:return j=Kf(j,q.mode,K),j.return=q,j;case kt:var ue=j._init;return le(q,ue(j._payload),K)}if(pr(j)||Se(j))return j=fo(j,q.mode,K,null),j.return=q,j;sc(q,j)}return null}function se(q,j,K,ue){var Re=j!==null?j.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Re!==null?null:x(q,j,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case L:return K.key===Re?M(q,j,K,ue):null;case re:return K.key===Re?J(q,j,K,ue):null;case kt:return Re=K._init,se(q,j,Re(K._payload),ue)}if(pr(K)||Se(K))return Re!==null?null:oe(q,j,K,ue,null);sc(q,K)}return null}function ge(q,j,K,ue,Re){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return q=q.get(K)||null,x(j,q,""+ue,Re);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case L:return q=q.get(ue.key===null?K:ue.key)||null,M(j,q,ue,Re);case re:return q=q.get(ue.key===null?K:ue.key)||null,J(j,q,ue,Re);case kt:var Pe=ue._init;return ge(q,j,K,Pe(ue._payload),Re)}if(pr(ue)||Se(ue))return q=q.get(K)||null,oe(j,q,ue,Re,null);sc(j,ue)}return null}function Te(q,j,K,ue){for(var Re=null,Pe=null,ke=j,De=j=0,Wt=null;ke!==null&&De<K.length;De++){ke.index>De?(Wt=ke,ke=null):Wt=ke.sibling;var st=se(q,ke,K[De],ue);if(st===null){ke===null&&(ke=Wt);break}i&&ke&&st.alternate===null&&o(q,ke),j=y(st,j,De),Pe===null?Re=st:Pe.sibling=st,Pe=st,ke=Wt}if(De===K.length)return l(q,ke),Et&&io(q,De),Re;if(ke===null){for(;De<K.length;De++)ke=le(q,K[De],ue),ke!==null&&(j=y(ke,j,De),Pe===null?Re=ke:Pe.sibling=ke,Pe=ke);return Et&&io(q,De),Re}for(ke=d(q,ke);De<K.length;De++)Wt=ge(ke,q,De,K[De],ue),Wt!==null&&(i&&Wt.alternate!==null&&ke.delete(Wt.key===null?De:Wt.key),j=y(Wt,j,De),Pe===null?Re=Wt:Pe.sibling=Wt,Pe=Wt);return i&&ke.forEach(function(_s){return o(q,_s)}),Et&&io(q,De),Re}function Ie(q,j,K,ue){var Re=Se(K);if(typeof Re!="function")throw Error(t(150));if(K=Re.call(K),K==null)throw Error(t(151));for(var Pe=Re=null,ke=j,De=j=0,Wt=null,st=K.next();ke!==null&&!st.done;De++,st=K.next()){ke.index>De?(Wt=ke,ke=null):Wt=ke.sibling;var _s=se(q,ke,st.value,ue);if(_s===null){ke===null&&(ke=Wt);break}i&&ke&&_s.alternate===null&&o(q,ke),j=y(_s,j,De),Pe===null?Re=_s:Pe.sibling=_s,Pe=_s,ke=Wt}if(st.done)return l(q,ke),Et&&io(q,De),Re;if(ke===null){for(;!st.done;De++,st=K.next())st=le(q,st.value,ue),st!==null&&(j=y(st,j,De),Pe===null?Re=st:Pe.sibling=st,Pe=st);return Et&&io(q,De),Re}for(ke=d(q,ke);!st.done;De++,st=K.next())st=ge(ke,q,De,st.value,ue),st!==null&&(i&&st.alternate!==null&&ke.delete(st.key===null?De:st.key),j=y(st,j,De),Pe===null?Re=st:Pe.sibling=st,Pe=st);return i&&ke.forEach(function(FS){return o(q,FS)}),Et&&io(q,De),Re}function xt(q,j,K,ue){if(typeof K=="object"&&K!==null&&K.type===b&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case L:e:{for(var Re=K.key,Pe=j;Pe!==null;){if(Pe.key===Re){if(Re=K.type,Re===b){if(Pe.tag===7){l(q,Pe.sibling),j=p(Pe,K.props.children),j.return=q,q=j;break e}}else if(Pe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===kt&&cy(Re)===Pe.type){l(q,Pe.sibling),j=p(Pe,K.props),j.ref=vl(q,Pe,K),j.return=q,q=j;break e}l(q,Pe);break}else o(q,Pe);Pe=Pe.sibling}K.type===b?(j=fo(K.props.children,q.mode,ue,K.key),j.return=q,q=j):(ue=kc(K.type,K.key,K.props,null,q.mode,ue),ue.ref=vl(q,j,K),ue.return=q,q=ue)}return E(q);case re:e:{for(Pe=K.key;j!==null;){if(j.key===Pe)if(j.tag===4&&j.stateNode.containerInfo===K.containerInfo&&j.stateNode.implementation===K.implementation){l(q,j.sibling),j=p(j,K.children||[]),j.return=q,q=j;break e}else{l(q,j);break}else o(q,j);j=j.sibling}j=Kf(K,q.mode,ue),j.return=q,q=j}return E(q);case kt:return Pe=K._init,xt(q,j,Pe(K._payload),ue)}if(pr(K))return Te(q,j,K,ue);if(Se(K))return Ie(q,j,K,ue);sc(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,j!==null&&j.tag===6?(l(q,j.sibling),j=p(j,K),j.return=q,q=j):(l(q,j),j=qf(K,q.mode,ue),j.return=q,q=j),E(q)):l(q,j)}return xt}var aa=hy(!0),dy=hy(!1),oc=ls(null),ac=null,la=null,tf=null;function nf(){tf=la=ac=null}function rf(i){var o=oc.current;_t(oc),i._currentValue=o}function sf(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function ua(i,o){ac=i,tf=la=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Dn=!0),i.firstContext=null)}function ur(i){var o=i._currentValue;if(tf!==i)if(i={context:i,memoizedValue:o,next:null},la===null){if(ac===null)throw Error(t(308));la=i,ac.dependencies={lanes:0,firstContext:i}}else la=la.next=i;return o}var so=null;function of(i){so===null?so=[i]:so.push(i)}function fy(i,o,l,d){var p=o.interleaved;return p===null?(l.next=l,of(o)):(l.next=p.next,p.next=l),o.interleaved=l,Ai(i,d)}function Ai(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var hs=!1;function af(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function py(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Pi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ds(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,it&2){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,Ai(i,l)}return p=d.interleaved,p===null?(o.next=o,of(d)):(o.next=p.next,p.next=o),d.interleaved=o,Ai(i,l)}function lc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,ts(i,l)}}function my(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function uc(i,o,l,d){var p=i.updateQueue;hs=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var M=x,J=M.next;M.next=null,E===null?y=J:E.next=J,E=M;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,x=oe.lastBaseUpdate,x!==E&&(x===null?oe.firstBaseUpdate=J:x.next=J,oe.lastBaseUpdate=M))}if(y!==null){var le=p.baseState;E=0,oe=J=M=null,x=y;do{var se=x.lane,ge=x.eventTime;if((d&se)===se){oe!==null&&(oe=oe.next={eventTime:ge,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Te=i,Ie=x;switch(se=o,ge=l,Ie.tag){case 1:if(Te=Ie.payload,typeof Te=="function"){le=Te.call(ge,le,se);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ie.payload,se=typeof Te=="function"?Te.call(ge,le,se):Te,se==null)break e;le=fe({},le,se);break e;case 2:hs=!0}}x.callback!==null&&x.lane!==0&&(i.flags|=64,se=p.effects,se===null?p.effects=[x]:se.push(x))}else ge={eventTime:ge,lane:se,tag:x.tag,payload:x.payload,callback:x.callback,next:null},oe===null?(J=oe=ge,M=le):oe=oe.next=ge,E|=se;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;se=x,x=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(oe===null&&(M=le),p.baseState=M,p.firstBaseUpdate=J,p.lastBaseUpdate=oe,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);lo|=E,i.lanes=E,i.memoizedState=le}}function gy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var _l={},Yr=ls(_l),wl=ls(_l),El=ls(_l);function oo(i){if(i===_l)throw Error(t(174));return i}function lf(i,o){switch(pt(El,o),pt(wl,i),pt(Yr,_l),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ct(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Ct(o,i)}_t(Yr),pt(Yr,o)}function ca(){_t(Yr),_t(wl),_t(El)}function yy(i){oo(El.current);var o=oo(Yr.current),l=Ct(o,i.type);o!==l&&(pt(wl,i),pt(Yr,l))}function uf(i){wl.current===i&&(_t(Yr),_t(wl))}var St=ls(0);function cc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var cf=[];function hf(){for(var i=0;i<cf.length;i++)cf[i]._workInProgressVersionPrimary=null;cf.length=0}var hc=ne.ReactCurrentDispatcher,df=ne.ReactCurrentBatchConfig,ao=0,It=null,Vt=null,$t=null,dc=!1,Tl=!1,Sl=0,oS=0;function fn(){throw Error(t(321))}function ff(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Ar(i[l],o[l]))return!1;return!0}function pf(i,o,l,d,p,y){if(ao=y,It=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,hc.current=i===null||i.memoizedState===null?cS:hS,i=l(d,p),Tl){y=0;do{if(Tl=!1,Sl=0,25<=y)throw Error(t(301));y+=1,$t=Vt=null,o.updateQueue=null,hc.current=dS,i=l(d,p)}while(Tl)}if(hc.current=mc,o=Vt!==null&&Vt.next!==null,ao=0,$t=Vt=It=null,dc=!1,o)throw Error(t(300));return i}function mf(){var i=Sl!==0;return Sl=0,i}function Xr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?It.memoizedState=$t=i:$t=$t.next=i,$t}function cr(){if(Vt===null){var i=It.alternate;i=i!==null?i.memoizedState:null}else i=Vt.next;var o=$t===null?It.memoizedState:$t.next;if(o!==null)$t=o,Vt=i;else{if(i===null)throw Error(t(310));Vt=i,i={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},$t===null?It.memoizedState=$t=i:$t=$t.next=i}return $t}function Il(i,o){return typeof o=="function"?o(i):o}function gf(i){var o=cr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=Vt,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var x=E=null,M=null,J=y;do{var oe=J.lane;if((ao&oe)===oe)M!==null&&(M=M.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),d=J.hasEagerState?J.eagerState:i(d,J.action);else{var le={lane:oe,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};M===null?(x=M=le,E=d):M=M.next=le,It.lanes|=oe,lo|=oe}J=J.next}while(J!==null&&J!==y);M===null?E=d:M.next=x,Ar(d,o.memoizedState)||(Dn=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=M,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do y=p.lane,It.lanes|=y,lo|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function yf(i){var o=cr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Ar(y,o.memoizedState)||(Dn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,d]}function vy(){}function _y(i,o){var l=It,d=cr(),p=o(),y=!Ar(d.memoizedState,p);if(y&&(d.memoizedState=p,Dn=!0),d=d.queue,vf(Ty.bind(null,l,d,i),[i]),d.getSnapshot!==o||y||$t!==null&&$t.memoizedState.tag&1){if(l.flags|=2048,Rl(9,Ey.bind(null,l,d,p,o),void 0,null),Ht===null)throw Error(t(349));ao&30||wy(l,o,p)}return p}function wy(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=It.updateQueue,o===null?(o={lastEffect:null,stores:null},It.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Ey(i,o,l,d){o.value=l,o.getSnapshot=d,Sy(o)&&Iy(i)}function Ty(i,o,l){return l(function(){Sy(o)&&Iy(i)})}function Sy(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Ar(i,l)}catch{return!0}}function Iy(i){var o=Ai(i,1);o!==null&&br(o,i,1,-1)}function Ry(i){var o=Xr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:i},o.queue=i,i=i.dispatch=uS.bind(null,It,i),[o.memoizedState,i]}function Rl(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=It.updateQueue,o===null?(o={lastEffect:null,stores:null},It.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function Cy(){return cr().memoizedState}function fc(i,o,l,d){var p=Xr();It.flags|=i,p.memoizedState=Rl(1|o,l,void 0,d===void 0?null:d)}function pc(i,o,l,d){var p=cr();d=d===void 0?null:d;var y=void 0;if(Vt!==null){var E=Vt.memoizedState;if(y=E.destroy,d!==null&&ff(d,E.deps)){p.memoizedState=Rl(o,l,y,d);return}}It.flags|=i,p.memoizedState=Rl(1|o,l,y,d)}function Ay(i,o){return fc(8390656,8,i,o)}function vf(i,o){return pc(2048,8,i,o)}function Py(i,o){return pc(4,2,i,o)}function ky(i,o){return pc(4,4,i,o)}function xy(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Ny(i,o,l){return l=l!=null?l.concat([i]):null,pc(4,4,xy.bind(null,o,i),l)}function _f(){}function by(i,o){var l=cr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&ff(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function Dy(i,o){var l=cr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&ff(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function Oy(i,o,l){return ao&21?(Ar(l,o)||(l=Js(),It.lanes|=l,lo|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Dn=!0),i.memoizedState=l)}function aS(i,o){var l=Ke;Ke=l!==0&&4>l?l:4,i(!0);var d=df.transition;df.transition={};try{i(!1),o()}finally{Ke=l,df.transition=d}}function Ly(){return cr().memoizedState}function lS(i,o,l){var d=gs(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},My(i))Vy(o,l);else if(l=fy(i,o,l,d),l!==null){var p=Rn();br(l,i,d,p),Fy(l,o,d)}}function uS(i,o,l){var d=gs(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(My(i))Vy(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,x=y(E,l);if(p.hasEagerState=!0,p.eagerState=x,Ar(x,E)){var M=o.interleaved;M===null?(p.next=p,of(o)):(p.next=M.next,M.next=p),o.interleaved=p;return}}catch{}finally{}l=fy(i,o,p,d),l!==null&&(p=Rn(),br(l,i,d,p),Fy(l,o,d))}}function My(i){var o=i.alternate;return i===It||o!==null&&o===It}function Vy(i,o){Tl=dc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function Fy(i,o,l){if(l&4194240){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,ts(i,l)}}var mc={readContext:ur,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},cS={readContext:ur,useCallback:function(i,o){return Xr().memoizedState=[i,o===void 0?null:o],i},useContext:ur,useEffect:Ay,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,fc(4194308,4,xy.bind(null,o,i),l)},useLayoutEffect:function(i,o){return fc(4194308,4,i,o)},useInsertionEffect:function(i,o){return fc(4,2,i,o)},useMemo:function(i,o){var l=Xr();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=Xr();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=lS.bind(null,It,i),[d.memoizedState,i]},useRef:function(i){var o=Xr();return i={current:i},o.memoizedState=i},useState:Ry,useDebugValue:_f,useDeferredValue:function(i){return Xr().memoizedState=i},useTransition:function(){var i=Ry(!1),o=i[0];return i=aS.bind(null,i[1]),Xr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=It,p=Xr();if(Et){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),Ht===null)throw Error(t(349));ao&30||wy(d,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Ay(Ty.bind(null,d,y,i),[i]),d.flags|=2048,Rl(9,Ey.bind(null,d,y,l,o),void 0,null),l},useId:function(){var i=Xr(),o=Ht.identifierPrefix;if(Et){var l=Ci,d=Ri;l=(d&~(1<<32-Tn(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Sl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=oS++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},hS={readContext:ur,useCallback:by,useContext:ur,useEffect:vf,useImperativeHandle:Ny,useInsertionEffect:Py,useLayoutEffect:ky,useMemo:Dy,useReducer:gf,useRef:Cy,useState:function(){return gf(Il)},useDebugValue:_f,useDeferredValue:function(i){var o=cr();return Oy(o,Vt.memoizedState,i)},useTransition:function(){var i=gf(Il)[0],o=cr().memoizedState;return[i,o]},useMutableSource:vy,useSyncExternalStore:_y,useId:Ly,unstable_isNewReconciler:!1},dS={readContext:ur,useCallback:by,useContext:ur,useEffect:vf,useImperativeHandle:Ny,useInsertionEffect:Py,useLayoutEffect:ky,useMemo:Dy,useReducer:yf,useRef:Cy,useState:function(){return yf(Il)},useDebugValue:_f,useDeferredValue:function(i){var o=cr();return Vt===null?o.memoizedState=i:Oy(o,Vt.memoizedState,i)},useTransition:function(){var i=yf(Il)[0],o=cr().memoizedState;return[i,o]},useMutableSource:vy,useSyncExternalStore:_y,useId:Ly,unstable_isNewReconciler:!1};function kr(i,o){if(i&&i.defaultProps){o=fe({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function wf(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:fe({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var gc={isMounted:function(i){return(i=i._reactInternals)?qe(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=Rn(),p=gs(i),y=Pi(d,p);y.payload=o,l!=null&&(y.callback=l),o=ds(i,y,p),o!==null&&(br(o,i,p,d),lc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=Rn(),p=gs(i),y=Pi(d,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=ds(i,y,p),o!==null&&(br(o,i,p,d),lc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Rn(),d=gs(i),p=Pi(l,d);p.tag=2,o!=null&&(p.callback=o),o=ds(i,p,d),o!==null&&(br(o,i,d,l),lc(o,i,d))}};function Uy(i,o,l,d,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,E):o.prototype&&o.prototype.isPureReactComponent?!hl(l,d)||!hl(p,y):!0}function jy(i,o,l){var d=!1,p=us,y=o.contextType;return typeof y=="object"&&y!==null?y=ur(y):(p=bn(o)?no:dn.current,d=o.contextTypes,y=(d=d!=null)?ra(i,p):us),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=gc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function By(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&gc.enqueueReplaceState(o,o.state,null)}function Ef(i,o,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},af(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=ur(y):(y=bn(o)?no:dn.current,p.context=ra(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(wf(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&gc.enqueueReplaceState(p,p.state,null),uc(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ha(i,o){try{var l="",d=o;do l+=Le(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Tf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Sf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var fS=typeof WeakMap=="function"?WeakMap:Map;function zy(i,o,l){l=Pi(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){Sc||(Sc=!0,Ff=d),Sf(i,o)},l}function $y(i,o,l){l=Pi(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){Sf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Sf(i,o),typeof d!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),l}function Hy(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new fS;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),i=AS.bind(null,i,o,l),o.then(i,i))}function Wy(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function qy(i,o,l,d,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Pi(-1,1),o.tag=2,ds(l,o,1))),l.lanes|=1),i)}var pS=ne.ReactCurrentOwner,Dn=!1;function In(i,o,l,d){o.child=i===null?dy(o,null,l,d):aa(o,i.child,l,d)}function Ky(i,o,l,d,p){l=l.render;var y=o.ref;return ua(o,p),d=pf(i,o,l,d,y,p),l=mf(),i!==null&&!Dn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ki(i,o,p)):(Et&&l&&Jd(o),o.flags|=1,In(i,o,d,p),o.child)}function Gy(i,o,l,d,p){if(i===null){var y=l.type;return typeof y=="function"&&!Wf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,Qy(i,o,y,d,p)):(i=kc(l.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!(i.lanes&p)){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:hl,l(E,d)&&i.ref===o.ref)return ki(i,o,p)}return o.flags|=1,i=vs(y,d),i.ref=o.ref,i.return=o,o.child=i}function Qy(i,o,l,d,p){if(i!==null){var y=i.memoizedProps;if(hl(y,d)&&i.ref===o.ref)if(Dn=!1,o.pendingProps=d=y,(i.lanes&p)!==0)i.flags&131072&&(Dn=!0);else return o.lanes=i.lanes,ki(i,o,p)}return If(i,o,l,d,p)}function Jy(i,o,l){var d=o.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(fa,Qn),Qn|=l;else{if(!(l&1073741824))return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,pt(fa,Qn),Qn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,pt(fa,Qn),Qn|=d}else y!==null?(d=y.baseLanes|l,o.memoizedState=null):d=l,pt(fa,Qn),Qn|=d;return In(i,o,p,l),o.child}function Yy(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function If(i,o,l,d,p){var y=bn(l)?no:dn.current;return y=ra(o,y),ua(o,p),l=pf(i,o,l,d,y,p),d=mf(),i!==null&&!Dn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ki(i,o,p)):(Et&&d&&Jd(o),o.flags|=1,In(i,o,l,p),o.child)}function Xy(i,o,l,d,p){if(bn(l)){var y=!0;ec(o)}else y=!1;if(ua(o,p),o.stateNode===null)vc(i,o),jy(o,l,d),Ef(o,l,d,p),d=!0;else if(i===null){var E=o.stateNode,x=o.memoizedProps;E.props=x;var M=E.context,J=l.contextType;typeof J=="object"&&J!==null?J=ur(J):(J=bn(l)?no:dn.current,J=ra(o,J));var oe=l.getDerivedStateFromProps,le=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function";le||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==d||M!==J)&&By(o,E,d,J),hs=!1;var se=o.memoizedState;E.state=se,uc(o,d,E,p),M=o.memoizedState,x!==d||se!==M||Nn.current||hs?(typeof oe=="function"&&(wf(o,l,oe,d),M=o.memoizedState),(x=hs||Uy(o,l,x,d,se,M,J))?(le||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=M),E.props=d,E.state=M,E.context=J,d=x):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,py(i,o),x=o.memoizedProps,J=o.type===o.elementType?x:kr(o.type,x),E.props=J,le=o.pendingProps,se=E.context,M=l.contextType,typeof M=="object"&&M!==null?M=ur(M):(M=bn(l)?no:dn.current,M=ra(o,M));var ge=l.getDerivedStateFromProps;(oe=typeof ge=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==le||se!==M)&&By(o,E,d,M),hs=!1,se=o.memoizedState,E.state=se,uc(o,d,E,p);var Te=o.memoizedState;x!==le||se!==Te||Nn.current||hs?(typeof ge=="function"&&(wf(o,l,ge,d),Te=o.memoizedState),(J=hs||Uy(o,l,J,d,se,Te,M)||!1)?(oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,Te,M),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,Te,M)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Te),E.props=d,E.state=Te,E.context=M,d=J):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),d=!1)}return Rf(i,o,l,d,y,p)}function Rf(i,o,l,d,p,y){Yy(i,o);var E=(o.flags&128)!==0;if(!d&&!E)return p&&ry(o,l,!1),ki(i,o,y);d=o.stateNode,pS.current=o;var x=E&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&E?(o.child=aa(o,i.child,null,y),o.child=aa(o,null,x,y)):In(i,o,x,y),o.memoizedState=d.state,p&&ry(o,l,!0),o.child}function Zy(i){var o=i.stateNode;o.pendingContext?ty(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ty(i,o.context,!1),lf(i,o.containerInfo)}function ev(i,o,l,d,p){return oa(),ef(p),o.flags|=256,In(i,o,l,d),o.child}var Cf={dehydrated:null,treeContext:null,retryLane:0};function Af(i){return{baseLanes:i,cachePool:null,transitions:null}}function tv(i,o,l){var d=o.pendingProps,p=St.current,y=!1,E=(o.flags&128)!==0,x;if((x=E)||(x=i!==null&&i.memoizedState===null?!1:(p&2)!==0),x?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),pt(St,p&1),i===null)return Zd(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(E=d.children,i=d.fallback,y?(d=o.mode,y=o.child,E={mode:"hidden",children:E},!(d&1)&&y!==null?(y.childLanes=0,y.pendingProps=E):y=xc(E,d,0,null),i=fo(i,d,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Af(l),o.memoizedState=Cf,i):Pf(o,E));if(p=i.memoizedState,p!==null&&(x=p.dehydrated,x!==null))return mS(i,o,E,d,x,p,l);if(y){y=d.fallback,E=o.mode,p=i.child,x=p.sibling;var M={mode:"hidden",children:d.children};return!(E&1)&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=M,o.deletions=null):(d=vs(p,M),d.subtreeFlags=p.subtreeFlags&14680064),x!==null?y=vs(x,y):(y=fo(y,E,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,E=i.child.memoizedState,E=E===null?Af(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~l,o.memoizedState=Cf,d}return y=i.child,i=y.sibling,d=vs(y,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function Pf(i,o){return o=xc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function yc(i,o,l,d){return d!==null&&ef(d),aa(o,i.child,null,l),i=Pf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function mS(i,o,l,d,p,y,E){if(l)return o.flags&256?(o.flags&=-257,d=Tf(Error(t(422))),yc(i,o,E,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=xc({mode:"visible",children:d.children},p,0,null),y=fo(y,p,E,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,o.mode&1&&aa(o,i.child,null,E),o.child.memoizedState=Af(E),o.memoizedState=Cf,y);if(!(o.mode&1))return yc(i,o,E,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var x=d.dgst;return d=x,y=Error(t(419)),d=Tf(y,d,void 0),yc(i,o,E,d)}if(x=(E&i.childLanes)!==0,Dn||x){if(d=Ht,d!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(d.suspendedLanes|E)?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Ai(i,p),br(d,i,p,-1))}return Hf(),d=Tf(Error(t(421))),yc(i,o,E,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=PS.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,Gn=as(p.nextSibling),Kn=o,Et=!0,Pr=null,i!==null&&(ar[lr++]=Ri,ar[lr++]=Ci,ar[lr++]=ro,Ri=i.id,Ci=i.overflow,ro=o),o=Pf(o,d.children),o.flags|=4096,o)}function nv(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),sf(i.return,o,l)}function kf(i,o,l,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function rv(i,o,l){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(In(i,o,d.children,l),d=St.current,d&2)d=d&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&nv(i,l,o);else if(i.tag===19)nv(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(pt(St,d),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&cc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),kf(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&cc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}kf(o,!0,l,null,y);break;case"together":kf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function vc(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ki(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),lo|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=vs(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=vs(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function gS(i,o,l){switch(o.tag){case 3:Zy(o),oa();break;case 5:yy(o);break;case 1:bn(o.type)&&ec(o);break;case 4:lf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;pt(oc,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(pt(St,St.current&1),o.flags|=128,null):l&o.child.childLanes?tv(i,o,l):(pt(St,St.current&1),i=ki(i,o,l),i!==null?i.sibling:null);pt(St,St.current&1);break;case 19:if(d=(l&o.childLanes)!==0,i.flags&128){if(d)return rv(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pt(St,St.current),d)break;return null;case 22:case 23:return o.lanes=0,Jy(i,o,l)}return ki(i,o,l)}var iv,xf,sv,ov;iv=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},xf=function(){},sv=function(i,o,l,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,oo(Yr.current);var y=null;switch(l){case"input":p=di(i,p),d=di(i,d),y=[];break;case"select":p=fe({},p,{value:void 0}),d=fe({},d,{value:void 0}),y=[];break;case"textarea":p=mr(i,p),d=mr(i,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Yu)}$r(l,d);var E;l=null;for(J in p)if(!d.hasOwnProperty(J)&&p.hasOwnProperty(J)&&p[J]!=null)if(J==="style"){var x=p[J];for(E in x)x.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(s.hasOwnProperty(J)?y||(y=[]):(y=y||[]).push(J,null));for(J in d){var M=d[J];if(x=p!=null?p[J]:void 0,d.hasOwnProperty(J)&&M!==x&&(M!=null||x!=null))if(J==="style")if(x){for(E in x)!x.hasOwnProperty(E)||M&&M.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in M)M.hasOwnProperty(E)&&x[E]!==M[E]&&(l||(l={}),l[E]=M[E])}else l||(y||(y=[]),y.push(J,l)),l=M;else J==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,x=x?x.__html:void 0,M!=null&&x!==M&&(y=y||[]).push(J,M)):J==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(J,""+M):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(s.hasOwnProperty(J)?(M!=null&&J==="onScroll"&&vt("scroll",i),y||x===M||(y=[])):(y=y||[]).push(J,M))}l&&(y=y||[]).push("style",l);var J=y;(o.updateQueue=J)&&(o.flags|=4)}},ov=function(i,o,l,d){l!==d&&(o.flags|=4)};function Cl(i,o){if(!Et)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function pn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function yS(i,o,l){var d=o.pendingProps;switch(Yd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(o),null;case 1:return bn(o.type)&&Zu(),pn(o),null;case 3:return d=o.stateNode,ca(),_t(Nn),_t(dn),hf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(ic(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Pr!==null&&(Bf(Pr),Pr=null))),xf(i,o),pn(o),null;case 5:uf(o);var p=oo(El.current);if(l=o.type,i!==null&&o.stateNode!=null)sv(i,o,l,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return pn(o),null}if(i=oo(Yr.current),ic(o)){d=o.stateNode,l=o.type;var y=o.memoizedProps;switch(d[Jr]=o,d[gl]=y,i=(o.mode&1)!==0,l){case"dialog":vt("cancel",d),vt("close",d);break;case"iframe":case"object":case"embed":vt("load",d);break;case"video":case"audio":for(p=0;p<fl.length;p++)vt(fl[p],d);break;case"source":vt("error",d);break;case"img":case"image":case"link":vt("error",d),vt("load",d);break;case"details":vt("toggle",d);break;case"input":Wi(d,y),vt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},vt("invalid",d);break;case"textarea":fi(d,y),vt("invalid",d)}$r(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var x=y[E];E==="children"?typeof x=="string"?d.textContent!==x&&(y.suppressHydrationWarning!==!0&&Ju(d.textContent,x,i),p=["children",x]):typeof x=="number"&&d.textContent!==""+x&&(y.suppressHydrationWarning!==!0&&Ju(d.textContent,x,i),p=["children",""+x]):s.hasOwnProperty(E)&&x!=null&&E==="onScroll"&&vt("scroll",d)}switch(l){case"input":ir(d),Lo(d,y,!0);break;case"textarea":ir(d),Cn(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Yu)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ht(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=E.createElement(l,{is:d.is}):(i=E.createElement(l),l==="select"&&(E=i,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):i=E.createElementNS(i,l),i[Jr]=o,i[gl]=d,iv(i,o,!1,!1),o.stateNode=i;e:{switch(E=Ji(l,d),l){case"dialog":vt("cancel",i),vt("close",i),p=d;break;case"iframe":case"object":case"embed":vt("load",i),p=d;break;case"video":case"audio":for(p=0;p<fl.length;p++)vt(fl[p],i);p=d;break;case"source":vt("error",i),p=d;break;case"img":case"image":case"link":vt("error",i),vt("load",i),p=d;break;case"details":vt("toggle",i),p=d;break;case"input":Wi(i,d),p=di(i,d),vt("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=fe({},d,{value:void 0}),vt("invalid",i);break;case"textarea":fi(i,d),p=mr(i,d),vt("invalid",i);break;default:p=d}$r(l,p),x=p;for(y in x)if(x.hasOwnProperty(y)){var M=x[y];y==="style"?Ks(i,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&qs(i,M)):y==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&Jt(i,M):typeof M=="number"&&Jt(i,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?M!=null&&y==="onScroll"&&vt("scroll",i):M!=null&&G(i,y,M,E))}switch(l){case"input":ir(i),Lo(i,d,!1);break;case"textarea":ir(i),Cn(i);break;case"option":d.value!=null&&i.setAttribute("value",""+nt(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?Qt(i,!!d.multiple,y,!1):d.defaultValue!=null&&Qt(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Yu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return pn(o),null;case 6:if(i&&o.stateNode!=null)ov(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(l=oo(El.current),oo(Yr.current),ic(o)){if(d=o.stateNode,l=o.memoizedProps,d[Jr]=o,(y=d.nodeValue!==l)&&(i=Kn,i!==null))switch(i.tag){case 3:Ju(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ju(d.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Jr]=o,o.stateNode=d}return pn(o),null;case 13:if(_t(St),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Et&&Gn!==null&&o.mode&1&&!(o.flags&128))uy(),oa(),o.flags|=98560,y=!1;else if(y=ic(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Jr]=o}else oa(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;pn(o),y=!1}else Pr!==null&&(Bf(Pr),Pr=null),y=!0;if(!y)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(i===null||St.current&1?Ft===0&&(Ft=3):Hf())),o.updateQueue!==null&&(o.flags|=4),pn(o),null);case 4:return ca(),xf(i,o),i===null&&pl(o.stateNode.containerInfo),pn(o),null;case 10:return rf(o.type._context),pn(o),null;case 17:return bn(o.type)&&Zu(),pn(o),null;case 19:if(_t(St),y=o.memoizedState,y===null)return pn(o),null;if(d=(o.flags&128)!==0,E=y.rendering,E===null)if(d)Cl(y,!1);else{if(Ft!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(E=cc(i),E!==null){for(o.flags|=128,Cl(y,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)y=l,i=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return pt(St,St.current&1|2),o.child}i=i.sibling}y.tail!==null&&lt()>pa&&(o.flags|=128,d=!0,Cl(y,!1),o.lanes=4194304)}else{if(!d)if(i=cc(E),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Cl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Et)return pn(o),null}else 2*lt()-y.renderingStartTime>pa&&l!==1073741824&&(o.flags|=128,d=!0,Cl(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(l=y.last,l!==null?l.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=lt(),o.sibling=null,l=St.current,pt(St,d?l&1|2:l&1),o):(pn(o),null);case 22:case 23:return $f(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?Qn&1073741824&&(pn(o),o.subtreeFlags&6&&(o.flags|=8192)):pn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function vS(i,o){switch(Yd(o),o.tag){case 1:return bn(o.type)&&Zu(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ca(),_t(Nn),_t(dn),hf(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return uf(o),null;case 13:if(_t(St),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));oa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return _t(St),null;case 4:return ca(),null;case 10:return rf(o.type._context),null;case 22:case 23:return $f(),null;case 24:return null;default:return null}}var _c=!1,mn=!1,_S=typeof WeakSet=="function"?WeakSet:Set,_e=null;function da(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Pt(i,o,d)}else l.current=null}function Nf(i,o,l){try{l()}catch(d){Pt(i,o,d)}}var av=!1;function wS(i,o){if(zd=is,i=Ug(),Od(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,x=-1,M=-1,J=0,oe=0,le=i,se=null;t:for(;;){for(var ge;le!==l||p!==0&&le.nodeType!==3||(x=E+p),le!==y||d!==0&&le.nodeType!==3||(M=E+d),le.nodeType===3&&(E+=le.nodeValue.length),(ge=le.firstChild)!==null;)se=le,le=ge;for(;;){if(le===i)break t;if(se===l&&++J===p&&(x=E),se===y&&++oe===d&&(M=E),(ge=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=ge}l=x===-1||M===-1?null:{start:x,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for($d={focusedElem:i,selectionRange:l},is=!1,_e=o;_e!==null;)if(o=_e,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,_e=i;else for(;_e!==null;){o=_e;try{var Te=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ie=Te.memoizedProps,xt=Te.memoizedState,q=o.stateNode,j=q.getSnapshotBeforeUpdate(o.elementType===o.type?Ie:kr(o.type,Ie),xt);q.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){Pt(o,o.return,ue)}if(i=o.sibling,i!==null){i.return=o.return,_e=i;break}_e=o.return}return Te=av,av=!1,Te}function Al(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Nf(o,l,y)}p=p.next}while(p!==d)}}function wc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function bf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function lv(i){var o=i.alternate;o!==null&&(i.alternate=null,lv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Jr],delete o[gl],delete o[Kd],delete o[nS],delete o[rS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function uv(i){return i.tag===5||i.tag===3||i.tag===4}function cv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||uv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Df(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Yu));else if(d!==4&&(i=i.child,i!==null))for(Df(i,o,l),i=i.sibling;i!==null;)Df(i,o,l),i=i.sibling}function Of(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Of(i,o,l),i=i.sibling;i!==null;)Of(i,o,l),i=i.sibling}var tn=null,xr=!1;function fs(i,o,l){for(l=l.child;l!==null;)hv(i,o,l),l=l.sibling}function hv(i,o,l){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Pn,l)}catch{}switch(l.tag){case 5:mn||da(l,o);case 6:var d=tn,p=xr;tn=null,fs(i,o,l),tn=d,xr=p,tn!==null&&(xr?(i=tn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):tn.removeChild(l.stateNode));break;case 18:tn!==null&&(xr?(i=tn,l=l.stateNode,i.nodeType===8?qd(i.parentNode,l):i.nodeType===1&&qd(i,l),Rr(i)):qd(tn,l.stateNode));break;case 4:d=tn,p=xr,tn=l.stateNode.containerInfo,xr=!0,fs(i,o,l),tn=d,xr=p;break;case 0:case 11:case 14:case 15:if(!mn&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&(y&2||y&4)&&Nf(l,o,E),p=p.next}while(p!==d)}fs(i,o,l);break;case 1:if(!mn&&(da(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(x){Pt(l,o,x)}fs(i,o,l);break;case 21:fs(i,o,l);break;case 22:l.mode&1?(mn=(d=mn)||l.memoizedState!==null,fs(i,o,l),mn=d):fs(i,o,l);break;default:fs(i,o,l)}}function dv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new _S),o.forEach(function(d){var p=kS.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Nr(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=i,E=o,x=E;e:for(;x!==null;){switch(x.tag){case 5:tn=x.stateNode,xr=!1;break e;case 3:tn=x.stateNode.containerInfo,xr=!0;break e;case 4:tn=x.stateNode.containerInfo,xr=!0;break e}x=x.return}if(tn===null)throw Error(t(160));hv(y,E,p),tn=null,xr=!1;var M=p.alternate;M!==null&&(M.return=null),p.return=null}catch(J){Pt(p,o,J)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)fv(o,i),o=o.sibling}function fv(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Nr(o,i),Zr(i),d&4){try{Al(3,i,i.return),wc(3,i)}catch(Ie){Pt(i,i.return,Ie)}try{Al(5,i,i.return)}catch(Ie){Pt(i,i.return,Ie)}}break;case 1:Nr(o,i),Zr(i),d&512&&l!==null&&da(l,l.return);break;case 5:if(Nr(o,i),Zr(i),d&512&&l!==null&&da(l,l.return),i.flags&32){var p=i.stateNode;try{Jt(p,"")}catch(Ie){Pt(i,i.return,Ie)}}if(d&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=l!==null?l.memoizedProps:y,x=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{x==="input"&&y.type==="radio"&&y.name!=null&&qi(p,y),Ji(x,E);var J=Ji(x,y);for(E=0;E<M.length;E+=2){var oe=M[E],le=M[E+1];oe==="style"?Ks(p,le):oe==="dangerouslySetInnerHTML"?qs(p,le):oe==="children"?Jt(p,le):G(p,oe,le,J)}switch(x){case"input":Ws(p,y);break;case"textarea":jr(p,y);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Qt(p,!!y.multiple,ge,!1):se!==!!y.multiple&&(y.defaultValue!=null?Qt(p,!!y.multiple,y.defaultValue,!0):Qt(p,!!y.multiple,y.multiple?[]:"",!1))}p[gl]=y}catch(Ie){Pt(i,i.return,Ie)}}break;case 6:if(Nr(o,i),Zr(i),d&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Ie){Pt(i,i.return,Ie)}}break;case 3:if(Nr(o,i),Zr(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Rr(o.containerInfo)}catch(Ie){Pt(i,i.return,Ie)}break;case 4:Nr(o,i),Zr(i);break;case 13:Nr(o,i),Zr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Vf=lt())),d&4&&dv(i);break;case 22:if(oe=l!==null&&l.memoizedState!==null,i.mode&1?(mn=(J=mn)||oe,Nr(o,i),mn=J):Nr(o,i),Zr(i),d&8192){if(J=i.memoizedState!==null,(i.stateNode.isHidden=J)&&!oe&&i.mode&1)for(_e=i,oe=i.child;oe!==null;){for(le=_e=oe;_e!==null;){switch(se=_e,ge=se.child,se.tag){case 0:case 11:case 14:case 15:Al(4,se,se.return);break;case 1:da(se,se.return);var Te=se.stateNode;if(typeof Te.componentWillUnmount=="function"){d=se,l=se.return;try{o=d,Te.props=o.memoizedProps,Te.state=o.memoizedState,Te.componentWillUnmount()}catch(Ie){Pt(d,l,Ie)}}break;case 5:da(se,se.return);break;case 22:if(se.memoizedState!==null){gv(le);continue}}ge!==null?(ge.return=se,_e=ge):gv(le)}oe=oe.sibling}e:for(oe=null,le=i;;){if(le.tag===5){if(oe===null){oe=le;try{p=le.stateNode,J?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(x=le.stateNode,M=le.memoizedProps.style,E=M!=null&&M.hasOwnProperty("display")?M.display:null,x.style.display=Gi("display",E))}catch(Ie){Pt(i,i.return,Ie)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=J?"":le.memoizedProps}catch(Ie){Pt(i,i.return,Ie)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Nr(o,i),Zr(i),d&4&&dv(i);break;case 21:break;default:Nr(o,i),Zr(i)}}function Zr(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(uv(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Jt(p,""),d.flags&=-33);var y=cv(i);Of(i,y,p);break;case 3:case 4:var E=d.stateNode.containerInfo,x=cv(i);Df(i,x,E);break;default:throw Error(t(161))}}catch(M){Pt(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ES(i,o,l){_e=i,pv(i)}function pv(i,o,l){for(var d=(i.mode&1)!==0;_e!==null;){var p=_e,y=p.child;if(p.tag===22&&d){var E=p.memoizedState!==null||_c;if(!E){var x=p.alternate,M=x!==null&&x.memoizedState!==null||mn;x=_c;var J=mn;if(_c=E,(mn=M)&&!J)for(_e=p;_e!==null;)E=_e,M=E.child,E.tag===22&&E.memoizedState!==null?yv(p):M!==null?(M.return=E,_e=M):yv(p);for(;y!==null;)_e=y,pv(y),y=y.sibling;_e=p,_c=x,mn=J}mv(i)}else p.subtreeFlags&8772&&y!==null?(y.return=p,_e=y):mv(i)}}function mv(i){for(;_e!==null;){var o=_e;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:mn||wc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!mn)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:kr(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&gy(o,y,d);break;case 3:var E=o.updateQueue;if(E!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}gy(o,E,l)}break;case 5:var x=o.stateNode;if(l===null&&o.flags&4){l=x;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var J=o.alternate;if(J!==null){var oe=J.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&Rr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mn||o.flags&512&&bf(o)}catch(se){Pt(o,o.return,se)}}if(o===i){_e=null;break}if(l=o.sibling,l!==null){l.return=o.return,_e=l;break}_e=o.return}}function gv(i){for(;_e!==null;){var o=_e;if(o===i){_e=null;break}var l=o.sibling;if(l!==null){l.return=o.return,_e=l;break}_e=o.return}}function yv(i){for(;_e!==null;){var o=_e;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{wc(4,o)}catch(M){Pt(o,l,M)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(M){Pt(o,p,M)}}var y=o.return;try{bf(o)}catch(M){Pt(o,y,M)}break;case 5:var E=o.return;try{bf(o)}catch(M){Pt(o,E,M)}}}catch(M){Pt(o,o.return,M)}if(o===i){_e=null;break}var x=o.sibling;if(x!==null){x.return=o.return,_e=x;break}_e=o.return}}var TS=Math.ceil,Ec=ne.ReactCurrentDispatcher,Lf=ne.ReactCurrentOwner,hr=ne.ReactCurrentBatchConfig,it=0,Ht=null,Dt=null,nn=0,Qn=0,fa=ls(0),Ft=0,Pl=null,lo=0,Tc=0,Mf=0,kl=null,On=null,Vf=0,pa=1/0,xi=null,Sc=!1,Ff=null,ps=null,Ic=!1,ms=null,Rc=0,xl=0,Uf=null,Cc=-1,Ac=0;function Rn(){return it&6?lt():Cc!==-1?Cc:Cc=lt()}function gs(i){return i.mode&1?it&2&&nn!==0?nn&-nn:sS.transition!==null?(Ac===0&&(Ac=Js()),Ac):(i=Ke,i!==0||(i=window.event,i=i===void 0?16:il(i.type)),i):1}function br(i,o,l,d){if(50<xl)throw xl=0,Uf=null,Error(t(185));es(i,l,d),(!(it&2)||i!==Ht)&&(i===Ht&&(!(it&2)&&(Tc|=l),Ft===4&&ys(i,nn)),Ln(i,d),l===1&&it===0&&!(o.mode&1)&&(pa=lt()+500,tc&&cs()))}function Ln(i,o){var l=i.callbackNode;vi(i,o);var d=Qs(i,i===Ht?nn:0);if(d===0)l!==null&&gi(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&gi(l),o===1)i.tag===0?iS(_v.bind(null,i)):iy(_v.bind(null,i)),eS(function(){!(it&6)&&cs()}),l=null;else{switch(ns(d)){case 1:l=Xe;break;case 4:l=gt;break;case 16:l=Xt;break;case 536870912:l=yt;break;default:l=Xt}l=Av(l,vv.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function vv(i,o){if(Cc=-1,Ac=0,it&6)throw Error(t(327));var l=i.callbackNode;if(ma()&&i.callbackNode!==l)return null;var d=Qs(i,i===Ht?nn:0);if(d===0)return null;if(d&30||d&i.expiredLanes||o)o=Pc(i,d);else{o=d;var p=it;it|=2;var y=Ev();(Ht!==i||nn!==o)&&(xi=null,pa=lt()+500,co(i,o));do try{RS();break}catch(x){wv(i,x)}while(!0);nf(),Ec.current=y,it=p,Dt!==null?o=0:(Ht=null,nn=0,o=Ft)}if(o!==0){if(o===2&&(p=Hn(i),p!==0&&(d=p,o=jf(i,p))),o===1)throw l=Pl,co(i,0),ys(i,d),Ln(i,lt()),l;if(o===6)ys(i,d);else{if(p=i.current.alternate,!(d&30)&&!SS(p)&&(o=Pc(i,d),o===2&&(y=Hn(i),y!==0&&(d=y,o=jf(i,y))),o===1))throw l=Pl,co(i,0),ys(i,d),Ln(i,lt()),l;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:ho(i,On,xi);break;case 3:if(ys(i,d),(d&130023424)===d&&(o=Vf+500-lt(),10<o)){if(Qs(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){Rn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Wd(ho.bind(null,i,On,xi),o);break}ho(i,On,xi);break;case 4:if(ys(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var E=31-Tn(d);y=1<<E,E=o[E],E>p&&(p=E),d&=~y}if(d=p,d=lt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*TS(d/1960))-d,10<d){i.timeoutHandle=Wd(ho.bind(null,i,On,xi),d);break}ho(i,On,xi);break;case 5:ho(i,On,xi);break;default:throw Error(t(329))}}}return Ln(i,lt()),i.callbackNode===l?vv.bind(null,i):null}function jf(i,o){var l=kl;return i.current.memoizedState.isDehydrated&&(co(i,o).flags|=256),i=Pc(i,o),i!==2&&(o=On,On=l,o!==null&&Bf(o)),i}function Bf(i){On===null?On=i:On.push.apply(On,i)}function SS(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Ar(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ys(i,o){for(o&=~Mf,o&=~Tc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Tn(o),d=1<<l;i[l]=-1,o&=~d}}function _v(i){if(it&6)throw Error(t(327));ma();var o=Qs(i,0);if(!(o&1))return Ln(i,lt()),null;var l=Pc(i,o);if(i.tag!==0&&l===2){var d=Hn(i);d!==0&&(o=d,l=jf(i,d))}if(l===1)throw l=Pl,co(i,0),ys(i,o),Ln(i,lt()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,ho(i,On,xi),Ln(i,lt()),null}function zf(i,o){var l=it;it|=1;try{return i(o)}finally{it=l,it===0&&(pa=lt()+500,tc&&cs())}}function uo(i){ms!==null&&ms.tag===0&&!(it&6)&&ma();var o=it;it|=1;var l=hr.transition,d=Ke;try{if(hr.transition=null,Ke=1,i)return i()}finally{Ke=d,hr.transition=l,it=o,!(it&6)&&cs()}}function $f(){Qn=fa.current,_t(fa)}function co(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,ZT(l)),Dt!==null)for(l=Dt.return;l!==null;){var d=l;switch(Yd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Zu();break;case 3:ca(),_t(Nn),_t(dn),hf();break;case 5:uf(d);break;case 4:ca();break;case 13:_t(St);break;case 19:_t(St);break;case 10:rf(d.type._context);break;case 22:case 23:$f()}l=l.return}if(Ht=i,Dt=i=vs(i.current,null),nn=Qn=o,Ft=0,Pl=null,Mf=Tc=lo=0,On=kl=null,so!==null){for(o=0;o<so.length;o++)if(l=so[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,d.next=E}l.pending=d}so=null}return i}function wv(i,o){do{var l=Dt;try{if(nf(),hc.current=mc,dc){for(var d=It.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}dc=!1}if(ao=0,$t=Vt=It=null,Tl=!1,Sl=0,Lf.current=null,l===null||l.return===null){Ft=1,Pl=o,Dt=null;break}e:{var y=i,E=l.return,x=l,M=o;if(o=nn,x.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var J=M,oe=x,le=oe.tag;if(!(oe.mode&1)&&(le===0||le===11||le===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ge=Wy(E);if(ge!==null){ge.flags&=-257,qy(ge,E,x,y,o),ge.mode&1&&Hy(y,J,o),o=ge,M=J;var Te=o.updateQueue;if(Te===null){var Ie=new Set;Ie.add(M),o.updateQueue=Ie}else Te.add(M);break e}else{if(!(o&1)){Hy(y,J,o),Hf();break e}M=Error(t(426))}}else if(Et&&x.mode&1){var xt=Wy(E);if(xt!==null){!(xt.flags&65536)&&(xt.flags|=256),qy(xt,E,x,y,o),ef(ha(M,x));break e}}y=M=ha(M,x),Ft!==4&&(Ft=2),kl===null?kl=[y]:kl.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var q=zy(y,M,o);my(y,q);break e;case 1:x=M;var j=y.type,K=y.stateNode;if(!(y.flags&128)&&(typeof j.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(ps===null||!ps.has(K)))){y.flags|=65536,o&=-o,y.lanes|=o;var ue=$y(y,x,o);my(y,ue);break e}}y=y.return}while(y!==null)}Sv(l)}catch(Re){o=Re,Dt===l&&l!==null&&(Dt=l=l.return);continue}break}while(!0)}function Ev(){var i=Ec.current;return Ec.current=mc,i===null?mc:i}function Hf(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Ht===null||!(lo&268435455)&&!(Tc&268435455)||ys(Ht,nn)}function Pc(i,o){var l=it;it|=2;var d=Ev();(Ht!==i||nn!==o)&&(xi=null,co(i,o));do try{IS();break}catch(p){wv(i,p)}while(!0);if(nf(),it=l,Ec.current=d,Dt!==null)throw Error(t(261));return Ht=null,nn=0,Ft}function IS(){for(;Dt!==null;)Tv(Dt)}function RS(){for(;Dt!==null&&!Hr();)Tv(Dt)}function Tv(i){var o=Cv(i.alternate,i,Qn);i.memoizedProps=i.pendingProps,o===null?Sv(i):Dt=o,Lf.current=null}function Sv(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=vS(l,o),l!==null){l.flags&=32767,Dt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ft=6,Dt=null;return}}else if(l=yS(l,o,Qn),l!==null){Dt=l;return}if(o=o.sibling,o!==null){Dt=o;return}Dt=o=i}while(o!==null);Ft===0&&(Ft=5)}function ho(i,o,l){var d=Ke,p=hr.transition;try{hr.transition=null,Ke=1,CS(i,o,l,d)}finally{hr.transition=p,Ke=d}return null}function CS(i,o,l,d){do ma();while(ms!==null);if(it&6)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(ft(i,y),i===Ht&&(Dt=Ht=null,nn=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Ic||(Ic=!0,Av(Xt,function(){return ma(),null})),y=(l.flags&15990)!==0,l.subtreeFlags&15990||y){y=hr.transition,hr.transition=null;var E=Ke;Ke=1;var x=it;it|=4,Lf.current=null,wS(i,l),fv(l,i),qT($d),is=!!zd,$d=zd=null,i.current=l,ES(l),wr(),it=x,Ke=E,hr.transition=y}else i.current=l;if(Ic&&(Ic=!1,ms=i,Rc=p),y=i.pendingLanes,y===0&&(ps=null),Mo(l.stateNode),Ln(i,lt()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(Sc)throw Sc=!1,i=Ff,Ff=null,i;return Rc&1&&i.tag!==0&&ma(),y=i.pendingLanes,y&1?i===Uf?xl++:(xl=0,Uf=i):xl=0,cs(),null}function ma(){if(ms!==null){var i=ns(Rc),o=hr.transition,l=Ke;try{if(hr.transition=null,Ke=16>i?16:i,ms===null)var d=!1;else{if(i=ms,ms=null,Rc=0,it&6)throw Error(t(331));var p=it;for(it|=4,_e=i.current;_e!==null;){var y=_e,E=y.child;if(_e.flags&16){var x=y.deletions;if(x!==null){for(var M=0;M<x.length;M++){var J=x[M];for(_e=J;_e!==null;){var oe=_e;switch(oe.tag){case 0:case 11:case 15:Al(8,oe,y)}var le=oe.child;if(le!==null)le.return=oe,_e=le;else for(;_e!==null;){oe=_e;var se=oe.sibling,ge=oe.return;if(lv(oe),oe===J){_e=null;break}if(se!==null){se.return=ge,_e=se;break}_e=ge}}}var Te=y.alternate;if(Te!==null){var Ie=Te.child;if(Ie!==null){Te.child=null;do{var xt=Ie.sibling;Ie.sibling=null,Ie=xt}while(Ie!==null)}}_e=y}}if(y.subtreeFlags&2064&&E!==null)E.return=y,_e=E;else e:for(;_e!==null;){if(y=_e,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Al(9,y,y.return)}var q=y.sibling;if(q!==null){q.return=y.return,_e=q;break e}_e=y.return}}var j=i.current;for(_e=j;_e!==null;){E=_e;var K=E.child;if(E.subtreeFlags&2064&&K!==null)K.return=E,_e=K;else e:for(E=j;_e!==null;){if(x=_e,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:wc(9,x)}}catch(Re){Pt(x,x.return,Re)}if(x===E){_e=null;break e}var ue=x.sibling;if(ue!==null){ue.return=x.return,_e=ue;break e}_e=x.return}}if(it=p,cs(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Pn,i)}catch{}d=!0}return d}finally{Ke=l,hr.transition=o}}return!1}function Iv(i,o,l){o=ha(l,o),o=zy(i,o,1),i=ds(i,o,1),o=Rn(),i!==null&&(es(i,1,o),Ln(i,o))}function Pt(i,o,l){if(i.tag===3)Iv(i,i,l);else for(;o!==null;){if(o.tag===3){Iv(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ps===null||!ps.has(d))){i=ha(l,i),i=$y(o,i,1),o=ds(o,i,1),i=Rn(),o!==null&&(es(o,1,i),Ln(o,i));break}}o=o.return}}function AS(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=Rn(),i.pingedLanes|=i.suspendedLanes&l,Ht===i&&(nn&l)===l&&(Ft===4||Ft===3&&(nn&130023424)===nn&&500>lt()-Vf?co(i,0):Mf|=l),Ln(i,o)}function Rv(i,o){o===0&&(i.mode&1?(o=Fo,Fo<<=1,!(Fo&130023424)&&(Fo=4194304)):o=1);var l=Rn();i=Ai(i,o),i!==null&&(es(i,o,l),Ln(i,l))}function PS(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Rv(i,l)}function kS(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),Rv(i,l)}var Cv;Cv=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Nn.current)Dn=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return Dn=!1,gS(i,o,l);Dn=!!(i.flags&131072)}else Dn=!1,Et&&o.flags&1048576&&sy(o,rc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;vc(i,o),i=o.pendingProps;var p=ra(o,dn.current);ua(o,l),p=pf(null,o,d,i,p,l);var y=mf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,bn(d)?(y=!0,ec(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,af(o),p.updater=gc,o.stateNode=p,p._reactInternals=o,Ef(o,d,i,l),o=Rf(null,o,d,!0,y,l)):(o.tag=0,Et&&y&&Jd(o),In(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(vc(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=NS(d),i=kr(d,i),p){case 0:o=If(null,o,d,i,l);break e;case 1:o=Xy(null,o,d,i,l);break e;case 11:o=Ky(null,o,d,i,l);break e;case 14:o=Gy(null,o,d,kr(d.type,i),l);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:kr(d,p),If(i,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:kr(d,p),Xy(i,o,d,p,l);case 3:e:{if(Zy(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,p=y.element,py(i,o),uc(o,d,null,l);var E=o.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=ha(Error(t(423)),o),o=ev(i,o,d,l,p);break e}else if(d!==p){p=ha(Error(t(424)),o),o=ev(i,o,d,l,p);break e}else for(Gn=as(o.stateNode.containerInfo.firstChild),Kn=o,Et=!0,Pr=null,l=dy(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(oa(),d===p){o=ki(i,o,l);break e}In(i,o,d,l)}o=o.child}return o;case 5:return yy(o),i===null&&Zd(o),d=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,Hd(d,p)?E=null:y!==null&&Hd(d,y)&&(o.flags|=32),Yy(i,o),In(i,o,E,l),o.child;case 6:return i===null&&Zd(o),null;case 13:return tv(i,o,l);case 4:return lf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=aa(o,null,d,l):In(i,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:kr(d,p),Ky(i,o,d,p,l);case 7:return In(i,o,o.pendingProps,l),o.child;case 8:return In(i,o,o.pendingProps.children,l),o.child;case 12:return In(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,pt(oc,d._currentValue),d._currentValue=E,y!==null)if(Ar(y.value,E)){if(y.children===p.children&&!Nn.current){o=ki(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var x=y.dependencies;if(x!==null){E=y.child;for(var M=x.firstContext;M!==null;){if(M.context===d){if(y.tag===1){M=Pi(-1,l&-l),M.tag=2;var J=y.updateQueue;if(J!==null){J=J.shared;var oe=J.pending;oe===null?M.next=M:(M.next=oe.next,oe.next=M),J.pending=M}}y.lanes|=l,M=y.alternate,M!==null&&(M.lanes|=l),sf(y.return,l,o),x.lanes|=l;break}M=M.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,x=E.alternate,x!==null&&(x.lanes|=l),sf(E,l,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}In(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,ua(o,l),p=ur(p),d=d(p),o.flags|=1,In(i,o,d,l),o.child;case 14:return d=o.type,p=kr(d,o.pendingProps),p=kr(d.type,p),Gy(i,o,d,p,l);case 15:return Qy(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:kr(d,p),vc(i,o),o.tag=1,bn(d)?(i=!0,ec(o)):i=!1,ua(o,l),jy(o,d,p),Ef(o,d,p,l),Rf(null,o,d,!0,i,l);case 19:return rv(i,o,l);case 22:return Jy(i,o,l)}throw Error(t(156,o.tag))};function Av(i,o){return Yt(i,o)}function xS(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(i,o,l,d){return new xS(i,o,l,d)}function Wf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function NS(i){if(typeof i=="function")return Wf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===Je)return 14}return 2}function vs(i,o){var l=i.alternate;return l===null?(l=dr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function kc(i,o,l,d,p,y){var E=2;if(d=i,typeof i=="function")Wf(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case b:return fo(l.children,p,y,o);case S:E=8,p|=8;break;case P:return i=dr(12,l,o,p|2),i.elementType=P,i.lanes=y,i;case k:return i=dr(13,l,o,p),i.elementType=k,i.lanes=y,i;case ct:return i=dr(19,l,o,p),i.elementType=ct,i.lanes=y,i;case Ye:return xc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:E=10;break e;case U:E=9;break e;case B:E=11;break e;case Je:E=14;break e;case kt:E=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=dr(E,l,o,p),o.elementType=i,o.type=d,o.lanes=y,o}function fo(i,o,l,d){return i=dr(7,i,d,o),i.lanes=l,i}function xc(i,o,l,d){return i=dr(22,i,d,o),i.elementType=Ye,i.lanes=l,i.stateNode={isHidden:!1},i}function qf(i,o,l){return i=dr(6,i,null,o),i.lanes=l,i}function Kf(i,o,l){return o=dr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function bS(i,o,l,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zi(0),this.expirationTimes=Zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Gf(i,o,l,d,p,y,E,x,M){return i=new bS(i,o,l,x,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=dr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},af(y),i}function DS(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function Pv(i){if(!i)return us;i=i._reactInternals;e:{if(qe(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(bn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(bn(l))return ny(i,l,o)}return o}function kv(i,o,l,d,p,y,E,x,M){return i=Gf(l,d,!0,i,p,y,E,x,M),i.context=Pv(null),l=i.current,d=Rn(),p=gs(l),y=Pi(d,p),y.callback=o??null,ds(l,y,p),i.current.lanes=p,es(i,p,d),Ln(i,d),i}function Nc(i,o,l,d){var p=o.current,y=Rn(),E=gs(p);return l=Pv(l),o.context===null?o.context=l:o.pendingContext=l,o=Pi(y,E),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=ds(p,o,E),i!==null&&(br(i,p,E,y),lc(i,p,E)),E}function bc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function xv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Qf(i,o){xv(i,o),(i=i.alternate)&&xv(i,o)}function OS(){return null}var Nv=typeof reportError=="function"?reportError:function(i){console.error(i)};function Jf(i){this._internalRoot=i}Dc.prototype.render=Jf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Nc(i,o,null,null)},Dc.prototype.unmount=Jf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;uo(function(){Nc(null,i,null,null)}),o[Si]=null}};function Dc(i){this._internalRoot=i}Dc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Du();i={blockedOn:null,target:i,priority:o};for(var l=0;l<qr.length&&o!==0&&o<qr[l].priority;l++);qr.splice(l,0,i),l===0&&Mu(i)}};function Yf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Oc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function bv(){}function LS(i,o,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var J=bc(E);y.call(J)}}var E=kv(o,d,i,0,null,!1,!1,"",bv);return i._reactRootContainer=E,i[Si]=E.current,pl(i.nodeType===8?i.parentNode:i),uo(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var x=d;d=function(){var J=bc(M);x.call(J)}}var M=Gf(i,0,!1,null,null,!1,!1,"",bv);return i._reactRootContainer=M,i[Si]=M.current,pl(i.nodeType===8?i.parentNode:i),uo(function(){Nc(o,M,l,d)}),M}function Lc(i,o,l,d,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var x=p;p=function(){var M=bc(E);x.call(M)}}Nc(o,E,i,p)}else E=LS(l,o,i,p,d);return bc(E)}Nu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=Xi(o.pendingLanes);l!==0&&(ts(o,l|1),Ln(o,lt()),!(it&6)&&(pa=lt()+500,cs()))}break;case 13:uo(function(){var d=Ai(i,1);if(d!==null){var p=Rn();br(d,i,1,p)}}),Qf(i,1)}},Uo=function(i){if(i.tag===13){var o=Ai(i,134217728);if(o!==null){var l=Rn();br(o,i,134217728,l)}Qf(i,134217728)}},bu=function(i){if(i.tag===13){var o=gs(i),l=Ai(i,o);if(l!==null){var d=Rn();br(l,i,o,d)}Qf(i,o)}},Du=function(){return Ke},Ou=function(i,o){var l=Ke;try{return Ke=i,o()}finally{Ke=l}},pi=function(i,o,l){switch(o){case"input":if(Ws(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var p=Xu(d);if(!p)throw Error(t(90));Hi(d),Ws(d,p)}}}break;case"textarea":jr(i,l);break;case"select":o=l.value,o!=null&&Qt(i,!!l.multiple,o,!1)}},mi=zf,V=uo;var MS={usingClientEntryPoint:!1,Events:[yl,ta,Xu,En,Gs,zf]},Nl={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VS={bundleType:Nl.bundleType,version:Nl.version,rendererPackageName:Nl.rendererPackageName,rendererConfig:Nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=_r(i),i===null?null:i.stateNode},findFiberByHostInstance:Nl.findFiberByHostInstance||OS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Pn=Mc.inject(VS),hn=Mc}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MS,Mn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yf(o))throw Error(t(200));return DS(i,o,null,l)},Mn.createRoot=function(i,o){if(!Yf(i))throw Error(t(299));var l=!1,d="",p=Nv;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Gf(i,1,!1,null,null,l,!1,d,p),i[Si]=o.current,pl(i.nodeType===8?i.parentNode:i),new Jf(o)},Mn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=_r(o),i=i===null?null:i.stateNode,i},Mn.flushSync=function(i){return uo(i)},Mn.hydrate=function(i,o,l){if(!Oc(o))throw Error(t(200));return Lc(null,i,o,!0,l)},Mn.hydrateRoot=function(i,o,l){if(!Yf(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",E=Nv;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),o=kv(o,null,i,1,l??null,p,!1,y,E),i[Si]=o.current,pl(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Dc(o)},Mn.render=function(i,o,l){if(!Oc(o))throw Error(t(200));return Lc(null,i,o,!1,l)},Mn.unmountComponentAtNode=function(i){if(!Oc(i))throw Error(t(40));return i._reactRootContainer?(uo(function(){Lc(null,null,i,!1,function(){i._reactRootContainer=null,i[Si]=null})}),!0):!1},Mn.unstable_batchedUpdates=zf,Mn.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!Oc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Lc(i,o,l,!1,d)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var jv;function ew(){if(jv)return tp.exports;jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tp.exports=GS(),tp.exports}var Bv;function QS(){if(Bv)return Vc;Bv=1;var n=ew();return Vc.createRoot=n.createRoot,Vc.hydrateRoot=n.hydrateRoot,Vc}var JS=QS(),W=$h();const Ts=zS(W),zv=BS({__proto__:null,default:Ts},[W]);var ip={exports:{}},sp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function YS(){if($v)return sp;$v=1;var n=$h();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,h=n.useDebugValue;return sp.useSyncExternalStoreWithSelector=function(f,m,v,w,T){var C=s(null);if(C.current===null){var R={hasValue:!1,value:null};C.current=R}else R=C.current;C=u(function(){function A(L){if(!F){if(F=!0,Q=L,L=w(L),T!==void 0&&R.hasValue){var re=R.value;if(T(re,L))return G=re}return G=L}if(re=G,t(Q,L))return re;var b=w(L);return T!==void 0&&T(re,b)?re:(Q=L,G=b)}var F=!1,Q,G,ne=v===void 0?null:v;return[function(){return A(m())},ne===null?void 0:function(){return A(ne())}]},[m,v,w,T]);var D=r(f,C[0],C[1]);return a(function(){R.hasValue=!0,R.value=D},[D]),h(D),D},sp}var Hv;function XS(){return Hv||(Hv=1,ip.exports=YS()),ip.exports}var ZS=XS(),Yn="default"in zv?Ts:zv,Wv=Symbol.for("react-redux-context"),qv=typeof globalThis<"u"?globalThis:{};function eI(){if(!Yn.createContext)return{};const n=qv[Wv]??(qv[Wv]=new Map);let e=n.get(Yn.createContext);return e||(e=Yn.createContext(null),n.set(Yn.createContext,e)),e}var Ds=eI(),tI=()=>{throw new Error("uSES not initialized!")};function vm(n=Ds){return function(){return Yn.useContext(n)}}var tw=vm(),nw=tI,nI=n=>{nw=n},rI=(n,e)=>n===e;function iI(n=Ds){const e=n===Ds?tw:vm(n),t=(r,s={})=>{const{equalityFn:a=rI,devModeChecks:u={}}=typeof s=="function"?{equalityFn:s}:s,{store:h,subscription:f,getServerState:m,stabilityCheck:v,identityFunctionCheck:w}=e();Yn.useRef(!0);const T=Yn.useCallback({[r.name](R){return r(R)}}[r.name],[r,v,u.stabilityCheck]),C=nw(f.addNestedSub,h.getState,m||h.getState,T,a);return Yn.useDebugValue(C),C};return Object.assign(t,{withTypes:()=>t}),t}var an=iI();function sI(n){n()}function oI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){sI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!r||n===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var Kv={notify(){},get:()=>[]};function aI(n,e){let t,r=Kv,s=0,a=!1;function u(D){v();const A=r.subscribe(D);let F=!1;return()=>{F||(F=!0,A(),w())}}function h(){r.notify()}function f(){R.onStateChange&&R.onStateChange()}function m(){return a}function v(){s++,t||(t=n.subscribe(f),r=oI())}function w(){s--,t&&s===0&&(t(),t=void 0,r.clear(),r=Kv)}function T(){a||(a=!0,v())}function C(){a&&(a=!1,w())}const R={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:m,trySubscribe:T,tryUnsubscribe:C,getListeners:()=>r};return R}var lI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uI=typeof navigator<"u"&&navigator.product==="ReactNative",cI=lI||uI?Yn.useLayoutEffect:Yn.useEffect;function hI({store:n,context:e,children:t,serverState:r,stabilityCheck:s="once",identityFunctionCheck:a="once"}){const u=Yn.useMemo(()=>{const m=aI(n);return{store:n,subscription:m,getServerState:r?()=>r:void 0,stabilityCheck:s,identityFunctionCheck:a}},[n,r,s,a]),h=Yn.useMemo(()=>n.getState(),[n]);cI(()=>{const{subscription:m}=u;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),h!==n.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[u,h]);const f=e||Ds;return Yn.createElement(f.Provider,{value:u},t)}var dI=hI;function rw(n=Ds){const e=n===Ds?tw:vm(n),t=()=>{const{store:r}=e();return r};return Object.assign(t,{withTypes:()=>t}),t}var fI=rw();function pI(n=Ds){const e=n===Ds?fI:rw(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Bi=pI();nI(ZS.useSyncExternalStoreWithSelector);function rn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var mI=typeof Symbol=="function"&&Symbol.observable||"@@observable",Gv=mI,op=()=>Math.random().toString(36).substring(7).split("").join("."),gI={INIT:`@@redux/INIT${op()}`,REPLACE:`@@redux/REPLACE${op()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${op()}`},mh=gI;function _m(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function iw(n,e,t){if(typeof n!="function")throw new Error(rn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(rn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(rn(1));return t(iw)(n,e)}let r=n,s=e,a=new Map,u=a,h=0,f=!1;function m(){u===a&&(u=new Map,a.forEach((A,F)=>{u.set(F,A)}))}function v(){if(f)throw new Error(rn(3));return s}function w(A){if(typeof A!="function")throw new Error(rn(4));if(f)throw new Error(rn(5));let F=!0;m();const Q=h++;return u.set(Q,A),function(){if(F){if(f)throw new Error(rn(6));F=!1,m(),u.delete(Q),a=null}}}function T(A){if(!_m(A))throw new Error(rn(7));if(typeof A.type>"u")throw new Error(rn(8));if(typeof A.type!="string")throw new Error(rn(17));if(f)throw new Error(rn(9));try{f=!0,s=r(s,A)}finally{f=!1}return(a=u).forEach(Q=>{Q()}),A}function C(A){if(typeof A!="function")throw new Error(rn(10));r=A,T({type:mh.REPLACE})}function R(){const A=w;return{subscribe(F){if(typeof F!="object"||F===null)throw new Error(rn(11));function Q(){const ne=F;ne.next&&ne.next(v())}return Q(),{unsubscribe:A(Q)}},[Gv](){return this}}}return T({type:mh.INIT}),{dispatch:T,subscribe:w,getState:v,replaceReducer:C,[Gv]:R}}function yI(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:mh.INIT})>"u")throw new Error(rn(12));if(typeof t(void 0,{type:mh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(rn(13))})}function vI(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const u=e[a];typeof n[u]=="function"&&(t[u]=n[u])}const r=Object.keys(t);let s;try{yI(t)}catch(a){s=a}return function(u={},h){if(s)throw s;let f=!1;const m={};for(let v=0;v<r.length;v++){const w=r[v],T=t[w],C=u[w],R=T(C,h);if(typeof R>"u")throw h&&h.type,new Error(rn(14));m[w]=R,f=f||R!==C}return f=f||r.length!==Object.keys(u).length,f?m:u}}function gh(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function _I(...n){return e=>(t,r)=>{const s=e(t,r);let a=()=>{throw new Error(rn(15))};const u={getState:s.getState,dispatch:(f,...m)=>a(f,...m)},h=n.map(f=>f(u));return a=gh(...h)(s.dispatch),{...s,dispatch:a}}}function wI(n){return _m(n)&&"type"in n&&typeof n.type=="string"}var sw=Symbol.for("immer-nothing"),Qv=Symbol.for("immer-draftable"),er=Symbol.for("immer-state");function Or(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var ka=Object.getPrototypeOf;function So(n){return!!n&&!!n[er]}function Mi(n){var e;return n?ow(n)||Array.isArray(n)||!!n[Qv]||!!((e=n.constructor)!=null&&e[Qv])||Wh(n)||qh(n):!1}var EI=Object.prototype.constructor.toString();function ow(n){if(!n||typeof n!="object")return!1;const e=ka(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===EI}function yh(n,e){Hh(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function Hh(n){const e=n[er];return e?e.type_:Array.isArray(n)?1:Wh(n)?2:qh(n)?3:0}function bp(n,e){return Hh(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function aw(n,e,t){const r=Hh(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function TI(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Wh(n){return n instanceof Map}function qh(n){return n instanceof Set}function po(n){return n.copy_||n.base_}function Dp(n,e){if(Wh(n))return new Map(n);if(qh(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=ow(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[er];let s=Reflect.ownKeys(r);for(let a=0;a<s.length;a++){const u=s[a],h=r[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(r[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[u]})}return Object.create(ka(n),r)}else{const r=ka(n);if(r!==null&&t)return{...n};const s=Object.create(r);return Object.assign(s,n)}}function wm(n,e=!1){return Kh(n)||So(n)||!Mi(n)||(Hh(n)>1&&(n.set=n.add=n.clear=n.delete=SI),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>wm(r,!0))),n}function SI(){Or(2)}function Kh(n){return Object.isFrozen(n)}var II={};function Io(n){const e=II[n];return e||Or(0,n),e}var tu;function lw(){return tu}function RI(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Jv(n,e){e&&(Io("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Op(n){Lp(n),n.drafts_.forEach(CI),n.drafts_=null}function Lp(n){n===tu&&(tu=n.parent_)}function Yv(n){return tu=RI(tu,n)}function CI(n){const e=n[er];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Xv(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[er].modified_&&(Op(e),Or(4)),Mi(n)&&(n=vh(e,n),e.parent_||_h(e,n)),e.patches_&&Io("Patches").generateReplacementPatches_(t[er].base_,n,e.patches_,e.inversePatches_)):n=vh(e,t,[]),Op(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==sw?n:void 0}function vh(n,e,t){if(Kh(e))return e;const r=e[er];if(!r)return yh(e,(s,a)=>Zv(n,r,e,s,a,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return _h(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let a=s,u=!1;r.type_===3&&(a=new Set(s),s.clear(),u=!0),yh(a,(h,f)=>Zv(n,r,s,h,f,t,u)),_h(n,s,!1),t&&n.patches_&&Io("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function Zv(n,e,t,r,s,a,u){if(So(s)){const h=a&&e&&e.type_!==3&&!bp(e.assigned_,r)?a.concat(r):void 0,f=vh(n,s,h);if(aw(t,r,f),So(f))n.canAutoFreeze_=!1;else return}else u&&t.add(s);if(Mi(s)&&!Kh(s)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;vh(n,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&_h(n,s)}}function _h(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&wm(e,t)}function AI(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:lw(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,a=Em;t&&(s=[r],a=nu);const{revoke:u,proxy:h}=Proxy.revocable(s,a);return r.draft_=h,r.revoke_=u,h}var Em={get(n,e){if(e===er)return n;const t=po(n);if(!bp(t,e))return PI(n,t,e);const r=t[e];return n.finalized_||!Mi(r)?r:r===ap(n.base_,e)?(lp(n),n.copy_[e]=Vp(r,n)):r},has(n,e){return e in po(n)},ownKeys(n){return Reflect.ownKeys(po(n))},set(n,e,t){const r=uw(po(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const s=ap(po(n),e),a=s==null?void 0:s[er];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(TI(t,s)&&(t!==void 0||bp(n.base_,e)))return!0;lp(n),Mp(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return ap(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,lp(n),Mp(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=po(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Or(11)},getPrototypeOf(n){return ka(n.base_)},setPrototypeOf(){Or(12)}},nu={};yh(Em,(n,e)=>{nu[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});nu.deleteProperty=function(n,e){return nu.set.call(this,n,e,void 0)};nu.set=function(n,e,t){return Em.set.call(this,n[0],e,t,n[0])};function ap(n,e){const t=n[er];return(t?po(t):n)[e]}function PI(n,e,t){var s;const r=uw(e,t);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(n.draft_):void 0}function uw(n,e){if(!(e in n))return;let t=ka(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=ka(t)}}function Mp(n){n.modified_||(n.modified_=!0,n.parent_&&Mp(n.parent_))}function lp(n){n.copy_||(n.copy_=Dp(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var kI=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const u=this;return function(f=a,...m){return u.produce(f,v=>t.call(this,v,...m))}}typeof t!="function"&&Or(6),r!==void 0&&typeof r!="function"&&Or(7);let s;if(Mi(e)){const a=Yv(this),u=Vp(e,void 0);let h=!0;try{s=t(u),h=!1}finally{h?Op(a):Lp(a)}return Jv(a,r),Xv(s,a)}else if(!e||typeof e!="object"){if(s=t(e),s===void 0&&(s=e),s===sw&&(s=void 0),this.autoFreeze_&&wm(s,!0),r){const a=[],u=[];Io("Patches").generateReplacementPatches_(e,s,a,u),r(a,u)}return s}else Or(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...h)=>this.produceWithPatches(u,f=>e(f,...h));let r,s;return[this.produce(e,t,(u,h)=>{r=u,s=h}),r,s]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Mi(n)||Or(8),So(n)&&(n=xI(n));const e=Yv(this),t=Vp(n,void 0);return t[er].isManual_=!0,Lp(e),t}finishDraft(n,e){const t=n&&n[er];(!t||!t.isManual_)&&Or(9);const{scope_:r}=t;return Jv(r,e),Xv(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const r=Io("Patches").applyPatches_;return So(n)?r(n,e):this.produce(n,s=>r(s,e))}};function Vp(n,e){const t=Wh(n)?Io("MapSet").proxyMap_(n,e):qh(n)?Io("MapSet").proxySet_(n,e):AI(n,e);return(e?e.scope_:lw()).drafts_.push(t),t}function xI(n){return So(n)||Or(10,n),cw(n)}function cw(n){if(!Mi(n)||Kh(n))return n;const e=n[er];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Dp(n,e.scope_.immer_.useStrictShallowCopy_)}else t=Dp(n,!0);return yh(t,(r,s)=>{aw(t,r,cw(s))}),e&&(e.finalized_=!1),t}var tr=new kI,hw=tr.produce;tr.produceWithPatches.bind(tr);tr.setAutoFreeze.bind(tr);tr.setUseStrictShallowCopy.bind(tr);tr.applyPatches.bind(tr);tr.createDraft.bind(tr);tr.finishDraft.bind(tr);function dw(n){return({dispatch:t,getState:r})=>s=>a=>typeof a=="function"?a(t,r,n):s(a)}var NI=dw(),bI=dw,DI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gh:gh.apply(null,arguments)},OI=n=>n&&typeof n.match=="function";function Kl(n,e){function t(...r){if(e){let s=e(...r);if(!s)throw new Error(ni(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>wI(r)&&r.type===n,t}var fw=class Ul extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ul.prototype)}static get[Symbol.species](){return Ul}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ul(...e[0].concat(this)):new Ul(...e.concat(this))}};function e0(n){return Mi(n)?hw(n,()=>{}):n}function t0(n,e,t){if(n.has(e)){let s=n.get(e);return t.update&&(s=t.update(s,e,n),n.set(e,s)),s}if(!t.insert)throw new Error(ni(10));const r=t.insert(e,n);return n.set(e,r),r}function LI(n){return typeof n=="boolean"}var MI=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=e??{};let u=new fw;return t&&(LI(t)?u.push(NI):u.push(bI(t.extraArgument))),u},VI="RTK_autoBatch",pw=n=>e=>{setTimeout(e,n)},FI=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pw(10),UI=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let s=!0,a=!1,u=!1;const h=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?FI:n.type==="callback"?n.queueNotification:pw(n.timeout),m=()=>{u=!1,a&&(a=!1,h.forEach(v=>v()))};return Object.assign({},r,{subscribe(v){const w=()=>s&&v(),T=r.subscribe(w);return h.add(v),()=>{T(),h.delete(v)}},dispatch(v){var w;try{return s=!((w=v==null?void 0:v.meta)!=null&&w[VI]),a=!s,a&&(u||(u=!0,f(m))),r.dispatch(v)}finally{s=!0}}})},jI=n=>function(t){const{autoBatch:r=!0}=t??{};let s=new fw(n);return r&&s.push(UI(typeof r=="object"?r:void 0)),s};function BI(n){const e=MI(),{reducer:t=void 0,middleware:r,devTools:s=!0,preloadedState:a=void 0,enhancers:u=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(_m(t))h=vI(t);else throw new Error(ni(1));let f;typeof r=="function"?f=r(e):f=e();let m=gh;s&&(m=DI({trace:!1,...typeof s=="object"&&s}));const v=_I(...f),w=jI(v);let T=typeof u=="function"?u(w):w();const C=m(...T);return iw(h,a,C)}function mw(n){const e={},t=[];let r;const s={addCase(a,u){const h=typeof a=="string"?a:a.type;if(!h)throw new Error(ni(28));if(h in e)throw new Error(ni(29));return e[h]=u,s},addMatcher(a,u){return t.push({matcher:a,reducer:u}),s},addDefaultCase(a){return r=a,s}};return n(s),[e,t,r]}function zI(n){return typeof n=="function"}function $I(n,e){let[t,r,s]=mw(e),a;if(zI(n))a=()=>e0(n());else{const h=e0(n);a=()=>h}function u(h=a(),f){let m=[t[f.type],...r.filter(({matcher:v})=>v(f)).map(({reducer:v})=>v)];return m.filter(v=>!!v).length===0&&(m=[s]),m.reduce((v,w)=>{if(w)if(So(v)){const C=w(v,f);return C===void 0?v:C}else{if(Mi(v))return hw(v,T=>w(T,f));{const T=w(v,f);if(T===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return v},h)}return u.getInitialState=a,u}var HI=(n,e)=>OI(n)?n.match(e):n(e);function WI(...n){return e=>n.some(t=>HI(t,e))}var qI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",KI=(n=21)=>{let e="",t=n;for(;t--;)e+=qI[Math.random()*64|0];return e},GI=["name","message","stack","code"],up=class{constructor(n,e){Xf(this,"_type");this.payload=n,this.meta=e}},n0=class{constructor(n,e){Xf(this,"_type");this.payload=n,this.meta=e}},QI=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of GI)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},rr=(()=>{function n(e,t,r){const s=Kl(e+"/fulfilled",(f,m,v,w)=>({payload:f,meta:{...w||{},arg:v,requestId:m,requestStatus:"fulfilled"}})),a=Kl(e+"/pending",(f,m,v)=>({payload:void 0,meta:{...v||{},arg:m,requestId:f,requestStatus:"pending"}})),u=Kl(e+"/rejected",(f,m,v,w,T)=>({payload:w,error:(r&&r.serializeError||QI)(f||"Rejected"),meta:{...T||{},arg:v,requestId:m,rejectedWithValue:!!w,requestStatus:"rejected",aborted:(f==null?void 0:f.name)==="AbortError",condition:(f==null?void 0:f.name)==="ConditionError"}}));function h(f){return(m,v,w)=>{const T=r!=null&&r.idGenerator?r.idGenerator(f):KI(),C=new AbortController;let R,D;function A(Q){D=Q,C.abort()}const F=async function(){var ne,L;let Q;try{let re=(ne=r==null?void 0:r.condition)==null?void 0:ne.call(r,f,{getState:v,extra:w});if(YI(re)&&(re=await re),re===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const b=new Promise((S,P)=>{R=()=>{P({name:"AbortError",message:D||"Aborted"})},C.signal.addEventListener("abort",R)});m(a(T,f,(L=r==null?void 0:r.getPendingMeta)==null?void 0:L.call(r,{requestId:T,arg:f},{getState:v,extra:w}))),Q=await Promise.race([b,Promise.resolve(t(f,{dispatch:m,getState:v,extra:w,requestId:T,signal:C.signal,abort:A,rejectWithValue:(S,P)=>new up(S,P),fulfillWithValue:(S,P)=>new n0(S,P)})).then(S=>{if(S instanceof up)throw S;return S instanceof n0?s(S.payload,T,f,S.meta):s(S,T,f)})])}catch(re){Q=re instanceof up?u(null,T,f,re.payload,re.meta):u(re,T,f)}finally{R&&C.signal.removeEventListener("abort",R)}return r&&!r.dispatchConditionRejection&&u.match(Q)&&Q.meta.condition||m(Q),Q}();return Object.assign(F,{abort:A,requestId:T,arg:f,unwrap(){return F.then(JI)}})}}return Object.assign(h,{pending:a,rejected:u,fulfilled:s,settled:WI(u,s),typePrefix:e})}return n.withTypes=()=>n,n})();function JI(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function YI(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var XI=Symbol.for("rtk-slice-createasyncthunk");function ZI(n,e){return`${n}/${e}`}function eR({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[XI];return function(s){const{name:a,reducerPath:u=a}=s;if(!a)throw new Error(ni(11));typeof process<"u";const h=(typeof s.reducers=="function"?s.reducers(nR()):s.reducers)||{},f=Object.keys(h),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(G,ne){const L=typeof G=="string"?G:G.type;if(!L)throw new Error(ni(12));if(L in m.sliceCaseReducersByType)throw new Error(ni(13));return m.sliceCaseReducersByType[L]=ne,v},addMatcher(G,ne){return m.sliceMatchers.push({matcher:G,reducer:ne}),v},exposeAction(G,ne){return m.actionCreators[G]=ne,v},exposeCaseReducer(G,ne){return m.sliceCaseReducersByName[G]=ne,v}};f.forEach(G=>{const ne=h[G],L={reducerName:G,type:ZI(a,G),createNotation:typeof s.reducers=="function"};iR(ne)?oR(L,ne,v,e):rR(L,ne,v)});function w(){const[G={},ne=[],L=void 0]=typeof s.extraReducers=="function"?mw(s.extraReducers):[s.extraReducers],re={...G,...m.sliceCaseReducersByType};return $I(s.initialState,b=>{for(let S in re)b.addCase(S,re[S]);for(let S of m.sliceMatchers)b.addMatcher(S.matcher,S.reducer);for(let S of ne)b.addMatcher(S.matcher,S.reducer);L&&b.addDefaultCase(L)})}const T=G=>G,C=new Map;let R;function D(G,ne){return R||(R=w()),R(G,ne)}function A(){return R||(R=w()),R.getInitialState()}function F(G,ne=!1){function L(b){let S=b[G];return typeof S>"u"&&ne&&(S=A()),S}function re(b=T){const S=t0(C,ne,{insert:()=>new WeakMap});return t0(S,b,{insert:()=>{const P={};for(const[O,U]of Object.entries(s.selectors??{}))P[O]=tR(U,b,A,ne);return P}})}return{reducerPath:G,getSelectors:re,get selectors(){return re(L)},selectSlice:L}}const Q={name:a,reducer:D,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:A,...F(u),injectInto(G,{reducerPath:ne,...L}={}){const re=ne??u;return G.inject({reducerPath:re,reducer:D},L),{...Q,...F(re,!0)}}};return Q}}function tR(n,e,t,r){function s(a,...u){let h=e(a);return typeof h>"u"&&r&&(h=t()),n(h,...u)}return s.unwrapped=n,s}var Gh=eR();function nR(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function rR({type:n,reducerName:e,createNotation:t},r,s){let a,u;if("reducer"in r){if(t&&!sR(r))throw new Error(ni(17));a=r.reducer,u=r.prepare}else a=r;s.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,u?Kl(n,u):Kl(n))}function iR(n){return n._reducerDefinitionType==="asyncThunk"}function sR(n){return n._reducerDefinitionType==="reducerWithPrepare"}function oR({type:n,reducerName:e},t,r,s){if(!s)throw new Error(ni(18));const{payloadCreator:a,fulfilled:u,pending:h,rejected:f,settled:m,options:v}=t,w=s(n,a,v);r.exposeAction(e,w),u&&r.addCase(w.fulfilled,u),h&&r.addCase(w.pending,h),f&&r.addCase(w.rejected,f),m&&r.addMatcher(w.settled,m),r.exposeCaseReducer(e,{fulfilled:u||Fc,pending:h||Fc,rejected:f||Fc,settled:m||Fc})}function Fc(){}function ni(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}function gw(n,e){return function(){return n.apply(e,arguments)}}const{toString:aR}=Object.prototype,{getPrototypeOf:Tm}=Object,Qh=(n=>e=>{const t=aR.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Fr=n=>(n=n.toLowerCase(),e=>Qh(e)===n),Jh=n=>e=>typeof e===n,{isArray:Ba}=Array,ru=Jh("undefined");function lR(n){return n!==null&&!ru(n)&&n.constructor!==null&&!ru(n.constructor)&&Zn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const yw=Fr("ArrayBuffer");function uR(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&yw(n.buffer),e}const cR=Jh("string"),Zn=Jh("function"),vw=Jh("number"),Yh=n=>n!==null&&typeof n=="object",hR=n=>n===!0||n===!1,Kc=n=>{if(Qh(n)!=="object")return!1;const e=Tm(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},dR=Fr("Date"),fR=Fr("File"),pR=Fr("Blob"),mR=Fr("FileList"),gR=n=>Yh(n)&&Zn(n.pipe),yR=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Zn(n.append)&&((e=Qh(n))==="formdata"||e==="object"&&Zn(n.toString)&&n.toString()==="[object FormData]"))},vR=Fr("URLSearchParams"),[_R,wR,ER,TR]=["ReadableStream","Request","Response","Headers"].map(Fr),SR=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,s;if(typeof n!="object"&&(n=[n]),Ba(n))for(r=0,s=n.length;r<s;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let h;for(r=0;r<u;r++)h=a[r],e.call(null,n[h],h,n)}}function _w(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,s;for(;r-- >0;)if(s=t[r],e===s.toLowerCase())return s;return null}const yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ww=n=>!ru(n)&&n!==yo;function Fp(){const{caseless:n}=ww(this)&&this||{},e={},t=(r,s)=>{const a=n&&_w(e,s)||s;Kc(e[a])&&Kc(r)?e[a]=Fp(e[a],r):Kc(r)?e[a]=Fp({},r):Ba(r)?e[a]=r.slice():e[a]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&pu(arguments[r],t);return e}const IR=(n,e,t,{allOwnKeys:r}={})=>(pu(e,(s,a)=>{t&&Zn(s)?n[a]=gw(s,t):n[a]=s},{allOwnKeys:r}),n),RR=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),CR=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},AR=(n,e,t,r)=>{let s,a,u;const h={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)u=s[a],(!r||r(u,n,e))&&!h[u]&&(e[u]=n[u],h[u]=!0);n=t!==!1&&Tm(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},PR=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},kR=n=>{if(!n)return null;if(Ba(n))return n;let e=n.length;if(!vw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},xR=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Tm(Uint8Array)),NR=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=r.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},bR=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},DR=Fr("HTMLFormElement"),OR=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,s){return r.toUpperCase()+s}),r0=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),LR=Fr("RegExp"),Ew=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};pu(t,(s,a)=>{let u;(u=e(s,a,n))!==!1&&(r[a]=u||s)}),Object.defineProperties(n,r)},MR=n=>{Ew(n,(e,t)=>{if(Zn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Zn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},VR=(n,e)=>{const t={},r=s=>{s.forEach(a=>{t[a]=!0})};return Ba(n)?r(n):r(String(n).split(e)),t},FR=()=>{},UR=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,cp="abcdefghijklmnopqrstuvwxyz",i0="0123456789",Tw={DIGIT:i0,ALPHA:cp,ALPHA_DIGIT:cp+cp.toUpperCase()+i0},jR=(n=16,e=Tw.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function BR(n){return!!(n&&Zn(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const zR=n=>{const e=new Array(10),t=(r,s)=>{if(Yh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const a=Ba(r)?[]:{};return pu(r,(u,h)=>{const f=t(u,s+1);!ru(f)&&(a[h]=f)}),e[s]=void 0,a}}return r};return t(n,0)},$R=Fr("AsyncFunction"),HR=n=>n&&(Yh(n)||Zn(n))&&Zn(n.then)&&Zn(n.catch),Sw=((n,e)=>n?setImmediate:e?((t,r)=>(yo.addEventListener("message",({source:s,data:a})=>{s===yo&&a===t&&r.length&&r.shift()()},!1),s=>{r.push(s),yo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Zn(yo.postMessage)),WR=typeof queueMicrotask<"u"?queueMicrotask.bind(yo):typeof process<"u"&&process.nextTick||Sw,Z={isArray:Ba,isArrayBuffer:yw,isBuffer:lR,isFormData:yR,isArrayBufferView:uR,isString:cR,isNumber:vw,isBoolean:hR,isObject:Yh,isPlainObject:Kc,isReadableStream:_R,isRequest:wR,isResponse:ER,isHeaders:TR,isUndefined:ru,isDate:dR,isFile:fR,isBlob:pR,isRegExp:LR,isFunction:Zn,isStream:gR,isURLSearchParams:vR,isTypedArray:xR,isFileList:mR,forEach:pu,merge:Fp,extend:IR,trim:SR,stripBOM:RR,inherits:CR,toFlatObject:AR,kindOf:Qh,kindOfTest:Fr,endsWith:PR,toArray:kR,forEachEntry:NR,matchAll:bR,isHTMLForm:DR,hasOwnProperty:r0,hasOwnProp:r0,reduceDescriptors:Ew,freezeMethods:MR,toObjectSet:VR,toCamelCase:OR,noop:FR,toFiniteNumber:UR,findKey:_w,global:yo,isContextDefined:ww,ALPHABET:Tw,generateString:jR,isSpecCompliantForm:BR,toJSONObject:zR,isAsyncFn:$R,isThenable:HR,setImmediate:Sw,asap:WR};function Be(n,e,t,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Z.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const Iw=Be.prototype,Rw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Rw[n]={value:n}});Object.defineProperties(Be,Rw);Object.defineProperty(Iw,"isAxiosError",{value:!0});Be.from=(n,e,t,r,s,a)=>{const u=Object.create(Iw);return Z.toFlatObject(n,u,function(f){return f!==Error.prototype},h=>h!=="isAxiosError"),Be.call(u,n.message,e,t,r,s),u.cause=n,u.name=n.name,a&&Object.assign(u,a),u};const qR=null;function Up(n){return Z.isPlainObject(n)||Z.isArray(n)}function Cw(n){return Z.endsWith(n,"[]")?n.slice(0,-2):n}function s0(n,e,t){return n?n.concat(e).map(function(s,a){return s=Cw(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function KR(n){return Z.isArray(n)&&!n.some(Up)}const GR=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function Xh(n,e,t){if(!Z.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Z.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,A){return!Z.isUndefined(A[D])});const r=t.metaTokens,s=t.visitor||v,a=t.dots,u=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(s))throw new TypeError("visitor must be a function");function m(R){if(R===null)return"";if(Z.isDate(R))return R.toISOString();if(!f&&Z.isBlob(R))throw new Be("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(R)||Z.isTypedArray(R)?f&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function v(R,D,A){let F=R;if(R&&!A&&typeof R=="object"){if(Z.endsWith(D,"{}"))D=r?D:D.slice(0,-2),R=JSON.stringify(R);else if(Z.isArray(R)&&KR(R)||(Z.isFileList(R)||Z.endsWith(D,"[]"))&&(F=Z.toArray(R)))return D=Cw(D),F.forEach(function(G,ne){!(Z.isUndefined(G)||G===null)&&e.append(u===!0?s0([D],ne,a):u===null?D:D+"[]",m(G))}),!1}return Up(R)?!0:(e.append(s0(A,D,a),m(R)),!1)}const w=[],T=Object.assign(GR,{defaultVisitor:v,convertValue:m,isVisitable:Up});function C(R,D){if(!Z.isUndefined(R)){if(w.indexOf(R)!==-1)throw Error("Circular reference detected in "+D.join("."));w.push(R),Z.forEach(R,function(F,Q){(!(Z.isUndefined(F)||F===null)&&s.call(e,F,Z.isString(Q)?Q.trim():Q,D,T))===!0&&C(F,D?D.concat(Q):[Q])}),w.pop()}}if(!Z.isObject(n))throw new TypeError("data must be an object");return C(n),e}function o0(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Sm(n,e){this._pairs=[],n&&Xh(n,this,e)}const Aw=Sm.prototype;Aw.append=function(e,t){this._pairs.push([e,t])};Aw.toString=function(e){const t=e?function(r){return e.call(this,r,o0)}:o0;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function QR(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pw(n,e,t){if(!e)return n;const r=t&&t.encode||QR;Z.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=Z.isURLSearchParams(e)?e.toString():new Sm(e,t).toString(r),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class a0{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(r){r!==null&&e(r)})}}const kw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JR=typeof URLSearchParams<"u"?URLSearchParams:Sm,YR=typeof FormData<"u"?FormData:null,XR=typeof Blob<"u"?Blob:null,ZR={isBrowser:!0,classes:{URLSearchParams:JR,FormData:YR,Blob:XR},protocols:["http","https","file","blob","url","data"]},Im=typeof window<"u"&&typeof document<"u",jp=typeof navigator=="object"&&navigator||void 0,eC=Im&&(!jp||["ReactNative","NativeScript","NS"].indexOf(jp.product)<0),tC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",nC=Im&&window.location.href||"http://localhost",rC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Im,hasStandardBrowserEnv:eC,hasStandardBrowserWebWorkerEnv:tC,navigator:jp,origin:nC},Symbol.toStringTag,{value:"Module"})),_n={...rC,...ZR};function iC(n,e){return Xh(n,new _n.classes.URLSearchParams,Object.assign({visitor:function(t,r,s,a){return _n.isNode&&Z.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function sC(n){return Z.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function oC(n){const e={},t=Object.keys(n);let r;const s=t.length;let a;for(r=0;r<s;r++)a=t[r],e[a]=n[a];return e}function xw(n){function e(t,r,s,a){let u=t[a++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),f=a>=t.length;return u=!u&&Z.isArray(s)?s.length:u,f?(Z.hasOwnProp(s,u)?s[u]=[s[u],r]:s[u]=r,!h):((!s[u]||!Z.isObject(s[u]))&&(s[u]=[]),e(t,r,s[u],a)&&Z.isArray(s[u])&&(s[u]=oC(s[u])),!h)}if(Z.isFormData(n)&&Z.isFunction(n.entries)){const t={};return Z.forEachEntry(n,(r,s)=>{e(sC(r),s,t,0)}),t}return null}function aC(n,e,t){if(Z.isString(n))try{return(e||JSON.parse)(n),Z.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const mu={transitional:kw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,a=Z.isObject(e);if(a&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return s?JSON.stringify(xw(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return iC(e,this.formSerializer).toString();if((h=Z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Xh(h?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),aC(e)):e}],transformResponse:[function(e){const t=this.transitional||mu.transitional,r=t&&t.forcedJSONParsing,s=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(r&&!this.responseType||s)){const u=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(h){if(u)throw h.name==="SyntaxError"?Be.from(h,Be.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_n.classes.FormData,Blob:_n.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],n=>{mu.headers[n]={}});const lC=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uC=n=>{const e={};let t,r,s;return n&&n.split(`
`).forEach(function(u){s=u.indexOf(":"),t=u.substring(0,s).trim().toLowerCase(),r=u.substring(s+1).trim(),!(!t||e[t]&&lC[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},l0=Symbol("internals");function Dl(n){return n&&String(n).trim().toLowerCase()}function Gc(n){return n===!1||n==null?n:Z.isArray(n)?n.map(Gc):String(n)}function cC(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const hC=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function hp(n,e,t,r,s){if(Z.isFunction(r))return r.call(this,e,t);if(s&&(e=t),!!Z.isString(e)){if(Z.isString(r))return e.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(e)}}function dC(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function fC(n,e){const t=Z.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(s,a,u){return this[r].call(this,e,s,a,u)},configurable:!0})})}class jn{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function a(h,f,m){const v=Dl(f);if(!v)throw new Error("header name must be a non-empty string");const w=Z.findKey(s,v);(!w||s[w]===void 0||m===!0||m===void 0&&s[w]!==!1)&&(s[w||f]=Gc(h))}const u=(h,f)=>Z.forEach(h,(m,v)=>a(m,v,f));if(Z.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(Z.isString(e)&&(e=e.trim())&&!hC(e))u(uC(e),t);else if(Z.isHeaders(e))for(const[h,f]of e.entries())a(f,h,r);else e!=null&&a(t,e,r);return this}get(e,t){if(e=Dl(e),e){const r=Z.findKey(this,e);if(r){const s=this[r];if(!t)return s;if(t===!0)return cC(s);if(Z.isFunction(t))return t.call(this,s,r);if(Z.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Dl(e),e){const r=Z.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||hp(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let s=!1;function a(u){if(u=Dl(u),u){const h=Z.findKey(r,u);h&&(!t||hp(r,r[h],h,t))&&(delete r[h],s=!0)}}return Z.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const a=t[r];(!e||hp(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,r={};return Z.forEach(this,(s,a)=>{const u=Z.findKey(r,a);if(u){t[u]=Gc(s),delete t[a];return}const h=e?dC(a):String(a).trim();h!==a&&delete t[a],t[h]=Gc(s),r[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Z.forEach(this,(r,s)=>{r!=null&&r!==!1&&(t[s]=e&&Z.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[l0]=this[l0]={accessors:{}}).accessors,s=this.prototype;function a(u){const h=Dl(u);r[h]||(fC(s,u),r[h]=!0)}return Z.isArray(e)?e.forEach(a):a(e),this}}jn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(jn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Z.freezeMethods(jn);function dp(n,e){const t=this||mu,r=e||t,s=jn.from(r.headers);let a=r.data;return Z.forEach(n,function(h){a=h.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function Nw(n){return!!(n&&n.__CANCEL__)}function za(n,e,t){Be.call(this,n??"canceled",Be.ERR_CANCELED,e,t),this.name="CanceledError"}Z.inherits(za,Be,{__CANCEL__:!0});function bw(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Be("Request failed with status code "+t.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function pC(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function mC(n,e){n=n||10;const t=new Array(n),r=new Array(n);let s=0,a=0,u;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),v=r[a];u||(u=m),t[s]=f,r[s]=m;let w=a,T=0;for(;w!==s;)T+=t[w++],w=w%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),m-u<e)return;const C=v&&m-v;return C?Math.round(T*1e3/C):void 0}}function gC(n,e){let t=0,r=1e3/e,s,a;const u=(m,v=Date.now())=>{t=v,s=null,a&&(clearTimeout(a),a=null),n.apply(null,m)};return[(...m)=>{const v=Date.now(),w=v-t;w>=r?u(m,v):(s=m,a||(a=setTimeout(()=>{a=null,u(s)},r-w)))},()=>s&&u(s)]}const wh=(n,e,t=3)=>{let r=0;const s=mC(50,250);return gC(a=>{const u=a.loaded,h=a.lengthComputable?a.total:void 0,f=u-r,m=s(f),v=u<=h;r=u;const w={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:m||void 0,estimated:m&&h&&v?(h-u)/m:void 0,event:a,lengthComputable:h!=null,[e?"download":"upload"]:!0};n(w)},t)},u0=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},c0=n=>(...e)=>Z.asap(()=>n(...e)),yC=_n.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,_n.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(_n.origin),_n.navigator&&/(msie|trident)/i.test(_n.navigator.userAgent)):()=>!0,vC=_n.hasStandardBrowserEnv?{write(n,e,t,r,s,a){const u=[n+"="+encodeURIComponent(e)];Z.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),Z.isString(r)&&u.push("path="+r),Z.isString(s)&&u.push("domain="+s),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _C(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function wC(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Dw(n,e){return n&&!_C(e)?wC(n,e):e}const h0=n=>n instanceof jn?{...n}:n;function Ro(n,e){e=e||{};const t={};function r(m,v,w,T){return Z.isPlainObject(m)&&Z.isPlainObject(v)?Z.merge.call({caseless:T},m,v):Z.isPlainObject(v)?Z.merge({},v):Z.isArray(v)?v.slice():v}function s(m,v,w,T){if(Z.isUndefined(v)){if(!Z.isUndefined(m))return r(void 0,m,w,T)}else return r(m,v,w,T)}function a(m,v){if(!Z.isUndefined(v))return r(void 0,v)}function u(m,v){if(Z.isUndefined(v)){if(!Z.isUndefined(m))return r(void 0,m)}else return r(void 0,v)}function h(m,v,w){if(w in e)return r(m,v);if(w in n)return r(void 0,m)}const f={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(m,v,w)=>s(h0(m),h0(v),w,!0)};return Z.forEach(Object.keys(Object.assign({},n,e)),function(v){const w=f[v]||s,T=w(n[v],e[v],v);Z.isUndefined(T)&&w!==h||(t[v]=T)}),t}const Ow=n=>{const e=Ro({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:u,auth:h}=e;e.headers=u=jn.from(u),e.url=Pw(Dw(e.baseURL,e.url),n.params,n.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let f;if(Z.isFormData(t)){if(_n.hasStandardBrowserEnv||_n.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((f=u.getContentType())!==!1){const[m,...v]=f?f.split(";").map(w=>w.trim()).filter(Boolean):[];u.setContentType([m||"multipart/form-data",...v].join("; "))}}if(_n.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(e)),r||r!==!1&&yC(e.url))){const m=s&&a&&vC.read(a);m&&u.set(s,m)}return e},EC=typeof XMLHttpRequest<"u",TC=EC&&function(n){return new Promise(function(t,r){const s=Ow(n);let a=s.data;const u=jn.from(s.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:m}=s,v,w,T,C,R;function D(){C&&C(),R&&R(),s.cancelToken&&s.cancelToken.unsubscribe(v),s.signal&&s.signal.removeEventListener("abort",v)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function F(){if(!A)return;const G=jn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),L={data:!h||h==="text"||h==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:G,config:n,request:A};bw(function(b){t(b),D()},function(b){r(b),D()},L),A=null}"onloadend"in A?A.onloadend=F:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(F)},A.onabort=function(){A&&(r(new Be("Request aborted",Be.ECONNABORTED,n,A)),A=null)},A.onerror=function(){r(new Be("Network Error",Be.ERR_NETWORK,n,A)),A=null},A.ontimeout=function(){let ne=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const L=s.transitional||kw;s.timeoutErrorMessage&&(ne=s.timeoutErrorMessage),r(new Be(ne,L.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,n,A)),A=null},a===void 0&&u.setContentType(null),"setRequestHeader"in A&&Z.forEach(u.toJSON(),function(ne,L){A.setRequestHeader(L,ne)}),Z.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),h&&h!=="json"&&(A.responseType=s.responseType),m&&([T,R]=wh(m,!0),A.addEventListener("progress",T)),f&&A.upload&&([w,C]=wh(f),A.upload.addEventListener("progress",w),A.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(v=G=>{A&&(r(!G||G.type?new za(null,n,A):G),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(v),s.signal&&(s.signal.aborted?v():s.signal.addEventListener("abort",v)));const Q=pC(s.url);if(Q&&_n.protocols.indexOf(Q)===-1){r(new Be("Unsupported protocol "+Q+":",Be.ERR_BAD_REQUEST,n));return}A.send(a||null)})},SC=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,s;const a=function(m){if(!s){s=!0,h();const v=m instanceof Error?m:this.reason;r.abort(v instanceof Be?v:new za(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,a(new Be(`timeout ${e} of ms exceeded`,Be.ETIMEDOUT))},e);const h=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(a):m.removeEventListener("abort",a)}),n=null)};n.forEach(m=>m.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>Z.asap(h),f}},IC=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,s;for(;r<t;)s=r+e,yield n.slice(r,s),r=s},RC=async function*(n,e){for await(const t of CC(n))yield*IC(t,e)},CC=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},d0=(n,e,t,r)=>{const s=RC(n,e);let a=0,u,h=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:v}=await s.next();if(m){h(),f.close();return}let w=v.byteLength;if(t){let T=a+=w;t(T)}f.enqueue(new Uint8Array(v))}catch(m){throw h(m),m}},cancel(f){return h(f),s.return()}},{highWaterMark:2})},Zh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Lw=Zh&&typeof ReadableStream=="function",AC=Zh&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Mw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},PC=Lw&&Mw(()=>{let n=!1;const e=new Request(_n.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),f0=64*1024,Bp=Lw&&Mw(()=>Z.isReadableStream(new Response("").body)),Eh={stream:Bp&&(n=>n.body)};Zh&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Eh[e]&&(Eh[e]=Z.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Be(`Response type '${e}' is not supported`,Be.ERR_NOT_SUPPORT,r)})})})(new Response);const kC=async n=>{if(n==null)return 0;if(Z.isBlob(n))return n.size;if(Z.isSpecCompliantForm(n))return(await new Request(_n.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(n)||Z.isArrayBuffer(n))return n.byteLength;if(Z.isURLSearchParams(n)&&(n=n+""),Z.isString(n))return(await AC(n)).byteLength},xC=async(n,e)=>{const t=Z.toFiniteNumber(n.getContentLength());return t??kC(e)},NC=Zh&&(async n=>{let{url:e,method:t,data:r,signal:s,cancelToken:a,timeout:u,onDownloadProgress:h,onUploadProgress:f,responseType:m,headers:v,withCredentials:w="same-origin",fetchOptions:T}=Ow(n);m=m?(m+"").toLowerCase():"text";let C=SC([s,a&&a.toAbortSignal()],u),R;const D=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let A;try{if(f&&PC&&t!=="get"&&t!=="head"&&(A=await xC(v,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),re;if(Z.isFormData(r)&&(re=L.headers.get("content-type"))&&v.setContentType(re),L.body){const[b,S]=u0(A,wh(c0(f)));r=d0(L.body,f0,b,S)}}Z.isString(w)||(w=w?"include":"omit");const F="credentials"in Request.prototype;R=new Request(e,{...T,signal:C,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:F?w:void 0});let Q=await fetch(R);const G=Bp&&(m==="stream"||m==="response");if(Bp&&(h||G&&D)){const L={};["status","statusText","headers"].forEach(P=>{L[P]=Q[P]});const re=Z.toFiniteNumber(Q.headers.get("content-length")),[b,S]=h&&u0(re,wh(c0(h),!0))||[];Q=new Response(d0(Q.body,f0,b,()=>{S&&S(),D&&D()}),L)}m=m||"text";let ne=await Eh[Z.findKey(Eh,m)||"text"](Q,n);return!G&&D&&D(),await new Promise((L,re)=>{bw(L,re,{data:ne,headers:jn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:n,request:R})})}catch(F){throw D&&D(),F&&F.name==="TypeError"&&/fetch/i.test(F.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,n,R),{cause:F.cause||F}):Be.from(F,F&&F.code,n,R)}}),zp={http:qR,xhr:TC,fetch:NC};Z.forEach(zp,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const p0=n=>`- ${n}`,bC=n=>Z.isFunction(n)||n===null||n===!1,Vw={getAdapter:n=>{n=Z.isArray(n)?n:[n];const{length:e}=n;let t,r;const s={};for(let a=0;a<e;a++){t=n[a];let u;if(r=t,!bC(t)&&(r=zp[(u=String(t)).toLowerCase()],r===void 0))throw new Be(`Unknown adapter '${u}'`);if(r)break;s[u||"#"+a]=r}if(!r){const a=Object.entries(s).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=e?a.length>1?`since :
`+a.map(p0).join(`
`):" "+p0(a[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:zp};function fp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new za(null,n)}function m0(n){return fp(n),n.headers=jn.from(n.headers),n.data=dp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Vw.getAdapter(n.adapter||mu.adapter)(n).then(function(r){return fp(n),r.data=dp.call(n,n.transformResponse,r),r.headers=jn.from(r.headers),r},function(r){return Nw(r)||(fp(n),r&&r.response&&(r.response.data=dp.call(n,n.transformResponse,r.response),r.response.headers=jn.from(r.response.headers))),Promise.reject(r)})}const Fw="1.7.8",ed={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{ed[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const g0={};ed.transitional=function(e,t,r){function s(a,u){return"[Axios v"+Fw+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,h)=>{if(e===!1)throw new Be(s(u," has been removed"+(t?" in "+t:"")),Be.ERR_DEPRECATED);return t&&!g0[u]&&(g0[u]=!0,console.warn(s(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,h):!0}};ed.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function DC(n,e,t){if(typeof n!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let s=r.length;for(;s-- >0;){const a=r[s],u=e[a];if(u){const h=n[a],f=h===void 0||u(h,a,n);if(f!==!0)throw new Be("option "+a+" must be "+f,Be.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Be("Unknown option "+a,Be.ERR_BAD_OPTION)}}const Qc={assertOptions:DC,validators:ed},ei=Qc.validators;class wo{constructor(e){this.defaults=e,this.interceptors={request:new a0,response:new a0}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ro(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:a}=t;r!==void 0&&Qc.assertOptions(r,{silentJSONParsing:ei.transitional(ei.boolean),forcedJSONParsing:ei.transitional(ei.boolean),clarifyTimeoutError:ei.transitional(ei.boolean)},!1),s!=null&&(Z.isFunction(s)?t.paramsSerializer={serialize:s}:Qc.assertOptions(s,{encode:ei.function,serialize:ei.function},!0)),Qc.assertOptions(t,{baseUrl:ei.spelling("baseURL"),withXsrfToken:ei.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&Z.merge(a.common,a[t.method]);a&&Z.forEach(["delete","get","head","post","put","patch","common"],R=>{delete a[R]}),t.headers=jn.concat(u,a);const h=[];let f=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(t)===!1||(f=f&&D.synchronous,h.unshift(D.fulfilled,D.rejected))});const m=[];this.interceptors.response.forEach(function(D){m.push(D.fulfilled,D.rejected)});let v,w=0,T;if(!f){const R=[m0.bind(this),void 0];for(R.unshift.apply(R,h),R.push.apply(R,m),T=R.length,v=Promise.resolve(t);w<T;)v=v.then(R[w++],R[w++]);return v}T=h.length;let C=t;for(w=0;w<T;){const R=h[w++],D=h[w++];try{C=R(C)}catch(A){D.call(this,A);break}}try{v=m0.call(this,C)}catch(R){return Promise.reject(R)}for(w=0,T=m.length;w<T;)v=v.then(m[w++],m[w++]);return v}getUri(e){e=Ro(this.defaults,e);const t=Dw(e.baseURL,e.url);return Pw(t,e.params,e.paramsSerializer)}}Z.forEach(["delete","get","head","options"],function(e){wo.prototype[e]=function(t,r){return this.request(Ro(r||{},{method:e,url:t,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function t(r){return function(a,u,h){return this.request(Ro(h||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}wo.prototype[e]=t(),wo.prototype[e+"Form"]=t(!0)});class Rm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const u=new Promise(h=>{r.subscribe(h),a=h}).then(s);return u.cancel=function(){r.unsubscribe(a)},u},e(function(a,u,h){r.reason||(r.reason=new za(a,u,h),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Rm(function(s){e=s}),cancel:e}}}function OC(n){return function(t){return n.apply(null,t)}}function LC(n){return Z.isObject(n)&&n.isAxiosError===!0}const $p={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($p).forEach(([n,e])=>{$p[e]=n});function Uw(n){const e=new wo(n),t=gw(wo.prototype.request,e);return Z.extend(t,wo.prototype,e,{allOwnKeys:!0}),Z.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Uw(Ro(n,s))},t}const Lt=Uw(mu);Lt.Axios=wo;Lt.CanceledError=za;Lt.CancelToken=Rm;Lt.isCancel=Nw;Lt.VERSION=Fw;Lt.toFormData=Xh;Lt.AxiosError=Be;Lt.Cancel=Lt.CanceledError;Lt.all=function(e){return Promise.all(e)};Lt.spread=OC;Lt.isAxiosError=LC;Lt.mergeConfig=Ro;Lt.AxiosHeaders=jn;Lt.formToJSON=n=>xw(Z.isHTMLForm(n)?new FormData(n):n);Lt.getAdapter=Vw.getAdapter;Lt.HttpStatusCode=$p;Lt.default=Lt;const MC="https://api.themoviedb.org/3",Ta={movies:{popular:"/movie/popular",topRated:"/movie/top_rated",upcoming:"/movie/upcoming",details:n=>`/movie/${n}`},search:{movies:"/search/movie"},discover:{movies:"/discover/movie"}},$a=Lt.create({baseURL:MC,timeout:2e3});$a.interceptors.request.use(n=>{const e="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTEyYTNlN2FmYTRiMTU0YmM2NzA2MTVmZjAwYWU2OSIsIm5iZiI6MTczMjY1NjQzMS42ODUxNTUyLCJzdWIiOiI2NzQ2MjRjZTljMTU3NDk3OTA1MjlkZWYiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.J9VMxeLiIpSDJdb2eCnpG7gsNalD0r96c45dbSHnIaY";return n.headers.Authorization=`Bearer ${e}`,n},n=>(console.error("Request Interceptor Error:",n.message),Promise.reject(n)));const Cm=$a.get;$a.post;$a.put;$a.patch;$a.delete;const Jc=async({endpoint:n=Ta.discover.movies,page:e,sortBy:t="popularity.desc",filters:r={}})=>{var s,a,u,h,f;try{const v={page:Number.isInteger(e)&&e>=1&&e<=500?e:1,language:"en-US",sort_by:t,with_genres:((s=r.genres)==null?void 0:s.map(T=>T.id).join(","))||void 0,"vote_average.gte":((a=r.ratingRange)==null?void 0:a.from)||void 0,"vote_average.lte":((u=r.ratingRange)==null?void 0:u.to)||void 0,"primary_release_date.gte":(h=r.yearRange)!=null&&h.from?`${r.yearRange.from}-01-01`:void 0,"primary_release_date.lte":(f=r.yearRange)!=null&&f.to?`${r.yearRange.to}-12-31`:void 0};return(await Cm(n,{params:v})).data}catch(m){throw console.error("Error fetching movies:",m.message),new Error("Failed to fetch movies. Please try again later.")}},VC=async n=>{try{if(!n)throw new Error("Movie ID is required");return(await Cm(Ta.movies.details(n),{params:{append_to_response:"credits",language:"en-US"}})).data}catch(e){throw console.error(`Error fetching details for movie ID ${n}:`,e.message),new Error("Failed to fetch movie details. Please try again later.")}},FC=async({query:n,page:e})=>{try{if(!n)throw new Error("Search query is required");const t=Number.isInteger(e)&&e>=1&&e<=500?e:1;return(await Cm(Ta.search.movies,{params:{query:n,page:t,language:"en-US"}})).data}catch(t){throw console.error("Error searching movies:",t.message),new Error("Failed to search for movies. Please try again later.")}},Gl=rr("movies/fetchMovies",async({page:n=1,sortBy:e="popularity.desc",filters:t={}},{rejectWithValue:r})=>{try{return{...await Jc({page:n,sortBy:e,filters:t}),currentPage:n}}catch(s){return r(s.message)}}),Yc=rr("movies/fetchMovieDetails",async(n,{rejectWithValue:e})=>{try{return await VC(n)}catch(t){return e(t.message)}}),Ql=rr("movies/fetchSearchMovies",async({query:n,page:e},{rejectWithValue:t})=>{try{return{...await FC({query:n,page:e}),query:n,currentPage:e}}catch(r){return t(r.message)}}),UC={list:[],details:null,searchResults:[],searchQuery:"",page:1,totalPages:0,loading:!1,error:null},jw=Gh({name:"movies",initialState:UC,reducers:{clearMovies:n=>{n.list=[],n.page=1,n.totalPages=0,n.error=null},clearMovieDetails:n=>{n.details=null},clearSearchResults:n=>{n.searchResults=[],n.searchQuery="",n.error=null}},extraReducers:n=>{n.addCase(Gl.pending,e=>{e.loading=!0,e.error=null}).addCase(Gl.fulfilled,(e,t)=>{e.loading=!1,e.list=t.payload.results,e.page=t.payload.currentPage,e.totalPages=t.payload.total_pages}).addCase(Gl.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Yc.pending,e=>{e.loading=!0,e.error=null}).addCase(Yc.fulfilled,(e,t)=>{e.loading=!1,e.details=t.payload}).addCase(Yc.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Ql.pending,e=>{e.loading=!0,e.error=null}).addCase(Ql.fulfilled,(e,t)=>{e.loading=!1,e.searchResults=t.payload.results,e.searchQuery=t.payload.query,e.page=t.payload.currentPage,e.totalPages=t.payload.total_pages}).addCase(Ql.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{clearMovies:XL,clearMovieDetails:jC,clearSearchResults:BC}=jw.actions,zC=jw.reducer;var y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},$C=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,h=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,v=a>>2,w=(a&3)<<4|h>>4;let T=(h&15)<<2|m>>6,C=m&63;f||(C=64,u||(T=64)),r.push(t[v],t[w],t[T],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):$C(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||m==null||w==null)throw new HC;const T=a<<2|h>>4;if(r.push(T),m!==64){const C=h<<4&240|m>>2;if(r.push(C),w!==64){const R=m<<6&192|w;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WC=function(n){const e=Bw(n);return zw.encodeByteArray(e,!0)},Th=function(n){return WC(n).replace(/\./g,"")},$w=function(n){try{return zw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=()=>qC().__FIREBASE_DEFAULTS__,GC=()=>{if(typeof process>"u"||typeof y0>"u")return;const n=y0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$w(n[1]);return e&&JSON.parse(e)},td=()=>{try{return KC()||GC()||QC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Hw=n=>{var e,t;return(t=(e=td())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},JC=n=>{const e=Hw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ww=()=>{var n;return(n=td())===null||n===void 0?void 0:n.config},qw=n=>{var e;return(e=td())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YC=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Th(JSON.stringify(t)),Th(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function e2(){var n;const e=(n=td())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function r2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i2(){const n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function s2(){return!e2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o2(){try{return typeof indexedDB=="object"}catch{return!1}}function a2(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="FirebaseError";class zi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=l2,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?u2(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new zi(s,h,r)}}function u2(n,e){return n.replace(c2,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const c2=/\{\$([^}]+)}/g;function h2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(v0(a)&&v0(u)){if(!Sh(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function v0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Bl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function d2(n,e){const t=new f2(n,e);return t.subscribe.bind(t)}class f2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");p2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=pp),s.error===void 0&&(s.error=pp),s.complete===void 0&&(s.complete=pp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n){return n&&n._delegate?n._delegate:n}class Co{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new YC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y2(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g2(n){return n===mo?void 0:n}function y2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new m2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const _2={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},w2=He.INFO,E2={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},T2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=E2[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=w2,this._logHandler=T2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const S2=(n,e)=>e.some(t=>n instanceof t);let _0,w0;function I2(){return _0||(_0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R2(){return w0||(w0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kw=new WeakMap,Hp=new WeakMap,Gw=new WeakMap,mp=new WeakMap,Pm=new WeakMap;function C2(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ks(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Kw.set(t,n)}).catch(()=>{}),Pm.set(e,n),e}function A2(n){if(Hp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Hp.set(n,e)}let Wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Gw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ks(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function P2(n){Wp=n(Wp)}function k2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(gp(this),e,...t);return Gw.set(r,e.sort?e.sort():[e]),ks(r)}:R2().includes(n)?function(...e){return n.apply(gp(this),e),ks(Kw.get(this))}:function(...e){return ks(n.apply(gp(this),e))}}function x2(n){return typeof n=="function"?k2(n):(n instanceof IDBTransaction&&A2(n),S2(n,I2())?new Proxy(n,Wp):n)}function ks(n){if(n instanceof IDBRequest)return C2(n);if(mp.has(n))return mp.get(n);const e=x2(n);return e!==n&&(mp.set(n,e),Pm.set(e,n)),e}const gp=n=>Pm.get(n);function N2(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),h=ks(u);return r&&u.addEventListener("upgradeneeded",f=>{r(ks(u.result),f.oldVersion,f.newVersion,ks(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const b2=["get","getKey","getAll","getAllKeys","count"],D2=["put","add","delete","clear"],yp=new Map;function E0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=D2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||b2.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&f.done]))[0]};return yp.set(e,a),a}P2(n=>({...n,get:(e,t,r)=>E0(e,t)||n.get(e,t,r),has:(e,t)=>!!E0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(L2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function L2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qp="@firebase/app",T0="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new Am("@firebase/app"),M2="@firebase/app-compat",V2="@firebase/analytics-compat",F2="@firebase/analytics",U2="@firebase/app-check-compat",j2="@firebase/app-check",B2="@firebase/auth",z2="@firebase/auth-compat",$2="@firebase/database",H2="@firebase/data-connect",W2="@firebase/database-compat",q2="@firebase/functions",K2="@firebase/functions-compat",G2="@firebase/installations",Q2="@firebase/installations-compat",J2="@firebase/messaging",Y2="@firebase/messaging-compat",X2="@firebase/performance",Z2="@firebase/performance-compat",eA="@firebase/remote-config",tA="@firebase/remote-config-compat",nA="@firebase/storage",rA="@firebase/storage-compat",iA="@firebase/firestore",sA="@firebase/vertexai",oA="@firebase/firestore-compat",aA="firebase",lA="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="[DEFAULT]",uA={[qp]:"fire-core",[M2]:"fire-core-compat",[F2]:"fire-analytics",[V2]:"fire-analytics-compat",[j2]:"fire-app-check",[U2]:"fire-app-check-compat",[B2]:"fire-auth",[z2]:"fire-auth-compat",[$2]:"fire-rtdb",[H2]:"fire-data-connect",[W2]:"fire-rtdb-compat",[q2]:"fire-fn",[K2]:"fire-fn-compat",[G2]:"fire-iid",[Q2]:"fire-iid-compat",[J2]:"fire-fcm",[Y2]:"fire-fcm-compat",[X2]:"fire-perf",[Z2]:"fire-perf-compat",[eA]:"fire-rc",[tA]:"fire-rc-compat",[nA]:"fire-gcs",[rA]:"fire-gcs-compat",[iA]:"fire-fst",[oA]:"fire-fst-compat",[sA]:"fire-vertex","fire-js":"fire-js",[aA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,cA=new Map,Gp=new Map;function S0(n,e){try{n.container.addComponent(e)}catch(t){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xa(n){const e=n.name;if(Gp.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,n);for(const t of Ih.values())S0(t,n);for(const t of cA.values())S0(t,n);return!0}function km(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ti(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new gu("app","Firebase",hA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=lA;function Qw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw xs.create("bad-app-name",{appName:String(s)});if(t||(t=Ww()),!t)throw xs.create("no-options");const a=Ih.get(s);if(a){if(Sh(t,a.options)&&Sh(r,a.config))return a;throw xs.create("duplicate-app",{appName:s})}const u=new v2(s);for(const f of Gp.values())u.addComponent(f);const h=new dA(t,r,u);return Ih.set(s,h),h}function Jw(n=Kp){const e=Ih.get(n);if(!e&&n===Kp&&Ww())return Qw();if(!e)throw xs.create("no-app",{appName:n});return e}function Ns(n,e,t){var r;let s=(r=uA[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(h.join(" "));return}xa(new Co(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="firebase-heartbeat-database",pA=1,iu="firebase-heartbeat-store";let vp=null;function Yw(){return vp||(vp=N2(fA,pA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw xs.create("idb-open",{originalErrorMessage:n.message})})),vp}async function mA(n){try{const t=(await Yw()).transaction(iu),r=await t.objectStore(iu).get(Xw(n));return await t.done,r}catch(e){if(e instanceof zi)Vi.warn(e.message);else{const t=xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(t.message)}}}async function I0(n,e){try{const r=(await Yw()).transaction(iu,"readwrite");await r.objectStore(iu).put(e,Xw(n)),await r.done}catch(t){if(t instanceof zi)Vi.warn(t.message);else{const r=xs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Vi.warn(r.message)}}}function Xw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=1024,yA=30*24*60*60*1e3;class vA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=R0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=yA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=R0(),{heartbeatsToSend:r,unsentEntries:s}=_A(this._heartbeatsCache.heartbeats),a=Th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Vi.warn(t),""}}}function R0(){return new Date().toISOString().substring(0,10)}function _A(n,e=gA){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),C0(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),C0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class wA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o2()?a2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return I0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return I0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function C0(n){return Th(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n){xa(new Co("platform-logger",e=>new O2(e),"PRIVATE")),xa(new Co("heartbeat",e=>new vA(e),"PRIVATE")),Ns(qp,T0,n),Ns(qp,T0,"esm2017"),Ns("fire-js","")}EA("");var TA="firebase",SA="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns(TA,SA,"app");function xm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IA=Zw,eE=new gu("auth","Firebase",Zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Am("@firebase/auth");function RA(n,...e){Rh.logLevel<=He.WARN&&Rh.warn(`Auth (${Ha}): ${n}`,...e)}function Xc(n,...e){Rh.logLevel<=He.ERROR&&Rh.error(`Auth (${Ha}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(n,...e){throw Nm(n,...e)}function ri(n,...e){return Nm(n,...e)}function tE(n,e,t){const r=Object.assign(Object.assign({},IA()),{[e]:t});return new gu("auth","Firebase",r).create(e,{appName:n.name})}function Oi(n){return tE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return eE.create(n,...e)}function be(n,e,...t){if(!n)throw Nm(e,...t)}function Ni(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xc(e),new Error(e)}function Fi(n,e){n||Ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function CA(){return A0()==="http:"||A0()==="https:"}function A0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CA()||n2()||"connection"in navigator)?navigator.onLine:!0}function PA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fi(t>e,"Short delay should be less than long delay!"),this.isMobile=ZC()||r2()}get(){return AA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(n,e){Fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new vu(3e4,6e4);function js(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function $i(n,e,t,r,s={}){return rE(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=yu(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return t2()||(m.referrerPolicy="no-referrer"),nE.fetch()(iE(n,n.config.apiHost,t,h),m)})}async function rE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},kA),e);try{const s=new bA(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Uc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Uc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Uc(n,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw tE(n,v,m);Mr(n,v)}}catch(s){if(s instanceof zi)throw s;Mr(n,"network-request-failed",{message:String(s)})}}async function _u(n,e,t,r,s={}){const a=await $i(n,e,t,r,s);return"mfaPendingCredential"in a&&Mr(n,"multi-factor-auth-required",{_serverResponse:a}),a}function iE(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?bm(n.config,s):`${n.config.apiScheme}://${s}`}function NA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),xA.get())})}}function Uc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ri(n,e,r);return s.customData._tokenResponse=t,s}function P0(n){return n!==void 0&&n.enterprise!==void 0}class DA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OA(n,e){return $i(n,"GET","/v2/recaptchaConfig",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(n,e){return $i(n,"POST","/v1/accounts:delete",e)}async function sE(n,e){return $i(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MA(n,e=!1){const t=Gt(n),r=await t.getIdToken(e),s=Dm(r);be(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Jl(_p(s.auth_time)),issuedAtTime:Jl(_p(s.iat)),expirationTime:Jl(_p(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function _p(n){return Number(n)*1e3}function Dm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const s=$w(t);return s?JSON.parse(s):(Xc("Failed to decode base64 JWT payload"),null)}catch(s){return Xc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function k0(n){const e=Dm(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof zi&&VA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function VA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Na(n,sE(t,{idToken:r}));be(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?oE(a.providerUserInfo):[],h=jA(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(h!=null&&h.length),v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Jp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function UA(n){const e=Gt(n);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function oE(n){return n.map(e=>{var{providerId:t}=e,r=xm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(n,e){const t=await rE(n,{},async()=>{const r=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=iE(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",nE.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zA(n,e){return $i(n,"POST","/v2/accounts:revokeToken",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=k0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await BA(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new Sa;return r&&(be(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(be(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sa,this.toJSON())}_performRefresh(){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class bi{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=xm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Jp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Na(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MA(this,e)}reload(){return UA(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Na(this,LA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,h,f,m,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,C=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(h=t.tenantId)!==null&&h!==void 0?h:void 0,A=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,F=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:G,emailVerified:ne,isAnonymous:L,providerData:re,stsTokenManager:b}=t;be(G&&b,e,"internal-error");const S=Sa.fromJSON(this.name,b);be(typeof G=="string",e,"internal-error"),ws(w,e.name),ws(T,e.name),be(typeof ne=="boolean",e,"internal-error"),be(typeof L=="boolean",e,"internal-error"),ws(C,e.name),ws(R,e.name),ws(D,e.name),ws(A,e.name),ws(F,e.name),ws(Q,e.name);const P=new bi({uid:G,auth:e,email:T,emailVerified:ne,displayName:w,isAnonymous:L,photoURL:R,phoneNumber:C,tenantId:D,stsTokenManager:S,createdAt:F,lastLoginAt:Q});return re&&Array.isArray(re)&&(P.providerData=re.map(O=>Object.assign({},O))),A&&(P._redirectEventId=A),P}static async _fromIdTokenResponse(e,t,r=!1){const s=new Sa;s.updateFromServerResponse(t);const a=new bi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ch(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];be(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?oE(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),h=new Sa;h.updateFromIdToken(r);const f=new bi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;function Di(n){Fi(n instanceof Function,"Expected a class definition");let e=x0.get(n);return e?(Fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,x0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aE.type="NONE";const N0=aE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n,e,t){return`firebase:${n}:${e}:${t}`}class Ia{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Zc(this.userKey,s.apiKey,a),this.fullPersistenceKey=Zc("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ia(Di(N0),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Di(N0);const u=Zc(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const v=await m._get(u);if(v){const w=bi._fromJSON(e,v);m!==a&&(h=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ia(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Ia(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fE(e))return"Blackberry";if(pE(e))return"Webos";if(uE(e))return"Safari";if((e.includes("chrome/")||cE(e))&&!e.includes("edge/"))return"Chrome";if(dE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lE(n=wn()){return/firefox\//i.test(n)}function uE(n=wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cE(n=wn()){return/crios\//i.test(n)}function hE(n=wn()){return/iemobile/i.test(n)}function dE(n=wn()){return/android/i.test(n)}function fE(n=wn()){return/blackberry/i.test(n)}function pE(n=wn()){return/webos/i.test(n)}function Om(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $A(n=wn()){var e;return Om(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HA(){return i2()&&document.documentMode===10}function mE(n=wn()){return Om(n)||dE(n)||pE(n)||fE(n)||/windows phone/i.test(n)||hE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n,e=[]){let t;switch(n){case"Browser":t=b0(wn());break;case"Worker":t=`${b0(wn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ha}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(n,e={}){return $i(n,"GET","/v2/passwordPolicy",js(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=6;class GA{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:KA,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new WA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Di(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ia.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sE(this,{idToken:e}),r=await bi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ti(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(Oi(this));const t=e?Gt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qA(this),t=new GA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Di(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Ia.create(this,[Di(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&RA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xo(n){return Gt(n)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=d2(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JA(n){nd=n}function yE(n){return nd.loadJS(n)}function YA(){return nd.recaptchaEnterpriseScript}function XA(){return nd.gapiScript}function ZA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class eP{constructor(){this.enterprise=new tP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const nP="recaptcha-enterprise",vE="NO_RECAPTCHA";class rP{constructor(e){this.type=nP,this.auth=xo(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,h)=>{OA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new DA(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function s(a,u,h){const f=window.grecaptcha;P0(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(vE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eP().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(h=>{if(!t&&P0(window.grecaptcha))s(h,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=YA();f.length!==0&&(f+=h),yE(f).then(()=>{s(h,a,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function O0(n,e,t,r=!1,s=!1){const a=new rP(n);let u;if(s)u=vE;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Yp(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await O0(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await O0(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n,e){const t=km(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Sh(a,e??{}))return s;Mr(s,"already-initialized")}return t.initialize({options:e})}function sP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Di);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oP(n,e,t){const r=xo(n);be(r._canInitEmulator,r,"emulator-config-failed"),be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=_E(e),{host:u,port:h}=aP(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),lP()}function _E(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aP(n){const e=_E(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:L0(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:L0(u)}}}function L0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,t){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}}async function uP(n,e){return $i(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e){return _u(n,"POST","/v1/accounts:signInWithPassword",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(n,e){return _u(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))}async function dP(n,e){return _u(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Lm{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new su(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new su(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,t,"signInWithPassword",cP);case"emailLink":return hP(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,r,"signUpPassword",uP);case"emailLink":return dP(e,{idToken:t,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e){return _u(n,"POST","/v1/accounts:signInWithIdp",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="http://localhost";class Ao extends Lm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=xm(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Ao(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ra(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ra(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ra(e,t)}buildRequest(){const e={requestUri:fP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mP(n){const e=jl(Bl(n)).link,t=e?jl(Bl(e)).deep_link_id:null,r=jl(Bl(n)).deep_link_id;return(r?jl(Bl(r)).link:null)||r||t||e||n}class Mm{constructor(e){var t,r,s,a,u,h;const f=jl(Bl(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,w=pP((s=f.mode)!==null&&s!==void 0?s:null);be(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=mP(e);try{return new Mm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,t){return su._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Mm.parseLink(t);return be(r,"argument-error"),su._fromEmailAndCode(e,r.code,r.tenantId)}}Wa.PROVIDER_ID="password";Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends wE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends wu{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ao._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Is.credential(t,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends wu{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends wu{constructor(){super("twitter.com")}static credential(e,t){return Ao._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Cs.credential(t,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n,e){return _u(n,"POST","/v1/accounts:signUp",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await bi._fromIdTokenResponse(e,r,s),u=M0(r);return new Po({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=M0(r);return new Po({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function M0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends zi{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Ah(e,t,r,s)}}function EE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(n,a,e,r):a})}async function yP(n,e,t=!1){const r=await Na(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Po._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(n,e,t=!1){const{auth:r}=n;if(ti(r.app))return Promise.reject(Oi(r));const s="reauthenticate";try{const a=await Na(n,EE(r,s,e,n),t);be(a.idToken,r,"internal-error");const u=Dm(a.idToken);be(u,r,"internal-error");const{sub:h}=u;return be(n.uid===h,r,"user-mismatch"),Po._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(n,e,t=!1){if(ti(n.app))return Promise.reject(Oi(n));const r="signIn",s=await EE(n,r,e),a=await Po._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function _P(n,e){return TE(xo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(n){const e=xo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IE(n,e,t){if(ti(n.app))return Promise.reject(Oi(n));const r=xo(n),u=await Yp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gP).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&SE(n),f}),h=await Po._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function RE(n,e,t){return ti(n.app)?Promise.reject(Oi(n)):_P(Gt(n),Wa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&SE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(n,e){return $i(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CE(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Gt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Na(r,wP(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function EP(n,e,t,r){return Gt(n).onIdTokenChanged(e,t,r)}function TP(n,e,t){return Gt(n).beforeAuthStateChanged(e,t)}function SP(n,e,t,r){return Gt(n).onAuthStateChanged(e,t,r)}function IP(n){return Gt(n).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=1e3,CP=10;class PE extends AE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);HA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},RP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}PE.type="LOCAL";const AP=PE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends AE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kE.type="SESSION";const xE=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new rd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await PP(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=Vm("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function xP(n){ii().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function NP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DP(){return NE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="firebaseLocalStorageDb",OP=1,kh="firebaseLocalStorage",DE="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(n,e){return n.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function LP(){const n=indexedDB.deleteDatabase(bE);return new Eu(n).toPromise()}function Xp(){const n=indexedDB.open(bE,OP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kh,{keyPath:DE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),await LP(),e(await Xp()))})})}async function V0(n,e,t){const r=id(n,!0).put({[DE]:e,value:t});return new Eu(r).toPromise()}async function MP(n,e){const t=id(n,!1).get(e),r=await new Eu(t).toPromise();return r===void 0?null:r.value}function F0(n,e){const t=id(n,!0).delete(e);return new Eu(t).toPromise()}const VP=800,FP=3;class OE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>FP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(DP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await NP(),!this.activeServiceWorker)return;this.sender=new kP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xp();return await V0(e,Ph,"1"),await F0(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>V0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>MP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>F0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=id(s,!1).getAll();return new Eu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OE.type="LOCAL";const UP=OE;new vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n,e){return e?Di(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends Lm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BP(n){return TE(n.auth,new Fm(n),n.bypassAuthState)}function zP(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),vP(t,new Fm(n),n.bypassAuthState)}async function $P(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),yP(t,new Fm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BP;case"linkViaPopup":case"linkViaRedirect":return $P;case"reauthViaPopup":case"reauthViaRedirect":return zP;default:Mr(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new vu(2e3,1e4);class Ea extends LE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ea.currentPopupAction&&Ea.currentPopupAction.cancel(),Ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HP.get())};e()}}Ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="pendingRedirect",eh=new Map;class qP extends LE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=eh.get(this.auth._key());if(!e){try{const r=await KP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}eh.set(this.auth._key(),e)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KP(n,e){const t=JP(e),r=QP(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function GP(n,e){eh.set(n._key(),e)}function QP(n){return Di(n._redirectPersistence)}function JP(n){return Zc(WP,n.config.apiKey,n.name)}async function YP(n,e,t=!1){if(ti(n.app))return Promise.reject(Oi(n));const r=xo(n),s=jP(r,e),u=await new qP(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=10*60*1e3;class ZP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ek(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ME(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XP&&this.cachedEventUids.clear(),this.cachedEventUids.has(U0(e))}saveEventToCache(e){this.cachedEventUids.add(U0(e)),this.lastProcessedEventTime=Date.now()}}function U0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ME({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ek(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ME(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(n,e={}){return $i(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rk=/^https?/;async function ik(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tk(n);for(const t of e)try{if(sk(t))return}catch{}Mr(n,"unauthorized-domain")}function sk(n){const e=Qp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!rk.test(t))return!1;if(nk.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new vu(3e4,6e4);function j0(){const n=ii().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ak(n){return new Promise((e,t)=>{var r,s,a;function u(){j0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j0(),t(ri(n,"network-request-failed"))},timeout:ok.get()})}if(!((s=(r=ii().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ii().gapi)===null||a===void 0)&&a.load)u();else{const h=ZA("iframefcb");return ii()[h]=()=>{gapi.load?u():t(ri(n,"network-request-failed"))},yE(`${XA()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw th=null,e})}let th=null;function lk(n){return th=th||ak(n),th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new vu(5e3,15e3),ck="__/auth/iframe",hk="emulator/auth/iframe",dk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pk(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bm(e,hk):`https://${n.config.authDomain}/${ck}`,r={apiKey:e.apiKey,appName:n.name,v:Ha},s=fk.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${yu(r).slice(1)}`}async function mk(n){const e=await lk(n),t=ii().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:pk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=ri(n,"network-request-failed"),h=ii().setTimeout(()=>{a(u)},uk.get());function f(){ii().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yk=500,vk=600,_k="_blank",wk="http://localhost";class B0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ek(n,e,t,r=yk,s=vk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},gk),{width:r.toString(),height:s.toString(),top:a,left:u}),m=wn().toLowerCase();t&&(h=cE(m)?_k:t),lE(m)&&(e=e||wk,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[C,R])=>`${T}${C}=${R},`,"");if($A(m)&&h!=="_self")return Tk(e||"",h),new B0(null);const w=window.open(e||"",h,v);be(w,n,"popup-blocked");try{w.focus()}catch{}return new B0(w)}function Tk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="__/auth/handler",Ik="emulator/auth/handler",Rk=encodeURIComponent("fac");async function z0(n,e,t,r,s,a){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ha,eventId:s};if(e instanceof wE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",h2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof wu){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),m=f?`#${Rk}=${encodeURIComponent(f)}`:"";return`${Ck(n)}?${yu(h).slice(1)}${m}`}function Ck({config:n}){return n.emulator?bm(n,Ik):`https://${n.authDomain}/${Sk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="webStorageSupport";class Ak{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xE,this._completeRedirectFn=YP,this._overrideRedirectResult=GP}async _openPopup(e,t,r,s){var a;Fi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await z0(e,t,r,Qp(),s);return Ek(e,u,Vm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await z0(e,t,r,Qp(),s);return xP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Fi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await mk(e),r=new ZP(e);return t.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wp,{type:wp},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[wp];u!==void 0&&t(!!u),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ik(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mE()||uE()||Om()}}const Pk=Ak;var $0="@firebase/auth",H0="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nk(n){xa(new Co("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;be(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gE(n)},m=new QA(r,s,a,f);return sP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xa(new Co("auth-internal",e=>{const t=xo(e.getProvider("auth").getImmediate());return(r=>new kk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ns($0,H0,xk(n)),Ns($0,H0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=5*60,Dk=qw("authIdTokenMaxAge")||bk;let W0=null;const Ok=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Dk)return;const s=t==null?void 0:t.token;W0!==s&&(W0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lk(n=Jw()){const e=km(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iP(n,{popupRedirectResolver:Pk,persistence:[UP,AP,xE]}),r=qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=Ok(a.toString());TP(t,u,()=>u(t.currentUser)),EP(t,h=>u(h))}}const s=Hw("auth");return s&&oP(t,`http://${s}`),t}function Mk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}JA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=ri("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Mk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nk("Browser");var q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eo,VE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function P(){}P.prototype=S.prototype,b.D=S.prototype,b.prototype=new P,b.prototype.constructor=b,b.C=function(O,U,B){for(var k=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)k[ct-2]=arguments[ct];return S.prototype[U].apply(O,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,S,P){P||(P=0);var O=Array(16);if(typeof S=="string")for(var U=0;16>U;++U)O[U]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(U=0;16>U;++U)O[U]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=b.g[0],P=b.g[1],U=b.g[2];var B=b.g[3],k=S+(B^P&(U^B))+O[0]+3614090360&4294967295;S=P+(k<<7&4294967295|k>>>25),k=B+(U^S&(P^U))+O[1]+3905402710&4294967295,B=S+(k<<12&4294967295|k>>>20),k=U+(P^B&(S^P))+O[2]+606105819&4294967295,U=B+(k<<17&4294967295|k>>>15),k=P+(S^U&(B^S))+O[3]+3250441966&4294967295,P=U+(k<<22&4294967295|k>>>10),k=S+(B^P&(U^B))+O[4]+4118548399&4294967295,S=P+(k<<7&4294967295|k>>>25),k=B+(U^S&(P^U))+O[5]+1200080426&4294967295,B=S+(k<<12&4294967295|k>>>20),k=U+(P^B&(S^P))+O[6]+2821735955&4294967295,U=B+(k<<17&4294967295|k>>>15),k=P+(S^U&(B^S))+O[7]+4249261313&4294967295,P=U+(k<<22&4294967295|k>>>10),k=S+(B^P&(U^B))+O[8]+1770035416&4294967295,S=P+(k<<7&4294967295|k>>>25),k=B+(U^S&(P^U))+O[9]+2336552879&4294967295,B=S+(k<<12&4294967295|k>>>20),k=U+(P^B&(S^P))+O[10]+4294925233&4294967295,U=B+(k<<17&4294967295|k>>>15),k=P+(S^U&(B^S))+O[11]+2304563134&4294967295,P=U+(k<<22&4294967295|k>>>10),k=S+(B^P&(U^B))+O[12]+1804603682&4294967295,S=P+(k<<7&4294967295|k>>>25),k=B+(U^S&(P^U))+O[13]+4254626195&4294967295,B=S+(k<<12&4294967295|k>>>20),k=U+(P^B&(S^P))+O[14]+2792965006&4294967295,U=B+(k<<17&4294967295|k>>>15),k=P+(S^U&(B^S))+O[15]+1236535329&4294967295,P=U+(k<<22&4294967295|k>>>10),k=S+(U^B&(P^U))+O[1]+4129170786&4294967295,S=P+(k<<5&4294967295|k>>>27),k=B+(P^U&(S^P))+O[6]+3225465664&4294967295,B=S+(k<<9&4294967295|k>>>23),k=U+(S^P&(B^S))+O[11]+643717713&4294967295,U=B+(k<<14&4294967295|k>>>18),k=P+(B^S&(U^B))+O[0]+3921069994&4294967295,P=U+(k<<20&4294967295|k>>>12),k=S+(U^B&(P^U))+O[5]+3593408605&4294967295,S=P+(k<<5&4294967295|k>>>27),k=B+(P^U&(S^P))+O[10]+38016083&4294967295,B=S+(k<<9&4294967295|k>>>23),k=U+(S^P&(B^S))+O[15]+3634488961&4294967295,U=B+(k<<14&4294967295|k>>>18),k=P+(B^S&(U^B))+O[4]+3889429448&4294967295,P=U+(k<<20&4294967295|k>>>12),k=S+(U^B&(P^U))+O[9]+568446438&4294967295,S=P+(k<<5&4294967295|k>>>27),k=B+(P^U&(S^P))+O[14]+3275163606&4294967295,B=S+(k<<9&4294967295|k>>>23),k=U+(S^P&(B^S))+O[3]+4107603335&4294967295,U=B+(k<<14&4294967295|k>>>18),k=P+(B^S&(U^B))+O[8]+1163531501&4294967295,P=U+(k<<20&4294967295|k>>>12),k=S+(U^B&(P^U))+O[13]+2850285829&4294967295,S=P+(k<<5&4294967295|k>>>27),k=B+(P^U&(S^P))+O[2]+4243563512&4294967295,B=S+(k<<9&4294967295|k>>>23),k=U+(S^P&(B^S))+O[7]+1735328473&4294967295,U=B+(k<<14&4294967295|k>>>18),k=P+(B^S&(U^B))+O[12]+2368359562&4294967295,P=U+(k<<20&4294967295|k>>>12),k=S+(P^U^B)+O[5]+4294588738&4294967295,S=P+(k<<4&4294967295|k>>>28),k=B+(S^P^U)+O[8]+2272392833&4294967295,B=S+(k<<11&4294967295|k>>>21),k=U+(B^S^P)+O[11]+1839030562&4294967295,U=B+(k<<16&4294967295|k>>>16),k=P+(U^B^S)+O[14]+4259657740&4294967295,P=U+(k<<23&4294967295|k>>>9),k=S+(P^U^B)+O[1]+2763975236&4294967295,S=P+(k<<4&4294967295|k>>>28),k=B+(S^P^U)+O[4]+1272893353&4294967295,B=S+(k<<11&4294967295|k>>>21),k=U+(B^S^P)+O[7]+4139469664&4294967295,U=B+(k<<16&4294967295|k>>>16),k=P+(U^B^S)+O[10]+3200236656&4294967295,P=U+(k<<23&4294967295|k>>>9),k=S+(P^U^B)+O[13]+681279174&4294967295,S=P+(k<<4&4294967295|k>>>28),k=B+(S^P^U)+O[0]+3936430074&4294967295,B=S+(k<<11&4294967295|k>>>21),k=U+(B^S^P)+O[3]+3572445317&4294967295,U=B+(k<<16&4294967295|k>>>16),k=P+(U^B^S)+O[6]+76029189&4294967295,P=U+(k<<23&4294967295|k>>>9),k=S+(P^U^B)+O[9]+3654602809&4294967295,S=P+(k<<4&4294967295|k>>>28),k=B+(S^P^U)+O[12]+3873151461&4294967295,B=S+(k<<11&4294967295|k>>>21),k=U+(B^S^P)+O[15]+530742520&4294967295,U=B+(k<<16&4294967295|k>>>16),k=P+(U^B^S)+O[2]+3299628645&4294967295,P=U+(k<<23&4294967295|k>>>9),k=S+(U^(P|~B))+O[0]+4096336452&4294967295,S=P+(k<<6&4294967295|k>>>26),k=B+(P^(S|~U))+O[7]+1126891415&4294967295,B=S+(k<<10&4294967295|k>>>22),k=U+(S^(B|~P))+O[14]+2878612391&4294967295,U=B+(k<<15&4294967295|k>>>17),k=P+(B^(U|~S))+O[5]+4237533241&4294967295,P=U+(k<<21&4294967295|k>>>11),k=S+(U^(P|~B))+O[12]+1700485571&4294967295,S=P+(k<<6&4294967295|k>>>26),k=B+(P^(S|~U))+O[3]+2399980690&4294967295,B=S+(k<<10&4294967295|k>>>22),k=U+(S^(B|~P))+O[10]+4293915773&4294967295,U=B+(k<<15&4294967295|k>>>17),k=P+(B^(U|~S))+O[1]+2240044497&4294967295,P=U+(k<<21&4294967295|k>>>11),k=S+(U^(P|~B))+O[8]+1873313359&4294967295,S=P+(k<<6&4294967295|k>>>26),k=B+(P^(S|~U))+O[15]+4264355552&4294967295,B=S+(k<<10&4294967295|k>>>22),k=U+(S^(B|~P))+O[6]+2734768916&4294967295,U=B+(k<<15&4294967295|k>>>17),k=P+(B^(U|~S))+O[13]+1309151649&4294967295,P=U+(k<<21&4294967295|k>>>11),k=S+(U^(P|~B))+O[4]+4149444226&4294967295,S=P+(k<<6&4294967295|k>>>26),k=B+(P^(S|~U))+O[11]+3174756917&4294967295,B=S+(k<<10&4294967295|k>>>22),k=U+(S^(B|~P))+O[2]+718787259&4294967295,U=B+(k<<15&4294967295|k>>>17),k=P+(B^(U|~S))+O[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+U&4294967295,b.g[3]=b.g[3]+B&4294967295}r.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var P=S-this.blockSize,O=this.B,U=this.h,B=0;B<S;){if(U==0)for(;B<=P;)s(this,b,B),B+=this.blockSize;if(typeof b=="string"){for(;B<S;)if(O[U++]=b.charCodeAt(B++),U==this.blockSize){s(this,O),U=0;break}}else for(;B<S;)if(O[U++]=b[B++],U==this.blockSize){s(this,O),U=0;break}}this.h=U,this.o+=S},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var P=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=P&255,P/=256;for(this.u(b),b=Array(16),S=P=0;4>S;++S)for(var O=0;32>O;O+=8)b[P++]=this.g[S]>>>O&255;return b};function a(b,S){var P=h;return Object.prototype.hasOwnProperty.call(P,b)?P[b]:P[b]=S(b)}function u(b,S){this.h=S;for(var P=[],O=!0,U=b.length-1;0<=U;U--){var B=b[U]|0;O&&B==S||(P[U]=B,O=!1)}this.g=P}var h={};function f(b){return-128<=b&&128>b?a(b,function(S){return new u([S|0],0>S?-1:0)}):new u([b|0],0>b?-1:0)}function m(b){if(isNaN(b)||!isFinite(b))return w;if(0>b)return A(m(-b));for(var S=[],P=1,O=0;b>=P;O++)S[O]=b/P|0,P*=4294967296;return new u(S,0)}function v(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return A(v(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(S,8)),O=w,U=0;U<b.length;U+=8){var B=Math.min(8,b.length-U),k=parseInt(b.substring(U,U+B),S);8>B?(B=m(Math.pow(S,B)),O=O.j(B).add(m(k))):(O=O.j(P),O=O.add(m(k)))}return O}var w=f(0),T=f(1),C=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-A(this).m();for(var b=0,S=1,P=0;P<this.g.length;P++){var O=this.i(P);b+=(0<=O?O:4294967296+O)*S,S*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(D(this))return"-"+A(this).toString(b);for(var S=m(Math.pow(b,6)),P=this,O="";;){var U=ne(P,S).g;P=F(P,U.j(S));var B=((0<P.g.length?P.g[0]:P.h)>>>0).toString(b);if(P=U,R(P))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function D(b){return b.h==-1}n.l=function(b){return b=F(this,b),D(b)?-1:R(b)?0:1};function A(b){for(var S=b.g.length,P=[],O=0;O<S;O++)P[O]=~b.g[O];return new u(P,~b.h).add(T)}n.abs=function(){return D(this)?A(this):this},n.add=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0,U=0;U<=S;U++){var B=O+(this.i(U)&65535)+(b.i(U)&65535),k=(B>>>16)+(this.i(U)>>>16)+(b.i(U)>>>16);O=k>>>16,B&=65535,k&=65535,P[U]=k<<16|B}return new u(P,P[P.length-1]&-2147483648?-1:0)};function F(b,S){return b.add(A(S))}n.j=function(b){if(R(this)||R(b))return w;if(D(this))return D(b)?A(this).j(A(b)):A(A(this).j(b));if(D(b))return A(this.j(A(b)));if(0>this.l(C)&&0>b.l(C))return m(this.m()*b.m());for(var S=this.g.length+b.g.length,P=[],O=0;O<2*S;O++)P[O]=0;for(O=0;O<this.g.length;O++)for(var U=0;U<b.g.length;U++){var B=this.i(O)>>>16,k=this.i(O)&65535,ct=b.i(U)>>>16,Je=b.i(U)&65535;P[2*O+2*U]+=k*Je,Q(P,2*O+2*U),P[2*O+2*U+1]+=B*Je,Q(P,2*O+2*U+1),P[2*O+2*U+1]+=k*ct,Q(P,2*O+2*U+1),P[2*O+2*U+2]+=B*ct,Q(P,2*O+2*U+2)}for(O=0;O<S;O++)P[O]=P[2*O+1]<<16|P[2*O];for(O=S;O<2*S;O++)P[O]=0;return new u(P,0)};function Q(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function G(b,S){this.g=b,this.h=S}function ne(b,S){if(R(S))throw Error("division by zero");if(R(b))return new G(w,w);if(D(b))return S=ne(A(b),S),new G(A(S.g),A(S.h));if(D(S))return S=ne(b,A(S)),new G(A(S.g),S.h);if(30<b.g.length){if(D(b)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var P=T,O=S;0>=O.l(b);)P=L(P),O=L(O);var U=re(P,1),B=re(O,1);for(O=re(O,2),P=re(P,2);!R(O);){var k=B.add(O);0>=k.l(b)&&(U=U.add(P),B=k),O=re(O,1),P=re(P,1)}return S=F(b,U.j(S)),new G(U,S)}for(U=w;0<=b.l(S);){for(P=Math.max(1,Math.floor(b.m()/S.m())),O=Math.ceil(Math.log(P)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=m(P),k=B.j(S);D(k)||0<k.l(b);)P-=O,B=m(P),k=B.j(S);R(B)&&(B=T),U=U.add(B),b=F(b,k)}return new G(U,b)}n.A=function(b){return ne(this,b).h},n.and=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0;O<S;O++)P[O]=this.i(O)&b.i(O);return new u(P,this.h&b.h)},n.or=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0;O<S;O++)P[O]=this.i(O)|b.i(O);return new u(P,this.h|b.h)},n.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0;O<S;O++)P[O]=this.i(O)^b.i(O);return new u(P,this.h^b.h)};function L(b){for(var S=b.g.length+1,P=[],O=0;O<S;O++)P[O]=b.i(O)<<1|b.i(O-1)>>>31;return new u(P,b.h)}function re(b,S){var P=S>>5;S%=32;for(var O=b.g.length-P,U=[],B=0;B<O;B++)U[B]=0<S?b.i(B+P)>>>S|b.i(B+P+1)<<32-S:b.i(B+P);return new u(U,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Eo=u}).apply(typeof q0<"u"?q0:typeof self<"u"?self:typeof window<"u"?window:{});var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FE,zl,UE,nh,Zp,jE,BE,zE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jc=="object"&&jc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var H=c[I];if(!(H in _))break e;_=_[H]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,I=!1,H={next:function(){if(!I&&_<c.length){var X=_++;return{value:g(X,c[X]),done:!1}}return I=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,I),c.apply(g,H)}}return function(){return c.apply(g,arguments)}}function T(c,g,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function C(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function R(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,H,X){for(var de=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)de[dt-2]=arguments[dt];return g.prototype[H].apply(I,de)}}function D(c){const g=c.length;if(0<g){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function A(c,g){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(f(I)){const H=c.length||0,X=I.length||0;c.length=H+X;for(let de=0;de<X;de++)c[H+de]=I[de]}else c.push(I)}}class F{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var L=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function re(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function b(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(_ in I)c[_]=I[_];for(let X=0;X<P.length;X++)_=P[X],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function U(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function B(c){h.setTimeout(()=>{throw c},0)}function k(){var c=Se;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ct{constructor(){this.h=this.g=null}add(g,_){const I=Je.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Je=new F(()=>new kt,c=>c.reset());class kt{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,ce=!1,Se=new ct,fe=()=>{const c=h.Promise.resolve(void 0);Ye=()=>{c.then(z)}};var z=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(_){B(_)}var g=Je;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ce=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return c}();function Le(c,g){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(L){e:{try{ne(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:$e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Le.aa.h.call(this)}}R(Le,Ee);var $e={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),nt=0;function Ue(c,g,_,I,H){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=H,this.key=++nt,this.da=this.fa=!1}function mt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ir(c){this.src=c,this.g={},this.h=0}ir.prototype.add=function(c,g,_,I,H){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var de=un(c,g,I,H);return-1<de?(g=c[de],_||(g.fa=!1)):(g=new Ue(g,this.src,X,!!I,H),g.fa=_,c.push(g)),g};function Hi(c,g){var _=g.type;if(_ in c.g){var I=c.g[_],H=Array.prototype.indexOf.call(I,g,void 0),X;(X=0<=H)&&Array.prototype.splice.call(I,H,1),X&&(mt(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function un(c,g,_,I){for(var H=0;H<c.length;++H){var X=c[H];if(!X.da&&X.listener==g&&X.capture==!!_&&X.ha==I)return H}return-1}var di="closure_lm_"+(1e6*Math.random()|0),Wi={};function qi(c,g,_,I,H){if(Array.isArray(g)){for(var X=0;X<g.length;X++)qi(c,g[X],_,I,H);return null}return _=Cn(_),c&&c[tt]?c.K(g,_,m(I)?!!I.capture:!!I,H):Ws(c,g,_,!1,I,H)}function Ws(c,g,_,I,H,X){if(!g)throw Error("Invalid event type");var de=m(H)?!!H.capture:!!H,dt=fi(c);if(dt||(c[di]=dt=new ir(c)),_=dt.add(g,_,I,de,X),_.proxy)return _;if(I=Lo(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Ve||(H=de),H===void 0&&(H=!1),c.addEventListener(g.toString(),I,H);else if(c.attachEvent)c.attachEvent(Qt(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Lo(){function c(_){return g.call(c.src,c.listener,_)}const g=mr;return c}function Ki(c,g,_,I,H){if(Array.isArray(g))for(var X=0;X<g.length;X++)Ki(c,g[X],_,I,H);else I=m(I)?!!I.capture:!!I,_=Cn(_),c&&c[tt]?(c=c.i,g=String(g).toString(),g in c.g&&(X=c.g[g],_=un(X,_,I,H),-1<_&&(mt(X[_]),Array.prototype.splice.call(X,_,1),X.length==0&&(delete c.g[g],c.h--)))):c&&(c=fi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=un(g,_,I,H)),(_=-1<c?g[c]:null)&&pr(_))}function pr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[tt])Hi(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(Qt(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=fi(g))?(Hi(_,c),_.h==0&&(_.src=null,g[di]=null)):mt(c)}}}function Qt(c){return c in Wi?Wi[c]:Wi[c]="on"+c}function mr(c,g){if(c.da)c=!0;else{g=new Le(g,this);var _=c.listener,I=c.ha||c.src;c.fa&&pr(c),c=_.call(I,g)}return c}function fi(c){return c=c[di],c instanceof ir?c:null}var jr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cn(c){return typeof c=="function"?c:(c[jr]||(c[jr]=function(g){return c.handleEvent(g)}),c[jr])}function ht(){ee.call(this),this.i=new ir(this),this.M=this,this.F=null}R(ht,ee),ht.prototype[tt]=!0,ht.prototype.removeEventListener=function(c,g,_,I){Ki(this,c,g,_,I)};function Ct(c,g){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new Ee(g,c);else if(g instanceof Ee)g.target=g.target||c;else{var H=g;g=new Ee(I,c),O(g,H)}if(H=!0,_)for(var X=_.length-1;0<=X;X--){var de=g.g=_[X];H=zn(de,I,!0,g)&&H}if(de=g.g=c,H=zn(de,I,!0,g)&&H,H=zn(de,I,!1,g)&&H,_)for(X=0;X<_.length;X++)de=g.g=_[X],H=zn(de,I,!1,g)&&H}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],I=0;I<_.length;I++)mt(_[I]);delete c.g[g],c.h--}}this.F=null},ht.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},ht.prototype.L=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function zn(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,X=0;X<g.length;++X){var de=g[X];if(de&&!de.da&&de.capture==_){var dt=de.listener,Mt=de.ha||de.src;de.fa&&Hi(c.i,de),H=dt.call(Mt,I)!==!1&&H}}return H&&!I.defaultPrevented}function qs(c,g,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Jt(c){c.g=qs(()=>{c.g=null,c.i&&(c.i=!1,Jt(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Br extends ee{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Jt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(c){ee.call(this),this.h=c,this.g={}}R(zr,ee);var Gi=[];function Ks(c){re(c.g,function(g,_){this.g.hasOwnProperty(_)&&pr(g)},c),c.g={}}zr.prototype.N=function(){zr.aa.N.call(this),Ks(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qi=h.JSON.stringify,$r=h.JSON.parse,Ji=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function gr(){}gr.prototype.h=null;function Yi(c){return c.h||(c.h=c.i())}function pi(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $n(){Ee.call(this,"d")}R($n,Ee);function yr(){Ee.call(this,"c")}R(yr,Ee);var En={},Gs=null;function mi(){return Gs=Gs||new ht}En.La="serverreachability";function V(c){Ee.call(this,En.La,c)}R(V,Ee);function $(c){const g=mi();Ct(g,new V(g))}En.STAT_EVENT="statevent";function Y(c,g){Ee.call(this,En.STAT_EVENT,c),this.stat=g}R(Y,Ee);function te(c){const g=mi();Ct(g,new Y(g,c))}En.Ma="timingevent";function pe(c,g){Ee.call(this,En.Ma,c),this.size=g}R(pe,Ee);function ve(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function me(c,g,_,I,H,X){c.info(function(){if(c.g)if(X)for(var de="",dt=X.split("&"),Mt=0;Mt<dt.length;Mt++){var Ze=dt[Mt].split("=");if(1<Ze.length){var zt=Ze[0];Ze=Ze[1];var bt=zt.split("_");de=2<=bt.length&&bt[1]=="type"?de+(zt+"="+Ze+"&"):de+(zt+"=redacted&")}}else de=null;else de=X;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+g+`
`+_+`
`+de})}function we(c,g,_,I,H,X,de){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+g+`
`+_+`
`+X+" "+de})}function he(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+je(c,_)+(I?" "+I:"")})}function Ne(c,g){c.info(function(){return"TIMEOUT: "+g})}Ae.prototype.info=function(){};function je(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var H=I[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if(X!="noop"&&X!="stop"&&X!="close")for(var de=1;de<H.length;de++)H[de]=""}}}}return Qi(_)}catch{return g}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},At={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qe;function rt(){}R(rt,gr),rt.prototype.g=function(){return new XMLHttpRequest},rt.prototype.i=function(){return{}},qe=new rt;function at(c,g,_,I){this.j=c,this.i=g,this.l=_,this.R=I||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vr}function vr(){this.i=null,this.g="",this.h=!1}var _r={},cn={};function Yt(c,g,_){c.L=1,c.v=ts(Hn(g)),c.m=_,c.P=!0,gi(c,null)}function gi(c,g){c.F=Date.now(),lt(c),c.A=Hn(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),rs(_.i,"t",I),c.C=0,_=c.j.J,c.h=new vr,c.g=zu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Br(T(c.Y,c,c.g),c.O)),g=c.U,_=c.g,I=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(Gi[0]=H.toString()),H=Gi);for(var X=0;X<H.length;X++){var de=qi(_,H[X],I||g.handleEvent,!1,g.h||g);if(!de)break;g.g[de.key]=de}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),$(),me(c.i,c.u,c.A,c.l,c.R,c.m)}at.prototype.ca=function(c){c=c.target;const g=this.M;g&&xn(c)==3?g.j():this.Y(c)},at.prototype.Y=function(c){try{if(c==this.g)e:{const bt=xn(this.g);var g=this.g.Ba();const or=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||sl(this.g)))){this.J||bt!=4||g==7||(g==8||0>=or?$(3):$(2)),Xe(this);var _=this.g.Z();this.X=_;t:if(Hr(this)){var I=sl(this.g);c="";var H=I.length,X=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xt(this),gt(this);var de="";break t}this.h.i=new h.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(X&&g==H-1)});I.length=0,this.h.g+=c,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=_==200,we(this.i,this.u,this.A,this.l,this.R,bt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Mt=this.g;if((dt=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(dt)){var Ze=dt;break t}}Ze=null}if(_=Ze)he(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Er(this,_);else{this.o=!1,this.s=3,te(12),Xt(this),gt(this);break e}}if(this.P){_=!0;let qn;for(;!this.J&&this.C<de.length;)if(qn=wr(this,de),qn==cn){bt==4&&(this.s=4,te(14),_=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==_r){this.s=4,te(15),he(this.i,this.l,de,"[Invalid Chunk]"),_=!1;break}else he(this.i,this.l,qn,null),Er(this,qn);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||de.length!=0||this.h.h||(this.s=1,te(16),_=!1),this.o=this.o&&_,!_)he(this.i,this.l,de,"[Invalid Chunked Response]"),Xt(this),gt(this);else if(0<de.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),al(zt),zt.M=!0,te(11))}}else he(this.i,this.l,de,null),Er(this,de);bt==4&&Xt(this),this.o&&!this.J&&(bt==4?Ko(this.j,this):(this.o=!1,lt(this)))}else zo(this.g),_==400&&0<de.indexOf("Unknown SID")?(this.s=3,te(12)):(this.s=0,te(13)),Xt(this),gt(this)}}}catch{}finally{}};function Hr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wr(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?cn:(_=Number(g.substring(_,I)),isNaN(_)?_r:(I+=1,I+_>g.length?cn:(g=g.slice(I,I+_),c.C=I+_,g)))}at.prototype.cancel=function(){this.J=!0,Xt(this)};function lt(c){c.S=Date.now()+c.I,yi(c,c.I)}function yi(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ve(T(c.ba,c),g)}function Xe(c){c.B&&(h.clearTimeout(c.B),c.B=null)}at.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ne(this.i,this.A),this.L!=2&&($(),te(17)),Xt(this),this.s=2,gt(this)):yi(this,this.S-c)};function gt(c){c.j.G==0||c.J||Ko(c.j,c)}function Xt(c){Xe(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ks(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Er(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Tn(_.h,c))){if(!c.K&&Tn(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)qo(_),Cr(_);else break e;Wo(_),te(18)}}else _.za=H[1],0<_.za-_.T&&37500>H[2]&&_.F&&_.v==0&&!_.C&&(_.C=ve(T(_.Za,_),6e3));if(1>=Mo(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ti(_,11)}else if((c.K||_.g==c)&&qo(_),!Q(g))for(H=_.Da.g.parse(g),g=0;g<H.length;g++){let Ze=H[g];if(_.T=Ze[0],Ze=Ze[1],_.G==2)if(Ze[0]=="c"){_.K=Ze[1],_.ia=Ze[2];const zt=Ze[3];zt!=null&&(_.la=zt,_.j.info("VER="+_.la));const bt=Ze[4];bt!=null&&(_.Aa=bt,_.j.info("SVER="+_.Aa));const or=Ze[5];or!=null&&typeof or=="number"&&0<or&&(I=1.5*or,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const qn=c.g;if(qn){const eo=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var X=I.h;X.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(tl(X,X.h),X.h=null))}if(I.D){const Qo=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(I.ya=Qo,ft(I.I,I.D,Qo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var de=c;if(I.qa=Bu(I,I.J?I.ia:null,I.W),de.K){ku(I.h,de);var dt=de,Mt=I.L;Mt&&(dt.I=Mt),dt.B&&(Xe(dt),lt(dt)),I.g=de}else Zs(I);0<_.i.length&&Gr(_)}else Ze[0]!="stop"&&Ze[0]!="close"||Ti(_,7);else _.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Ti(_,7):en(_):Ze[0]!="noop"&&_.l&&_.l.ta(Ze),_.v=0)}}$(4)}catch{}}var yt=class{constructor(c,g){this.g=c,this.map=g}};function Pn(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Mo(c){return c.h?1:c.g?c.g.size:0}function Tn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function tl(c,g){c.g?c.g.add(g):c.h=g}function ku(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Pn.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function xu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return D(c.i)}function Vo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,I=0;I<_;I++)g.push(c[I]);return g}g=[],_=0;for(I in c)g[_++]=c[I];return g}function Fo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const I in c)g[_++]=I;return g}}}function Xi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Fo(c),I=Vo(c),H=I.length,X=0;X<H;X++)g.call(void 0,I[X],_&&_[X],c)}var Qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ad(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),H=null;if(0<=I){var X=c[_].substring(0,I);H=c[_].substring(I+1)}else X=c[_];g(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function vi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vi){this.h=c.h,Js(this,c.j),this.o=c.o,this.g=c.g,Zi(this,c.s),this.l=c.l;var g=c.i,_=new Wr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),es(this,_),this.m=c.m}else c&&(g=String(c).match(Qs))?(this.h=!1,Js(this,g[1]||"",!0),this.o=Ke(g[2]||""),this.g=Ke(g[3]||"",!0),Zi(this,g[4]),this.l=Ke(g[5]||"",!0),es(this,g[6]||"",!0),this.m=Ke(g[7]||"")):(this.h=!1,this.i=new Wr(null,this.h))}vi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ns(g,Uo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ns(g,Uo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ns(_,_.charAt(0)=="/"?Du:bu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ns(_,nl)),c.join("")};function Hn(c){return new vi(c)}function Js(c,g,_){c.j=_?Ke(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Zi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function es(c,g,_){g instanceof Wr?(c.i=g,qr(c.i,c.h)):(_||(g=ns(g,Ou)),c.i=new Wr(g,c.h))}function ft(c,g,_){c.i.set(g,_)}function ts(c){return ft(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ke(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ns(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Nu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Nu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Uo=/[#\/\?@]/g,bu=/[#\?:]/g,Du=/[#\?]/g,Ou=/[#\?@]/g,nl=/#/g;function Wr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Zt(c){c.g||(c.g=new Map,c.h=0,c.i&&Ad(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Wr.prototype,n.add=function(c,g){Zt(this),this.i=null,c=sr(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Tr(c,g){Zt(c),g=sr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Sr(c,g){return Zt(c),g=sr(c,g),c.g.has(g)}n.forEach=function(c,g){Zt(this),this.g.forEach(function(_,I){_.forEach(function(H){c.call(g,H,I,this)},this)},this)},n.na=function(){Zt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let I=0;I<g.length;I++){const H=c[I];for(let X=0;X<H.length;X++)_.push(g[I])}return _},n.V=function(c){Zt(this);let g=[];if(typeof c=="string")Sr(this,c)&&(g=g.concat(this.g.get(sr(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return Zt(this),this.i=null,c=sr(this,c),Sr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function rs(c,g,_){Tr(c,g),0<_.length&&(c.i=null,c.g.set(sr(c,g),D(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var I=g[_];const X=encodeURIComponent(String(I)),de=this.V(I);for(I=0;I<de.length;I++){var H=X;de[I]!==""&&(H+="="+encodeURIComponent(String(de[I]))),c.push(H)}}return this.i=c.join("&")};function sr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function qr(c,g){g&&!c.j&&(Zt(c),c.i=null,c.g.forEach(function(_,I){var H=I.toLowerCase();I!=H&&(Tr(this,I),rs(this,H,_))},c)),c.j=g}function Pd(c,g){const _=new Ae;if(h.Image){const I=new Image;I.onload=C(kn,_,"TestLoadImage: loaded",!0,g,I),I.onerror=C(kn,_,"TestLoadImage: error",!1,g,I),I.onabort=C(kn,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=C(kn,_,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function Lu(c,g){const _=new Ae,I=new AbortController,H=setTimeout(()=>{I.abort(),kn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(X=>{clearTimeout(H),X.ok?kn(_,"TestPingServer: ok",!0,g):kn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),kn(_,"TestPingServer: error",!1,g)})}function kn(c,g,_,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(_)}catch{}}function kd(){this.g=new Ji}function Mu(c,g,_){const I=_||"";try{Xi(c,function(H,X){let de=H;m(H)&&(de=Qi(H)),g.push(I+X+"="+encodeURIComponent(de))})}catch(H){throw g.push(I+"type="+encodeURIComponent("_badmap")),H}}function _i(c){this.l=c.Ub||null,this.j=c.eb||!1}R(_i,gr),_i.prototype.g=function(){return new Ys(this.l,this.j)},_i.prototype.i=function(c){return function(){return c}}({});function Ys(c,g){ht.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ys,ht),n=Ys.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Rr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ir(this):Rr(this),this.readyState==3&&Vu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ir(this))},n.Qa=function(c){this.g&&(this.response=c,Ir(this))},n.ga=function(){this.g&&Ir(this)};function Ir(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Rr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Rr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wi(c){let g="";return re(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function is(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=wi(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):ft(c,g,_))}function wt(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(wt,ht);var xd=/^https?$/i,rl=["POST","PUT"];n=wt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qe.g(),this.v=this.o?Yi(this.o):Yi(qe),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(X){Xs(this,X);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)_.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const X of I.keys())_.set(X,I.get(X));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(rl,g,void 0))||I||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of _)this.g.setRequestHeader(X,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bo(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){Xs(this,X)}};function Xs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,jo(c),Wn(c)}function jo(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),Wn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wn(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?il(this):this.bb())},n.bb=function(){il(this)};function il(c){if(c.h&&typeof u<"u"&&(!c.v[1]||xn(c)!=4||c.Z()!=2)){if(c.u&&xn(c)==4)qs(c.Ea,0,c);else if(Ct(c,"readystatechange"),xn(c)==4){c.h=!1;try{const de=c.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=de===0){var H=String(c.D).match(Qs)[1]||null;!H&&h.self&&h.self.location&&(H=h.self.location.protocol.slice(0,-1)),I=!xd.test(H?H.toLowerCase():"")}_=I}if(_)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var X=2<xn(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",jo(c)}}finally{Wn(c)}}}}function Wn(c,g){if(c.g){Bo(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ct(c,"ready");try{_.onreadystatechange=I}catch{}}}function Bo(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function xn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),$r(g)}};function sl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zo(c){const g={};c=(c.g&&2<=xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(Q(c[I]))continue;var _=U(c[I]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=g[H]||[];g[H]=X,X.push(_)}b(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ol(c){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kr("baseRetryDelayMs",5e3,c),this.cb=Kr("retryDelaySeedMs",1e4,c),this.Wa=Kr("forwardChannelMaxRetries",2,c),this.wa=Kr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Pn(c&&c.concurrentRequestLimit),this.Da=new kd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ol.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,I){te(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=Bu(this,null,this.W),Gr(this)};function en(c){if($o(c),c.G==3){var g=c.U++,_=Hn(c.I);if(ft(_,"SID",c.K),ft(_,"RID",g),ft(_,"TYPE","terminate"),Ei(c,_),g=new at(c,c.j,g),g.L=2,g.v=ts(Hn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.v,_=!0),_||(g.g=zu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),lt(g)}ju(c)}function Cr(c){c.g&&(al(c),c.g.cancel(),c.g=null)}function $o(c){Cr(c),c.u&&(h.clearTimeout(c.u),c.u=null),qo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function Gr(c){if(!hn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Ye||fe(),ce||(Ye(),ce=!0),Se.add(g,c),c.B=0}}function Nd(c,g){return Mo(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ve(T(c.Ga,c,g),Uu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new at(this,this.j,c);let X=this.o;if(this.S&&(X?(X=S(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(H.H=X,X=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ss(this,H,g),_=Hn(this.I),ft(_,"RID",c),ft(_,"CVER",22),this.D&&ft(_,"X-HTTP-Session-Id",this.D),Ei(this,_),X&&(this.O?g="headers="+encodeURIComponent(String(wi(X)))+"&"+g:this.m&&is(_,this.m,X)),tl(this.h,H),this.Ua&&ft(_,"TYPE","init"),this.P?(ft(_,"$req",g),ft(_,"SID","null"),H.T=!0,Yt(H,_,null)):Yt(H,_,g),this.G=2}}else this.G==3&&(c?Ho(this,c):this.i.length==0||hn(this.h)||Ho(this))};function Ho(c,g){var _;g?_=g.l:_=c.U++;const I=Hn(c.I);ft(I,"SID",c.K),ft(I,"RID",_),ft(I,"AID",c.T),Ei(c,I),c.m&&c.o&&is(I,c.m,c.o),_=new at(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ss(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),tl(c.h,_),Yt(_,I,g)}function Ei(c,g){c.H&&re(c.H,function(_,I){ft(g,I,_)}),c.l&&Xi({},function(_,I){ft(g,I,_)})}function ss(c,g,_){_=Math.min(c.i.length,_);var I=c.l?T(c.l.Na,c.l,c):null;e:{var H=c.i;let X=-1;for(;;){const de=["count="+_];X==-1?0<_?(X=H[0].g,de.push("ofs="+X)):X=0:de.push("ofs="+X);let dt=!0;for(let Mt=0;Mt<_;Mt++){let Ze=H[Mt].g;const zt=H[Mt].map;if(Ze-=X,0>Ze)X=Math.max(0,H[Mt].g-100),dt=!1;else try{Mu(zt,de,"req"+Ze+"_")}catch{I&&I(zt)}}if(dt){I=de.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,I}function Zs(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Ye||fe(),ce||(Ye(),ce=!0),Se.add(g,c),c.v=0}}function Wo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ve(T(c.Fa,c),Uu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ve(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,te(10),Cr(this),Fu(this))};function al(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Fu(c){c.g=new at(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Hn(c.qa);ft(g,"RID","rpc"),ft(g,"SID",c.K),ft(g,"AID",c.T),ft(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&ft(g,"TO",c.ja),ft(g,"TYPE","xmlhttp"),Ei(c,g),c.m&&c.o&&is(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ts(Hn(g)),_.m=null,_.P=!0,gi(_,c)}n.Za=function(){this.C!=null&&(this.C=null,Cr(this),Wo(this),te(19))};function qo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Ko(c,g){var _=null;if(c.g==g){qo(c),al(c),c.g=null;var I=2}else if(Tn(c.h,g))_=g.D,ku(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var H=c.B;I=mi(),Ct(I,new pe(I,_)),Gr(c)}else Zs(c);else if(H=g.s,H==3||H==0&&0<g.X||!(I==1&&Nd(c,g)||I==2&&Wo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),H){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function Uu(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Ti(c,g){if(c.j.info("Error code "+g),g==2){var _=T(c.fb,c),I=c.Xa;const H=!I;I=new vi(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Js(I,"https"),ts(I),H?Pd(I.toString(),_):Lu(I.toString(),_)}else te(2);c.G=0,c.l&&c.l.sa(g),ju(c),$o(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),te(2)):(this.j.info("Failed to ping google.com"),te(1))};function ju(c){if(c.G=0,c.ka=[],c.l){const g=xu(c.h);(g.length!=0||c.i.length!=0)&&(A(c.ka,g),A(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function Bu(c,g,_){var I=_ instanceof vi?Hn(_):new vi(_);if(I.g!="")g&&(I.g=g+"."+I.g),Zi(I,I.s);else{var H=h.location;I=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var X=new vi(null);I&&Js(X,I),g&&(X.g=g),H&&Zi(X,H),_&&(X.l=_),I=X}return _=c.D,g=c.ya,_&&g&&ft(I,_,g),ft(I,"VER",c.la),Ei(c,I),I}function zu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new wt(new _i({eb:_})):new wt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ll(){}n=ll.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Go(){}Go.prototype.g=function(c,g){return new Sn(c,g)};function Sn(c,g){ht.call(this),this.g=new ol(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Q(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Q(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Qr(this)}R(Sn,ht),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){en(this.g)},Sn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Qi(c),c=_);g.i.push(new yt(g.Ya++,c)),g.G==3&&Gr(g)},Sn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,Sn.aa.N.call(this)};function $u(c){$n.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}R($u,$n);function Hu(){yr.call(this),this.status=1}R(Hu,yr);function Qr(c){this.g=c}R(Qr,ll),Qr.prototype.ua=function(){Ct(this.g,"a")},Qr.prototype.ta=function(c){Ct(this.g,new $u(c))},Qr.prototype.sa=function(c){Ct(this.g,new Hu)},Qr.prototype.ra=function(){Ct(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,zE=function(){return new Go},BE=function(){return mi()},jE=En,Zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,nh=ot,At.COMPLETE="complete",UE=At,pi.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",ht.prototype.listen=ht.prototype.K,zl=pi,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,FE=wt}).apply(typeof jc<"u"?jc:typeof self<"u"?self:typeof window<"u"?window:{});const K0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new Am("@firebase/firestore");function ya(){return ko.logLevel}function ye(n,...e){if(ko.logLevel<=He.DEBUG){const t=e.map(Um);ko.debug(`Firestore (${qa}): ${n}`,...t)}}function Ui(n,...e){if(ko.logLevel<=He.ERROR){const t=e.map(Um);ko.error(`Firestore (${qa}): ${n}`,...t)}}function ba(n,...e){if(ko.logLevel<=He.WARN){const t=e.map(Um);ko.warn(`Firestore (${qa}): ${n}`,...t)}}function Um(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n="Unexpected state"){const e=`FIRESTORE (${qa}) INTERNAL ASSERTION FAILED: `+n;throw Ui(e),new Error(e)}function ut(n,e){n||Oe()}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class Fk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Uk{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Li,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Li)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string"),new $E(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string"),new yn(e)}}class jk{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Bk{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jk(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $k{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ut(this.o===void 0);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut(typeof t.token=="string"),this.R=t.token,new zk(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Hk(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function Ge(n,e){return n<e?-1:n>e?1:0}function Da(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new jt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new jt(0,0))}static max(){return new Me(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t,r){t===void 0?t=0:t>e.length&&Oe(),r===void 0?r=e.length-t:r>e.length-t&&Oe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ou.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ou?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),u=t.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tt extends ou{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Tt(t)}static emptyPath(){return new Tt([])}}const Wk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends ou{construct(e,t,r){return new on(e,t,r)}static isValidIdentifier(e){return Wk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new on(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ce(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new Ce(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ce(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new Ce(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Tt.fromString(e))}static fromName(e){return new xe(Tt.fromString(e).popFirst(5))}static empty(){return new xe(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Tt(e.slice()))}}function qk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new jt(t+1,0):new jt(t,r));return new Os(s,xe.empty(),e)}function Kk(n){return new Os(n.readTime,n.key,-1)}class Os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Os(Me.min(),xe.empty(),-1)}static max(){return new Os(Me.max(),xe.empty(),-1)}}function Gk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Qk)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let s=0,a=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++a,u&&a===s&&t()},f=>r(f))}),u=!0,a===s&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(s=>s?ie.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{u[m]=v,++h,h===a&&r(u)},v=>s(v))}})}static doWhile(e,t){return new ie((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function Yk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ga(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sd.oe=-1;function od(n){return n==null}function xh(n){return n===0&&1/n==-1/0}function Xk(n){return typeof n=="number"&&Number.isInteger(n)&&!xh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=G0(e)),e=ex(n.get(t),e);return G0(e)}function ex(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function G0(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??sn.RED,this.left=s??sn.EMPTY,this.right=a??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new sn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return sn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,t,r,s,a){return this}insert(e,t,r){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J0(this.data.getIterator())}getIteratorFrom(e){return new J0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class J0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Xn([])}unionWith(e){let t=new Bt(on.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new qE("Invalid base64 string: "+a):a}}(e);return new ln(t)}static fromUint8Array(e){const t=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const tx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(n){if(ut(!!n),typeof n=="string"){let e=0;const t=tx.exec(n);if(ut(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(n.seconds),nanos:Nt(n.nanos)}}function Nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ms(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ad(n){const e=n.mapValue.fields.__previous_value__;return jm(e)?ad(e):e}function au(n){const e=Ls(n.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t,r,s,a,u,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jm(n)?4:ix(n)?9007199254740991:rx(n)?10:11:Oe()}function li(n,e){if(n===e)return!0;const t=Vs(n);if(t!==Vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return au(n).isEqual(au(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Ls(s.timestampValue),h=Ls(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Ms(s.bytesValue).isEqual(Ms(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Nt(s.geoPointValue.latitude)===Nt(a.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Nt(s.integerValue)===Nt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Nt(s.doubleValue),h=Nt(a.doubleValue);return u===h?xh(u)===xh(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Da(n.arrayValue.values||[],e.arrayValue.values||[],li);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(Q0(u)!==Q0(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!li(u[f],h[f])))return!1;return!0}(n,e);default:return Oe()}}function uu(n,e){return(n.values||[]).find(t=>li(t,e))!==void 0}function Oa(n,e){if(n===e)return 0;const t=Vs(n),r=Vs(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return function(a,u){const h=Nt(a.integerValue||a.doubleValue),f=Nt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return Y0(n.timestampValue,e.timestampValue);case 4:return Y0(au(n),au(e));case 5:return Ge(n.stringValue,e.stringValue);case 6:return function(a,u){const h=Ms(a),f=Ms(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const v=Ge(h[m],f[m]);if(v!==0)return v}return Ge(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const h=Ge(Nt(a.latitude),Nt(u.latitude));return h!==0?h:Ge(Nt(a.longitude),Nt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return X0(n.arrayValue,e.arrayValue);case 10:return function(a,u){var h,f,m,v;const w=a.fields||{},T=u.fields||{},C=(h=w.value)===null||h===void 0?void 0:h.arrayValue,R=(f=T.value)===null||f===void 0?void 0:f.arrayValue,D=Ge(((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0,((v=R==null?void 0:R.values)===null||v===void 0?void 0:v.length)||0);return D!==0?D:X0(C,R)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===zc.mapValue&&u===zc.mapValue)return 0;if(a===zc.mapValue)return 1;if(u===zc.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const T=Ge(f[w],v[w]);if(T!==0)return T;const C=Oa(h[f[w]],m[v[w]]);if(C!==0)return C}return Ge(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Oe()}}function Y0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=Ls(n),r=Ls(e),s=Ge(t.seconds,r.seconds);return s!==0?s:Ge(t.nanos,r.nanos)}function X0(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Oa(t[s],r[s]);if(a)return a}return Ge(t.length,r.length)}function La(n){return em(n)}function em(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ls(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ms(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return xe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=em(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${em(t.fields[u])}`;return s+"}"}(n.mapValue):Oe()}function rh(n){switch(Vs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ad(n);return e?16+rh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+rh(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Bs(r.fields,(a,u)=>{s+=a.length+rh(u)}),s}(n.mapValue);default:throw Oe()}}function tm(n){return!!n&&"integerValue"in n}function Bm(n){return!!n&&"arrayValue"in n}function Z0(n){return!!n&&"nullValue"in n}function e_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ih(n){return!!n&&"mapValue"in n}function rx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Yl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ix(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yl(t)}setAll(e){let t=on.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=Yl(u):s.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ih(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Bs(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Un(Yl(this.value))}}function KE(n){const e=[];return Bs(n.fields,(t,r)=>{const s=new on([t]);if(ih(r)){const a=KE(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,r,s,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new vn(e,0,Me.min(),Me.min(),Me.min(),Un.empty(),0)}static newFoundDocument(e,t,r,s){return new vn(e,1,t,Me.min(),r,s,0)}static newNoDocument(e,t){return new vn(e,2,t,Me.min(),Me.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Me.min(),Me.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t){this.position=e,this.inclusive=t}}function t_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=xe.comparator(xe.fromName(u.referenceValue),t.key):r=Oa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function n_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t="asc"){this.field=e,this.dir=t}}function sx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{}class Ut extends GE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ax(e,t,r):t==="array-contains"?new cx(e,r):t==="in"?new hx(e,r):t==="not-in"?new dx(e,r):t==="array-contains-any"?new fx(e,r):new Ut(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lx(e,r):new ux(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Oa(t,this.value)):t!==null&&Vs(this.value)===Vs(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends GE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ui(e,t)}matches(e){return QE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function QE(n){return n.op==="and"}function JE(n){return ox(n)&&QE(n)}function ox(n){for(const e of n.filters)if(e instanceof ui)return!1;return!0}function nm(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+La(n.value);if(JE(n))return n.filters.map(e=>nm(e)).join(",");{const e=n.filters.map(t=>nm(t)).join(",");return`${n.op}(${e})`}}function YE(n,e){return n instanceof Ut?function(r,s){return s instanceof Ut&&r.op===s.op&&r.field.isEqual(s.field)&&li(r.value,s.value)}(n,e):n instanceof ui?function(r,s){return s instanceof ui&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,u,h)=>a&&YE(u,s.filters[h]),!0):!1}(n,e):void Oe()}function XE(n){return n instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${La(t.value)}`}(n):n instanceof ui?function(t){return t.op.toString()+" {"+t.getFilters().map(XE).join(" ,")+"}"}(n):"Filter"}class ax extends Ut{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class lx extends Ut{constructor(e,t){super(e,"in",t),this.keys=ZE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ux extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=ZE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ZE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>xe.fromName(r.referenceValue))}class cx extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bm(t)&&uu(t.arrayValue,this.value)}}class hx extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uu(this.value.arrayValue,t)}}class dx extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!uu(this.value.arrayValue,t)}}class fx extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function r_(n,e=null,t=[],r=[],s=null,a=null,u=null){return new px(n,e,t,r,s,a,u)}function zm(n){const e=Fe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>nm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>La(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>La(r)).join(",")),e.ue=t}return e.ue}function $m(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!YE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!n_(n.startAt,e.startAt)&&n_(n.endAt,e.endAt)}function rm(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mx(n,e,t,r,s,a,u,h){return new ld(n,e,t,r,s,a,u,h)}function Hm(n){return new ld(n)}function i_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gx(n){return n.collectionGroup!==null}function Xl(n){const e=Fe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Bt(on.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new bh(a,r))}),t.has(on.keyField().canonicalString())||e.ce.push(new bh(on.keyField(),r))}return e.ce}function si(n){const e=Fe(n);return e.le||(e.le=yx(e,Xl(n))),e.le}function yx(n,e){if(n.limitType==="F")return r_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new bh(s.field,a)});const t=n.endAt?new Nh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Nh(n.startAt.position,n.startAt.inclusive):null;return r_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function im(n,e,t){return new ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ud(n,e){return $m(si(n),si(e))&&n.limitType===e.limitType}function e1(n){return`${zm(si(n))}|lt:${n.limitType}`}function va(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>XE(s)).join(", ")}]`),od(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>La(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>La(s)).join(",")),`Target(${r})`}(si(n))}; limitType=${n.limitType})`}function cd(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):xe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Xl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,h,f){const m=t_(u,h,f);return u.inclusive?m<=0:m<0}(r.startAt,Xl(r),s)||r.endAt&&!function(u,h,f){const m=t_(u,h,f);return u.inclusive?m>=0:m>0}(r.endAt,Xl(r),s))}(n,e)}function vx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function t1(n){return(e,t)=>{let r=!1;for(const s of Xl(n)){const a=_x(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function _x(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?Oa(f,m):Oe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return WE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Rt(xe.comparator);function ji(){return wx}const n1=new Rt(xe.comparator);function $l(...n){let e=n1;for(const t of n)e=e.insert(t.key,t);return e}function r1(n){let e=n1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vo(){return Zl()}function i1(){return Zl()}function Zl(){return new No(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ex=new Rt(xe.comparator),Tx=new Bt(xe.comparator);function We(...n){let e=Tx;for(const t of n)e=e.add(t);return e}const Sx=new Bt(Ge);function Ix(){return Sx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function s1(n){return{integerValue:""+n}}function Rx(n,e){return Xk(e)?s1(e):Wm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function Cx(n,e,t){return n instanceof Dh?function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&jm(a)&&(a=ad(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):n instanceof cu?a1(n,e):n instanceof hu?l1(n,e):function(s,a){const u=o1(s,a),h=s_(u)+s_(s.Pe);return tm(u)&&tm(s.Pe)?s1(h):Wm(s.serializer,h)}(n,e)}function Ax(n,e,t){return n instanceof cu?a1(n,e):n instanceof hu?l1(n,e):t}function o1(n,e){return n instanceof Oh?function(r){return tm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Dh extends hd{}class cu extends hd{constructor(e){super(),this.elements=e}}function a1(n,e){const t=u1(e);for(const r of n.elements)t.some(s=>li(s,r))||t.push(r);return{arrayValue:{values:t}}}class hu extends hd{constructor(e){super(),this.elements=e}}function l1(n,e){let t=u1(e);for(const r of n.elements)t=t.filter(s=>!li(s,r));return{arrayValue:{values:t}}}class Oh extends hd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function s_(n){return Nt(n.integerValue||n.doubleValue)}function u1(n){return Bm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Px(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof cu&&s instanceof cu||r instanceof hu&&s instanceof hu?Da(r.elements,s.elements,li):r instanceof Oh&&s instanceof Oh?li(r.Pe,s.Pe):r instanceof Dh&&s instanceof Dh}(n.transform,e.transform)}class kx{constructor(e,t){this.version=e,this.transformResults=t}}class Lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lr}static exists(e){return new Lr(void 0,e)}static updateTime(e){return new Lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class dd{}function c1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qm(n.key,Lr.none()):new Tu(n.key,n.data,Lr.none());{const t=n.data,r=Un.empty();let s=new Bt(on.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new zs(n.key,r,new Xn(s.toArray()),Lr.none())}}function xx(n,e,t){n instanceof Tu?function(s,a,u){const h=s.value.clone(),f=a_(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof zs?function(s,a,u){if(!sh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=a_(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(h1(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function eu(n,e,t,r){return n instanceof Tu?function(a,u,h,f){if(!sh(a.precondition,u))return h;const m=a.value.clone(),v=l_(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof zs?function(a,u,h,f){if(!sh(a.precondition,u))return h;const m=l_(a.fieldTransforms,f,u),v=u.data;return v.setAll(h1(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,u,h){return sh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function Nx(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=o1(r.transform,s||null);a!=null&&(t===null&&(t=Un.empty()),t.set(r.field,a))}return t||null}function o_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Da(r,s,(a,u)=>Px(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tu extends dd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zs extends dd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function h1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function a_(n,e,t){const r=new Map;ut(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,Ax(u,h,t[s]))}return r}function l_(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Cx(a,u,e))}return r}class qm extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bx extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&xx(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=eu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=eu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=i1();return this.mutations.forEach(s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(s.key)?null:h;const f=c1(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(t,r)=>o_(t,r))&&Da(this.baseMutations,e.baseMutations,(t,r)=>o_(t,r))}}class Km{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ut(e.mutations.length===r.length);let s=function(){return Ex}();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Km(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,et;function Mx(n){switch(n){default:return Oe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function d1(n){if(n===void 0)return Ui("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Ot.OK:return ae.OK;case Ot.CANCELLED:return ae.CANCELLED;case Ot.UNKNOWN:return ae.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ae.INTERNAL;case Ot.UNAVAILABLE:return ae.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ae.NOT_FOUND;case Ot.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Ot.ABORTED:return ae.ABORTED;case Ot.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Ot.DATA_LOSS:return ae.DATA_LOSS;default:return Oe()}}(et=Ot||(Ot={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Eo([4294967295,4294967295],0);function u_(n){const e=Vx().encode(n),t=new VE;return t.update(e),new Uint8Array(t.digest())}function c_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Eo([t,r],0),new Eo([s,a],0)]}class Gm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hl(`Invalid padding: ${t}`);if(r<0)throw new Hl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Eo.fromNumber(this.Te)}Ee(e,t,r){let s=e.add(t.multiply(Eo.fromNumber(r)));return s.compare(Fx)===1&&(s=new Eo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=u_(e),[r,s]=c_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Gm(a,s,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Te===0)return;const t=u_(e),[r,s]=c_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fd(Me.min(),s,new Rt(Ge),ji(),We())}}class Su{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Su(r,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class f1{constructor(e,t){this.targetId=e,this.me=t}}class p1{constructor(e,t,r=ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class h_{constructor(){this.fe=0,this.ge=d_(),this.pe=ln.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=We(),t=We(),r=We();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Oe()}}),new Su(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=d_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ux{constructor(e){this.Le=e,this.Be=new Map,this.ke=ji(),this.qe=$c(),this.Qe=$c(),this.Ke=new Rt(Ge)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const a=s.target;if(rm(a))if(r===0){const u=new xe(a.path);this.We(t,u,vn.newNoDocument(u,Me.min()))}else ut(r===1);else{const u=this.Ze(t);if(u!==r){const h=this.Xe(e),f=h?this.et(h,e,u):1;if(f!==0){this.He(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,m)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,h;try{u=Ms(r).toUint8Array()}catch(f){if(f instanceof qE)return ba("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Gm(u,s,a)}catch(f){return ba(f instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Te===0?null:h}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const u=this.Le.nt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.We(t,a,null),s++)}),s}it(e){const t=new Map;this.Be.forEach((a,u)=>{const h=this.Ye(u);if(h){if(a.current&&rm(h.target)){const f=new xe(h.target.path);this.st(f).has(u)||this.ot(u,f)||this.We(u,f,vn.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let r=We();this.Qe.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const m=this.Ye(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const s=new fd(e,t,this.Ke,this.ke,r);return this.ke=ji(),this.qe=$c(),this.Qe=$c(),this.Ke=new Rt(Ge),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new h_,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Bt(Ge),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(Ge),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new h_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $c(){return new Rt(xe.comparator)}function d_(){return new Rt(xe.comparator)}const jx={asc:"ASCENDING",desc:"DESCENDING"},Bx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zx={and:"AND",or:"OR"};class $x{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sm(n,e){return n.useProto3Json||od(e)?e:{value:e}}function Lh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Hx(n,e){return Lh(n,e.toTimestamp())}function oi(n){return ut(!!n),Me.fromTimestamp(function(t){const r=Ls(t);return new jt(r.seconds,r.nanos)}(n))}function Qm(n,e){return om(n,e).canonicalString()}function om(n,e){const t=function(s){return new Tt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function g1(n){const e=Tt.fromString(n);return ut(E1(e)),e}function am(n,e){return Qm(n.databaseId,e.path)}function Ep(n,e){const t=g1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(v1(t))}function y1(n,e){return Qm(n.databaseId,e)}function Wx(n){const e=g1(n);return e.length===4?Tt.emptyPath():v1(e)}function lm(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function v1(n){return ut(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function f_(n,e,t){return{name:am(n,e),fields:t.value.mapValue.fields}}function qx(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(ut(v===void 0||typeof v=="string"),ln.fromBase64String(v||"")):(ut(v===void 0||v instanceof Buffer||v instanceof Uint8Array),ln.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const v=m.code===void 0?ae.UNKNOWN:d1(m.code);return new Ce(v,m.message||"")}(u);t=new p1(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ep(n,r.document.name),a=oi(r.document.updateTime),u=r.document.createTime?oi(r.document.createTime):Me.min(),h=new Un({mapValue:{fields:r.document.fields}}),f=vn.newFoundDocument(s,a,u,h),m=r.targetIds||[],v=r.removedTargetIds||[];t=new oh(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ep(n,r.document),a=r.readTime?oi(r.readTime):Me.min(),u=vn.newNoDocument(s,a),h=r.removedTargetIds||[];t=new oh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ep(n,r.document),a=r.removedTargetIds||[];t=new oh([],a,s,null)}else{if(!("filter"in e))return Oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Lx(s,a),h=r.targetId;t=new f1(h,u)}}return t}function Kx(n,e){let t;if(e instanceof Tu)t={update:f_(n,e.key,e.value)};else if(e instanceof qm)t={delete:am(n,e.key)};else if(e instanceof zs)t={update:f_(n,e.key,e.data),updateMask:nN(e.fieldMask)};else{if(!(e instanceof bx))return Oe();t={verify:am(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const h=u.transform;if(h instanceof Dh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof cu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof hu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Oh)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Oe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:Hx(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Oe()}(n,e.precondition)),t}function Gx(n,e){return n&&n.length>0?(ut(e!==void 0),n.map(t=>function(s,a){let u=s.updateTime?oi(s.updateTime):oi(a);return u.isEqual(Me.min())&&(u=oi(a)),new kx(u,s.transformResults||[])}(t,e))):[]}function Qx(n,e){return{documents:[y1(n,e.path)]}}function Jx(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=y1(n,s);const a=function(m){if(m.length!==0)return w1(ui.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(v=>function(T){return{field:_a(T.field),direction:Zx(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=sm(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ct:t,parent:s}}function Yx(n){let e=Wx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ut(r===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const T=_1(w);return T instanceof ui&&JE(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(T=>function(R){return new bh(wa(R.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(w){let T;return T=typeof w=="object"?w.value:w,od(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(w){const T=!!w.before,C=w.values||[];return new Nh(C,T)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const T=!w.before,C=w.values||[];return new Nh(C,T)}(t.endAt)),mx(e,s,u,a,h,"F",f,m)}function Xx(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wa(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wa(t.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wa(t.unaryFilter.field);return Ut.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wa(t.unaryFilter.field);return Ut.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(n):n.fieldFilter!==void 0?function(t){return Ut.create(wa(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ui.create(t.compositeFilter.filters.map(r=>_1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe()}}(t.compositeFilter.op))}(n):Oe()}function Zx(n){return jx[n]}function eN(n){return Bx[n]}function tN(n){return zx[n]}function _a(n){return{fieldPath:n.canonicalString()}}function wa(n){return on.fromServerFormat(n.fieldPath)}function w1(n){return n instanceof Ut?function(t){if(t.op==="=="){if(e_(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NAN"}};if(Z0(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(e_(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NAN"}};if(Z0(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_a(t.field),op:eN(t.op),value:t.value}}}(n):n instanceof ui?function(t){const r=t.getFilters().map(s=>w1(s));return r.length===1?r[0]:{compositeFilter:{op:tN(t.op),filters:r}}}(n):Oe()}function nN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function E1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,t,r,s,a=Me.min(),u=Me.min(),h=ln.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.ht=e}}function iN(n){const e=Yx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?im(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.ln=new oN}addToCollectionParentIndex(e,t){return this.ln.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Os.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class oN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Bt(Tt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Bt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ma(0)}static Qn(){return new Ma(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_([n,e],[t,r]){const s=Ge(n,t);return s===0?Ge(e,r):s}class aN{constructor(e){this.Gn=e,this.buffer=new Bt(m_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();m_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ye("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ga(t)?ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ka(t)}await this.Yn(3e5)})}}class uN{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(sd.oe);const r=new aN(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(p_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,a,u,h,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(r=w,h=Date.now(),this.removeTargets(e,r,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(m=Date.now(),ya()<=He.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w})))}}function cN(n,e){return new uN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.changes=new No(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&eu(r.mutation,s,Xn.empty(),jt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){const s=vo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let u=$l();return a.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=vo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let a=ji();const u=Zl(),h=function(){return Zl()}();return t.forEach((f,m)=>{const v=r.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof zs)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),eu(v.mutation,m,v.mutation.getFieldMask(),jt.now())):u.set(m.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>u.set(m,v)),t.forEach((m,v)=>{var w;return h.set(m,new dN(v,(w=u.get(m))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Zl();let s=new Rt((u,h)=>u-h),a=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||Xn.empty();v=h.applyToLocalView(m,v),r.set(f,v);const w=(s.get(h.batchId)||We()).add(f);s=s.insert(h.batchId,w)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,v=f.value,w=i1();v.forEach(T=>{if(!a.has(T)){const C=c1(t.get(T),r.get(T));C!==null&&w.set(T,C),a=a.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return ie.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):ie.resolve(vo());let h=-1,f=a;return u.next(m=>ie.forEach(m,(v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{f=f.insert(v,T)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,We())).next(v=>({batchId:h,changes:r1(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(r=>{let s=$l();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=$l();return this.indexManager.getCollectionParents(e,a).next(h=>ie.forEach(h,f=>{const m=function(w,T){return new ld(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(v=>{v.forEach((w,T)=>{u=u.insert(w,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(u=>{a.forEach((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,vn.newInvalidDocument(v)))});let h=$l();return u.forEach((f,m)=>{const v=a.get(f);v!==void 0&&eu(v.mutation,m,Xn.empty(),jt.now()),cd(t,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return ie.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:oi(s.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:iN(s.bundledQuery),readTime:oi(s.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.overlays=new Rt(xe.comparator),this.Er=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=vo();return ie.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.Tt(e,t,a)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Er.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Er.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=vo(),a=t.length+1,u=new xe(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Rt((m,v)=>m-v);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=vo(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=vo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return ie.resolve(h)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Er.get(s.largestBatchId).delete(r.key);this.Er.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Ox(t,r));let a=this.Er.get(t);a===void 0&&(a=We(),this.Er.set(t,a)),this.Er.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.dr=new Bt(qt.Ar),this.Rr=new Bt(qt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new qt(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new qt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new xe(new Tt([])),r=new qt(t,e),s=new qt(t,e+1),a=[];return this.Rr.forEachInRange([r,s],u=>{this.gr(u),a.push(u.key)}),a}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new xe(new Tt([])),r=new qt(t,e),s=new qt(t,e+1);let a=We();return this.Rr.forEachInRange([r,s],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new qt(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return xe.comparator(e.key,t.key)||Ge(e.br,t.br)}static Vr(e,t){return Ge(e.br,t.br)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Bt(qt.Ar)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Dx(a,t,r,s);this.mutationQueue.push(u);for(const h of s)this.vr=this.vr.add(new qt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),a=s<0?0:s;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qt(t,0),s=new qt(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([r,s],u=>{const h=this.Cr(u.br);a.push(h)}),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Ge);return t.forEach(s=>{const a=new qt(s,0),u=new qt(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,u],h=>{r=r.add(h.br)})}),ie.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;xe.isDocumentKey(a)||(a=a.child(""));const u=new qt(new xe(a),0);let h=new Bt(Ge);return this.vr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.br)),!0)},u),ie.resolve(this.Mr(h))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ut(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return ie.forEach(t.mutations,s=>{const a=new qt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new qt(t,0),s=this.vr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.Nr=e,this.docs=function(){return new Rt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=ji();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():vn.newInvalidDocument(s))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=ji();const u=t.path,h=new xe(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||Gk(Kk(v),r)<=0||(s.has(v.key)||cd(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Oe()}Lr(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _N(this)}getSize(e){return ie.resolve(this.size)}}class _N extends hN{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.persistence=e,this.Br=new No(t=>zm(t),$m),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.kr=0,this.qr=new Jm,this.targetCount=0,this.Qr=Ma.qn()}forEachTarget(e,t){return this.Br.forEach((r,s)=>t(s)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),ie.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Ma(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Un(t),ie.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Br.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Br.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),ie.waitFor(a).next(()=>s)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t){this.Kr={},this.overlays={},this.$r=new sd(0),this.Ur=!1,this.Ur=!0,this.Wr=new gN,this.referenceDelegate=e(this),this.Gr=new wN(this),this.indexManager=new sN,this.remoteDocumentCache=function(s){return new vN(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new rN(t),this.jr=new pN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new yN(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const s=new EN(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(a=>this.referenceDelegate.Jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Yr(e,t){return ie.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class EN extends Jk{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Zr=new Jm,this.Xr=null}static ei(e){return new Ym(e)}get ti(){if(this.Xr)return this.Xr;throw Oe()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.ti.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ti,r=>{const s=xe.fromPath(r);return this.ni(e,s).next(a=>{a||t.removeEntry(s,Me.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return ie.or([()=>ie.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Mh{constructor(e,t){this.persistence=e,this.ri=new No(r=>Zk(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=cN(this,t)}static ei(e,t){return new Mh(e,t)}Hr(){}Jr(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return ie.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(a=>a?ie.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.Lr(e,u=>this.ir(e,u,t).next(h=>{h||(r++,a.removeEntry(u,Me.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),ie.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rh(e.data.value)),t}ir(e,t,r){return ie.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=We(),s=We();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Xm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return s2()?8:Yk(wn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Xi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.es(e,t,s,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new TN;return this.ts(e,t,u).next(h=>{if(a.result=h,this.Hi)return this.ns(e,t,u,h.size)})}).next(()=>a.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(ya()<=He.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",va(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ie.resolve()):(ya()<=He.DEBUG&&ye("QueryEngine","Query:",va(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(ya()<=He.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",va(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(t))):ie.resolve())}Xi(e,t){if(i_(t))return ie.resolve(null);let r=si(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=im(t,null,"F"),r=si(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=We(...a);return this.Zi.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.rs(t,h);return this.ss(t,m,u,f.readTime)?this.Xi(e,im(t,null,"F")):this.os(e,m,t,f)}))})))}es(e,t,r,s){return i_(t)||s.isEqual(Me.min())?ie.resolve(null):this.Zi.getDocuments(e,r).next(a=>{const u=this.rs(t,a);return this.ss(t,u,r,s)?ie.resolve(null):(ya()<=He.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),va(t)),this.os(e,u,t,qk(s,-1)).next(h=>h))})}rs(e,t){let r=new Bt(t1(e));return t.forEach((s,a)=>{cd(e,a)&&(r=r.add(a))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ts(e,t,r){return ya()<=He.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",va(t)),this.Zi.getDocumentsMatchingQuery(e,t,Os.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new Rt(Ge),this.cs=new No(a=>zm(a),$m),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fN(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function RN(n,e,t,r){return new IN(n,e,t,r)}async function S1(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let f=We();for(const m of s){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(m=>({Ts:m,removedBatchIds:u,addedBatchIds:h}))})})}function CN(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(h,f,m,v){const w=m.batch,T=w.keys();let C=ie.resolve();return T.forEach(R=>{C=C.next(()=>v.getEntry(f,R)).next(D=>{const A=m.docVersions.get(R);ut(A!==null),D.version.compareTo(A)<0&&(w.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),v.addEntry(D)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(f,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=We();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function I1(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function AN(n,e){const t=Fe(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const h=[];e.targetChanges.forEach((v,w)=>{const T=s.get(w);if(!T)return;h.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,w)));let C=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(ln.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),s=s.insert(w,C),function(D,A,F){return D.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(T,C,v)&&h.push(t.Gr.updateTargetData(a,C))});let f=ji(),m=We();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(PN(a,u,e.documentUpdates).next(v=>{f=v.Is,m=v.Es})),!r.isEqual(Me.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(w=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return ie.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.us=s,a))}function PN(n,e,t){let r=We(),s=We();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=ji();return t.forEach((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ye("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Is:u,Es:s}})}function kN(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xN(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(a=>a?(s=a,ie.resolve(s)):t.Gr.allocateTargetId(r).next(u=>(s=new Ps(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function um(n,e,t){const r=Fe(n),s=r.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Ga(u))throw u;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function g_(n,e,t){const r=Fe(n);let s=Me.min(),a=We();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,v){const w=Fe(f),T=w.cs.get(v);return T!==void 0?ie.resolve(w.us.get(T)):w.Gr.getTargetData(m,v)}(r,u,si(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>r._s.getDocumentsMatchingQuery(u,e,t?s:Me.min(),t?a:We())).next(h=>(NN(r,vx(e),h),{documents:h,ds:a})))}function NN(n,e,t){let r=n.ls.get(e)||Me.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ls.set(e,r)}class y_{constructor(){this.activeTargetIds=Ix()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bN{constructor(){this._o=new y_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new y_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Tp(){return Hc===null?Hc=function(){return 268435456+Math.round(2147483648*Math.random())}():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class MN extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Oo(t,r,s,a,u){const h=Tp(),f=this.No(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(m,a,u),this.Bo(t,f,m,s).then(v=>(ye("RestConnection",`Received RPC '${t}' ${h}: `,v),v),v=>{throw ba("RestConnection",`RPC '${t}' ${h} failed with error: `,v,"url: ",f,"request:",s),v})}ko(t,r,s,a,u,h){return this.Oo(t,r,s,a,u)}Lo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,u)=>t[u]=a),s&&s.headers.forEach((a,u)=>t[u]=a)}No(t,r){const s=ON[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,s){const a=Tp();return new Promise((u,h)=>{const f=new FE;f.setWithCredentials(!0),f.listenOnce(UE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case nh.NO_ERROR:const v=f.getResponseJson();ye(gn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case nh.TIMEOUT:ye(gn,`RPC '${e}' ${a} timed out`),h(new Ce(ae.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const w=f.getStatus();if(ye(gn,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const R=function(A){const F=A.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(F)>=0?F:ae.UNKNOWN}(C.status);h(new Ce(R,C.message))}else h(new Ce(ae.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Ce(ae.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{ye(gn,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);ye(gn,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)})}qo(e,t,r){const s=Tp(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zE(),h=BE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");ye(gn,`Creating RPC '${e}' stream ${s}: ${v}`,f);const w=u.createWebChannel(v,f);let T=!1,C=!1;const R=new LN({Eo:A=>{C?ye(gn,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(T||(ye(gn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),ye(gn,`RPC '${e}' stream ${s} sending:`,A),w.send(A))},Ao:()=>w.close()}),D=(A,F,Q)=>{A.listen(F,G=>{try{Q(G)}catch(ne){setTimeout(()=>{throw ne},0)}})};return D(w,zl.EventType.OPEN,()=>{C||(ye(gn,`RPC '${e}' stream ${s} transport opened.`),R.So())}),D(w,zl.EventType.CLOSE,()=>{C||(C=!0,ye(gn,`RPC '${e}' stream ${s} transport closed`),R.Do())}),D(w,zl.EventType.ERROR,A=>{C||(C=!0,ba(gn,`RPC '${e}' stream ${s} transport errored:`,A),R.Do(new Ce(ae.UNAVAILABLE,"The operation could not be completed")))}),D(w,zl.EventType.MESSAGE,A=>{var F;if(!C){const Q=A.data[0];ut(!!Q);const G=Q,ne=(G==null?void 0:G.error)||((F=G[0])===null||F===void 0?void 0:F.error);if(ne){ye(gn,`RPC '${e}' stream ${s} received error:`,ne);const L=ne.status;let re=function(P){const O=Ot[P];if(O!==void 0)return d1(O)}(L),b=ne.message;re===void 0&&(re=ae.INTERNAL,b="Unknown error status: "+L+" with message "+ne.message),C=!0,R.Do(new Ce(re,b)),w.close()}else ye(gn,`RPC '${e}' stream ${s} received:`,Q),R.vo(Q)}}),D(h,jE.STAT_EVENT,A=>{A.stat===Zp.PROXY?ye(gn,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Zp.NOPROXY&&ye(gn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.bo()},0),R}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(n){return new $x(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t,r=1e3,s=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,t,r,s,a,u,h,f){this.li=e,this.Yo=r,this.Zo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new R1(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Ui(t.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new Ce(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.E_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VN extends C1{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=qx(this.serializer,e),r=function(a){if(!("targetChange"in a))return Me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?oi(u.readTime):Me.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=lm(this.serializer),t.addTarget=function(a,u){let h;const f=u.target;if(h=rm(f)?{documents:Qx(a,f)}:{query:Jx(a,f).ct},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=m1(a,u.resumeToken);const m=sm(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Me.min())>0){h.readTime=Lh(a,u.snapshotVersion.toTimestamp());const m=sm(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=Xx(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=lm(this.serializer),t.removeTarget=e,this.c_(t)}}class FN extends C1{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ut(!!e.streamToken),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Gx(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=lm(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Kx(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new Ce(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Oo(e,om(t,r),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(ae.UNKNOWN,a.toString())})}ko(e,t,r,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.ko(e,om(t,r),s,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(ae.UNKNOWN,u.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class jN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ui(t),this.C_=!1):ye("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(u=>{r.enqueueAndForget(async()=>{bo(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(f){const m=Fe(f);m.k_.add(4),await Iu(m),m.K_.set("Unknown"),m.k_.delete(4),await md(m)}(this))})}),this.K_=new jN(r,s)}}async function md(n){if(bo(n))for(const e of n.q_)await e(!0)}async function Iu(n){for(const e of n.q_)await e(!1)}function A1(n,e){const t=Fe(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),ng(t)?tg(t):Qa(t).s_()&&eg(t,e))}function Zm(n,e){const t=Fe(n),r=Qa(t);t.B_.delete(e),r.s_()&&P1(t,e),t.B_.size===0&&(r.s_()?r.a_():bo(t)&&t.K_.set("Unknown"))}function eg(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qa(n).V_(e)}function P1(n,e){n.U_.xe(e),Qa(n).m_(e)}function tg(n){n.U_=new Ux({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Qa(n).start(),n.K_.F_()}function ng(n){return bo(n)&&!Qa(n).i_()&&n.B_.size>0}function bo(n){return Fe(n).k_.size===0}function k1(n){n.U_=void 0}async function zN(n){n.K_.set("Online")}async function $N(n){n.B_.forEach((e,t)=>{eg(n,e)})}async function HN(n,e){k1(n),ng(n)?(n.K_.O_(e),tg(n)):n.K_.set("Unknown")}async function WN(n,e,t){if(n.K_.set("Online"),e instanceof p1&&e.state===2&&e.cause)try{await async function(s,a){const u=a.cause;for(const h of a.targetIds)s.B_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.B_.delete(h),s.U_.removeTarget(h))}(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vh(n,r)}else if(e instanceof oh?n.U_.$e(e):e instanceof f1?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Me.min()))try{const r=await I1(n.localStore);t.compareTo(r)>=0&&await function(a,u){const h=a.U_.it(u);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.B_.get(m);v&&a.B_.set(m,v.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,m)=>{const v=a.B_.get(f);if(!v)return;a.B_.set(f,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),P1(a,f);const w=new Ps(v.target,f,m,v.sequenceNumber);eg(a,w)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await Vh(n,r)}}async function Vh(n,e,t){if(!Ga(e))throw e;n.k_.add(1),await Iu(n),n.K_.set("Offline"),t||(t=()=>I1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await md(n)})}function x1(n,e){return e().catch(t=>Vh(n,t,e))}async function gd(n){const e=Fe(n),t=Fs(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;qN(e);)try{const s=await kN(e.localStore,r);if(s===null){e.L_.length===0&&t.a_();break}r=s.batchId,KN(e,s)}catch(s){await Vh(e,s)}N1(e)&&b1(e)}function qN(n){return bo(n)&&n.L_.length<10}function KN(n,e){n.L_.push(e);const t=Fs(n);t.s_()&&t.f_&&t.g_(e.mutations)}function N1(n){return bo(n)&&!Fs(n).i_()&&n.L_.length>0}function b1(n){Fs(n).start()}async function GN(n){Fs(n).w_()}async function QN(n){const e=Fs(n);for(const t of n.L_)e.g_(t.mutations)}async function JN(n,e,t){const r=n.L_.shift(),s=Km.from(r,e,t);await x1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await gd(n)}async function YN(n,e){e&&Fs(n).f_&&await async function(r,s){if(function(u){return Mx(u)&&u!==ae.ABORTED}(s.code)){const a=r.L_.shift();Fs(r).__(),await x1(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await gd(r)}}(n,e),N1(n)&&b1(n)}async function __(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=bo(t);t.k_.add(3),await Iu(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await md(t)}async function XN(n,e){const t=Fe(n);e?(t.k_.delete(2),await md(t)):e||(t.k_.add(2),await Iu(t),t.K_.set("Unknown"))}function Qa(n){return n.W_||(n.W_=function(t,r,s){const a=Fe(t);return a.b_(),new VN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:zN.bind(null,n),mo:$N.bind(null,n),po:HN.bind(null,n),R_:WN.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),ng(n)?tg(n):n.K_.set("Unknown")):(await n.W_.stop(),k1(n))})),n.W_}function Fs(n){return n.G_||(n.G_=function(t,r,s){const a=Fe(t);return a.b_(),new FN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:GN.bind(null,n),po:YN.bind(null,n),p_:QN.bind(null,n),y_:JN.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await gd(n)):(await n.G_.stop(),n.L_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,h=new rg(e,t,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(n,e){if(Ui("AsyncQueue",`${e}: ${n}`),Ga(n))return new Ce(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{static emptySet(e){return new Ca(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=$l(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ca;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.z_=new Rt(xe.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Oe():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Va{constructor(e,t,r,s,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Va(e,t,Ca.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class eb{constructor(){this.queries=E_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=Fe(t),a=s.queries;s.queries=E_(),a.forEach((u,h)=>{for(const f of h.J_)f.onError(r)})})(this,new Ce(ae.ABORTED,"Firestore shutting down"))}}function E_(){return new No(n=>e1(n),ud)}async function D1(n,e){const t=Fe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Y_()&&e.Z_()&&(r=2):(a=new ZN,r=e.Z_()?0:1);try{switch(r){case 0:a.H_=await t.onListen(s,!0);break;case 1:a.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=ig(u,`Initialization of query '${va(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&sg(t)}async function O1(n,e){const t=Fe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.J_.indexOf(e);u>=0&&(a.J_.splice(u,1),a.J_.length===0?s=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function tb(n,e){const t=Fe(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const h of u.J_)h.ta(s)&&(r=!0);u.H_=s}}r&&sg(t)}function nb(n,e,t){const r=Fe(n),s=r.queries.get(e);if(s)for(const a of s.J_)a.onError(t);r.queries.delete(e)}function sg(n){n.X_.forEach(e=>{e.next()})}var cm,T_;(T_=cm||(cm={})).na="default",T_.Cache="cache";class L1{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Va(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.key=e}}class V1{constructor(e){this.key=e}}class rb{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=We(),this.mutatedKeys=We(),this.Va=t1(e),this.ma=new Ca(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new w_,s=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,w)=>{const T=s.get(v),C=cd(this.query,w)?w:null,R=!!T&&this.mutatedKeys.has(T.key),D=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let A=!1;T&&C?T.data.isEqual(C.data)?R!==D&&(r.track({type:3,doc:C}),A=!0):this.ya(T,C)||(r.track({type:2,doc:C}),A=!0,(f&&this.Va(C,f)>0||m&&this.Va(C,m)<0)&&(h=!0)):!T&&C?(r.track({type:0,doc:C}),A=!0):T&&!C&&(r.track({type:1,doc:T}),A=!0,(f||m)&&(h=!0)),A&&(C?(u=u.add(C),a=D?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{ma:u,pa:r,ss:h,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const u=e.pa.j_();u.sort((v,w)=>function(C,R){const D=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return D(C)-D(R)}(v.type,w.type)||this.Va(v.doc,w.doc)),this.wa(r),s=s!=null&&s;const h=t&&!s?this.Sa():[],f=this.Ra.size===0&&this.current&&!s?1:0,m=f!==this.Aa;return this.Aa=f,u.length!==0||m?{snapshot:new Va(this.query,e.ma,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:h}:{ba:h}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new w_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=We(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new V1(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new M1(r))}),t}va(e){this.da=e.ds,this.Ra=We();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Va.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ib{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sb{constructor(e){this.key=e,this.Fa=!1}}class ob{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ma={},this.xa=new No(h=>e1(h),ud),this.Oa=new Map,this.Na=new Set,this.La=new Rt(xe.comparator),this.Ba=new Map,this.ka=new Jm,this.qa={},this.Qa=new Map,this.Ka=Ma.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function ab(n,e,t=!0){const r=$1(n);let s;const a=r.xa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Ca()):s=await F1(r,e,t,!0),s}async function lb(n,e){const t=$1(n);await F1(t,e,!0,!1)}async function F1(n,e,t,r){const s=await xN(n.localStore,si(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await ub(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&A1(n.remoteStore,s),h}async function ub(n,e,t,r,s){n.Ua=(w,T,C)=>async function(D,A,F,Q){let G=A.view.ga(F);G.ss&&(G=await g_(D.localStore,A.query,!1).then(({documents:b})=>A.view.ga(b,G)));const ne=Q&&Q.targetChanges.get(A.targetId),L=Q&&Q.targetMismatches.get(A.targetId)!=null,re=A.view.applyChanges(G,D.isPrimaryClient,ne,L);return I_(D,A.targetId,re.ba),re.snapshot}(n,w,T,C);const a=await g_(n.localStore,e,!0),u=new rb(e,a.ds),h=u.ga(a.documents),f=Su.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,f);I_(n,t,m.ba);const v=new ib(e,t,u);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),m.snapshot}async function cb(n,e,t){const r=Fe(n),s=r.xa.get(e),a=r.Oa.get(s.targetId);if(a.length>1)return r.Oa.set(s.targetId,a.filter(u=>!ud(u,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await um(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Zm(r.remoteStore,s.targetId),hm(r,s.targetId)}).catch(Ka)):(hm(r,s.targetId),await um(r.localStore,s.targetId,!0))}async function hb(n,e){const t=Fe(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zm(t.remoteStore,r.targetId))}async function db(n,e,t){const r=_b(n);try{const s=await function(u,h){const f=Fe(u),m=jt.now(),v=h.reduce((C,R)=>C.add(R.key),We());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=ji(),D=We();return f.hs.getEntries(C,v).next(A=>{R=A,R.forEach((F,Q)=>{Q.isValidDocument()||(D=D.add(F))})}).next(()=>f.localDocuments.getOverlayedDocuments(C,R)).next(A=>{w=A;const F=[];for(const Q of h){const G=Nx(Q,w.get(Q.key).overlayedDocument);G!=null&&F.push(new zs(Q.key,G,KE(G.value.mapValue),Lr.exists(!0)))}return f.mutationQueue.addMutationBatch(C,m,F,h)}).next(A=>{T=A;const F=A.applyToLocalDocumentSet(w,D);return f.documentOverlayCache.saveOverlays(C,A.batchId,F)})}).then(()=>({batchId:T.batchId,changes:r1(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,f){let m=u.qa[u.currentUser.toKey()];m||(m=new Rt(Ge)),m=m.insert(h,f),u.qa[u.currentUser.toKey()]=m}(r,s.batchId,t),await Ru(r,s.changes),await gd(r.remoteStore)}catch(s){const a=ig(s,"Failed to persist write");t.reject(a)}}async function U1(n,e){const t=Fe(n);try{const r=await AN(t.localStore,e);e.targetChanges.forEach((s,a)=>{const u=t.Ba.get(a);u&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Fa=!0:s.modifiedDocuments.size>0?ut(u.Fa):s.removedDocuments.size>0&&(ut(u.Fa),u.Fa=!1))}),await Ru(t,r,e)}catch(r){await Ka(r)}}function S_(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((a,u)=>{const h=u.view.ea(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const f=Fe(u);f.onlineState=h;let m=!1;f.queries.forEach((v,w)=>{for(const T of w.J_)T.ea(h)&&(m=!0)}),m&&sg(f)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fb(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ba.get(e),a=s&&s.key;if(a){let u=new Rt(xe.comparator);u=u.insert(a,vn.newNoDocument(a,Me.min()));const h=We().add(a),f=new fd(Me.min(),new Map,new Rt(Ge),u,h);await U1(r,f),r.La=r.La.remove(a),r.Ba.delete(e),og(r)}else await um(r.localStore,e,!1).then(()=>hm(r,e,t)).catch(Ka)}async function pb(n,e){const t=Fe(n),r=e.batch.batchId;try{const s=await CN(t.localStore,e);B1(t,r,null),j1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ru(t,s)}catch(s){await Ka(s)}}async function mb(n,e,t){const r=Fe(n);try{const s=await function(u,h){const f=Fe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,h).next(w=>(ut(w!==null),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);B1(r,e,t),j1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ru(r,s)}catch(s){await Ka(s)}}function j1(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function B1(n,e,t){const r=Fe(n);let s=r.qa[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.qa[r.currentUser.toKey()]=s}}function hm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||z1(n,r)})}function z1(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(Zm(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),og(n))}function I_(n,e,t){for(const r of t)r instanceof M1?(n.ka.addReference(r.key,e),gb(n,r)):r instanceof V1?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||z1(n,r.key)):Oe()}function gb(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.Na.add(r),og(n))}function og(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new xe(Tt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new sb(t)),n.La=n.La.insert(t,r),A1(n.remoteStore,new Ps(si(Hm(t.path)),r,"TargetPurposeLimboResolution",sd.oe))}}async function Ru(n,e,t){const r=Fe(n),s=[],a=[],u=[];r.xa.isEmpty()||(r.xa.forEach((h,f)=>{u.push(r.Ua(f,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=Xm.zi(f.targetId,m);a.push(w)}}))}),await Promise.all(u),r.Ma.R_(s),await async function(f,m){const v=Fe(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ie.forEach(m,T=>ie.forEach(T.Wi,C=>v.persistence.referenceDelegate.addReference(w,T.targetId,C)).next(()=>ie.forEach(T.Gi,C=>v.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))}catch(w){if(!Ga(w))throw w;ye("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const C=v.us.get(T),R=C.snapshotVersion,D=C.withLastLimboFreeSnapshotVersion(R);v.us=v.us.insert(T,D)}}}(r.localStore,a))}async function yb(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await S1(t.localStore,e);t.currentUser=e,function(a,u){a.Qa.forEach(h=>{h.forEach(f=>{f.reject(new Ce(ae.CANCELLED,u))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ru(t,r.Ts)}}function vb(n,e){const t=Fe(n),r=t.Ba.get(e);if(r&&r.Fa)return We().add(r.key);{let s=We();const a=t.Oa.get(e);if(!a)return s;for(const u of a){const h=t.xa.get(u);s=s.unionWith(h.view.fa)}return s}}function $1(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=U1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fb.bind(null,e),e.Ma.R_=tb.bind(null,e.eventManager),e.Ma.Wa=nb.bind(null,e.eventManager),e}function _b(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mb.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return RN(this.persistence,new SN,e.initialUser,this.serializer)}ja(e){return new T1(Ym.ei,this.serializer)}za(e){return new bN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class wb extends Fh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ut(this.persistence.referenceDelegate instanceof Mh);const r=this.persistence.referenceDelegate.garbageCollector;return new lN(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new T1(r=>Mh.ei(r,t),this.serializer)}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yb.bind(null,this.syncEngine),await XN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eb}()}createDatastore(e){const t=pd(e.databaseInfo.databaseId),r=function(a){return new MN(a)}(e.databaseInfo);return function(a,u,h,f){return new UN(a,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,u,h){return new BN(r,s,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>S_(this.syncEngine,t,0),function(){return v_.p()?new v_:new DN}())}createSyncEngine(e,t){return function(s,a,u,h,f,m,v){const w=new ob(s,a,u,h,f,m);return v&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=Fe(s);ye("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await Iu(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=HE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{ye("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ye("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ig(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ip(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await S1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function R_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Tb(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>__(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>__(e.remoteStore,s)),n._onlineComponents=e}async function Tb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ip(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ba("Error using user provided cache. Falling back to memory cache: "+t),await Ip(n,new Fh)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Ip(n,new wb(void 0));return n._offlineComponents}async function W1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await R_(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await R_(n,new dm))),n._onlineComponents}function Sb(n){return W1(n).then(e=>e.syncEngine)}async function q1(n){const e=await W1(n),t=e.eventManager;return t.onListen=ab.bind(null,e.syncEngine),t.onUnlisten=cb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hb.bind(null,e.syncEngine),t}function Ib(n,e,t={}){const r=new Li;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,m){const v=new H1({next:T=>{v.eu(),u.enqueueAndForget(()=>O1(a,w));const C=T.docs.has(h);!C&&T.fromCache?m.reject(new Ce(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&f&&f.source==="server"?m.reject(new Ce(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new L1(Hm(h.path),v,{includeMetadataChanges:!0,ua:!0});return D1(a,w)}(await q1(n),n.asyncQueue,e,t,r)),r.promise}function Rb(n,e,t={}){const r=new Li;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,m){const v=new H1({next:T=>{v.eu(),u.enqueueAndForget(()=>O1(a,w)),T.fromCache&&f.source==="server"?m.reject(new Ce(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new L1(h,v,{includeMetadataChanges:!0,ua:!0});return D1(a,w)}(await q1(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n,e,t){if(!t)throw new Ce(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Cb(n,e,t,r){if(e===!0&&r===!0)throw new Ce(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function A_(n){if(!xe.isDocumentKey(n))throw new Ce(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function P_(n){if(xe.isDocumentKey(n))throw new Ce(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ag(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe()}function ci(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ag(n);throw new Ce(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ce(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ce(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ce(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ce(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Vk;switch(r.type){case"firstParty":return new Bk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=C_.get(t);r&&(ye("ComponentProvider","Removing Datastore"),C_.delete(t),r.terminate())}(this),Promise.resolve()}}function Ab(n,e,t,r={}){var s;const a=(n=ci(n,yd))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=yn.MOCK_USER;else{h=XC(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ce(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new yn(m)}n._authCredentials=new Fk(new $E(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vd(this.firestore,e,this._query)}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class bs extends vd{constructor(e,t,r){super(e,t,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new xe(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Pb(n,e,...t){if(n=Gt(n),G1("collection","path",e),n instanceof yd){const r=Tt.fromString(e,...t);return P_(r),new bs(n,null,r)}{if(!(n instanceof Bn||n instanceof bs))throw new Ce(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return P_(r),new bs(n.firestore,null,r)}}function du(n,e,...t){if(n=Gt(n),arguments.length===1&&(e=HE.newId()),G1("doc","path",e),n instanceof yd){const r=Tt.fromString(e,...t);return A_(r),new Bn(n,null,new xe(r))}{if(!(n instanceof Bn||n instanceof bs))throw new Ce(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return A_(r),new Bn(n.firestore,n instanceof bs?n.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new R1(this,"async_queue_retry"),this.fu=()=>{const r=Sp();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Li;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ga(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw Ui("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=rg.createAndSchedule(this,e,t,r,a=>this.Su(a));return this.du.push(s),s}pu(){this.Au&&Oe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Ja extends yd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new x_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x_(e),this._firestoreClient=void 0,await e}}}function kb(n,e){const t=typeof n=="object"?n:Jw(),r=typeof n=="string"?n:"(default)",s=km(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=JC("firestore");a&&Ab(s,...a)}return s}function lg(n){if(n._terminated)throw new Ce(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xb(n),n._firestoreClient}function xb(n){var e,t,r;const s=n._freezeSettings(),a=function(h,f,m,v){return new nx(h,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,K1(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Eb(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fa(ln.fromBase64String(e))}catch(t){throw new Ce(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fa(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=/^__.*__$/;class bb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}class Q1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function J1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class dg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Lu(e),s}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Fu(),s}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Uh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(J1(this.Mu)&&Nb.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Db{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pd(e)}$u(e,t,r,s=!1){return new dg({Mu:e,methodName:t,Ku:r,path:on.emptyPath(),Nu:!1,Qu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y1(n){const e=n._freezeSettings(),t=pd(n._databaseId);return new Db(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ob(n,e,t,r,s,a={}){const u=n.$u(a.merge||a.mergeFields?2:0,e,t,s);fg("Data must be an object, but it was:",u,r);const h=X1(r,u);let f,m;if(a.merge)f=new Xn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const T=fm(e,w,t);if(!u.contains(T))throw new Ce(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);eT(v,T)||v.push(T)}f=new Xn(v),m=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=u.fieldTransforms;return new bb(new Un(h),f,m)}class wd extends ug{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}function Lb(n,e,t,r){const s=n.$u(1,e,t);fg("Data must be an object, but it was:",s,r);const a=[],u=Un.empty();Bs(r,(f,m)=>{const v=pg(e,f,t);m=Gt(m);const w=s.Bu(v);if(m instanceof wd)a.push(v);else{const T=Ed(m,w);T!=null&&(a.push(v),u.set(v,T))}});const h=new Xn(a);return new Q1(u,h,s.fieldTransforms)}function Mb(n,e,t,r,s,a){const u=n.$u(1,e,t),h=[fm(e,r,t)],f=[s];if(a.length%2!=0)throw new Ce(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(fm(e,a[T])),f.push(a[T+1]);const m=[],v=Un.empty();for(let T=h.length-1;T>=0;--T)if(!eT(m,h[T])){const C=h[T];let R=f[T];R=Gt(R);const D=u.Bu(C);if(R instanceof wd)m.push(C);else{const A=Ed(R,D);A!=null&&(m.push(C),v.set(C,A))}}const w=new Xn(m);return new Q1(v,w,u.fieldTransforms)}function Ed(n,e){if(Z1(n=Gt(n)))return fg("Unsupported field value:",e,n),X1(n,e);if(n instanceof ug)return function(r,s){if(!J1(s.Mu))throw s.qu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,s){const a=[];let u=0;for(const h of r){let f=Ed(h,s.ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Rx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=jt.fromDate(r);return{timestampValue:Lh(s.serializer,a)}}if(r instanceof jt){const a=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lh(s.serializer,a)}}if(r instanceof cg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fa)return{bytesValue:m1(s.serializer,r._byteString)};if(r instanceof Bn){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.qu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Qm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hg)return function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw h.qu("VectorValues must only contain numeric values.");return Wm(h.serializer,f)})}}}}}}(r,s);throw s.qu(`Unsupported field value: ${ag(r)}`)}(n,e)}function X1(n,e){const t={};return WE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(n,(r,s)=>{const a=Ed(s,e.Ou(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function Z1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jt||n instanceof cg||n instanceof Fa||n instanceof Bn||n instanceof ug||n instanceof hg)}function fg(n,e,t){if(!Z1(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=ag(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function fm(n,e,t){if((e=Gt(e))instanceof _d)return e._internalPath;if(typeof e=="string")return pg(n,e);throw Uh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Vb=new RegExp("[~\\*/\\[\\]]");function pg(n,e,t){if(e.search(Vb)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _d(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new Ce(ae.INVALID_ARGUMENT,h+n+f)}function eT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Fb extends tT{data(){return super.data()}}function nT(n,e){return typeof e=="string"?pg(n,e):e instanceof _d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jb{convertValue(e,t="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bs(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Nt(u.doubleValue));return new hg(a)}convertGeoPoint(e){return new cg(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ad(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const t=Ls(e);return new jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);ut(E1(r));const s=new lu(r.get(1),r.get(3)),a=new xe(r.popFirst(5));return s.isEqual(t)||Ui(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rT extends tT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ah extends rT{data(e={}){return super.data(e)}}class zb{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Wl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ah(this._firestore,this._userDataWriter,r.key,r,new Wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const f=new ah(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Wl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new ah(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Wl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:$b(h.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $b(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n){n=ci(n,Bn);const e=ci(n.firestore,Ja);return Ib(lg(e),n._key).then(t=>Gb(e,n,t))}class iT extends jb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function Wb(n){n=ci(n,vd);const e=ci(n.firestore,Ja),t=lg(e),r=new iT(e);return Ub(n._query),Rb(t,n._query).then(s=>new zb(e,r,n,s))}function sT(n,e,t){n=ci(n,Bn);const r=ci(n.firestore,Ja),s=Bb(n.converter,e);return mg(r,[Ob(Y1(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Lr.none())])}function qb(n,e,t,...r){n=ci(n,Bn);const s=ci(n.firestore,Ja),a=Y1(s);let u;return u=typeof(e=Gt(e))=="string"||e instanceof _d?Mb(a,"updateDoc",n._key,e,t,r):Lb(a,"updateDoc",n._key,e),mg(s,[u.toMutation(n._key,Lr.exists(!0))])}function Kb(n){return mg(ci(n.firestore,Ja),[new qm(n._key,Lr.none())])}function mg(n,e){return function(r,s){const a=new Li;return r.asyncQueue.enqueueAndForget(async()=>db(await Sb(r),s,a)),a.promise}(lg(n),e)}function Gb(n,e,t){const r=t.docs.get(e._key),s=new iT(n);return new rT(n,s,e._key,r,new Wl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){qa=s})(Ha),xa(new Co("firestore",(r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new Ja(new Uk(r.getProvider("auth-internal")),new $k(r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ce(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(m.options.projectId,v)}(u,s),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Ns(K0,"4.7.5",e),Ns(K0,"4.7.5","esm2017")})();const Qb={apiKey:"AIzaSyDV-aAXWi-GgUhZjc6zmGvVB_6_1SHcxvc",authDomain:"mymdb-dec8d.firebaseapp.com",projectId:"mymdb-dec8d",storageBucket:"mymdb-dec8d.firebasestorage.app",messagingSenderId:"700068392417",appId:"1:700068392417:web:55fb072b699e3eae8736a0"},oT=Qw(Qb),Fn=Lk(oT),Ua=kb(oT),Td={users:{collection:"users",favorites:n=>`users/${n}/favorites`,watchlist:n=>`users/${n}/watchlist`},auth:{login:"/auth/login",signUp:"/auth/signup",logout:"/auth/logout"}},Jb=async({email:n,password:e})=>{try{const t=await RE(Fn,n,e),{uid:r,email:s,displayName:a}=t.user;return{uid:r,email:s,displayName:a}}catch(t){throw console.error(`Error logging in (${Td.auth.login}):`,t.message),new Error("Invalid email or password")}},Yb=async({email:n,password:e,displayName:t})=>{try{const r=await IE(Fn,n,e);await CE(r.user,{displayName:t});const{uid:s,email:a}=r.user;return{uid:s,email:a,displayName:t}}catch(r){throw console.error(`Error signing up (${Td.auth.signUp}):`,r.message),new Error("Failed to create an account. Please try again.")}},Xb=async()=>{try{return await IP(Fn),!0}catch(n){throw console.error(`Error logging out (${Td.auth.logout}):`,n.message),new Error("Failed to log out. Please try again.")}},Zb=async()=>new Promise((n,e)=>{SP(Fn,t=>{if(t){const{uid:r,email:s,displayName:a}=t;n({uid:r,email:s,displayName:a})}else n(null)},t=>{console.error(`Error fetching user data (${Td.users.collection}):`,t.message),e(new Error("Failed to fetch user data. Please try again."))})}),Rp=rr("auth/loginWithEmail",async({email:n,password:e},{rejectWithValue:t})=>{try{return await Jb({email:n,password:e})}catch(r){return t(r.message)}}),Cp=rr("auth/signUpWithEmail",async({email:n,password:e,displayName:t},{rejectWithValue:r})=>{try{return await Yb({email:n,password:e,displayName:t})}catch(s){return r(s.message)}}),Ap=rr("auth/logout",async(n,{rejectWithValue:e})=>{try{return await Xb(),null}catch(t){return e(t.message)}}),lh=rr("auth/initializeUser",async(n,{rejectWithValue:e})=>{try{return await Zb()}catch(t){return e(t.message)}}),eD=Gh({name:"auth",initialState:{user:null,loading:!1,error:null},reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(Rp.pending,e=>{e.loading=!0,e.error=null}).addCase(Rp.fulfilled,(e,t)=>{e.user=t.payload,e.loading=!1}).addCase(Rp.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Cp.pending,e=>{e.loading=!0,e.error=null}).addCase(Cp.fulfilled,(e,t)=>{e.user=t.payload,e.loading=!1}).addCase(Cp.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Ap.pending,e=>{e.loading=!0,e.error=null}).addCase(Ap.fulfilled,e=>{e.user=null,e.loading=!1}).addCase(Ap.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(lh.pending,e=>{e.loading=!0}).addCase(lh.fulfilled,(e,t)=>{e.user=t.payload,e.loading=!1}).addCase(lh.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),tD=eD.reducer,N_={isOpen:!1,appliedFilters:{sortBy:"popularity.desc",genres:[],yearRange:{from:null,to:null},ratingRange:{from:null,to:null}}},aT=Gh({name:"filter",initialState:N_,reducers:{toggleFilterBar:n=>{n.isOpen=!n.isOpen},openFilterBar:n=>{n.isOpen=!0},closeFilterBar:n=>{n.isOpen=!1},applyFilters:(n,e)=>{n.appliedFilters={...n.appliedFilters,...e.payload}},clearFilters:n=>{n.appliedFilters=N_.appliedFilters},updateSortBy:(n,e)=>{n.appliedFilters.sortBy=e.payload}}}),{toggleFilterBar:nD,openFilterBar:r4,closeFilterBar:b_,applyFilters:rD,clearFilters:iD,updateSortBy:i4}=aT.actions,sD=aT.reducer,lT=async(n,e,t)=>{try{const r=du(Ua,`users/${n}/${e}`,t.id.toString());return await sT(r,t),t}catch(r){throw console.error(`Error adding to Firestore ${e}:`,r.message),new Error("Failed to add movie to collection. Please try again later.")}},uT=async(n,e,t)=>{try{const r=du(Ua,`users/${n}/${e}`,t.toString());return await Kb(r),t}catch(r){throw console.error(`Error removing from Firestore ${e}:`,r.message),new Error("Failed to remove movie from collection. Please try again later.")}},cT=async(n,e)=>{try{const t=Pb(Ua,`users/${n}/${e}`);return(await Wb(t)).docs.map(s=>s.data())}catch(t){throw console.error(`Error fetching Firestore ${e}:`,t.message),new Error("Failed to fetch movies from collection. Please try again later.")}},Aa=rr("userCollections/fetchFavorites",async(n,{rejectWithValue:e})=>{try{return await cT(n,"favorites")}catch(t){return e(t.message)}}),Pa=rr("userCollections/fetchWatchlist",async(n,{rejectWithValue:e})=>{try{return await cT(n,"watchlist")}catch(t){return e(t.message)}}),Ya=rr("userCollections/addToFavorites",async({uid:n,movie:e},{rejectWithValue:t})=>{try{return await lT(n,"favorites",e)}catch(r){return t(r.message)}}),Xa=rr("userCollections/addToWatchlist",async({uid:n,movie:e},{rejectWithValue:t})=>{try{return await lT(n,"watchlist",e)}catch(r){return t(r.message)}}),Za=rr("userCollections/removeFromFavorites",async({uid:n,movieId:e},{rejectWithValue:t})=>{try{return await uT(n,"favorites",e)}catch(r){return t(r.message)}}),el=rr("userCollections/removeFromWatchlist",async({uid:n,movieId:e},{rejectWithValue:t})=>{try{return await uT(n,"watchlist",e)}catch(r){return t(r.message)}}),oD={favorites:[],watchlist:[],loading:!1,error:null},aD=Gh({name:"userCollections",initialState:oD,reducers:{clearFavorites:n=>{n.favorites=[]},clearWatchlist:n=>{n.watchlist=[]}},extraReducers:n=>{n.addCase(Aa.pending,e=>{e.loading=!0,e.error=null}).addCase(Aa.fulfilled,(e,t)=>{e.loading=!1,e.favorites=t.payload}).addCase(Aa.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Pa.pending,e=>{e.loading=!0,e.error=null}).addCase(Pa.fulfilled,(e,t)=>{e.loading=!1,e.watchlist=t.payload}).addCase(Pa.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Ya.fulfilled,(e,t)=>{e.favorites.push(t.payload)}).addCase(Za.fulfilled,(e,t)=>{e.favorites=e.favorites.filter(r=>r.id!==t.payload)}).addCase(Xa.fulfilled,(e,t)=>{e.watchlist.push(t.payload)}).addCase(el.fulfilled,(e,t)=>{e.watchlist=e.watchlist.filter(r=>r.id!==t.payload)})}}),lD=aD.reducer,uD=BI({reducer:{auth:tD,movies:zC,filter:sD,userCollections:lD}});var Ol={},D_;function cD(){if(D_)return Ol;D_=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.parse=u,Ol.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,C){const R=new a,D=T.length;if(D<2)return R;const A=(C==null?void 0:C.decode)||v;let F=0;do{const Q=T.indexOf("=",F);if(Q===-1)break;const G=T.indexOf(";",F),ne=G===-1?D:G;if(Q>ne){F=T.lastIndexOf(";",Q-1)+1;continue}const L=h(T,F,Q),re=f(T,Q,L),b=T.slice(L,re);if(R[b]===void 0){let S=h(T,Q+1,ne),P=f(T,ne,S);const O=A(T.slice(S,P));R[b]=O}F=ne+1}while(F<D);return R}function h(T,C,R){do{const D=T.charCodeAt(C);if(D!==32&&D!==9)return C}while(++C<R);return R}function f(T,C,R){for(;C>R;){const D=T.charCodeAt(--C);if(D!==32&&D!==9)return C+1}return R}function m(T,C,R){const D=(R==null?void 0:R.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const A=D(C);if(!e.test(A))throw new TypeError(`argument val is invalid: ${C}`);let F=T+"="+A;if(!R)return F;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);F+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);F+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);F+="; Path="+R.path}if(R.expires){if(!w(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);F+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(F+="; HttpOnly"),R.secure&&(F+="; Secure"),R.partitioned&&(F+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return F}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return s.call(T)==="[object Date]"}return Ol}cD();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var O_="popstate";function hD(n={}){function e(r,s){let{pathname:a,search:u,hash:h}=r.location;return fu("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Us(s)}return fD(e,t,null,n)}function Qe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dD(){return Math.random().toString(36).substring(2,10)}function L_(n,e){return{usr:n.state,key:n.key,idx:e}}function fu(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?$s(e):e,state:t,key:e&&e.key||r||dD()}}function Us({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function $s(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function fD(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h="POP",f=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function w(){h="POP";let A=v(),F=A==null?null:A-m;m=A,f&&f({action:h,location:D.location,delta:F})}function T(A,F){h="PUSH";let Q=fu(D.location,A,F);m=v()+1;let G=L_(Q,m),ne=D.createHref(Q);try{u.pushState(G,"",ne)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(ne)}a&&f&&f({action:h,location:D.location,delta:1})}function C(A,F){h="REPLACE";let Q=fu(D.location,A,F);m=v();let G=L_(Q,m),ne=D.createHref(Q);u.replaceState(G,"",ne),a&&f&&f({action:h,location:D.location,delta:0})}function R(A){let F=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof A=="string"?A:Us(A);return Q=Q.replace(/ $/,"%20"),Qe(F,`No window.location.(origin|href) available to create URL for href: ${Q}`),new URL(Q,F)}let D={get action(){return h},get location(){return n(s,u)},listen(A){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(O_,w),f=A,()=>{s.removeEventListener(O_,w),f=null}},createHref(A){return e(s,A)},createURL:R,encodeLocation(A){let F=R(A);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:C,go(A){return u.go(A)}};return D}var pD=new Set(["lazy","caseSensitive","path","id","index","children"]);function mD(n){return n.index===!0}function jh(n,e,t=[],r={}){return n.map((s,a)=>{let u=[...t,String(a)],h=typeof s.id=="string"?s.id:u.join("-");if(Qe(s.index!==!0||!s.children,"Cannot specify children on an index route"),Qe(!r[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),mD(s)){let f={...s,...e(s),id:h};return r[h]=f,f}else{let f={...s,...e(s),id:h,children:void 0};return r[h]=f,s.children&&(f.children=jh(s.children,e,u,r)),f}})}function As(n,e,t="/"){return uh(n,e,t,!1)}function uh(n,e,t,r){let s=typeof e=="string"?$s(e):e,a=Vr(s.pathname||"/",t);if(a==null)return null;let u=hT(n);yD(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=PD(a);h=CD(u[f],m,r)}return h}function gD(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function hT(n,e=[],t=[],r=""){let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Qe(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=ai([r,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(Qe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),hT(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:ID(m,a.index),routesMeta:v})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of dT(a.path))s(a,u,f)}),e}function dT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=dT(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function yD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:RD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var vD=/^:[\w-]+$/,_D=3,wD=2,ED=1,TD=10,SD=-2,M_=n=>n==="*";function ID(n,e){let t=n.split("/"),r=t.length;return t.some(M_)&&(r+=SD),e&&(r+=wD),t.filter(s=>!M_(s)).reduce((s,a)=>s+(vD.test(a)?_D:a===""?ED:TD),r)}function RD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function CD(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=Bh({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=Bh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:ai([a,w.pathname]),pathnameBase:ND(ai([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=ai([a,w.pathnameBase]))}return u}function Bh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=AD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:v,isOptional:w},T)=>{if(v==="*"){let R=h[T]||"";u=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const C=h[T];return w&&!C?m[v]=void 0:m[v]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function AD(n,e=!1,t=!0){nr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Vr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function kD(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?$s(n):n;return{pathname:t?t.startsWith("/")?t:xD(t,e):e,search:bD(r),hash:DD(s)}}function xD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Pp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gg(n){let e=fT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function yg(n,e,t,r=!1){let s;typeof n=="string"?s=$s(n):(s={...n},Qe(!s.pathname||!s.pathname.includes("?"),Pp("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),Pp("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),Pp("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}h=w>=0?e[w]:"/"}let f=kD(s,h),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var ai=n=>n.join("/").replace(/\/\/+/g,"/"),ND=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),bD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,DD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,zh=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Sd(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var pT=["POST","PUT","PATCH","DELETE"],OD=new Set(pT),LD=["GET",...pT],MD=new Set(LD),VD=new Set([301,302,303,307,308]),FD=new Set([307,308]),kp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},UD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ll={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),mT="remix-router-transitions",gT=Symbol("ResetLoaderData");function BD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Qe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.mapRouteProperties||jD,s={},a=jh(n.routes,r,void 0,s),u,h=n.basename||"/",f=n.dataStrategy||qD,m=n.patchRoutesOnNavigation,v={...n.future},w=null,T=new Set,C=null,R=null,D=null,A=n.hydrationData!=null,F=As(a,n.history.location,h),Q=null;if(F==null&&!m){let V=fr(404,{pathname:n.history.location.pathname}),{matches:$,route:Y}=K_(a);F=$,Q={[Y.id]:V}}F&&!n.hydrationData&&yr(F,a,n.history.location.pathname).active&&(F=null);let G;if(F)if(F.some(V=>V.route.lazy))G=!1;else if(!F.some(V=>V.route.loader))G=!0;else{let V=n.hydrationData?n.hydrationData.loaderData:null,$=n.hydrationData?n.hydrationData.errors:null;if($){let Y=F.findIndex(te=>$[te.route.id]!==void 0);G=F.slice(0,Y+1).every(te=>!mm(te.route,V,$))}else G=F.every(Y=>!mm(Y.route,V,$))}else{G=!1,F=[];let V=yr(null,a,n.history.location.pathname);V.active&&V.matches&&(F=V.matches)}let ne,L={historyAction:n.history.action,location:n.history.location,matches:F,initialized:G,navigation:kp,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Q,fetchers:new Map,blockers:new Map},re="POP",b=!1,S,P=!1,O=new Map,U=null,B=!1,k=!1,ct=new Set,Je=new Map,kt=0,Ye=-1,ce=new Map,Se=new Set,fe=new Map,z=new Map,ee=new Set,Ee=new Map,Ve,Le=null;function $e(){if(w=n.history.listen(({action:V,location:$,delta:Y})=>{if(Ve){Ve(),Ve=void 0;return}nr(Ee.size===0||Y!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=Ji({currentLocation:L.location,nextLocation:$,historyAction:V});if(te&&Y!=null){let pe=new Promise(ve=>{Ve=ve});n.history.go(Y*-1),$r(te,{state:"blocked",location:$,proceed(){$r(te,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),pe.then(()=>n.history.go(Y))},reset(){let ve=new Map(L.blockers);ve.set(te,Ll),Ue({blockers:ve})}});return}return un(V,$)}),t){rO(e,O);let V=()=>iO(e,O);e.addEventListener("pagehide",V),U=()=>e.removeEventListener("pagehide",V)}return L.initialized||un("POP",L.location,{initialHydration:!0}),ne}function tt(){w&&w(),U&&U(),T.clear(),S&&S.abort(),L.fetchers.forEach((V,$)=>zn($)),L.blockers.forEach((V,$)=>Qi($))}function nt(V){return T.add(V),()=>T.delete(V)}function Ue(V,$={}){L={...L,...V};let Y=[],te=[];L.fetchers.forEach((pe,ve)=>{pe.state==="idle"&&(ee.has(ve)?Y.push(ve):te.push(ve))}),[...T].forEach(pe=>pe(L,{deletedFetchers:Y,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),Y.forEach(pe=>zn(pe)),te.forEach(pe=>L.fetchers.delete(pe))}function mt(V,$,{flushSync:Y}={}){var he,Ne;let te=L.actionData!=null&&L.navigation.formMethod!=null&&Dr(L.navigation.formMethod)&&L.navigation.state==="loading"&&((he=V.state)==null?void 0:he._isRedirect)!==!0,pe;$.actionData?Object.keys($.actionData).length>0?pe=$.actionData:pe=null:te?pe=L.actionData:pe=null;let ve=$.loaderData?W_(L.loaderData,$.loaderData,$.matches||[],$.errors):L.loaderData,Ae=L.blockers;Ae.size>0&&(Ae=new Map(Ae),Ae.forEach((je,ot)=>Ae.set(ot,Ll)));let me=b===!0||L.navigation.formMethod!=null&&Dr(L.navigation.formMethod)&&((Ne=V.state)==null?void 0:Ne._isRedirect)!==!0;u&&(a=u,u=void 0),B||re==="POP"||(re==="PUSH"?n.history.push(V,V.state):re==="REPLACE"&&n.history.replace(V,V.state));let we;if(re==="POP"){let je=O.get(L.location.pathname);je&&je.has(V.pathname)?we={currentLocation:L.location,nextLocation:V}:O.has(V.pathname)&&(we={currentLocation:V,nextLocation:L.location})}else if(P){let je=O.get(L.location.pathname);je?je.add(V.pathname):(je=new Set([V.pathname]),O.set(L.location.pathname,je)),we={currentLocation:L.location,nextLocation:V}}Ue({...$,actionData:pe,loaderData:ve,historyAction:re,location:V,initialized:!0,navigation:kp,revalidation:"idle",restoreScrollPosition:$n(V,$.matches||L.matches),preventScrollReset:me,blockers:Ae},{viewTransitionOpts:we,flushSync:Y===!0}),re="POP",b=!1,P=!1,B=!1,k=!1,Le==null||Le.resolve(),Le=null}async function ir(V,$){if(typeof V=="number"){n.history.go(V);return}let Y=pm(L.location,L.matches,h,V,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:te,submission:pe,error:ve}=V_(!1,Y,$),Ae=L.location,me=fu(L.location,te,$&&$.state);me={...me,...n.history.encodeLocation(me)};let we=$&&$.replace!=null?$.replace:void 0,he="PUSH";we===!0?he="REPLACE":we===!1||pe!=null&&Dr(pe.formMethod)&&pe.formAction===L.location.pathname+L.location.search&&(he="REPLACE");let Ne=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,je=($&&$.flushSync)===!0,ot=Ji({currentLocation:Ae,nextLocation:me,historyAction:he});if(ot){$r(ot,{state:"blocked",location:me,proceed(){$r(ot,{state:"proceeding",proceed:void 0,reset:void 0,location:me}),ir(V,$)},reset(){let At=new Map(L.blockers);At.set(ot,Ll),Ue({blockers:At})}});return}await un(he,me,{submission:pe,pendingError:ve,preventScrollReset:Ne,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:je})}function Hi(){Le||(Le=sO()),jr(),Ue({revalidation:"loading"});let V=Le.promise;return L.navigation.state==="submitting"?V:L.navigation.state==="idle"?(un(L.historyAction,L.location,{startUninterruptedRevalidation:!0}),V):(un(re||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:P===!0}),V)}async function un(V,$,Y){S&&S.abort(),S=null,re=V,B=(Y&&Y.startUninterruptedRevalidation)===!0,An(L.location,L.matches),b=(Y&&Y.preventScrollReset)===!0,P=(Y&&Y.enableViewTransition)===!0;let te=u||a,pe=Y&&Y.overrideNavigation,ve=As(te,$,h),Ae=(Y&&Y.flushSync)===!0,me=yr(ve,te,$.pathname);if(me.active&&me.matches&&(ve=me.matches),!ve){let{error:qe,notFoundMatches:rt,route:at}=gr($.pathname);mt($,{matches:rt,loaderData:{},errors:{[at.id]:qe}},{flushSync:Ae});return}if(L.initialized&&!k&&XD(L.location,$)&&!(Y&&Y.submission&&Dr(Y.submission.formMethod))){mt($,{matches:ve},{flushSync:Ae});return}S=new AbortController;let we=ga(n.history,$,S.signal,Y&&Y.submission),he;if(Y&&Y.pendingError)he=[go(ve).route.id,{type:"error",error:Y.pendingError}];else if(Y&&Y.submission&&Dr(Y.submission.formMethod)){let qe=await di(we,$,Y.submission,ve,me.active,{replace:Y.replace,flushSync:Ae});if(qe.shortCircuited)return;if(qe.pendingActionResult){let[rt,at]=qe.pendingActionResult;if(Jn(at)&&Sd(at.error)&&at.error.status===404){S=null,mt($,{matches:qe.matches,loaderData:{},errors:{[rt]:at.error}});return}}ve=qe.matches||ve,he=qe.pendingActionResult,pe=xp($,Y.submission),Ae=!1,me.active=!1,we=ga(n.history,we.url,we.signal)}let{shortCircuited:Ne,matches:je,loaderData:ot,errors:At}=await Wi(we,$,ve,me.active,pe,Y&&Y.submission,Y&&Y.fetcherSubmission,Y&&Y.replace,Y&&Y.initialHydration===!0,Ae,he);Ne||(S=null,mt($,{matches:je||ve,...q_(he),loaderData:ot,errors:At}))}async function di(V,$,Y,te,pe,ve={}){jr();let Ae=tO($,Y);if(Ue({navigation:Ae},{flushSync:ve.flushSync===!0}),pe){let he=await En(te,$.pathname,V.signal);if(he.type==="aborted")return{shortCircuited:!0};if(he.type==="error"){let Ne=go(he.partialMatches).route.id;return{matches:he.partialMatches,pendingActionResult:[Ne,{type:"error",error:he.error}]}}else if(he.matches)te=he.matches;else{let{notFoundMatches:Ne,error:je,route:ot}=gr($.pathname);return{matches:Ne,pendingActionResult:[ot.id,{type:"error",error:je}]}}}let me,we=ql(te,$);if(!we.route.action&&!we.route.lazy)me={type:"error",error:fr(405,{method:V.method,pathname:$.pathname,routeId:we.route.id})};else if(me=(await mr("action",L,V,[we],te,null))[we.route.id],V.signal.aborted)return{shortCircuited:!0};if(_o(me)){let he;return ve&&ve.replace!=null?he=ve.replace:he=z_(me.response.headers.get("Location"),new URL(V.url),h)===L.location.pathname+L.location.search,await Qt(V,me,!0,{submission:Y,replace:he}),{shortCircuited:!0}}if(Jn(me)){let he=go(te,we.route.id);return(ve&&ve.replace)!==!0&&(re="PUSH"),{matches:te,pendingActionResult:[he.route.id,me]}}return{matches:te,pendingActionResult:[we.route.id,me]}}async function Wi(V,$,Y,te,pe,ve,Ae,me,we,he,Ne){let je=pe||xp($,ve),ot=ve||Ae||Q_(je),At=!B&&!we;if(te){if(At){let gt=qi(Ne);Ue({navigation:je,...gt!==void 0?{actionData:gt}:{}},{flushSync:he})}let Xe=await En(Y,$.pathname,V.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let gt=go(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,loaderData:{},errors:{[gt]:Xe.error}}}else if(Xe.matches)Y=Xe.matches;else{let{error:gt,notFoundMatches:Xt,route:Er}=gr($.pathname);return{matches:Xt,loaderData:{},errors:{[Er.id]:gt}}}}let qe=u||a,[rt,at]=U_(n.history,L,Y,ot,$,we===!0,k,ct,ee,fe,Se,qe,h,Ne);if(Ye=++kt,rt.length===0&&at.length===0){let Xe=zr();return mt($,{matches:Y,loaderData:{},errors:Ne&&Jn(Ne[1])?{[Ne[0]]:Ne[1].error}:null,...q_(Ne),...Xe?{fetchers:new Map(L.fetchers)}:{}},{flushSync:he}),{shortCircuited:!0}}if(At){let Xe={};if(!te){Xe.navigation=je;let gt=qi(Ne);gt!==void 0&&(Xe.actionData=gt)}at.length>0&&(Xe.fetchers=Ws(at)),Ue(Xe,{flushSync:he})}at.forEach(Xe=>{Jt(Xe.key),Xe.controller&&Je.set(Xe.key,Xe.controller)});let vr=()=>at.forEach(Xe=>Jt(Xe.key));S&&S.signal.addEventListener("abort",vr);let{loaderResults:_r,fetcherResults:cn}=await fi(L,Y,rt,at,V);if(V.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",vr),at.forEach(Xe=>Je.delete(Xe.key));let Yt=Wc(_r);if(Yt)return await Qt(V,Yt.result,!0,{replace:me}),{shortCircuited:!0};if(Yt=Wc(cn),Yt)return Se.add(Yt.key),await Qt(V,Yt.result,!0,{replace:me}),{shortCircuited:!0};let{loaderData:gi,errors:Hr}=H_(L,Y,_r,Ne,at,cn);we&&L.errors&&(Hr={...L.errors,...Hr});let wr=zr(),lt=Gi(Ye),yi=wr||lt||at.length>0;return{matches:Y,loaderData:gi,errors:Hr,...yi?{fetchers:new Map(L.fetchers)}:{}}}function qi(V){if(V&&!Jn(V[1]))return{[V[0]]:V[1].data};if(L.actionData)return Object.keys(L.actionData).length===0?null:L.actionData}function Ws(V){return V.forEach($=>{let Y=L.fetchers.get($.key),te=Ml(void 0,Y?Y.data:void 0);L.fetchers.set($.key,te)}),new Map(L.fetchers)}async function Lo(V,$,Y,te){Jt(V);let pe=(te&&te.flushSync)===!0,ve=u||a,Ae=pm(L.location,L.matches,h,Y,$,te==null?void 0:te.relative),me=As(ve,Ae,h),we=yr(me,ve,Ae);if(we.active&&we.matches&&(me=we.matches),!me){ht(V,$,fr(404,{pathname:Ae}),{flushSync:pe});return}let{path:he,submission:Ne,error:je}=V_(!0,Ae,te);if(je){ht(V,$,je,{flushSync:pe});return}let ot=ql(me,he),At=(te&&te.preventScrollReset)===!0;if(Ne&&Dr(Ne.formMethod)){await Ki(V,$,he,ot,me,we.active,pe,At,Ne);return}fe.set(V,{routeId:$,path:he}),await pr(V,$,he,ot,me,we.active,pe,At,Ne)}async function Ki(V,$,Y,te,pe,ve,Ae,me,we){jr(),fe.delete(V);function he(yt){if(!yt.route.action&&!yt.route.lazy){let Pn=fr(405,{method:we.formMethod,pathname:Y,routeId:$});return ht(V,$,Pn,{flushSync:Ae}),!0}return!1}if(!ve&&he(te))return;let Ne=L.fetchers.get(V);Cn(V,nO(we,Ne),{flushSync:Ae});let je=new AbortController,ot=ga(n.history,Y,je.signal,we);if(ve){let yt=await En(pe,Y,ot.signal);if(yt.type==="aborted")return;if(yt.type==="error"){ht(V,$,yt.error,{flushSync:Ae});return}else if(yt.matches){if(pe=yt.matches,te=ql(pe,Y),he(te))return}else{ht(V,$,fr(404,{pathname:Y}),{flushSync:Ae});return}}Je.set(V,je);let At=kt,rt=(await mr("action",L,ot,[te],pe,V))[te.route.id];if(ot.signal.aborted){Je.get(V)===je&&Je.delete(V);return}if(ee.has(V)){if(_o(rt)||Jn(rt)){Cn(V,Es(void 0));return}}else{if(_o(rt))if(Je.delete(V),Ye>At){Cn(V,Es(void 0));return}else return Se.add(V),Cn(V,Ml(we)),Qt(ot,rt,!1,{fetcherSubmission:we,preventScrollReset:me});if(Jn(rt)){ht(V,$,rt.error);return}}let at=L.navigation.location||L.location,vr=ga(n.history,at,je.signal),_r=u||a,cn=L.navigation.state!=="idle"?As(_r,L.navigation.location,h):L.matches;Qe(cn,"Didn't find any matches after fetcher action");let Yt=++kt;ce.set(V,Yt);let gi=Ml(we,rt.data);L.fetchers.set(V,gi);let[Hr,wr]=U_(n.history,L,cn,we,at,!1,k,ct,ee,fe,Se,_r,h,[te.route.id,rt]);wr.filter(yt=>yt.key!==V).forEach(yt=>{let Pn=yt.key,hn=L.fetchers.get(Pn),Mo=Ml(void 0,hn?hn.data:void 0);L.fetchers.set(Pn,Mo),Jt(Pn),yt.controller&&Je.set(Pn,yt.controller)}),Ue({fetchers:new Map(L.fetchers)});let lt=()=>wr.forEach(yt=>Jt(yt.key));je.signal.addEventListener("abort",lt);let{loaderResults:yi,fetcherResults:Xe}=await fi(L,cn,Hr,wr,vr);if(je.signal.aborted)return;je.signal.removeEventListener("abort",lt),ce.delete(V),Je.delete(V),wr.forEach(yt=>Je.delete(yt.key));let gt=Wc(yi);if(gt)return Qt(vr,gt.result,!1,{preventScrollReset:me});if(gt=Wc(Xe),gt)return Se.add(gt.key),Qt(vr,gt.result,!1,{preventScrollReset:me});let{loaderData:Xt,errors:Er}=H_(L,cn,yi,void 0,wr,Xe);if(L.fetchers.has(V)){let yt=Es(rt.data);L.fetchers.set(V,yt)}Gi(Yt),L.navigation.state==="loading"&&Yt>Ye?(Qe(re,"Expected pending action"),S&&S.abort(),mt(L.navigation.location,{matches:cn,loaderData:Xt,errors:Er,fetchers:new Map(L.fetchers)})):(Ue({errors:Er,loaderData:W_(L.loaderData,Xt,cn,Er),fetchers:new Map(L.fetchers)}),k=!1)}async function pr(V,$,Y,te,pe,ve,Ae,me,we){let he=L.fetchers.get(V);Cn(V,Ml(we,he?he.data:void 0),{flushSync:Ae});let Ne=new AbortController,je=ga(n.history,Y,Ne.signal);if(ve){let rt=await En(pe,Y,je.signal);if(rt.type==="aborted")return;if(rt.type==="error"){ht(V,$,rt.error,{flushSync:Ae});return}else if(rt.matches)pe=rt.matches,te=ql(pe,Y);else{ht(V,$,fr(404,{pathname:Y}),{flushSync:Ae});return}}Je.set(V,Ne);let ot=kt,qe=(await mr("loader",L,je,[te],pe,V))[te.route.id];if(Je.get(V)===Ne&&Je.delete(V),!je.signal.aborted){if(ee.has(V)){Cn(V,Es(void 0));return}if(_o(qe))if(Ye>ot){Cn(V,Es(void 0));return}else{Se.add(V),await Qt(je,qe,!1,{preventScrollReset:me});return}if(Jn(qe)){ht(V,$,qe.error);return}Cn(V,Es(qe.data))}}async function Qt(V,$,Y,{submission:te,fetcherSubmission:pe,preventScrollReset:ve,replace:Ae}={}){$.response.headers.has("X-Remix-Revalidate")&&(k=!0);let me=$.response.headers.get("Location");Qe(me,"Expected a Location header on the redirect Response"),me=z_(me,new URL(V.url),h);let we=fu(L.location,me,{_isRedirect:!0});if(t){let qe=!1;if($.response.headers.has("X-Remix-Reload-Document"))qe=!0;else if(vg.test(me)){const rt=n.history.createURL(me);qe=rt.origin!==e.location.origin||Vr(rt.pathname,h)==null}if(qe){Ae?e.location.replace(me):e.location.assign(me);return}}S=null;let he=Ae===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ne,formAction:je,formEncType:ot}=L.navigation;!te&&!pe&&Ne&&je&&ot&&(te=Q_(L.navigation));let At=te||pe;if(FD.has($.response.status)&&At&&Dr(At.formMethod))await un(he,we,{submission:{...At,formAction:me},preventScrollReset:ve||b,enableViewTransition:Y?P:void 0});else{let qe=xp(we,te);await un(he,we,{overrideNavigation:qe,fetcherSubmission:pe,preventScrollReset:ve||b,enableViewTransition:Y?P:void 0})}}async function mr(V,$,Y,te,pe,ve){let Ae,me={};try{Ae=await KD(f,V,$,Y,te,pe,ve,s,r)}catch(we){return te.forEach(he=>{me[he.route.id]={type:"error",error:we}}),me}for(let[we,he]of Object.entries(Ae))if(ZD(he)){let Ne=he.result;me[we]={type:"redirect",response:JD(Ne,Y,we,pe,h)}}else me[we]=await QD(he);return me}async function fi(V,$,Y,te,pe){let ve=mr("loader",V,pe,Y,$,null),Ae=Promise.all(te.map(async he=>{if(he.matches&&he.match&&he.controller){let je=(await mr("loader",V,ga(n.history,he.path,he.controller.signal),[he.match],he.matches,he.key))[he.match.route.id];return{[he.key]:je}}else return Promise.resolve({[he.key]:{type:"error",error:fr(404,{pathname:he.path})}})})),me=await ve,we=(await Ae).reduce((he,Ne)=>Object.assign(he,Ne),{});return{loaderResults:me,fetcherResults:we}}function jr(){k=!0,fe.forEach((V,$)=>{Je.has($)&&ct.add($),Jt($)})}function Cn(V,$,Y={}){L.fetchers.set(V,$),Ue({fetchers:new Map(L.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function ht(V,$,Y,te={}){let pe=go(L.matches,$);zn(V),Ue({errors:{[pe.route.id]:Y},fetchers:new Map(L.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Ct(V){return z.set(V,(z.get(V)||0)+1),ee.has(V)&&ee.delete(V),L.fetchers.get(V)||UD}function zn(V){let $=L.fetchers.get(V);Je.has(V)&&!($&&$.state==="loading"&&ce.has(V))&&Jt(V),fe.delete(V),ce.delete(V),Se.delete(V),ee.delete(V),ct.delete(V),L.fetchers.delete(V)}function qs(V){let $=(z.get(V)||0)-1;$<=0?(z.delete(V),ee.add(V)):z.set(V,$),Ue({fetchers:new Map(L.fetchers)})}function Jt(V){let $=Je.get(V);$&&($.abort(),Je.delete(V))}function Br(V){for(let $ of V){let Y=Ct($),te=Es(Y.data);L.fetchers.set($,te)}}function zr(){let V=[],$=!1;for(let Y of Se){let te=L.fetchers.get(Y);Qe(te,`Expected fetcher: ${Y}`),te.state==="loading"&&(Se.delete(Y),V.push(Y),$=!0)}return Br(V),$}function Gi(V){let $=[];for(let[Y,te]of ce)if(te<V){let pe=L.fetchers.get(Y);Qe(pe,`Expected fetcher: ${Y}`),pe.state==="loading"&&(Jt(Y),ce.delete(Y),$.push(Y))}return Br($),$.length>0}function Ks(V,$){let Y=L.blockers.get(V)||Ll;return Ee.get(V)!==$&&Ee.set(V,$),Y}function Qi(V){L.blockers.delete(V),Ee.delete(V)}function $r(V,$){let Y=L.blockers.get(V)||Ll;Qe(Y.state==="unblocked"&&$.state==="blocked"||Y.state==="blocked"&&$.state==="blocked"||Y.state==="blocked"&&$.state==="proceeding"||Y.state==="blocked"&&$.state==="unblocked"||Y.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${Y.state} -> ${$.state}`);let te=new Map(L.blockers);te.set(V,$),Ue({blockers:te})}function Ji({currentLocation:V,nextLocation:$,historyAction:Y}){if(Ee.size===0)return;Ee.size>1&&nr(!1,"A router only supports one blocker at a time");let te=Array.from(Ee.entries()),[pe,ve]=te[te.length-1],Ae=L.blockers.get(pe);if(!(Ae&&Ae.state==="proceeding")&&ve({currentLocation:V,nextLocation:$,historyAction:Y}))return pe}function gr(V){let $=fr(404,{pathname:V}),Y=u||a,{matches:te,route:pe}=K_(Y);return{notFoundMatches:te,route:pe,error:$}}function Yi(V,$,Y){if(C=V,D=$,R=Y||null,!A&&L.navigation===kp){A=!0;let te=$n(L.location,L.matches);te!=null&&Ue({restoreScrollPosition:te})}return()=>{C=null,D=null,R=null}}function pi(V,$){return R&&R(V,$.map(te=>gD(te,L.loaderData)))||V.key}function An(V,$){if(C&&D){let Y=pi(V,$);C[Y]=D()}}function $n(V,$){if(C){let Y=pi(V,$),te=C[Y];if(typeof te=="number")return te}return null}function yr(V,$,Y){if(m)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:uh($,Y,h,!0)}}else return{active:!0,matches:uh($,Y,h,!0)||[]};return{active:!1,matches:null}}async function En(V,$,Y){if(!m)return{type:"success",matches:V};let te=V;for(;;){let pe=u==null,ve=u||a,Ae=s;try{await m({path:$,matches:te,patch:(he,Ne)=>{Y.aborted||B_(he,Ne,ve,Ae,r)}})}catch(he){return{type:"error",error:he,partialMatches:te}}finally{pe&&!Y.aborted&&(a=[...a])}if(Y.aborted)return{type:"aborted"};let me=As(ve,$,h);if(me)return{type:"success",matches:me};let we=uh(ve,$,h,!0);if(!we||te.length===we.length&&te.every((he,Ne)=>he.route.id===we[Ne].route.id))return{type:"success",matches:null};te=we}}function Gs(V){s={},u=jh(V,r,void 0,s)}function mi(V,$){let Y=u==null;B_(V,$,u||a,s,r),Y&&(a=[...a],Ue({}))}return ne={get basename(){return h},get future(){return v},get state(){return L},get routes(){return a},get window(){return e},initialize:$e,subscribe:nt,enableScrollRestoration:Yi,navigate:ir,fetch:Lo,revalidate:Hi,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:Ct,deleteFetcher:qs,dispose:tt,getBlocker:Ks,deleteBlocker:Qi,patchRoutes:mi,_internalFetchControllers:Je,_internalSetRoutes:Gs},ne}function zD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function pm(n,e,t,r,s,a){let u,h;if(s){u=[];for(let m of e)if(u.push(m),m.route.id===s){h=m;break}}else u=e,h=e[e.length-1];let f=yg(r||".",gg(u),Vr(n.pathname,t)||n.pathname,a==="path");if(r==null&&(f.search=n.search,f.hash=n.hash),(r==null||r===""||r===".")&&h){let m=_g(f.search);if(h.route.index&&!m)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&m){let v=new URLSearchParams(f.search),w=v.getAll("index");v.delete("index"),w.filter(C=>C).forEach(C=>v.append("index",C));let T=v.toString();f.search=T?`?${T}`:""}}return t!=="/"&&(f.pathname=f.pathname==="/"?t:ai([t,f.pathname])),Us(f)}function V_(n,e,t){if(!t||!zD(t))return{path:e};if(t.formMethod&&!eO(t.formMethod))return{path:e,error:fr(405,{method:t.formMethod})};let r=()=>({path:e,error:fr(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),u=vT(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Dr(a))return r();let w=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((T,[C,R])=>`${T}${C}=${R}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:w}}}else if(t.formEncType==="application/json"){if(!Dr(a))return r();try{let w=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:u,formEncType:t.formEncType,formData:void 0,json:w,text:void 0}}}catch{return r()}}}Qe(typeof FormData=="function","FormData is not available in this environment");let h,f;if(t.formData)h=gm(t.formData),f=t.formData;else if(t.body instanceof FormData)h=gm(t.body),f=t.body;else if(t.body instanceof URLSearchParams)h=t.body,f=$_(h);else if(t.body==null)h=new URLSearchParams,f=new FormData;else try{h=new URLSearchParams(t.body),f=$_(h)}catch{return r()}let m={formMethod:a,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(Dr(m.formMethod))return{path:e,submission:m};let v=$s(e);return n&&v.search&&_g(v.search)&&h.append("index",""),v.search=`?${h}`,{path:Us(v),submission:m}}function F_(n,e,t=!1){let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function U_(n,e,t,r,s,a,u,h,f,m,v,w,T,C){let R=C?Jn(C[1])?C[1].error:C[1].data:void 0,D=n.createURL(e.location),A=n.createURL(s),F=t;a&&e.errors?F=F_(t,Object.keys(e.errors)[0],!0):C&&Jn(C[1])&&(F=F_(t,C[0]));let Q=C?C[1].statusCode:void 0,G=Q&&Q>=400,ne=F.filter((re,b)=>{let{route:S}=re;if(S.lazy)return!0;if(S.loader==null)return!1;if(a)return mm(S,e.loaderData,e.errors);if($D(e.loaderData,e.matches[b],re))return!0;let P=e.matches[b],O=re;return j_(re,{currentUrl:D,currentParams:P.params,nextUrl:A,nextParams:O.params,...r,actionResult:R,actionStatus:Q,defaultShouldRevalidate:G?!1:u||D.pathname+D.search===A.pathname+A.search||D.search!==A.search||HD(P,O)})}),L=[];return m.forEach((re,b)=>{if(a||!t.some(B=>B.route.id===re.routeId)||f.has(b))return;let S=As(w,re.path,T);if(!S){L.push({key:b,routeId:re.routeId,path:re.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(b),O=ql(S,re.path),U=!1;v.has(b)?U=!1:h.has(b)?(h.delete(b),U=!0):P&&P.state!=="idle"&&P.data===void 0?U=u:U=j_(O,{currentUrl:D,currentParams:e.matches[e.matches.length-1].params,nextUrl:A,nextParams:t[t.length-1].params,...r,actionResult:R,actionStatus:Q,defaultShouldRevalidate:G?!1:u}),U&&L.push({key:b,routeId:re.routeId,path:re.path,matches:S,match:O,controller:new AbortController})}),[ne,L]}function mm(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function $D(n,e,t){let r=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return r||s}function HD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function j_(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function B_(n,e,t,r,s){let a;if(n){let f=r[n];Qe(f,`No route found to patch children into: routeId = ${n}`),f.children||(f.children=[]),a=f.children}else a=t;let u=e.filter(f=>!a.some(m=>yT(f,m))),h=jh(u,s,[n||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...h)}function yT(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>yT(t,a))}):!1}async function WD(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];Qe(s,"No route found in manifest");let a={};for(let u in r){let f=s[u]!==void 0&&u!=="hasErrorBoundary";nr(!f,`Route "${s.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!f&&!pD.has(u)&&(a[u]=r[u])}Object.assign(s,a),Object.assign(s,{...e(s),lazy:void 0})}async function qD({matches:n}){let e=n.filter(r=>r.shouldLoad);return(await Promise.all(e.map(r=>r.resolve()))).reduce((r,s,a)=>Object.assign(r,{[e[a].route.id]:s}),{})}async function KD(n,e,t,r,s,a,u,h,f,m){let v=a.map(C=>C.route.lazy?WD(C.route,f,h):void 0),w=a.map((C,R)=>{let D=v[R],A=s.some(Q=>Q.route.id===C.route.id);return{...C,shouldLoad:A,resolve:async Q=>(Q&&r.method==="GET"&&(C.route.lazy||C.route.loader)&&(A=!0),A?GD(e,r,C,D,Q,m):Promise.resolve({type:"data",result:void 0}))}}),T=await n({matches:w,request:r,params:a[0].params,fetcherKey:u,context:m});try{await Promise.all(v)}catch{}return T}async function GD(n,e,t,r,s,a){let u,h,f=m=>{let v,w=new Promise((R,D)=>v=D);h=()=>v(),e.signal.addEventListener("abort",h);let T=R=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):m({request:e,params:t.params,context:a},...R!==void 0?[R]:[]),C=(async()=>{try{return{type:"data",result:await(s?s(D=>T(D)):T())}}catch(R){return{type:"error",result:R}}})();return Promise.race([C,w])};try{let m=t.route[n];if(r)if(m){let v,[w]=await Promise.all([f(m).catch(T=>{v=T}),r]);if(v!==void 0)throw v;u=w}else if(await r,m=t.route[n],m)u=await f(m);else if(n==="action"){let v=new URL(e.url),w=v.pathname+v.search;throw fr(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:"data",result:void 0};else if(m)u=await f(m);else{let v=new URL(e.url),w=v.pathname+v.search;throw fr(404,{pathname:w})}}catch(m){return{type:"error",result:m}}finally{h&&e.signal.removeEventListener("abort",h)}return u}async function QD(n){var r,s,a,u;let{result:e,type:t}=n;if(_T(e)){let h;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(f){return{type:"error",error:f}}return t==="error"?{type:"error",error:new zh(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:"data",data:h,statusCode:e.status,headers:e.headers}}if(t==="error"){if(G_(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status};e=new zh(((s=e.init)==null?void 0:s.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:Sd(e)?e.status:void 0}}return G_(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function JD(n,e,t,r,s){let a=n.headers.get("Location");if(Qe(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!vg.test(a)){let u=r.slice(0,r.findIndex(h=>h.route.id===t)+1);a=pm(new URL(e.url),u,s,a),n.headers.set("Location",a)}return n}function z_(n,e,t){if(vg.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Vr(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return n}function ga(n,e,t,r){let s=n.createURL(vT(e)).toString(),a={signal:t};if(r&&Dr(r.formMethod)){let{formMethod:u,formEncType:h}=r;a.method=u.toUpperCase(),h==="application/json"?(a.headers=new Headers({"Content-Type":h}),a.body=JSON.stringify(r.json)):h==="text/plain"?a.body=r.text:h==="application/x-www-form-urlencoded"&&r.formData?a.body=gm(r.formData):a.body=r.formData}return new Request(s,a)}function gm(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function $_(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function YD(n,e,t,r=!1,s=!1){let a={},u=null,h,f=!1,m={},v=t&&Jn(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let T=w.route.id,C=e[T];if(Qe(!_o(C),"Cannot handle redirect results in processLoaderData"),Jn(C)){let R=C.error;if(v!==void 0&&(R=v,v=void 0),u=u||{},s)u[T]=R;else{let D=go(n,T);u[D.route.id]==null&&(u[D.route.id]=R)}r||(a[T]=gT),f||(f=!0,h=Sd(C.error)?C.error.status:500),C.headers&&(m[T]=C.headers)}else a[T]=C.data,C.statusCode&&C.statusCode!==200&&!f&&(h=C.statusCode),C.headers&&(m[T]=C.headers)}),v!==void 0&&t&&(u={[t[0]]:v},a[t[0]]=void 0),{loaderData:a,errors:u,statusCode:h||200,loaderHeaders:m}}function H_(n,e,t,r,s,a){let{loaderData:u,errors:h}=YD(e,t,r);return s.forEach(f=>{let{key:m,match:v,controller:w}=f,T=a[m];if(Qe(T,"Did not find corresponding fetcher result"),!(w&&w.signal.aborted))if(Jn(T)){let C=go(n.matches,v==null?void 0:v.route.id);h&&h[C.route.id]||(h={...h,[C.route.id]:T.error}),n.fetchers.delete(m)}else if(_o(T))Qe(!1,"Unhandled fetcher revalidation redirect");else{let C=Es(T.data);n.fetchers.set(m,C)}}),{loaderData:u,errors:h}}function W_(n,e,t,r){let s=Object.entries(e).filter(([,a])=>a!==gT).reduce((a,[u,h])=>(a[u]=h,a),{});for(let a of t){let u=a.route.id;if(!e.hasOwnProperty(u)&&n.hasOwnProperty(u)&&a.route.loader&&(s[u]=n[u]),r&&r.hasOwnProperty(u))break}return s}function q_(n){return n?Jn(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function go(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function K_(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function fr(n,{pathname:e,routeId:t,method:r,type:s,message:a}={}){let u="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(u="Bad Request",r&&e&&t?h=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(h="Unable to encode submission body")):n===403?(u="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(u="Not Found",h=`No route matches URL "${e}"`):n===405&&(u="Method Not Allowed",r&&e&&t?h=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(h=`Invalid request method "${r.toUpperCase()}"`)),new zh(n||500,u,new Error(h),!0)}function Wc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(_o(s))return{key:r,result:s}}}function vT(n){let e=typeof n=="string"?$s(n):n;return Us({...e,hash:""})}function XD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function ZD(n){return _T(n.result)&&VD.has(n.result.status)}function Jn(n){return n.type==="error"}function _o(n){return(n&&n.type)==="redirect"}function G_(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function _T(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function eO(n){return MD.has(n.toUpperCase())}function Dr(n){return OD.has(n.toUpperCase())}function _g(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function ql(n,e){let t=typeof e=="string"?$s(e).search:e.search;if(n[n.length-1].route.index&&_g(t||""))return n[n.length-1];let r=fT(n);return r[r.length-1]}function Q_(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:u}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function xp(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function tO(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ml(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function nO(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Es(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function rO(n,e){try{let t=n.sessionStorage.getItem(mT);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function iO(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(mT,JSON.stringify(t))}catch(r){nr(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function sO(){let n,e,t=new Promise((r,s)=>{n=async a=>{r(a);try{await t}catch{}},e=async a=>{s(a);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Do=W.createContext(null);Do.displayName="DataRouter";var Cu=W.createContext(null);Cu.displayName="DataRouterState";var wg=W.createContext({isTransitioning:!1});wg.displayName="ViewTransition";var wT=W.createContext(new Map);wT.displayName="Fetchers";var oO=W.createContext(null);oO.displayName="Await";var hi=W.createContext(null);hi.displayName="Navigation";var Id=W.createContext(null);Id.displayName="Location";var Ur=W.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var Eg=W.createContext(null);Eg.displayName="RouteError";function aO(n,{relative:e}={}){Qe(Au(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=W.useContext(hi),{hash:s,pathname:a,search:u}=Pu(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:ai([t,a])),r.createHref({pathname:h,search:u,hash:s})}function Au(){return W.useContext(Id)!=null}function Hs(){return Qe(Au(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(Id).location}var ET="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TT(n){W.useContext(hi).static||W.useLayoutEffect(n)}function Oo(){let{isDataRoute:n}=W.useContext(Ur);return n?SO():lO()}function lO(){Qe(Au(),"useNavigate() may be used only in the context of a <Router> component.");let n=W.useContext(Do),{basename:e,navigator:t}=W.useContext(hi),{matches:r}=W.useContext(Ur),{pathname:s}=Hs(),a=JSON.stringify(gg(r)),u=W.useRef(!1);return TT(()=>{u.current=!0}),W.useCallback((f,m={})=>{if(nr(u.current,ET),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=yg(f,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ai([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,s,n])}var uO=W.createContext(null);function cO(n){let e=W.useContext(Ur).outlet;return e&&W.createElement(uO.Provider,{value:n},e)}function hO(){let{matches:n}=W.useContext(Ur),e=n[n.length-1];return e?e.params:{}}function Pu(n,{relative:e}={}){let{matches:t}=W.useContext(Ur),{pathname:r}=Hs(),s=JSON.stringify(gg(t));return W.useMemo(()=>yg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function dO(n,e,t,r){Qe(Au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=W.useContext(hi),{matches:a}=W.useContext(Ur),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Hs(),v;v=m;let w=v.pathname||"/",T=w;if(f!=="/"){let D=f.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(D.length).join("/")}let C=As(n,{pathname:T});return yO(C&&C.map(D=>Object.assign({},D,{params:Object.assign({},h,D.params),pathname:ai([f,s.encodeLocation?s.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?f:ai([f,s.encodeLocation?s.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,t,r)}function fO(){let n=TO(),e=Sd(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:s},t):null,null)}var pO=W.createElement(fO,null),mO=class extends W.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?W.createElement(Ur.Provider,{value:this.props.routeContext},W.createElement(Eg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gO({routeContext:n,match:e,children:t}){let r=W.useContext(Do);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Ur.Provider,{value:n},t)}function yO(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Qe(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:v,errors:w}=t,T=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||T){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,m,v)=>{let w,T=!1,C=null,R=null;t&&(w=a&&m.route.id?a[m.route.id]:void 0,C=m.route.errorElement||pO,u&&(h<0&&v===0?(IO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,R=null):h===v&&(T=!0,R=m.route.hydrateFallbackElement||null)));let D=e.concat(s.slice(0,v+1)),A=()=>{let F;return w?F=C:T?F=R:m.route.Component?F=W.createElement(m.route.Component,null):m.route.element?F=m.route.element:F=f,W.createElement(gO,{match:m,routeContext:{outlet:f,matches:D,isDataRoute:t!=null},children:F})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?W.createElement(mO,{location:t.location,revalidation:t.revalidation,component:C,error:w,children:A(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):A()},null)}function Tg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vO(n){let e=W.useContext(Do);return Qe(e,Tg(n)),e}function _O(n){let e=W.useContext(Cu);return Qe(e,Tg(n)),e}function wO(n){let e=W.useContext(Ur);return Qe(e,Tg(n)),e}function Sg(n){let e=wO(n),t=e.matches[e.matches.length-1];return Qe(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function EO(){return Sg("useRouteId")}function TO(){var r;let n=W.useContext(Eg),e=_O("useRouteError"),t=Sg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function SO(){let{router:n}=vO("useNavigate"),e=Sg("useNavigate"),t=W.useRef(!1);return TT(()=>{t.current=!0}),W.useCallback(async(s,a={})=>{nr(t.current,ET),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var J_={};function IO(n,e,t){J_[n]||(J_[n]=!0,nr(!1,t))}var Y_={};function X_(n,e){!n&&!Y_[e]&&(Y_[e]=!0,console.warn(e))}function RO(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:W.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:W.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:W.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}var CO=class{constructor(){this.status="pending",this.promise=new Promise((n,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",n(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function AO({router:n,flushSync:e}){let[t,r]=W.useState(n.state),[s,a]=W.useState(),[u,h]=W.useState({isTransitioning:!1}),[f,m]=W.useState(),[v,w]=W.useState(),[T,C]=W.useState(),R=W.useRef(new Map),D=W.useCallback((G,{deletedFetchers:ne,flushSync:L,viewTransitionOpts:re})=>{ne.forEach(S=>R.current.delete(S)),G.fetchers.forEach((S,P)=>{S.data!==void 0&&R.current.set(P,S.data)}),X_(L===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let b=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(X_(re==null||b,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!re||!b){e&&L?e(()=>r(G)):W.startTransition(()=>r(G));return}if(e&&L){e(()=>{v&&(f&&f.resolve(),v.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:re.currentLocation,nextLocation:re.nextLocation})});let S=n.window.document.startViewTransition(()=>{e(()=>r(G))});S.finished.finally(()=>{e(()=>{m(void 0),w(void 0),a(void 0),h({isTransitioning:!1})})}),e(()=>w(S));return}v?(f&&f.resolve(),v.skipTransition(),C({state:G,currentLocation:re.currentLocation,nextLocation:re.nextLocation})):(a(G),h({isTransitioning:!0,flushSync:!1,currentLocation:re.currentLocation,nextLocation:re.nextLocation}))},[n.window,e,v,f]);W.useLayoutEffect(()=>n.subscribe(D),[n,D]),W.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new CO)},[u]),W.useEffect(()=>{if(f&&s&&n.window){let G=s,ne=f.promise,L=n.window.document.startViewTransition(async()=>{W.startTransition(()=>r(G)),await ne});L.finished.finally(()=>{m(void 0),w(void 0),a(void 0),h({isTransitioning:!1})}),w(L)}},[s,f,n.window]),W.useEffect(()=>{f&&s&&t.location.key===s.location.key&&f.resolve()},[f,v,t.location,s]),W.useEffect(()=>{!u.isTransitioning&&T&&(a(T.state),h({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),C(void 0))},[u.isTransitioning,T]);let A=W.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:G=>n.navigate(G),push:(G,ne,L)=>n.navigate(G,{state:ne,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(G,ne,L)=>n.navigate(G,{replace:!0,state:ne,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[n]),F=n.basename||"/",Q=W.useMemo(()=>({router:n,navigator:A,static:!1,basename:F}),[n,A,F]);return W.createElement(W.Fragment,null,W.createElement(Do.Provider,{value:Q},W.createElement(Cu.Provider,{value:t},W.createElement(wT.Provider,{value:R.current},W.createElement(wg.Provider,{value:u},W.createElement(NO,{basename:F,location:t.location,navigationType:t.historyAction,navigator:A},W.createElement(PO,{routes:n.routes,future:n.future,state:t})))))),null)}var PO=W.memo(kO);function kO({routes:n,future:e,state:t}){return dO(n,void 0,t,e)}function xO(n){return cO(n.context)}function NO({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){Qe(!Au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=W.useMemo(()=>({basename:u,navigator:s,static:a,future:{}}),[u,s,a]);typeof t=="string"&&(t=$s(t));let{pathname:f="/",search:m="",hash:v="",state:w=null,key:T="default"}=t,C=W.useMemo(()=>{let R=Vr(f,u);return R==null?null:{location:{pathname:R,search:m,hash:v,state:w,key:T},navigationType:r}},[u,f,m,v,w,T,r]);return nr(C!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:W.createElement(hi.Provider,{value:h},W.createElement(Id.Provider,{children:e,value:C}))}var ch="get",hh="application/x-www-form-urlencoded";function Rd(n){return n!=null&&typeof n.tagName=="string"}function bO(n){return Rd(n)&&n.tagName.toLowerCase()==="button"}function DO(n){return Rd(n)&&n.tagName.toLowerCase()==="form"}function OO(n){return Rd(n)&&n.tagName.toLowerCase()==="input"}function LO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function MO(n,e){return n.button===0&&(!e||e==="_self")&&!LO(n)}function ym(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function VO(n,e){let t=ym(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}var qc=null;function FO(){if(qc===null)try{new FormData(document.createElement("form"),0),qc=!1}catch{qc=!0}return qc}var UO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Np(n){return n!=null&&!UO.has(n)?(nr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hh}"`),null):n}function jO(n,e){let t,r,s,a,u;if(DO(n)){let h=n.getAttribute("action");r=h?Vr(h,e):null,t=n.getAttribute("method")||ch,s=Np(n.getAttribute("enctype"))||hh,a=new FormData(n)}else if(bO(n)||OO(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?Vr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||ch,s=Np(n.getAttribute("formenctype"))||Np(h.getAttribute("enctype"))||hh,a=new FormData(h,n),!FO()){let{name:m,type:v,value:w}=n;if(v==="image"){let T=m?`${m}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else m&&a.append(m,w)}}else{if(Rd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ch,r=null,s=hh,u=n}return a&&s==="text/plain"&&(u=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:u}}function Ig(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function BO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $O(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let u=await BO(a,t);return u.links?u.links():[]}return[]}));return KO(r.flat(1).filter(zO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Z_(n,e,t,r,s,a){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,h=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>u(f,m)||h(f,m)):a==="data"?e.filter((f,m)=>{var w;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function HO(n,e){return WO(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function WO(n){return[...new Set(n)]}function qO(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function KO(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(qO(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function GO(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function QO(){let n=W.useContext(Do);return Ig(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function JO(){let n=W.useContext(Cu);return Ig(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Rg=W.createContext(void 0);Rg.displayName="FrameworkContext";function ST(){let n=W.useContext(Rg);return Ig(n,"You must render this element inside a <HydratedRouter> element"),n}function YO(n,e){let t=W.useContext(Rg),[r,s]=W.useState(!1),[a,u]=W.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:w}=e,T=W.useRef(null);W.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let D=F=>{F.forEach(Q=>{u(Q.isIntersecting)})},A=new IntersectionObserver(D,{threshold:.5});return T.current&&A.observe(T.current),()=>{A.disconnect()}}},[n]),W.useEffect(()=>{if(r){let D=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(D)}}},[r]);let C=()=>{s(!0)},R=()=>{s(!1),u(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:Vl(h,C),onBlur:Vl(f,R),onMouseEnter:Vl(m,C),onMouseLeave:Vl(v,R),onTouchStart:Vl(w,C)}]:[!1,T,{}]}function Vl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function XO({page:n,...e}){let{router:t}=QO(),r=W.useMemo(()=>As(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?W.createElement(eL,{page:n,matches:r,...e}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function ZO(n){let{manifest:e,routeModules:t}=ST(),[r,s]=W.useState([]);return W.useEffect(()=>{let a=!1;return $O(n,e,t).then(u=>{a||s(u)}),()=>{a=!0}},[n,e,t]),r}function eL({page:n,matches:e,...t}){let r=Hs(),{manifest:s,routeModules:a}=ST(),{loaderData:u,matches:h}=JO(),f=W.useMemo(()=>Z_(n,e,h,s,r,"data"),[n,e,h,s,r]),m=W.useMemo(()=>Z_(n,e,h,s,r,"assets"),[n,e,h,s,r]),v=W.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,R=!1;if(e.forEach(A=>{var Q;let F=s.routes[A.route.id];!F||!F.hasLoader||(!f.some(G=>G.route.id===A.route.id)&&A.route.id in u&&((Q=a[A.route.id])!=null&&Q.shouldRevalidate)||F.hasClientLoader?R=!0:C.add(A.route.id))}),C.size===0)return[];let D=GO(n);return R&&C.size>0&&D.searchParams.set("_routes",e.filter(A=>C.has(A.route.id)).map(A=>A.route.id).join(",")),[D.pathname+D.search]},[u,r,s,f,e,n,a]),w=W.useMemo(()=>HO(m,s),[m,s]),T=ZO(m);return W.createElement(W.Fragment,null,v.map(C=>W.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>W.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),T.map(({key:C,link:R})=>W.createElement("link",{key:C,...R})))}function tL(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IT&&(window.__reactRouterVersion="7.0.1")}catch{}function nL(n,e){return BD({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:hD({window:e==null?void 0:e.window}),hydrationData:rL(),routes:n,mapRouteProperties:RO,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function rL(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:iL(n.errors)}),n}function iL(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new zh(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let u=new a(s.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}var RT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cd=W.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:u,state:h,target:f,to:m,preventScrollReset:v,viewTransition:w,...T},C){let{basename:R}=W.useContext(hi),D=typeof m=="string"&&RT.test(m),A,F=!1;if(typeof m=="string"&&D&&(A=m,IT))try{let P=new URL(window.location.href),O=m.startsWith("//")?new URL(P.protocol+m):new URL(m),U=Vr(O.pathname,R);O.origin===P.origin&&U!=null?m=U+O.search+O.hash:F=!0}catch{nr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=aO(m,{relative:s}),[G,ne,L]=YO(r,T),re=aL(m,{replace:u,state:h,target:f,preventScrollReset:v,relative:s,viewTransition:w});function b(P){e&&e(P),P.defaultPrevented||re(P)}let S=W.createElement("a",{...T,...L,href:A||Q,onClick:F||a?e:b,ref:tL(C,ne),target:f,"data-discover":!D&&t==="render"?"true":void 0});return G&&!D?W.createElement(W.Fragment,null,S,W.createElement(XO,{page:Q})):S});Cd.displayName="Link";var CT=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:u,viewTransition:h,children:f,...m},v){let w=Pu(u,{relative:m.relative}),T=Hs(),C=W.useContext(Cu),{navigator:R,basename:D}=W.useContext(hi),A=C!=null&&fL(w)&&h===!0,F=R.encodeLocation?R.encodeLocation(w).pathname:w.pathname,Q=T.pathname,G=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),G=G?G.toLowerCase():null,F=F.toLowerCase()),G&&D&&(G=Vr(G,D)||G);const ne=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let L=Q===F||!s&&Q.startsWith(F)&&Q.charAt(ne)==="/",re=G!=null&&(G===F||!s&&G.startsWith(F)&&G.charAt(F.length)==="/"),b={isActive:L,isPending:re,isTransitioning:A},S=L?e:void 0,P;typeof r=="function"?P=r(b):P=[r,L?"active":null,re?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(b):a;return W.createElement(Cd,{...m,"aria-current":S,className:P,ref:v,style:O,to:u,viewTransition:h},typeof f=="function"?f(b):f)});CT.displayName="NavLink";var sL=W.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:u=ch,action:h,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:w,...T},C)=>{let R=hL(),D=dL(h,{relative:m}),A=u.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&RT.test(h),Q=G=>{if(f&&f(G),G.defaultPrevented)return;G.preventDefault();let ne=G.nativeEvent.submitter,L=(ne==null?void 0:ne.getAttribute("formmethod"))||u;R(ne||G.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:s,state:a,relative:m,preventScrollReset:v,viewTransition:w})};return W.createElement("form",{ref:C,method:A,action:D,onSubmit:r?f:Q,...T,"data-discover":!F&&n==="render"?"true":void 0})});sL.displayName="Form";function oL(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AT(n){let e=W.useContext(Do);return Qe(e,oL(n)),e}function aL(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:u}={}){let h=Oo(),f=Hs(),m=Pu(n,{relative:a});return W.useCallback(v=>{if(MO(v,e)){v.preventDefault();let w=t!==void 0?t:Us(f)===Us(m);h(n,{replace:w,state:r,preventScrollReset:s,relative:a,viewTransition:u})}},[f,h,m,t,r,e,n,s,a,u])}function lL(n){nr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=W.useRef(ym(n)),t=W.useRef(!1),r=Hs(),s=W.useMemo(()=>VO(r.search,t.current?null:e.current),[r.search]),a=Oo(),u=W.useCallback((h,f)=>{const m=ym(typeof h=="function"?h(s):h);t.current=!0,a("?"+m,f)},[a,s]);return[s,u]}var uL=0,cL=()=>`__${String(++uL)}__`;function hL(){let{router:n}=AT("useSubmit"),{basename:e}=W.useContext(hi),t=EO();return W.useCallback(async(r,s={})=>{let{action:a,method:u,encType:h,formData:f,body:m}=jO(r,e);if(s.navigate===!1){let v=s.fetcherKey||cL();await n.fetch(v,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function dL(n,{relative:e}={}){let{basename:t}=W.useContext(hi),r=W.useContext(Ur);Qe(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Pu(n||".",{relative:e})},u=Hs();if(n==null){a.search=u.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(w=>w).forEach(w=>h.append("index",w));let v=h.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ai([t,a.pathname])),Us(a)}function fL(n,e={}){let t=W.useContext(wg);Qe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=AT("useViewTransitionState"),s=Pu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Vr(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Vr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Bh(s.pathname,u)!=null||Bh(s.pathname,a)!=null}new TextEncoder;var pL=ew();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mL(n){return W.createElement(AO,{flushSync:pL.flushSync,...n})}function dh({type:n="primary",size:e="medium",onClick:t,disabled:r=!1,children:s}){return N.jsx("button",{className:`button button--${n} button--${e}`,onClick:t,disabled:r,children:s})}function PT({isActive:n,onToggle:e,label:t,Icon:r}){return N.jsx("button",{className:`toggle-button ${n?"active":""}`,onClick:e,"aria-pressed":n,"aria-label":t,children:N.jsx(r,{className:"toggle-icon"})})}const kT=n=>W.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},W.createElement("path",{d:"M12.0513 2L10.6813 4.8C9.70235 6.80035 8.39031 8.61962 6.8013 10.18L6.6213 10.35C5.60076 11.3408 5.01766 12.6977 5.0013 14.12V14.3C4.97427 17.0851 6.63391 19.6101 9.2013 20.69L9.4613 20.8C11.1452 21.5152 13.0474 21.5152 14.7313 20.8H14.7913C17.3779 19.6762 19.0375 17.1099 19.0013 14.29V9.95C18.1393 11.9185 16.5739 13.4946 14.6113 14.37C14.6113 14.37 14.6113 14.37 14.5513 14.37C14.4913 14.37 13.7913 14.66 13.4913 14.37C13.2234 14.0989 13.1977 13.6712 13.4313 13.37L13.5013 13.32H13.5513C15.8471 11.575 16.3823 8.34172 14.7713 5.95C13.4713 3.97 12.0513 2 12.0513 2Z",fill:"currentColor"}));function xT({isFavorite:n,onToggleFavorite:e}){return N.jsx(PT,{isActive:n,onToggle:e,label:"Toggle Favorite",Icon:kT})}const NT=n=>W.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},W.createElement("path",{d:"M16.77 20.7843L12.48 17.4943C12.0722 17.1843 11.5078 17.1843 11.1 17.4943L6.77 20.7843C6.45424 21.0381 6.02377 21.0959 5.65228 20.9343C5.28078 20.7727 5.02957 20.4184 5 20.0143V5.95431C5.03878 5.12998 5.40465 4.35513 6.01656 3.80141C6.62847 3.24769 7.4359 2.96081 8.26 3.00431H15.26C16.0891 2.96643 16.8987 3.26256 17.5077 3.82643C18.1166 4.39029 18.4741 5.17479 18.5 6.00431V20.0143C18.4611 20.4038 18.2163 20.7426 17.8586 20.9017C17.501 21.0609 17.0855 21.0161 16.77 20.7843Z",fill:"currentColor"}));function bT({isInWatchlist:n,onToggleWatchlist:e}){return N.jsx(PT,{isActive:n,onToggle:e,label:"Toggle Watchlist",Icon:NT})}function gL({id:n,title:e,poster:t,genres:r,isFavorite:s,isInWatchlist:a,onToggleFavorite:u,onToggleWatchlist:h}){return N.jsxs("div",{className:"card",children:[N.jsxs(Cd,{to:`/movies/${n}`,className:"card-link",children:[N.jsx("img",{src:t,alt:e,className:"card-image"}),N.jsxs("div",{className:"card-content",children:[N.jsx("h3",{className:"card-title",children:e}),N.jsx("p",{className:"card-genres",children:r&&r.length>0?r.join(" • "):"No genres available"})]})]}),N.jsxs("div",{className:"card-actions",children:[N.jsx(xT,{isFavorite:s,onToggleFavorite:u}),N.jsx(bT,{isInWatchlist:a,onToggleWatchlist:h})]})]})}const fh={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function To({movies:n=[],favorites:e=[],watchlist:t=[],onToggleFavorite:r,onToggleWatchlist:s}){const a=h=>t.some(f=>Number(f.id)===Number(h)),u=h=>e.some(f=>Number(f.id)===Number(h));return!n||n.length===0?N.jsx("p",{className:"movies-list-empty",children:"No movies available"}):N.jsx("div",{className:"movies-list",children:n.map(h=>{var f;return N.jsx(gL,{id:h.id,title:h.title,poster:`https://image.tmdb.org/t/p/w500${h.poster_path}`,genres:((f=h.genre_ids)==null?void 0:f.map(m=>fh[m]||"Unknown"))||[],isFavorite:u(h.id),isInWatchlist:a(h.id),onToggleFavorite:()=>r(h),onToggleWatchlist:()=>s(h)},h.id)})})}function Kt({children:n}){return N.jsx("div",{className:"page",children:n})}function yL(){const n=Oo(),e=Bi(),[t,r]=Ts.useState([]),[s,a]=Ts.useState([]),[u,h]=Ts.useState([]),[f,m]=Ts.useState(!1),[v,w]=Ts.useState(null),{favorites:T,watchlist:C}=an(F=>F.userCollections),R=an(F=>{var Q;return(Q=F.auth.user)==null?void 0:Q.uid});Ts.useEffect(()=>{(async()=>{try{m(!0);const Q=await Jc({endpoint:Ta.movies.popular,page:1}),G=await Jc({endpoint:Ta.movies.topRated,page:1}),ne=await Jc({endpoint:Ta.movies.upcoming,page:1});r(Q.results.slice(0,10)),a(G.results.slice(0,10)),h(ne.results.slice(0,10)),R&&(e(Aa(R)),e(Pa(R)))}catch(Q){w(Q.message)}finally{m(!1)}})()},[e,R]);const D=F=>{T.some(Q=>Q.id===F.id)?e(Za({uid:R,movieId:F.id})):e(Ya({uid:R,movie:F}))},A=F=>{C.some(Q=>Q.id===F.id)?e(el({uid:R,movieId:F.id})):e(Xa({uid:R,movie:F}))};return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"home-hero",children:[N.jsx("h1",{className:"home-title",children:"Welcome to MyMdb"}),N.jsx("p",{className:"home-subtitle",children:"Discover your favorite movies"}),N.jsx(dh,{type:"primary",size:"large",onClick:()=>n("/movies"),children:"Explore"})]}),N.jsx(Kt,{children:f?N.jsx("p",{children:"Loading..."}):v?N.jsxs("p",{children:["Error: ",v]}):N.jsxs("div",{className:"movies-sections",children:[N.jsxs("div",{className:"movies-section",children:[N.jsx("h2",{children:"Popular Movies"}),N.jsx(To,{movies:t,favorites:T,watchlist:C,onToggleFavorite:D,onToggleWatchlist:A})]}),N.jsxs("div",{className:"movies-section",children:[N.jsx("h2",{children:"Top Rated Movies"}),N.jsx(To,{movies:s,favorites:T,watchlist:C,onToggleFavorite:D,onToggleWatchlist:A})]}),N.jsxs("div",{className:"movies-section",children:[N.jsx("h2",{children:"Upcoming Movies"}),N.jsx(To,{movies:u,favorites:T,watchlist:C,onToggleFavorite:D,onToggleWatchlist:A})]})]})})]})}function DT({currentPage:n,totalPages:e,onPageChange:t}){const r=a=>{a>=1&&a<=e&&a!==n&&t(a)},s=()=>{const a=[];let h=Math.max(1,n-Math.floor(2.5)),f=Math.min(e,h+5-1);f-h+1<5&&(h=Math.max(1,f-5+1));for(let m=h;m<=f;m++)a.push(N.jsx("button",{className:`pagination__button ${m===n?"active":""}`,onClick:()=>r(m),children:m},m));return a};return N.jsxs("div",{className:"pagination",children:[N.jsx("button",{className:"pagination__button",onClick:()=>r(n-1),disabled:n===1,children:"Previous"}),s(),N.jsx("button",{className:"pagination__button",onClick:()=>r(n+1),disabled:n===e,children:"Next"})]})}function Cg(){return N.jsx("div",{className:"preloader",children:N.jsx("div",{className:"preloader__spinner"})})}function vL(){const n=Bi(),{list:e,loading:t,error:r,page:s,totalPages:a}=an(A=>A.movies),{favorites:u,watchlist:h}=an(A=>A.userCollections),{sortBy:f,genres:m,yearRange:v,ratingRange:w}=an(A=>A.filter.appliedFilters),T=an(A=>{var F;return(F=A.auth.user)==null?void 0:F.uid});W.useEffect(()=>{n(Gl({page:s,sortBy:f,filters:{genres:m,yearRange:v,ratingRange:w}})),T&&(n(Aa(T)),n(Pa(T)))},[n,s,f,m,v,w,T]);const C=A=>{n(Gl({page:A,sortBy:f,filters:{genres:m,yearRange:v,ratingRange:w}}))},R=A=>{u.some(F=>F.id===A.id)?n(Za({uid:T,movieId:A.id})):n(Ya({uid:T,movie:A}))},D=A=>{h.some(F=>F.id===A.id)?n(el({uid:T,movieId:A.id})):n(Xa({uid:T,movie:A}))};return t?N.jsx(Kt,{children:N.jsx(Cg,{})}):r?N.jsx(Kt,{children:N.jsxs("p",{children:["Error loading movies: ",r]})}):N.jsx(Kt,{children:N.jsxs("div",{className:"movies-page",children:[N.jsx(To,{movies:e,favorites:u,watchlist:h,onToggleFavorite:R,onToggleWatchlist:D}),N.jsx(DT,{currentPage:s,totalPages:a,onPageChange:C})]})})}function _L(){const n=Bi(),{favorites:e,watchlist:t,loading:r,error:s}=an(f=>f.userCollections),a=an(f=>{var m;return(m=f.auth.user)==null?void 0:m.uid});W.useEffect(()=>{a&&n(Aa(a))},[n,a]);const u=f=>{e.some(m=>m.id===f.id)?n(Za({uid:a,movieId:f.id})):n(Ya({uid:a,movie:f}))},h=f=>{t.some(m=>m.id===f.id)?n(el({uid:a,movieId:f.id})):n(Xa({uid:a,movie:f}))};return r?N.jsx(Kt,{children:N.jsx("p",{children:"Loading favorites..."})}):s?N.jsx(Kt,{children:N.jsxs("p",{children:["Error loading favorites: ",s]})}):!e||e.length===0?N.jsx(Kt,{children:N.jsx("p",{children:"No favorites found"})}):N.jsx(Kt,{children:N.jsx(To,{movies:e,favorites:e,watchlist:t,onToggleFavorite:u,onToggleWatchlist:h})})}function wL(){const n=Bi(),{watchlist:e,favorites:t,loading:r,error:s}=an(f=>f.userCollections),a=an(f=>{var m;return(m=f.auth.user)==null?void 0:m.uid});W.useEffect(()=>{a&&n(Pa(a))},[n,a]);const u=f=>{t.some(m=>m.id===f.id)?n(Za({uid:a,movieId:f.id})):n(Ya({uid:a,movie:f}))},h=f=>{e.some(m=>m.id===f.id)?n(el({uid:a,movieId:f.id})):n(Xa({uid:a,movie:f}))};return r?N.jsx(Kt,{children:N.jsx(Cg,{})}):s?N.jsx(Kt,{children:N.jsxs("p",{children:["Error loading watchlist: ",s]})}):!e||e.length===0?N.jsx(Kt,{children:N.jsx("p",{children:"No movies in your watchlist"})}):N.jsx(Kt,{children:N.jsx(To,{movies:e,favorites:t,watchlist:e,onToggleFavorite:u,onToggleWatchlist:h})})}function EL(){return N.jsx(Kt,{children:N.jsx("h1",{children:"Rated"})})}const OT=n=>W.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},W.createElement("path",{d:"M12 2L16 9H22L17 15L19 22L12 18L5 22L7 15L2 9H8L12 2Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function TL(){var P,O,U,B;const{id:n}=hO(),e=Bi(),{details:t,loading:r,error:s}=an(k=>k.movies),{favorites:a,watchlist:u}=an(k=>k.userCollections),h=an(k=>{var ct;return(ct=k.auth.user)==null?void 0:ct.uid});if(W.useEffect(()=>(n&&e(Yc(n)),()=>{e(jC())}),[e,n]),r)return N.jsx("div",{className:"loading",children:"Loading..."});if(s)return N.jsxs("div",{className:"error",children:["Error: ",s]});if(!t)return N.jsx("div",{className:"no-details",children:"No movie details available"});const{title:f,genres:m=[],poster_path:v,release_date:w,runtime:T,vote_average:C,overview:R,production_companies:D=[],credits:A={}}=t;w&&new Date(w).getFullYear();const F=w?new Date(w).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):"N/A",Q=a.some(k=>k.id===t.id),G=u.some(k=>k.id===t.id),ne=()=>{e(Q?Za({uid:h,movieId:t.id}):Ya({uid:h,movie:t}))},L=()=>{e(G?el({uid:h,movieId:t.id}):Xa({uid:h,movie:t}))},re=((O=(P=A.crew)==null?void 0:P.find(k=>k.job==="Director"))==null?void 0:O.name)||"N/A",b=((U=A.crew)==null?void 0:U.filter(k=>k.job==="Writer"||k.job==="Screenplay").map(k=>k.name))||[],S=((B=A.cast)==null?void 0:B.slice(0,5).map(k=>k.name))||[];return N.jsx("div",{className:"movie-page",children:N.jsxs("div",{className:"movie-header",children:[N.jsxs("div",{className:"poster",children:[N.jsx("img",{src:`https://image.tmdb.org/t/p/w500${v}`,alt:f}),N.jsxs("div",{className:"poster-actions",children:[N.jsx(xT,{isFavorite:Q,onToggleFavorite:ne}),N.jsx(bT,{isInWatchlist:G,onToggleWatchlist:L})]})]}),N.jsxs("div",{className:"info",children:[N.jsx("h1",{className:"title",children:f}),N.jsx("p",{className:"genres",children:m.map(k=>k.name).join(" • ")}),N.jsxs("div",{className:"details",children:[N.jsxs("span",{className:"rating",children:[N.jsx(OT,{className:"star-icon"})," ",C||"N/A"]}),N.jsx("span",{className:"runtime",children:T?`${T} min`:"N/A"}),N.jsxs("span",{className:"release",children:["Released: ",F]})]}),N.jsx("p",{className:"overview",children:R}),N.jsxs("div",{className:"meta-info",children:[N.jsxs("div",{children:[N.jsx("h3",{children:"Director"}),N.jsx("p",{children:re})]}),N.jsxs("div",{children:[N.jsx("h3",{children:"Writers"}),N.jsx("p",{children:b.length>0?b.join(", "):"N/A"})]}),N.jsxs("div",{children:[N.jsx("h3",{children:"Cast"}),N.jsx("p",{children:S.length>0?S.join(", "):"N/A"})]}),N.jsxs("div",{children:[N.jsx("h3",{children:"Production"}),N.jsx("p",{children:D.map(k=>k.name).join(", ")||"N/A"})]})]})]})]})})}function Fl({to:n,label:e,Icon:t}){return N.jsxs(CT,{to:n,className:"nav-item",children:[N.jsx(t,{className:"nav-item-icon"}),N.jsx("span",{children:e})]})}const SL=n=>W.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4537 3.8032L19.4558 7.49793C20.4198 8.1956 20.9934 9.31112 21 10.5011V17.1895C20.938 19.3342 19.1566 21.0268 17.0116 20.979H6.99789C4.8492 21.032 3.06195 19.338 3 17.1895V10.5011C3.00659 9.31112 3.58019 8.1956 4.54421 7.49793L9.54632 3.8032C11.0068 2.73227 12.9932 2.73227 14.4537 3.8032ZM7.73684 16.9716H16.2632C16.6556 16.9716 16.9737 16.6535 16.9737 16.2611C16.9737 15.8687 16.6556 15.5506 16.2632 15.5506H7.73684C7.34443 15.5506 7.02632 15.8687 7.02632 16.2611C7.02632 16.6535 7.34443 16.9716 7.73684 16.9716Z",fill:"currentColor"})),IL=n=>W.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},W.createElement("path",{d:"M7 4L20 12L7 20V4Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function RL(){return N.jsxs("div",{className:"navbar",children:[N.jsx(Fl,{to:"/",label:"Home",Icon:SL}),N.jsx(Fl,{to:"/movies",label:"Movies",Icon:IL}),N.jsx(Fl,{to:"/favorites",label:"Favorites",Icon:kT}),N.jsx(Fl,{to:"/watchlist",label:"Watchlist",Icon:NT}),N.jsx(Fl,{to:"/rated",label:"Rated",Icon:OT})]})}const CL="data:image/svg+xml,%3csvg%20width='158'%20height='40'%20viewBox='0%200%20158%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.51105%209.67813L6.01623%2012.8746C6.96536%2011.7795%208.26658%2010.8768%209.91989%2010.1665C11.6038%209.45616%2013.3031%209.101%2015.0176%209.101C20.2225%209.101%2022.8249%2013.0078%2022.8249%2020.8213C22.8249%2025.024%2022.1208%2027.9689%2020.7124%2029.6559C19.3346%2031.3134%2017.1608%2032.1421%2014.191%2032.1421C11.1293%2032.1421%208.60336%2031.4317%206.61326%2030.0111C6.76635%2031.5205%206.81227%2033.0892%206.75104%2034.717V40H0V9.67813H5.51105ZM6.75104%2016.3374V26.3707C9.13916%2026.9626%2010.8537%2027.2586%2011.8947%2027.2586C13.3949%2027.2586%2014.4206%2026.8442%2014.9717%2026.0155C15.5534%2025.1868%2015.8443%2023.4554%2015.8443%2020.8213C15.8443%2018.2464%2015.584%2016.515%2015.0635%2015.6271C14.5431%2014.7096%2013.6245%2014.2508%2012.308%2014.2508C10.8078%2014.2508%208.95546%2014.9464%206.75104%2016.3374Z'%20fill='%237B61FF'/%3e%3cpath%20d='M30.5907%200H33.6218C34.9383%200%2035.5966%200.63633%2035.5966%201.90899V4.30633C35.5966%205.57898%2034.9383%206.21531%2033.6218%206.21531H30.5907C29.2742%206.21531%2028.6159%205.57898%2028.6159%204.30633V1.90899C28.6159%200.63633%2029.2742%200%2030.5907%200ZM35.5047%2031.5649H28.7537V9.67813H35.5047V31.5649Z'%20fill='%237B61FF'/%3e%3cpath%20d='M52.5823%2022.3751H52.3067L46.9334%2031.5649H39.9528L46.9334%2020.333L40.4579%209.67813H47.3927L52.2149%2018.1132H52.6741L57.4963%209.67813H64.431L57.9555%2020.333L64.9362%2031.5649H57.9555L52.5823%2022.3751Z'%20fill='%237B61FF'/%3e%3cpath%20d='M83.671%2022.8191H75.4963C75.7106%2024.4173%2076.2004%2025.4976%2076.9659%2026.0599C77.7619%2026.5927%2079.0631%2026.859%2080.8695%2026.859C83.2883%2026.859%2086.105%2026.6963%2089.3198%2026.3707L89.9628%2030.455C87.6053%2031.5501%2084.3139%2032.0977%2080.0888%2032.0977C75.833%2032.0977%2072.802%2031.2098%2070.9956%2029.434C69.1892%2027.6582%2068.286%2024.7281%2068.286%2020.6437C68.286%2016.3522%2069.1586%2013.3481%2070.9037%2011.6315C72.6795%209.91491%2075.6493%209.0566%2079.8132%209.0566C83.5791%209.0566%2086.304%209.69293%2087.988%2010.9656C89.6719%2012.2087%2090.5292%2014.1176%2090.5598%2016.6926C90.5598%2018.7347%2090.0087%2020.2738%2088.9065%2021.3097C87.8349%2022.3159%2086.0897%2022.8191%2083.671%2022.8191ZM75.3585%2018.8679H81.788C82.6147%2018.8679%2083.1658%2018.6755%2083.4414%2018.2908C83.7475%2017.906%2083.9006%2017.3437%2083.9006%2016.6038C83.9006%2015.5679%2083.6251%2014.8576%2083.074%2014.4728C82.5228%2014.0585%2081.5125%2013.8513%2080.0429%2013.8513C78.2977%2013.8513%2077.1036%2014.1916%2076.4607%2014.8724C75.8177%2015.5235%2075.4503%2016.8553%2075.3585%2018.8679Z'%20fill='white'/%3e%3cpath%20d='M101.401%209.67813L101.86%2012.8746C104.738%2010.3293%20107.616%209.0566%20110.494%209.0566C113.556%209.0566%20115.5%2010.2405%20116.327%2012.6082C118.99%2010.2405%20121.746%209.0566%20124.593%209.0566C126.644%209.0566%20128.206%209.57455%20129.278%2010.6104C130.349%2011.6463%20130.885%2013.1558%20130.885%2015.1387V31.5649H124.134V17.1809C124.134%2016.2338%20123.965%2015.5679%20123.629%2015.1831C123.292%2014.7984%20122.664%2014.606%20121.746%2014.606C121.011%2014.606%20120.307%2014.7392%20119.633%2015.0055C118.96%2015.2719%20117.98%2015.7899%20116.694%2016.5594V31.5649H110.173V17.1809C110.173%2016.2338%20109.974%2015.5679%20109.576%2015.1831C109.208%2014.7984%20108.596%2014.606%20107.738%2014.606C106.544%2014.606%20104.876%2015.2423%20102.733%2016.515V31.5649H95.9816V9.67813H101.401Z'%20fill='white'/%3e%3cpath%20d='M137.931%2014.5616L137.288%2010.1221C141.36%209.41177%20145.294%209.0566%20149.09%209.0566C152.152%209.0566%20154.403%209.66334%20155.842%2010.8768C157.281%2012.0607%20158%2014.1324%20158%2017.0921V31.5649H152.627L151.938%2028.2353C149.672%2030.8102%20146.886%2032.0977%20143.579%2032.0977C141.406%2032.0977%20139.63%2031.5501%20138.252%2030.455C136.874%2029.3304%20136.185%2027.7765%20136.185%2025.7936V23.5738C136.185%2021.8276%20136.798%2020.4661%20138.022%2019.4895C139.247%2018.5128%20140.946%2018.0244%20143.12%2018.0244H151.203V17.0477C151.172%2015.923%20150.897%2015.1683%20150.376%2014.7836C149.887%2014.3988%20148.922%2014.2064%20147.483%2014.2064C144.972%2014.2064%20141.788%2014.3248%20137.931%2014.5616ZM142.891%2024.0622V24.9057C142.891%2026.4151%20143.778%2027.1698%20145.554%2027.1698C147.391%2027.1698%20149.274%2026.4595%20151.203%2025.0388V21.9756H145.095C143.625%2022.0052%20142.891%2022.7007%20142.891%2024.0622Z'%20fill='white'/%3e%3c/svg%3e";function AL(){return N.jsxs("div",{className:"sidebar",children:[N.jsx("div",{className:"sidebar-logo",children:N.jsx(Cd,{to:"/",children:N.jsx("img",{src:CL,alt:"Pixema Logo"})})}),N.jsx("div",{className:"sidebar-links",children:N.jsx(RL,{})}),N.jsx("div",{className:"sidebar-footer",children:"© All Rights Reserved"})]})}function PL({isOpen:n,onClose:e,children:t}){return n?N.jsxs("div",{className:"modal",children:[N.jsx("div",{className:"modal__overlay",onClick:()=>e&&e()}),N.jsxs("div",{className:"modal__content",children:[N.jsx("button",{className:"modal__close",onClick:r=>{r.stopPropagation(),e&&e()},children:"×"}),t]})]}):null}function ph({label:n,placeholder:e="",value:t="",onChange:r,type:s="text",disabled:a=!1,error:u="",...h}){return N.jsxs("div",{className:`input ${u?"input--error":""} ${a?"input--disabled":""}`,children:[n&&N.jsx("label",{className:"input__label",children:n}),N.jsx("input",{className:"input__field",type:s,placeholder:e,value:t,onChange:f=>r==null?void 0:r(f.target.value),disabled:a,...h}),u&&N.jsx("span",{className:"input__error-text",children:u})]})}function kL({onClose:n}){const[e,t]=W.useState(!1),[r,s]=W.useState(""),[a,u]=W.useState(""),[h,f]=W.useState(""),[m,v]=W.useState(""),[w,T]=W.useState(!1),C=async()=>{T(!0),v("");try{if(e){const R=await IE(Fn,r,a);await CE(R.user,{displayName:h}),await sT(du(Ua,"users",R.user.uid),{name:h,email:r,createdAt:new Date})}else{const R=await RE(Fn,r,a)}n()}catch(R){v(R.message)}finally{T(!1)}};return N.jsxs("div",{className:"auth-form",children:[N.jsxs("div",{className:"auth-form__tabs",children:[N.jsx(dh,{type:e?"secondary":"primary",onClick:()=>t(!1),className:`auth-form__tab ${e?"":"active"}`,children:"Log In"}),N.jsx(dh,{type:e?"primary":"secondary",onClick:()=>t(!0),className:`auth-form__tab ${e?"active":""}`,children:"Sign Up"})]}),e&&N.jsx(ph,{type:"text",placeholder:"Enter your name",value:h,onChange:R=>f(R)}),N.jsx(ph,{type:"email",placeholder:"Enter your email",value:r,onChange:R=>s(R)}),N.jsx(ph,{type:"password",placeholder:"Enter your password",value:a,onChange:R=>u(R)}),m&&N.jsx("p",{className:"error",children:m}),N.jsx(dh,{type:"primary",onClick:C,disabled:w,className:"auth-form__submit",children:w?"Loading...":e?"Sign Up":"Log In"})]})}function xL({isOpen:n,onClose:e}){return N.jsx(PL,{isOpen:n,onClose:e,children:N.jsx(kL,{onClose:e})})}const NL="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20%2021V19C20%2017.9391%2019.5786%2016.9217%2018.8284%2016.1716C18.0783%2015.4214%2017.0609%2015%2016%2015H8C6.93913%2015%205.92172%2015.4214%205.17157%2016.1716C4.42143%2016.9217%204%2017.9391%204%2019V21'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12%2011C14.2091%2011%2016%209.20914%2016%207C16%204.79086%2014.2091%203%2012%203C9.79086%203%208%204.79086%208%207C8%209.20914%209.79086%2011%2012%2011Z'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function bL(){const[n,e]=W.useState(!1),[t,r]=W.useState(""),s=Oo(),a=()=>{t?s("/profile"):e(!0)},u=()=>t.charAt(0).toUpperCase();return W.useEffect(()=>{const h=Fn.onAuthStateChanged(f=>{r(f?f.displayName||f.email:"")});return()=>h()},[]),N.jsxs("div",{className:"user-badge",onClick:a,children:[N.jsx("div",{className:"user-badge__badge",children:t?N.jsx("span",{className:"user-badge__initial",children:u()}):N.jsx("img",{src:NL,alt:"User Icon",className:"user-badge__icon"})}),N.jsx("span",{className:"user-badge__text",children:t||"Sign In"}),N.jsx(xL,{isOpen:n,onClose:()=>e(!1)})]})}function LT({icon:n,ariaLabel:e="",onClick:t,size:r="medium",disabled:s=!1}){return N.jsx("button",{className:`icon-button icon-button--${r}`,onClick:t,"aria-label":e,disabled:s,children:N.jsx("img",{src:n,alt:"",className:"icon-button__icon"})})}const DL="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='11'%20cy='11'%20r='8'%20stroke='black'%20stroke-width='2'/%3e%3cline%20x1='16'%20y1='16'%20x2='22'%20y2='22'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e";function OL({placeholder:n="Search..."}){const[e,t]=W.useState(""),r=Oo(),s=u=>{t(u)},a=u=>{u.preventDefault(),e.trim()&&(r(`/search?query=${encodeURIComponent(e)}&page=1`),t(""))};return N.jsxs("form",{className:"search",onSubmit:a,children:[N.jsx(ph,{placeholder:n,value:e,onChange:s}),N.jsx(LT,{icon:DL,ariaLabel:"Search",onClick:a})]})}const LL="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%206C4%205.44772%204.44772%205%205%205H19C19.5523%205%2020%205.44772%2020%206C20%206.55228%2019.5523%207%2019%207H5C4.44772%207%204%206.55228%204%206ZM9%2012C9%2011.4477%209.44772%2011%2010%2011H19C19.5523%2011%2020%2011.4477%2020%2012C20%2012.5523%2019.5523%2013%2019%2013H10C9.44772%2013%209%2012.5523%209%2012ZM13%2018C13%2017.4477%2013.4477%2017%2014%2017H19C19.5523%2017%2020%2017.4477%2020%2018C20%2018.5523%2019.5523%2019%2019%2019H14C13.4477%2019%2013%2018.5523%2013%2018Z'%20fill='white'/%3e%3c/svg%3e";function ML({onClick:n}){const e=()=>{n&&n()};return N.jsx(LT,{icon:LL,ariaLabel:"Open filters",onClick:e})}function ja({label:n,options:e,value:t,onChange:r}){return N.jsxs("div",{className:"dropdown",children:[n&&N.jsx("label",{className:"dropdown__label",children:n}),N.jsx("select",{className:"dropdown__select",value:t,onChange:s=>r(s.target.value),children:e.map(s=>N.jsx("option",{value:s.value,children:s.label},s.value))})]})}function VL({onChange:n,value:e=[]}){const[t,r]=W.useState(Object.entries(fh));W.useEffect(()=>{if(e){const h=e.map(f=>f.id);r(Object.entries(fh).filter(([f])=>!h.includes(parseInt(f,10))))}},[e]);const s=h=>{if(!h)return;const f=fh[h],m=[...e,{id:h,name:f}],v=t.filter(([w])=>parseInt(w,10)!==h);n&&n(m),r(v)},a=h=>{const f=e.find(w=>w.id===h),m=e.filter(w=>w.id!==h),v=[...t,[f.id,f.name]];n&&n(m),r(v)},u=t.map(([h,f])=>({value:h,label:f}));return N.jsxs("div",{className:"genre-selection",children:[N.jsx("label",{className:"genre-selection__label",children:"Select a Genre"}),N.jsx(ja,{label:"Select a Genre",options:u,value:"",onChange:s,placeholder:"Select a genre"}),e.length>0&&N.jsx("div",{className:"genre-selection__list",children:e.map(h=>N.jsxs("div",{className:"genre-selection__item",children:[N.jsx("span",{children:h.name}),N.jsx("button",{className:"genre-selection__remove",onClick:()=>a(h.id),children:"×"})]},h.id))})]})}function FL({value:n,onChange:e}){const t=[{value:"",label:"Select Rating"},...Array.from({length:10},(a,u)=>{const h=u+1;return{value:h,label:h.toString()}})],r=a=>{const u=parseInt(a,10);(!a||u<=(n.to||10))&&e({...n,from:a?u:null})},s=a=>{const u=parseInt(a,10);(!a||u>=(n.from||1))&&e({...n,to:a?u:null})};return N.jsxs("div",{className:"filter-rating-range",children:[N.jsx("label",{className:"filter-label",children:"Rating Range"}),N.jsxs("div",{className:"filter-rating-range__inputs",children:[N.jsx(ja,{label:"From",options:t,value:n.from||"",onChange:r}),N.jsx("span",{className:"filter-range-separator",children:"to"}),N.jsx(ja,{label:"To",options:t,value:n.to||"",onChange:s})]})]})}function UL({value:n,onChange:e}){const t=[...Array.from({length:66},(u,h)=>{const f=1960+h;return{value:f,label:f.toString()}})].reverse(),r=[{value:"",label:"Select Year"},...t],s=u=>{const h=parseInt(u,10);(!u||h<=(n.to||2025))&&e({...n,from:u?h:null})},a=u=>{const h=parseInt(u,10);(!u||h>=(n.from||1960))&&e({...n,to:u?h:null})};return N.jsxs("div",{className:"filter-year-range",children:[N.jsx("label",{className:"filter-label",children:"Year Range"}),N.jsxs("div",{className:"filter-year-range__inputs",children:[N.jsx(ja,{label:"From",options:r,value:n.from||"",onChange:s}),N.jsx("span",{className:"filter-range-separator",children:"to"}),N.jsx(ja,{label:"To",options:r,value:n.to||"",onChange:a})]})]})}function jL(){const n=Bi(),e=Oo(),{appliedFilters:t,isOpen:r}=an(D=>D.filter),[s,a]=W.useState(t.sortBy),[u,h]=W.useState(t.genres),[f,m]=W.useState(t.ratingRange),[v,w]=W.useState(t.yearRange),T=[{value:"popularity.desc",label:"Popularity (High to Low)"},{value:"popularity.asc",label:"Popularity (Low to High)"},{value:"vote_average.desc",label:"Rating (High to Low)"},{value:"vote_average.asc",label:"Rating (Low to High)"},{value:"release_date.desc",label:"Release Date (Newest First)"},{value:"release_date.asc",label:"Release Date (Oldest First)"},{value:"original_title.asc",label:"Title (A-Z)"},{value:"original_title.desc",label:"Title (Z-A)"}];if(!r)return null;const C=()=>{n(rD({sortBy:s,genres:u,ratingRange:f,yearRange:v})),n(b_()),e("/movies")},R=()=>{h([]),m({from:null,to:null}),w({from:null,to:null}),n(iD())};return N.jsxs("div",{className:"filter-bar",children:[N.jsxs("div",{className:"filter-bar__header",children:[N.jsx("h2",{children:"Filters"}),N.jsx("button",{className:"filter-bar__close",onClick:()=>n(b_()),children:"×"})]}),N.jsxs("div",{className:"filter-bar__body",children:[N.jsx(ja,{label:"Sort By",options:T,value:s,onChange:D=>a(D)}),N.jsx(VL,{value:u,onChange:h}),N.jsx(FL,{value:f,onChange:m}),N.jsx(UL,{value:v,onChange:w})]}),N.jsxs("div",{className:"filter-bar__footer",children:[N.jsx("button",{className:"filter-bar__clear",onClick:R,children:"Clear Filter"}),N.jsx("button",{className:"filter-bar__apply",onClick:C,children:"Show Results"})]})]})}function BL(){const n=Bi(),e=an(s=>s.filter.isOpen),t=s=>{console.log("Search query:",s)},r=()=>{n(nD())};return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"user-controls",children:[N.jsx(bL,{}),N.jsxs("div",{className:"user-controls__actions",children:[N.jsx("div",{className:"user-controls__search",children:N.jsx(OL,{onSearch:t})}),N.jsx("div",{className:"user-controls__filter",children:N.jsx(ML,{onClick:r})})]})]}),N.jsx(jL,{isOpen:e,onClose:r})]})}function zL(){return N.jsxs("div",{className:"layout",children:[N.jsx(AL,{}),N.jsxs("div",{className:"main",children:[N.jsx(BL,{}),N.jsx(xO,{})]})]})}function $L(){return N.jsx(Kt,{children:N.jsx("div",{children:"Error: Page not found"})})}function HL(){const[n,e]=W.useState({name:"",email:""}),[t,r]=W.useState(!1),[s,a]=W.useState({name:"",email:""}),u=Oo();W.useEffect(()=>{(async()=>{if(!Fn.currentUser)return;const{displayName:w,email:T,uid:C}=Fn.currentUser,R={name:w||"",email:T||""};try{const D=du(Ua,"users",C),A=await Hb(D);if(A.exists()){const F=A.data();e({...R,...F}),a({...R,...F})}else e(R),a(R)}catch(D){console.error("Error fetching user data:",D)}})()},[]);const h=v=>{const{name:w,value:T}=v.target;a(C=>({...C,[w]:T}))},f=async()=>{if(!Fn.currentUser)return;const{uid:v}=Fn.currentUser;try{Fn.currentUser.displayName!==s.name&&await Fn.currentUser.updateProfile({displayName:s.name});const w=du(Ua,"users",v);await qb(w,{name:s.name,email:s.email}),e(s),r(!1),alert("Profile updated successfully!")}catch(w){console.error("Error updating profile:",w),alert("Failed to update profile.")}},m=async()=>{try{await Fn.signOut(),u("/")}catch(v){console.error("Logout failed:",v),alert("Failed to log out. Please try again.")}};return N.jsxs("div",{className:"profile-page",children:[N.jsx("h1",{children:"Profile"}),N.jsxs("div",{className:"profile-page__container",children:[N.jsxs("div",{className:"profile-page__field",children:[N.jsx("label",{children:"Name:"}),t?N.jsx("input",{type:"text",name:"name",value:s.name,onChange:h}):N.jsx("span",{children:n.name||"N/A"})]}),N.jsxs("div",{className:"profile-page__field",children:[N.jsx("label",{children:"Email:"}),t?N.jsx("input",{type:"email",name:"email",value:s.email,onChange:h,disabled:!0}):N.jsx("span",{children:n.email||"N/A"})]}),N.jsx("div",{className:"profile-page__actions",children:t?N.jsxs(N.Fragment,{children:[N.jsx("button",{onClick:f,className:"btn btn-primary",children:"Save"}),N.jsx("button",{onClick:()=>r(!1),className:"btn btn-secondary",children:"Cancel"})]}):N.jsx("button",{onClick:()=>r(!0),className:"btn btn-primary",children:"Edit Profile"})}),N.jsx("button",{onClick:m,className:"btn btn-danger",children:"Log Out"})]})]})}function WL(){const[n]=lL(),e=n.get("query")||"",t=parseInt(n.get("page"),10)||1,r=Bi(),{searchResults:s,loading:a,error:u,totalPages:h}=an(m=>m.movies);W.useEffect(()=>(e&&r(Ql({query:e,page:t})),()=>{r(BC())}),[r,e,t]);const f=m=>{const v=new URLSearchParams(n);v.set("page",m),window.history.replaceState(null,"",`?${v.toString()}`),r(Ql({query:e,page:m}))};return a?N.jsx(Kt,{children:N.jsx("p",{children:"Loading search results..."})}):u?N.jsx(Kt,{children:N.jsxs("p",{children:["Error loading search results: ",u]})}):!s||s.length===0?N.jsx(Kt,{children:N.jsxs("p",{children:['No results found for "',e,'"']})}):N.jsx(Kt,{children:N.jsxs("div",{className:"search-results-page",children:[N.jsxs("h2",{children:['Search Results for "',e,'"']}),N.jsx(To,{movies:s}),N.jsx(DT,{currentPage:t,totalPages:h,onPageChange:f})]})})}const qL=nL([{element:N.jsx(zL,{}),children:[{path:"/",element:N.jsx(yL,{})},{path:"/movies",element:N.jsx(vL,{})},{path:"/movies/:id",element:N.jsx(TL,{})},{path:"/favorites",element:N.jsx(_L,{})},{path:"/watchlist",element:N.jsx(wL,{})},{path:"/rated",element:N.jsx(EL,{})},{path:"/profile",element:N.jsx(HL,{})},{path:"/search",element:N.jsx(WL,{})},{path:"*",element:N.jsx($L,{})}]}]);function KL(){const n=Bi(),{loading:e}=an(t=>t.auth);return W.useEffect(()=>{n(lh())},[n]),e?N.jsx(Cg,{}):N.jsx(mL,{router:qL})}function GL(){return N.jsx(dI,{store:uD,children:N.jsx(KL,{})})}const QL=document.querySelector("#root"),JL=JS.createRoot(QL);JL.render(N.jsx(GL,{}));
